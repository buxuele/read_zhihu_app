{"data":[{"id":"72_1750980776.761","type":"feed","offset":72,"verb":"TOPIC_ACKNOWLEDGED_ARTICLE","created_time":1750980776,"updated_time":1750980776,"target":{"id":"1921598786490333168","type":"article","url":"https://api.zhihu.com/articles/1921598786490333168","author":{"id":"15d816ffe2edd77d4d4fdb70e95d8d96","url":"https://api.zhihu.com/people/15d816ffe2edd77d4d4fdb70e95d8d96","user_type":"people","url_token":"coolops","name":"乔克叔叔","headline":"只要脸皮够厚，整个世界都将被你踩在脚下。","avatar_url":"https://picx.zhimg.com/50/v2-401c72a54f7a6e67bc892f17a6a27202_l.jpg?source=b6762063","is_org":false,"gender":1,"badge":[{"type":"identity_people","description":"互联网行业 从业人员"}],"followers_count":497,"is_following":false,"is_followed":false},"title":"基于Promethes开发一个自动化巡检平台","image_url":"https://pic1.zhimg.com/v2-0d8094a48c965e9e28c819213050a1a1.jpg?source=7e7ef6e2\u0026needBackground=1","comment_permission":"all","created":1750925115,"updated":1750925115,"voteup_count":0,"voting":0,"comment_count":0,"linkbox":{"category":"","pic":"","title":"","url":""},"excerpt":"✍ 道路千万条，安全第一条。操作不规范，运维两行泪。前言目前，大部分公司都采用 Prometheus + Grafana这一套来做指标监控，所以在Prometheus中也有大量的指标数据。为了满足日常工作中的巡检，可以基于Prometheus实现自动巡检，减轻部分运维压力。思路为了灵活管理巡检任务，将整个巡检功能进行了拆分管理，分为： - 数据源管理：可以管理多个Prometheus数据源，后期也可以增加其他数据源，比如ES等。 - 巡检项管理：目前的巡…","excerpt_new":"✍ 道路千万条，安全第一条。操作不规范，运维两行泪。前言目前，大部分公司都采用 Prometheus + Grafana这一套来做指标监控，所以在Prometheus中也有大量的指标数据。为了满足日常工作中的巡检，可以基于Prometheus实现自动巡检，减轻部分运维压力。思路为了灵活管理巡检任务，将整个巡检功能进行了拆分管理，分为： - 数据源管理：可以管理多个Prometheus数据源，后期也可以增加其他数据源，比如ES等。 - 巡检项管理：目前的巡…","preview_type":"default","preview_text":"","content":"\u003cblockquote data-pid=\"0fcb2-nU\"\u003e ✍ 道路千万条，安全第一条。操作不规范，运维两行泪。\u003c/blockquote\u003e\u003ch3\u003e前言\u003c/h3\u003e\u003cp data-pid=\"H8MmUmEr\"\u003e目前，大部分公司都采用\u003ccode\u003ePrometheus + Grafana\u003c/code\u003e这一套来做指标监控，所以在\u003ccode\u003ePrometheus\u003c/code\u003e中也有大量的指标数据。为了满足日常工作中的巡检，可以基于\u003ccode\u003ePrometheus\u003c/code\u003e实现自动巡检，减轻部分运维压力。\u003c/p\u003e\u003ch3\u003e思路\u003c/h3\u003e\u003cp data-pid=\"scW5SUBG\"\u003e为了灵活管理巡检任务，将整个巡检功能进行了拆分管理，分为： - \u003ccode\u003e数据源管理\u003c/code\u003e：可以管理多个\u003ccode\u003ePrometheus\u003c/code\u003e数据源，后期也可以增加其他数据源，比如\u003ccode\u003eES\u003c/code\u003e等。 - \u003ccode\u003e巡检项管理\u003c/code\u003e：目前的\u003ccode\u003e巡检项\u003c/code\u003e就是各种\u003ccode\u003ePrometheus规则\u003c/code\u003e，之所以要单独进行管理，是为了在多数据源、多集群等情况下进行复用。 - \u003ccode\u003e标签管理\u003c/code\u003e：目前是\u003ccode\u003ePrometheus\u003c/code\u003e的\u003ccode\u003elabel\u003c/code\u003e，也是为了方便复用\u003ccode\u003e巡检项\u003c/code\u003e，\u003ccode\u003e巡检项\u003c/code\u003e和\u003ccode\u003e标签\u003c/code\u003e可以灵活进行组合。 - \u003ccode\u003e任务编排\u003c/code\u003e：编排各种巡检任务。 - \u003ccode\u003e执行作业\u003c/code\u003e：配置定时的巡检作业，它由多个编排的任务组成。 - \u003ccode\u003e巡检报告\u003c/code\u003e：便于查看、导出巡检结果。 - \u003ccode\u003e巡检通知\u003c/code\u003e：巡检结果可以通知到\u003ccode\u003e企业微信\u003c/code\u003e群，便于业务方快速知道目前整个系统有没有问题。\u003c/p\u003e\u003cp class=\"ztext-empty-paragraph\"\u003e\u003cbr/\u003e\u003c/p\u003e\u003cfigure data-size=\"normal\"\u003e\u003cimg src=\"https://picx.zhimg.com/v2-5161a91deb55648d26aad552f0ca72a9_1440w.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"486\" data-rawheight=\"1020\" data-original-token=\"v2-2295a6d153ac8eab7c26a56b6258dad6\" class=\"origin_image zh-lightbox-thumb\" width=\"486\" data-original=\"https://picx.zhimg.com/v2-5161a91deb55648d26aad552f0ca72a9_r.jpg\"/\u003e\u003c/figure\u003e\u003cp class=\"ztext-empty-paragraph\"\u003e\u003cbr/\u003e\u003c/p\u003e\u003ch3\u003e效果\u003c/h3\u003e\u003ch3\u003e数据源管理\u003c/h3\u003e\u003cp data-pid=\"BQFu3A7Z\"\u003e（1）添加数据源\u003c/p\u003e\u003cp class=\"ztext-empty-paragraph\"\u003e\u003cbr/\u003e\u003c/p\u003e\u003cfigure data-size=\"normal\"\u003e\u003cimg src=\"https://pic2.zhimg.com/v2-ff565bdb4bf6d46977d7881589137aa1_1440w.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"947\" data-rawheight=\"303\" data-original-token=\"v2-5dcbba80d67acff3efa0a3b969da5062\" class=\"origin_image zh-lightbox-thumb\" width=\"947\" data-original=\"https://pic2.zhimg.com/v2-ff565bdb4bf6d46977d7881589137aa1_r.jpg\"/\u003e\u003c/figure\u003e\u003cp class=\"ztext-empty-paragraph\"\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp data-pid=\"5z8dhKW_\"\u003e（2）数据源列表\u003c/p\u003e\u003cp class=\"ztext-empty-paragraph\"\u003e\u003cbr/\u003e\u003c/p\u003e\u003cfigure data-size=\"normal\"\u003e\u003cimg src=\"https://pic2.zhimg.com/v2-975935f9ef55e7b1d5f7065e7233c9f1_1440w.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1586\" data-rawheight=\"330\" data-original-token=\"v2-a10fe858e8420b883cfb94ba6d71b0fc\" class=\"origin_image zh-lightbox-thumb\" width=\"1586\" data-original=\"https://pic2.zhimg.com/v2-975935f9ef55e7b1d5f7065e7233c9f1_r.jpg\"/\u003e\u003c/figure\u003e\u003cp class=\"ztext-empty-paragraph\"\u003e\u003cbr/\u003e\u003c/p\u003e\u003ch3\u003e巡检项管理\u003c/h3\u003e\u003cp data-pid=\"ISKzS0ds\"\u003e（1）添加巡检项\u003c/p\u003e\u003cp class=\"ztext-empty-paragraph\"\u003e\u003cbr/\u003e\u003c/p\u003e\u003cfigure data-size=\"normal\"\u003e\u003cimg src=\"https://picx.zhimg.com/v2-1ea1865b5e9361d629d14795cdd32747_1440w.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"947\" data-rawheight=\"612\" data-original-token=\"v2-2791158a2f7cbf529708d4e724db9713\" class=\"origin_image zh-lightbox-thumb\" width=\"947\" data-original=\"https://picx.zhimg.com/v2-1ea1865b5e9361d629d14795cdd32747_r.jpg\"/\u003e\u003c/figure\u003e\u003cp class=\"ztext-empty-paragraph\"\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp data-pid=\"k-cPE1sp\"\u003e（2）巡检项列表\u003c/p\u003e\u003cp class=\"ztext-empty-paragraph\"\u003e\u003cbr/\u003e\u003c/p\u003e\u003cfigure data-size=\"normal\"\u003e\u003cimg src=\"https://pic2.zhimg.com/v2-58ec9caed8f1ed6167874c12faeb2ced_1440w.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1634\" data-rawheight=\"599\" data-original-token=\"v2-c0f9bdaac08b25e1aca7d591c6bb1924\" class=\"origin_image zh-lightbox-thumb\" width=\"1634\" data-original=\"https://pic2.zhimg.com/v2-58ec9caed8f1ed6167874c12faeb2ced_r.jpg\"/\u003e\u003c/figure\u003e\u003cp class=\"ztext-empty-paragraph\"\u003e\u003cbr/\u003e\u003c/p\u003e\u003ch3\u003e标签管理\u003c/h3\u003e\u003cp data-pid=\"cXq9SSzb\"\u003e（1）添加标签\u003c/p\u003e\u003cp class=\"ztext-empty-paragraph\"\u003e\u003cbr/\u003e\u003c/p\u003e\u003cfigure data-size=\"normal\"\u003e\u003cimg src=\"https://pic4.zhimg.com/v2-8a1c96fac1a9f4a0a7629506de2e1efd_1440w.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"940\" data-rawheight=\"234\" data-original-token=\"v2-39431f7a98d1b0a1512936c411b76d0a\" class=\"origin_image zh-lightbox-thumb\" width=\"940\" data-original=\"https://pic4.zhimg.com/v2-8a1c96fac1a9f4a0a7629506de2e1efd_r.jpg\"/\u003e\u003c/figure\u003e\u003cp class=\"ztext-empty-paragraph\"\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp data-pid=\"yo8FQZl3\"\u003e（2）标签列表\u003c/p\u003e\u003cp class=\"ztext-empty-paragraph\"\u003e\u003cbr/\u003e\u003c/p\u003e\u003cfigure data-size=\"normal\"\u003e\u003cimg src=\"https://picx.zhimg.com/v2-e43b0b19d8f9b2f0a7bf3fe9820ea54b_1440w.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1231\" data-rawheight=\"150\" data-original-token=\"v2-e43b0b19d8f9b2f0a7bf3fe9820ea54b\" class=\"origin_image zh-lightbox-thumb\" width=\"1231\" data-original=\"https://picx.zhimg.com/v2-e43b0b19d8f9b2f0a7bf3fe9820ea54b_r.jpg\"/\u003e\u003c/figure\u003e\u003cp class=\"ztext-empty-paragraph\"\u003e\u003cbr/\u003e\u003c/p\u003e\u003ch3\u003e任务编排\u003c/h3\u003e\u003cp data-pid=\"zZ_HkoJg\"\u003e（1）创建任务编排\u003c/p\u003e\u003cp class=\"ztext-empty-paragraph\"\u003e\u003cbr/\u003e\u003c/p\u003e\u003cfigure data-size=\"normal\"\u003e\u003cimg src=\"https://pic1.zhimg.com/v2-3c989e65f8a151e11c392b9154f192cc_1440w.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"956\" data-rawheight=\"343\" data-original-token=\"v2-186a13ec769911a400844eddcadafc88\" class=\"origin_image zh-lightbox-thumb\" width=\"956\" data-original=\"https://pic1.zhimg.com/v2-3c989e65f8a151e11c392b9154f192cc_r.jpg\"/\u003e\u003c/figure\u003e\u003cp class=\"ztext-empty-paragraph\"\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp data-pid=\"_DMcxkl-\"\u003e（2）任务列表\u003c/p\u003e\u003cp class=\"ztext-empty-paragraph\"\u003e\u003cbr/\u003e\u003c/p\u003e\u003cfigure data-size=\"normal\"\u003e\u003cimg src=\"https://pic1.zhimg.com/v2-9a956a2014a3ef67e3a7e7f9ed5b9958_1440w.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1377\" data-rawheight=\"219\" data-original-token=\"v2-9a956a2014a3ef67e3a7e7f9ed5b9958\" class=\"origin_image zh-lightbox-thumb\" width=\"1377\" data-original=\"https://pic1.zhimg.com/v2-9a956a2014a3ef67e3a7e7f9ed5b9958_r.jpg\"/\u003e\u003c/figure\u003e\u003cp class=\"ztext-empty-paragraph\"\u003e\u003cbr/\u003e\u003c/p\u003e\u003ch3\u003e执行作业\u003c/h3\u003e\u003cp data-pid=\"4-Fg1_PU\"\u003e（1）创建执行作业\u003c/p\u003e\u003cp class=\"ztext-empty-paragraph\"\u003e\u003cbr/\u003e\u003c/p\u003e\u003cfigure data-size=\"normal\"\u003e\u003cimg src=\"https://pica.zhimg.com/v2-9baaa785811e8c7cadd31f75d3b46924_1440w.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"942\" data-rawheight=\"591\" data-original-token=\"v2-6c0b99590466a8b30a75580f461e4010\" class=\"origin_image zh-lightbox-thumb\" width=\"942\" data-original=\"https://pica.zhimg.com/v2-9baaa785811e8c7cadd31f75d3b46924_r.jpg\"/\u003e\u003c/figure\u003e\u003cp class=\"ztext-empty-paragraph\"\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp data-pid=\"tUu9zICy\"\u003e（2）作业列表\u003c/p\u003e\u003cp class=\"ztext-empty-paragraph\"\u003e\u003cbr/\u003e\u003c/p\u003e\u003cfigure data-size=\"normal\"\u003e\u003cimg src=\"https://pic3.zhimg.com/v2-2228f20d39ab65d01fa0525895bb1f20_1440w.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1511\" data-rawheight=\"371\" data-original-token=\"v2-1808aca59b8abe92fa64232021372bfd\" class=\"origin_image zh-lightbox-thumb\" width=\"1511\" data-original=\"https://pic3.zhimg.com/v2-2228f20d39ab65d01fa0525895bb1f20_r.jpg\"/\u003e\u003c/figure\u003e\u003cp class=\"ztext-empty-paragraph\"\u003e\u003cbr/\u003e\u003c/p\u003e\u003ch3\u003e巡检报告\u003c/h3\u003e\u003cp data-pid=\"XQ_1wWWf\"\u003e每次巡检完成都会生成对应的巡检报告。\u003c/p\u003e\u003cp class=\"ztext-empty-paragraph\"\u003e\u003cbr/\u003e\u003c/p\u003e\u003cfigure data-size=\"normal\"\u003e\u003cimg src=\"https://pic1.zhimg.com/v2-d7a3422c0319f4024bef1378a3bf40c2_1440w.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1261\" data-rawheight=\"236\" data-original-token=\"v2-e687d00008ad98da6e40c4ac853e5af0\" class=\"origin_image zh-lightbox-thumb\" width=\"1261\" data-original=\"https://pic1.zhimg.com/v2-d7a3422c0319f4024bef1378a3bf40c2_r.jpg\"/\u003e\u003c/figure\u003e\u003cp class=\"ztext-empty-paragraph\"\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp data-pid=\"VZms-61-\"\u003e点击详情可以看到巡检的具体结果。\u003c/p\u003e\u003cp class=\"ztext-empty-paragraph\"\u003e\u003cbr/\u003e\u003c/p\u003e\u003cfigure data-size=\"normal\"\u003e\u003cimg src=\"https://pic1.zhimg.com/v2-6daf089dab92d82396c989ba0604d14e_1440w.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1177\" data-rawheight=\"673\" data-original-token=\"v2-f82246446f413129bdbc70711ad5aa23\" class=\"origin_image zh-lightbox-thumb\" width=\"1177\" data-original=\"https://pic1.zhimg.com/v2-6daf089dab92d82396c989ba0604d14e_r.jpg\"/\u003e\u003c/figure\u003e\u003cp class=\"ztext-empty-paragraph\"\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp data-pid=\"P8cHtup7\"\u003e点击导出，即可将报告导出为PDF。\u003c/p\u003e\u003cp class=\"ztext-empty-paragraph\"\u003e\u003cbr/\u003e\u003c/p\u003e\u003cfigure data-size=\"normal\"\u003e\u003cimg src=\"https://pic1.zhimg.com/v2-1071b532c15fcb2437c9cb27aa428854_1440w.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"769\" data-rawheight=\"612\" data-original-token=\"v2-51ceb2b36707b04201095592d016d260\" class=\"origin_image zh-lightbox-thumb\" width=\"769\" data-original=\"https://pic1.zhimg.com/v2-1071b532c15fcb2437c9cb27aa428854_r.jpg\"/\u003e\u003c/figure\u003e\u003cp class=\"ztext-empty-paragraph\"\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp data-pid=\"BYrbYQg7\"\u003e如果配置了巡检通知，则会将对应的巡检结果发送到企业微信群。\u003c/p\u003e\u003cp class=\"ztext-empty-paragraph\"\u003e\u003cbr/\u003e\u003c/p\u003e\u003cfigure data-size=\"normal\"\u003e\u003cimg src=\"https://pic3.zhimg.com/v2-83802c2e6997e1581686ba124a286012_1440w.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1018\" data-rawheight=\"268\" data-original-token=\"v2-ecc1f349726583c4e2ed721baaae9ab9\" class=\"origin_image zh-lightbox-thumb\" width=\"1018\" data-original=\"https://pic3.zhimg.com/v2-83802c2e6997e1581686ba124a286012_r.jpg\"/\u003e\u003c/figure\u003e\u003cp class=\"ztext-empty-paragraph\"\u003e\u003cbr/\u003e\u003c/p\u003e\u003ch3\u003e代码实现\u003c/h3\u003e\u003cp data-pid=\"DC65VMNV\"\u003e大部分的代码都是普通的\u003ccode\u003eCRUD\u003c/code\u003e，比如数据源的管理、巡检项的管理都是基础的\u003ccode\u003eCRUD\u003c/code\u003e，没有什么好说的。\u003c/p\u003e\u003cp data-pid=\"chhtWiHS\"\u003e这里简单说一下具体巡检的实现。\u003c/p\u003e\u003cp data-pid=\"sm2BhfQT\"\u003e（1）当用户创建了\u003ccode\u003e执行作业\u003c/code\u003e且该作业处于\u003ccode\u003e开启\u003c/code\u003e状态，就会创建一个定时任务。\u003c/p\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode class=\"language-go\"\u003e\u003cspan class=\"c1\"\u003e// CreateCronTask 创建定时任务\n\u003c/span\u003e\u003cspan class=\"c1\"\u003e\u003c/span\u003e\n\u003cspan class=\"kd\"\u003efunc\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003einspectionExecutionJobService\u003c/span\u003e \u003cspan class=\"o\"\u003e*\u003c/span\u003e\u003cspan class=\"nx\"\u003eInspectionExecutionJobService\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"nf\"\u003eCreateCronTask\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003ejob\u003c/span\u003e \u003cspan class=\"o\"\u003e*\u003c/span\u003e\u003cspan class=\"nx\"\u003eAutoInspection\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eInspectionExecutionJob\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"kt\"\u003eerror\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"nx\"\u003ecronName\u003c/span\u003e \u003cspan class=\"o\"\u003e:=\u003c/span\u003e \u003cspan class=\"nx\"\u003efmt\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eSprintf\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;InspectionExecution_%d\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nx\"\u003ejob\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eID\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"nx\"\u003etaskName\u003c/span\u003e \u003cspan class=\"o\"\u003e:=\u003c/span\u003e \u003cspan class=\"nx\"\u003efmt\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eSprintf\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;InspectionExecution_%d\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nx\"\u003ejob\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eID\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"c1\"\u003e// 检查是否已存在相同的定时任务\n\u003c/span\u003e\u003cspan class=\"c1\"\u003e\u003c/span\u003e    \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"nx\"\u003e_\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nx\"\u003efound\u003c/span\u003e \u003cspan class=\"o\"\u003e:=\u003c/span\u003e \u003cspan class=\"nx\"\u003eglobal\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eGVA_Timer\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eFindTask\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003ecronName\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nx\"\u003etaskName\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e \u003cspan class=\"nx\"\u003efound\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"c1\"\u003e// 如果已存在，先清除旧的定时任务\n\u003c/span\u003e\u003cspan class=\"c1\"\u003e\u003c/span\u003e        \u003cspan class=\"nx\"\u003eglobal\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eGVA_Timer\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eClear\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003ecronName\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"c1\"\u003e// 创建定时任务\n\u003c/span\u003e\u003cspan class=\"c1\"\u003e\u003c/span\u003e    \u003cspan class=\"kd\"\u003evar\u003c/span\u003e \u003cspan class=\"nx\"\u003eoption\u003c/span\u003e \u003cspan class=\"p\"\u003e[]\u003c/span\u003e\u003cspan class=\"nx\"\u003ecron\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eOption\u003c/span\u003e\n    \u003cspan class=\"nx\"\u003eoption\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"nb\"\u003eappend\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003eoption\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nx\"\u003ecron\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eWithSeconds\u003c/span\u003e\u003cspan class=\"p\"\u003e())\u003c/span\u003e\n    \u003cspan class=\"c1\"\u003e// 添加定时任务\n\u003c/span\u003e\u003cspan class=\"c1\"\u003e\u003c/span\u003e    \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"nx\"\u003e_\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nx\"\u003eerr\u003c/span\u003e \u003cspan class=\"o\"\u003e:=\u003c/span\u003e \u003cspan class=\"nx\"\u003eglobal\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eGVA_Timer\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eAddTaskByFunc\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003ecronName\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nx\"\u003ejob\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eCronExpr\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"kd\"\u003efunc\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"c1\"\u003e// 执行巡检任务\n\u003c/span\u003e\u003cspan class=\"c1\"\u003e\u003c/span\u003e        \u003cspan class=\"nx\"\u003einspectionExecutionJobService\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eExecuteInspectionJob\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003ejob\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e},\u003c/span\u003e \u003cspan class=\"nx\"\u003etaskName\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nx\"\u003eoption\u003c/span\u003e\u003cspan class=\"o\"\u003e...\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e \u003cspan class=\"nx\"\u003eerr\u003c/span\u003e \u003cspan class=\"o\"\u003e!=\u003c/span\u003e \u003cspan class=\"kc\"\u003enil\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"nx\"\u003eglobal\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eGVA_LOG\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eError\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;创建定时任务失败\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nx\"\u003ezap\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eError\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003eerr\u003c/span\u003e\u003cspan class=\"p\"\u003e),\u003c/span\u003e \u003cspan class=\"nx\"\u003ezap\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eUint\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;jobID\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nx\"\u003ejob\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eID\u003c/span\u003e\u003cspan class=\"p\"\u003e))\u003c/span\u003e\n        \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"nx\"\u003eerr\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"c1\"\u003e// 更新下次执行时间\n\u003c/span\u003e\u003cspan class=\"c1\"\u003e\u003c/span\u003e    \u003cspan class=\"nx\"\u003enextTime\u003c/span\u003e \u003cspan class=\"o\"\u003e:=\u003c/span\u003e \u003cspan class=\"nx\"\u003einspectionExecutionJobService\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003ecalculateNextRunTime\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003ejob\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eCronExpr\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"nx\"\u003ejob\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eNextRunTime\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"o\"\u003e\u0026amp;\u003c/span\u003e\u003cspan class=\"nx\"\u003enextTime\u003c/span\u003e\n    \u003cspan class=\"c1\"\u003e// 更新数据库中的记录\n\u003c/span\u003e\u003cspan class=\"c1\"\u003e\u003c/span\u003e    \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"nx\"\u003eglobal\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eGVA_DB\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eModel\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003ejob\u003c/span\u003e\u003cspan class=\"p\"\u003e).\u003c/span\u003e\u003cspan class=\"nf\"\u003eUpdates\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kd\"\u003emap\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"kt\"\u003estring\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u003c/span\u003e\u003cspan class=\"kd\"\u003einterface\u003c/span\u003e\u003cspan class=\"p\"\u003e{}{\u003c/span\u003e\n        \u003cspan class=\"s\"\u003e\u0026#34;next_run_time\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"nx\"\u003ejob\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eNextRunTime\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}).\u003c/span\u003e\u003cspan class=\"nx\"\u003eError\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cblockquote data-pid=\"y4BBBImB\"\u003e Tips：因为是采用的\u003ccode\u003egin-vue-admin\u003c/code\u003e框架，所以直接使用框架自带的timer定时器。\u003c/blockquote\u003e\u003cp data-pid=\"mrTFqZS9\"\u003e（2）当执行时间到了，就会执行\u003ccode\u003eExecuteInspectionJob\u003c/code\u003e巡检任务。\u003c/p\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode class=\"language-go\"\u003e\u003cspan class=\"kd\"\u003efunc\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003einspectionExecutionJobService\u003c/span\u003e \u003cspan class=\"o\"\u003e*\u003c/span\u003e\u003cspan class=\"nx\"\u003eInspectionExecutionJobService\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"nf\"\u003eExecuteInspectionJob\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003ejob\u003c/span\u003e \u003cspan class=\"o\"\u003e*\u003c/span\u003e\u003cspan class=\"nx\"\u003eAutoInspection\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eInspectionExecutionJob\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"c1\"\u003e// 更新作业执行时间\n\u003c/span\u003e\u003cspan class=\"c1\"\u003e\u003c/span\u003e    \u003cspan class=\"nx\"\u003einspectionExecutionJobService\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eupdateJobExecutionTime\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003ejob\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"c1\"\u003e// 创建执行记录\n\u003c/span\u003e\u003cspan class=\"c1\"\u003e\u003c/span\u003e    \u003cspan class=\"nx\"\u003ejobExecution\u003c/span\u003e \u003cspan class=\"o\"\u003e:=\u003c/span\u003e \u003cspan class=\"nx\"\u003einspectionExecutionJobService\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003ecreateJobExecution\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003ejob\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"nx\"\u003ejobExecution\u003c/span\u003e \u003cspan class=\"o\"\u003e==\u003c/span\u003e \u003cspan class=\"kc\"\u003enil\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"c1\"\u003e// 执行所有关联的巡检任务并收集结果\n\u003c/span\u003e\u003cspan class=\"c1\"\u003e\u003c/span\u003e    \u003cspan class=\"nx\"\u003eallResults\u003c/span\u003e \u003cspan class=\"o\"\u003e:=\u003c/span\u003e \u003cspan class=\"nx\"\u003einspectionExecutionJobService\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eexecuteAllInspectionTasks\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003ejob\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nx\"\u003ejobExecution\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"nx\"\u003eglobal\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eGVA_LOG\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eInfo\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;执行完成\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nx\"\u003ezap\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eAny\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;results\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nx\"\u003eallResults\u003c/span\u003e\u003cspan class=\"p\"\u003e))\u003c/span\u003e\n    \u003cspan class=\"c1\"\u003e// 更新执行记录状态和结果\n\u003c/span\u003e\u003cspan class=\"c1\"\u003e\u003c/span\u003e    \u003cspan class=\"nx\"\u003einspectionExecutionJobService\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eupdateJobExecutionResult\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003ejobExecution\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nx\"\u003eallResults\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"c1\"\u003e// 发送通知\n\u003c/span\u003e\u003cspan class=\"c1\"\u003e\u003c/span\u003e    \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"o\"\u003e*\u003c/span\u003e\u003cspan class=\"nx\"\u003ejob\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eIsNotice\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"nx\"\u003einspectionExecutionJobService\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003esendInspectionNotification\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003ejob\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nx\"\u003ejobExecution\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nx\"\u003eallResults\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp data-pid=\"aQeRgKtM\"\u003e这里主要是\u003ccode\u003eexecuteAllInspectionTasks\u003c/code\u003e来执行巡检任务。\u003c/p\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode class=\"language-go\"\u003e\u003cspan class=\"c1\"\u003e// executeAllInspectionTasks 执行所有关联的巡检任务并收集结果\n\u003c/span\u003e\u003cspan class=\"c1\"\u003e\u003c/span\u003e\n\u003cspan class=\"kd\"\u003efunc\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003einspectionExecutionJobService\u003c/span\u003e \u003cspan class=\"o\"\u003e*\u003c/span\u003e\u003cspan class=\"nx\"\u003eInspectionExecutionJobService\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"nf\"\u003eexecuteAllInspectionTasks\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003ejob\u003c/span\u003e \u003cspan class=\"o\"\u003e*\u003c/span\u003e\u003cspan class=\"nx\"\u003eAutoInspection\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eInspectionExecutionJob\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nx\"\u003ejobExecution\u003c/span\u003e \u003cspan class=\"o\"\u003e*\u003c/span\u003e\u003cspan class=\"nx\"\u003eAutoInspection\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eJobExecution\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e[]\u003c/span\u003e\u003cspan class=\"o\"\u003e*\u003c/span\u003e\u003cspan class=\"nx\"\u003eresult\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eProductsResult\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"c1\"\u003e// 创建一个等待组来同步所有巡检任务\n\u003c/span\u003e\u003cspan class=\"c1\"\u003e\u003c/span\u003e    \u003cspan class=\"kd\"\u003evar\u003c/span\u003e \u003cspan class=\"nx\"\u003ewg\u003c/span\u003e \u003cspan class=\"nx\"\u003esync\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eWaitGroup\u003c/span\u003e\n    \u003cspan class=\"c1\"\u003e// 创建一个互斥锁来保护结果集\n\u003c/span\u003e\u003cspan class=\"c1\"\u003e\u003c/span\u003e    \u003cspan class=\"kd\"\u003evar\u003c/span\u003e \u003cspan class=\"nx\"\u003emu\u003c/span\u003e \u003cspan class=\"nx\"\u003esync\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eMutex\u003c/span\u003e\n    \u003cspan class=\"c1\"\u003e// 创建一个结果集合\n\u003c/span\u003e\u003cspan class=\"c1\"\u003e\u003c/span\u003e    \u003cspan class=\"nx\"\u003eallResults\u003c/span\u003e \u003cspan class=\"o\"\u003e:=\u003c/span\u003e \u003cspan class=\"nb\"\u003emake\u003c/span\u003e\u003cspan class=\"p\"\u003e([]\u003c/span\u003e\u003cspan class=\"o\"\u003e*\u003c/span\u003e\u003cspan class=\"nx\"\u003eresult\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eProductsResult\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"mi\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"c1\"\u003e// 执行所有关联的巡检任务\n\u003c/span\u003e\u003cspan class=\"c1\"\u003e\u003c/span\u003e    \u003cspan class=\"k\"\u003efor\u003c/span\u003e \u003cspan class=\"nx\"\u003e_\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nx\"\u003ejobID\u003c/span\u003e \u003cspan class=\"o\"\u003e:=\u003c/span\u003e \u003cspan class=\"k\"\u003erange\u003c/span\u003e \u003cspan class=\"nx\"\u003ejob\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eJobIds\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"nx\"\u003ewg\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eAdd\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"mi\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n        \u003cspan class=\"k\"\u003ego\u003c/span\u003e \u003cspan class=\"kd\"\u003efunc\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003eid\u003c/span\u003e \u003cspan class=\"kt\"\u003euint\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n            \u003cspan class=\"k\"\u003edefer\u003c/span\u003e \u003cspan class=\"nx\"\u003ewg\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eDone\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\n            \u003cspan class=\"c1\"\u003e// 执行单个巡检任务并获取结果\n\u003c/span\u003e\u003cspan class=\"c1\"\u003e\u003c/span\u003e            \u003cspan class=\"nx\"\u003eresult\u003c/span\u003e \u003cspan class=\"o\"\u003e:=\u003c/span\u003e \u003cspan class=\"nx\"\u003einspectionExecutionJobService\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eexecuteSingleInspectionTask\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003eid\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nx\"\u003ejobExecution\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n            \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"nx\"\u003eresult\u003c/span\u003e \u003cspan class=\"o\"\u003e!=\u003c/span\u003e \u003cspan class=\"kc\"\u003enil\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n                \u003cspan class=\"c1\"\u003e// 将结果添加到总结果集中\n\u003c/span\u003e\u003cspan class=\"c1\"\u003e\u003c/span\u003e                \u003cspan class=\"nx\"\u003emu\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eLock\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\n                \u003cspan class=\"nx\"\u003eallResults\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"nb\"\u003eappend\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003eallResults\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nx\"\u003eresult\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n                \u003cspan class=\"nx\"\u003emu\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eUnlock\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\n            \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e}(\u003c/span\u003e\u003cspan class=\"nx\"\u003ejobID\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"c1\"\u003e// 等待所有巡检任务完成\n\u003c/span\u003e\u003cspan class=\"c1\"\u003e\u003c/span\u003e    \u003cspan class=\"nx\"\u003ewg\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eWait\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\n    \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"nx\"\u003eallResults\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp data-pid=\"sG64vLuS\"\u003e它会把\u003ccode\u003e作业\u003c/code\u003e中的任务拆成单个任务，然后由\u003ccode\u003eexecuteSingleInspectionTask\u003c/code\u003e分别执行并收集执行结果。\u003c/p\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode class=\"language-go\"\u003e\u003cspan class=\"c1\"\u003e// executeSingleInspectionTask 执行单个巡检任务\n\u003c/span\u003e\u003cspan class=\"c1\"\u003e\u003c/span\u003e\u003cspan class=\"kd\"\u003efunc\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003einspectionExecutionJobService\u003c/span\u003e \u003cspan class=\"o\"\u003e*\u003c/span\u003e\u003cspan class=\"nx\"\u003eInspectionExecutionJobService\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"nf\"\u003eexecuteSingleInspectionTask\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003ejobID\u003c/span\u003e \u003cspan class=\"kt\"\u003euint\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nx\"\u003ejobExecution\u003c/span\u003e \u003cspan class=\"o\"\u003e*\u003c/span\u003e\u003cspan class=\"nx\"\u003eAutoInspection\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eJobExecution\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"o\"\u003e*\u003c/span\u003e\u003cspan class=\"nx\"\u003eresult\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eProductsResult\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"nx\"\u003eglobal\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eGVA_LOG\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eInfo\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;执行巡检任务\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nx\"\u003ezap\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eUint\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;jobID\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nx\"\u003ejobID\u003c/span\u003e\u003cspan class=\"p\"\u003e))\u003c/span\u003e\n    \u003cspan class=\"c1\"\u003e// 获取巡检任务信息\n\u003c/span\u003e\u003cspan class=\"c1\"\u003e\u003c/span\u003e    \u003cspan class=\"nx\"\u003einspectionJob\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nx\"\u003e_\u003c/span\u003e \u003cspan class=\"o\"\u003e:=\u003c/span\u003e \u003cspan class=\"nx\"\u003einspectionJobService\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eGetInspectionJob\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003efmt\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eSprintf\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;%d\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nx\"\u003ejobID\u003c/span\u003e\u003cspan class=\"p\"\u003e))\u003c/span\u003e\n    \u003cspan class=\"c1\"\u003e// 创建结果通道\n\u003c/span\u003e\u003cspan class=\"c1\"\u003e\u003c/span\u003e    \u003cspan class=\"nx\"\u003eresultCh\u003c/span\u003e \u003cspan class=\"o\"\u003e:=\u003c/span\u003e \u003cspan class=\"nb\"\u003emake\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kd\"\u003echan\u003c/span\u003e \u003cspan class=\"o\"\u003e*\u003c/span\u003e\u003cspan class=\"nx\"\u003eresult\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eProductsResult\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"c1\"\u003e// 创建一个用于等待结果的WaitGroup\n\u003c/span\u003e\u003cspan class=\"c1\"\u003e\u003c/span\u003e    \u003cspan class=\"kd\"\u003evar\u003c/span\u003e \u003cspan class=\"nx\"\u003eresultWg\u003c/span\u003e \u003cspan class=\"nx\"\u003esync\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eWaitGroup\u003c/span\u003e\n    \u003cspan class=\"nx\"\u003eresultWg\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eAdd\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"mi\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"c1\"\u003e// 用于存储结果的变量\n\u003c/span\u003e\u003cspan class=\"c1\"\u003e\u003c/span\u003e    \u003cspan class=\"kd\"\u003evar\u003c/span\u003e \u003cspan class=\"nx\"\u003etaskResult\u003c/span\u003e \u003cspan class=\"o\"\u003e*\u003c/span\u003e\u003cspan class=\"nx\"\u003eresult\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eProductsResult\u003c/span\u003e\n    \u003cspan class=\"c1\"\u003e// 启动一个goroutine来接收结果\n\u003c/span\u003e\u003cspan class=\"c1\"\u003e\u003c/span\u003e    \u003cspan class=\"k\"\u003ego\u003c/span\u003e \u003cspan class=\"kd\"\u003efunc\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"k\"\u003edefer\u003c/span\u003e \u003cspan class=\"nx\"\u003eresultWg\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eDone\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\n        \u003cspan class=\"nx\"\u003eresult\u003c/span\u003e \u003cspan class=\"o\"\u003e:=\u003c/span\u003e \u003cspan class=\"o\"\u003e\u0026lt;-\u003c/span\u003e\u003cspan class=\"nx\"\u003eresultCh\u003c/span\u003e\n        \u003cspan class=\"nx\"\u003eglobal\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eGVA_LOG\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eInfo\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;巡检任务执行完成\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n            \u003cspan class=\"nx\"\u003ezap\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eString\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;jobName\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nx\"\u003einspectionJob\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eName\u003c/span\u003e\u003cspan class=\"p\"\u003e),\u003c/span\u003e\n            \u003cspan class=\"nx\"\u003ezap\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eAny\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;result\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nx\"\u003eresult\u003c/span\u003e\u003cspan class=\"p\"\u003e))\u003c/span\u003e\n        \u003cspan class=\"c1\"\u003e// 保存结果\n\u003c/span\u003e\u003cspan class=\"c1\"\u003e\u003c/span\u003e        \u003cspan class=\"nx\"\u003etaskResult\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"nx\"\u003eresult\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}()\u003c/span\u003e\n    \u003cspan class=\"c1\"\u003e// 执行巡检任务\n\u003c/span\u003e\u003cspan class=\"c1\"\u003e\u003c/span\u003e    \u003cspan class=\"nx\"\u003einspectionExecutionJobService\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eExecuteInspectionTask\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"o\"\u003e\u0026amp;\u003c/span\u003e\u003cspan class=\"nx\"\u003einspectionJob\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nx\"\u003ejobExecution\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nx\"\u003eresultCh\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"c1\"\u003e// 等待结果接收完成\n\u003c/span\u003e\u003cspan class=\"c1\"\u003e\u003c/span\u003e    \u003cspan class=\"nx\"\u003eresultWg\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eWait\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\n    \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"nx\"\u003etaskResult\u003c/span\u003e\n\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp data-pid=\"zlHg4VXp\"\u003e在\u003ccode\u003eExecuteInspectionTask\u003c/code\u003e中是为了方便扩展数据源。\u003c/p\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode class=\"language-go\"\u003e\u003cspan class=\"kd\"\u003efunc\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003einspectionExecutionJobService\u003c/span\u003e \u003cspan class=\"o\"\u003e*\u003c/span\u003e\u003cspan class=\"nx\"\u003eInspectionExecutionJobService\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"nf\"\u003eExecuteInspectionTask\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003einspectionJob\u003c/span\u003e \u003cspan class=\"o\"\u003e*\u003c/span\u003e\u003cspan class=\"nx\"\u003eAutoInspection\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eInspectionJob\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nx\"\u003ejobExecution\u003c/span\u003e \u003cspan class=\"o\"\u003e*\u003c/span\u003e\u003cspan class=\"nx\"\u003eAutoInspection\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eJobExecution\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nx\"\u003eresultCh\u003c/span\u003e \u003cspan class=\"kd\"\u003echan\u003c/span\u003e \u003cspan class=\"o\"\u003e*\u003c/span\u003e\u003cspan class=\"nx\"\u003eresult\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eProductsResult\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n\n    \u003cspan class=\"k\"\u003eswitch\u003c/span\u003e \u003cspan class=\"nx\"\u003einspectionJob\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eDataSourceType\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"k\"\u003ecase\u003c/span\u003e \u003cspan class=\"s\"\u003e\u0026#34;prometheus\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\n        \u003cspan class=\"c1\"\u003e// 执行Prometheus巡检任务\n\u003c/span\u003e\u003cspan class=\"c1\"\u003e\u003c/span\u003e        \u003cspan class=\"nx\"\u003einspectionExecutionJobService\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eExecutePrometheusInspectionTask\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003einspectionJob\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nx\"\u003ejobExecution\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nx\"\u003eresultCh\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp data-pid=\"if4idIeF\"\u003e由于目前只有\u003ccode\u003ePrometheus\u003c/code\u003e数据源，所以将直接执行\u003ccode\u003eExecutePrometheusInspectionTask\u003c/code\u003e。在这个方法中主要是构造\u003ccode\u003ePrometheus\u003c/code\u003e规则然后进行巡检。\u003c/p\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode class=\"language-go\"\u003e\u003cspan class=\"c1\"\u003e// ExecutePrometheusInspectionTask 执行Prometheus巡检任务\n\u003c/span\u003e\u003cspan class=\"c1\"\u003e\u003c/span\u003e\u003cspan class=\"kd\"\u003efunc\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003einspectionExecutionJobService\u003c/span\u003e \u003cspan class=\"o\"\u003e*\u003c/span\u003e\u003cspan class=\"nx\"\u003eInspectionExecutionJobService\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"nf\"\u003eExecutePrometheusInspectionTask\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003einspectionJob\u003c/span\u003e \u003cspan class=\"o\"\u003e*\u003c/span\u003e\u003cspan class=\"nx\"\u003eAutoInspection\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eInspectionJob\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nx\"\u003ejobExecution\u003c/span\u003e \u003cspan class=\"o\"\u003e*\u003c/span\u003e\u003cspan class=\"nx\"\u003eAutoInspection\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eJobExecution\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nx\"\u003eresultCh\u003c/span\u003e \u003cspan class=\"kd\"\u003echan\u003c/span\u003e \u003cspan class=\"o\"\u003e*\u003c/span\u003e\u003cspan class=\"nx\"\u003eresult\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eProductsResult\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"c1\"\u003e// 执行Prometheus巡检任务的逻辑\n\u003c/span\u003e\u003cspan class=\"c1\"\u003e\u003c/span\u003e    \u003cspan class=\"kd\"\u003evar\u003c/span\u003e \u003cspan class=\"nx\"\u003einspectionItemsService\u003c/span\u003e \u003cspan class=\"nx\"\u003eInspectionItemsService\u003c/span\u003e\n    \u003cspan class=\"kd\"\u003evar\u003c/span\u003e \u003cspan class=\"nx\"\u003einspectionTagService\u003c/span\u003e \u003cspan class=\"nx\"\u003eInspectionTagService\u003c/span\u003e\n    \u003cspan class=\"kd\"\u003evar\u003c/span\u003e \u003cspan class=\"nx\"\u003edataSourceService\u003c/span\u003e \u003cspan class=\"nx\"\u003eDataSourceService\u003c/span\u003e\n\n    \u003cspan class=\"c1\"\u003e// 获取数据源信息\n\u003c/span\u003e\u003cspan class=\"c1\"\u003e\u003c/span\u003e    \u003cspan class=\"nx\"\u003edataSource\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nx\"\u003e_\u003c/span\u003e \u003cspan class=\"o\"\u003e:=\u003c/span\u003e \u003cspan class=\"nx\"\u003edataSourceService\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eGetDataSource\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003efmt\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eSprintf\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;%d\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nx\"\u003einspectionJob\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eDataSourceId\u003c/span\u003e\u003cspan class=\"p\"\u003e))\u003c/span\u003e\n\n    \u003cspan class=\"c1\"\u003e// 创建规则列表\n\u003c/span\u003e\u003cspan class=\"c1\"\u003e\u003c/span\u003e    \u003cspan class=\"nx\"\u003eprometheusRules\u003c/span\u003e \u003cspan class=\"o\"\u003e:=\u003c/span\u003e \u003cspan class=\"nb\"\u003emake\u003c/span\u003e\u003cspan class=\"p\"\u003e([]\u003c/span\u003e\u003cspan class=\"o\"\u003e*\u003c/span\u003e\u003cspan class=\"nx\"\u003eproduct\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003ePrometheusRule\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"mi\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nb\"\u003elen\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003einspectionJob\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eItemLabelMaps\u003c/span\u003e\u003cspan class=\"p\"\u003e))\u003c/span\u003e\n\n    \u003cspan class=\"c1\"\u003e// 遍历巡检项与标签映射关系\n\u003c/span\u003e\u003cspan class=\"c1\"\u003e\u003c/span\u003e    \u003cspan class=\"k\"\u003efor\u003c/span\u003e \u003cspan class=\"nx\"\u003e_\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nx\"\u003eitemLabelMap\u003c/span\u003e \u003cspan class=\"o\"\u003e:=\u003c/span\u003e \u003cspan class=\"k\"\u003erange\u003c/span\u003e \u003cspan class=\"nx\"\u003einspectionJob\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eItemLabelMaps\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"c1\"\u003e// 获取巡检项信息\n\u003c/span\u003e\u003cspan class=\"c1\"\u003e\u003c/span\u003e        \u003cspan class=\"nx\"\u003einspectionItem\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nx\"\u003e_\u003c/span\u003e \u003cspan class=\"o\"\u003e:=\u003c/span\u003e \u003cspan class=\"nx\"\u003einspectionItemsService\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eGetInspectionItems\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003efmt\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eSprintf\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;%d\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nx\"\u003eitemLabelMap\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eItemId\u003c/span\u003e\u003cspan class=\"p\"\u003e))\u003c/span\u003e\n\n        \u003cspan class=\"c1\"\u003e// 获取标签信息\n\u003c/span\u003e\u003cspan class=\"c1\"\u003e\u003c/span\u003e        \u003cspan class=\"kd\"\u003evar\u003c/span\u003e \u003cspan class=\"nx\"\u003einspectionTag\u003c/span\u003e \u003cspan class=\"nx\"\u003eAutoInspection\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eInspectionTag\u003c/span\u003e\n        \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"nx\"\u003eitemLabelMap\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eLabelId\u003c/span\u003e \u003cspan class=\"o\"\u003e!=\u003c/span\u003e \u003cspan class=\"mi\"\u003e0\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n            \u003cspan class=\"nx\"\u003einspectionTag\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nx\"\u003e_\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"nx\"\u003einspectionTagService\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eGetInspectionTag\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003efmt\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eSprintf\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;%d\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nx\"\u003eitemLabelMap\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eLabelId\u003c/span\u003e\u003cspan class=\"p\"\u003e))\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n        \u003cspan class=\"c1\"\u003e// 创建Prometheus规则\n\u003c/span\u003e\u003cspan class=\"c1\"\u003e\u003c/span\u003e        \u003cspan class=\"nx\"\u003eprometheusRule\u003c/span\u003e \u003cspan class=\"o\"\u003e:=\u003c/span\u003e \u003cspan class=\"o\"\u003e\u0026amp;\u003c/span\u003e\u003cspan class=\"nx\"\u003eproduct\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003ePrometheusRule\u003c/span\u003e\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n            \u003cspan class=\"nx\"\u003eName\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e           \u003cspan class=\"nx\"\u003einspectionItem\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eName\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n            \u003cspan class=\"nx\"\u003eRule\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e           \u003cspan class=\"nx\"\u003einspectionItem\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eRule\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n            \u003cspan class=\"nx\"\u003eLabelFilter\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e    \u003cspan class=\"nx\"\u003einspectionTag\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eLabel\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n            \u003cspan class=\"nx\"\u003eDesc\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e           \u003cspan class=\"nx\"\u003einspectionItem\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eDescription\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n            \u003cspan class=\"nx\"\u003eAlertInfo\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e      \u003cspan class=\"nx\"\u003einspectionItem\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eOutputTemplate\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n            \u003cspan class=\"nx\"\u003eDataSourceName\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"nx\"\u003edataSource\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eName\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n        \u003cspan class=\"c1\"\u003e// 添加到规则列表\n\u003c/span\u003e\u003cspan class=\"c1\"\u003e\u003c/span\u003e        \u003cspan class=\"nx\"\u003eprometheusRules\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"nb\"\u003eappend\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003eprometheusRules\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nx\"\u003eprometheusRule\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n    \u003cspan class=\"c1\"\u003e// 创建规则集合\n\u003c/span\u003e\u003cspan class=\"c1\"\u003e\u003c/span\u003e    \u003cspan class=\"nx\"\u003erules\u003c/span\u003e \u003cspan class=\"o\"\u003e:=\u003c/span\u003e \u003cspan class=\"nx\"\u003eproduct\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eRules\u003c/span\u003e\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"nx\"\u003ePrometheus\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"nx\"\u003eprometheusRules\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n        \u003cspan class=\"nx\"\u003eAliyunSafe\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"p\"\u003e[]\u003c/span\u003e\u003cspan class=\"o\"\u003e*\u003c/span\u003e\u003cspan class=\"nx\"\u003eproduct\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eAliyunSafeRule\u003c/span\u003e\u003cspan class=\"p\"\u003e{},\u003c/span\u003e \u003cspan class=\"c1\"\u003e// 空列表，因为这里只处理Prometheus规则\n\u003c/span\u003e\u003cspan class=\"c1\"\u003e\u003c/span\u003e    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n    \u003cspan class=\"c1\"\u003e// 创建产品\n\u003c/span\u003e\u003cspan class=\"c1\"\u003e\u003c/span\u003e    \u003cspan class=\"nx\"\u003eprod\u003c/span\u003e \u003cspan class=\"o\"\u003e:=\u003c/span\u003e \u003cspan class=\"o\"\u003e\u0026amp;\u003c/span\u003e\u003cspan class=\"nx\"\u003eproduct\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eProduct\u003c/span\u003e\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"nx\"\u003eName\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e  \u003cspan class=\"nx\"\u003einspectionJob\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eName\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n        \u003cspan class=\"nx\"\u003eRules\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"nx\"\u003erules\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n    \u003cspan class=\"c1\"\u003e// 使用defer和recover捕获可能的panic\n\u003c/span\u003e\u003cspan class=\"c1\"\u003e\u003c/span\u003e    \u003cspan class=\"k\"\u003edefer\u003c/span\u003e \u003cspan class=\"kd\"\u003efunc\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"nx\"\u003er\u003c/span\u003e \u003cspan class=\"o\"\u003e:=\u003c/span\u003e \u003cspan class=\"nb\"\u003erecover\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e \u003cspan class=\"nx\"\u003er\u003c/span\u003e \u003cspan class=\"o\"\u003e!=\u003c/span\u003e \u003cspan class=\"kc\"\u003enil\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n            \u003cspan class=\"c1\"\u003e// 记录panic信息\n\u003c/span\u003e\u003cspan class=\"c1\"\u003e\u003c/span\u003e            \u003cspan class=\"nx\"\u003eglobal\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eGVA_LOG\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eError\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;执行巡检任务发生panic\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n                \u003cspan class=\"nx\"\u003ezap\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eAny\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;panic\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nx\"\u003er\u003c/span\u003e\u003cspan class=\"p\"\u003e),\u003c/span\u003e\n                \u003cspan class=\"nx\"\u003ezap\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eString\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;jobName\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nx\"\u003einspectionJob\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eName\u003c/span\u003e\u003cspan class=\"p\"\u003e))\u003c/span\u003e\n\n            \u003cspan class=\"c1\"\u003e// 创建一个表示失败的结果并发送到结果通道\n\u003c/span\u003e\u003cspan class=\"c1\"\u003e\u003c/span\u003e            \u003cspan class=\"nx\"\u003epr\u003c/span\u003e \u003cspan class=\"o\"\u003e:=\u003c/span\u003e \u003cspan class=\"o\"\u003e\u0026amp;\u003c/span\u003e\u003cspan class=\"nx\"\u003eresult\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eProductsResult\u003c/span\u003e\u003cspan class=\"p\"\u003e{\u003c/span\u003e\u003cspan class=\"nx\"\u003eProductName\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"nx\"\u003einspectionJob\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eName\u003c/span\u003e\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n            \u003cspan class=\"c1\"\u003e// 为每个规则创建失败结果\n\u003c/span\u003e\u003cspan class=\"c1\"\u003e\u003c/span\u003e            \u003cspan class=\"k\"\u003efor\u003c/span\u003e \u003cspan class=\"nx\"\u003e_\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nx\"\u003erule\u003c/span\u003e \u003cspan class=\"o\"\u003e:=\u003c/span\u003e \u003cspan class=\"k\"\u003erange\u003c/span\u003e \u003cspan class=\"nx\"\u003eprometheusRules\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n                \u003cspan class=\"nx\"\u003eerrorMsg\u003c/span\u003e \u003cspan class=\"o\"\u003e:=\u003c/span\u003e \u003cspan class=\"nx\"\u003efmt\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eSprintf\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;巡检执行失败: %v\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nx\"\u003er\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n                \u003cspan class=\"nx\"\u003efailureResult\u003c/span\u003e \u003cspan class=\"o\"\u003e:=\u003c/span\u003e \u003cspan class=\"nx\"\u003eresult\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eNewRuleResult\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\n                    \u003cspan class=\"nx\"\u003eresult\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eWithInspectionInfo\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003erule\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eName\u003c/span\u003e\u003cspan class=\"p\"\u003e),\u003c/span\u003e\n                    \u003cspan class=\"nx\"\u003eresult\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eWithInspectionResult\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003eresult\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eABNORMAL\u003c/span\u003e\u003cspan class=\"p\"\u003e),\u003c/span\u003e\n                    \u003cspan class=\"nx\"\u003eresult\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eWithInspectionErrorInfo\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\n                        \u003cspan class=\"p\"\u003e[]\u003c/span\u003e\u003cspan class=\"kd\"\u003emap\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"kt\"\u003estring\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u003c/span\u003e\u003cspan class=\"kt\"\u003estring\u003c/span\u003e\u003cspan class=\"p\"\u003e{{\u003c/span\u003e\n                            \u003cspan class=\"s\"\u003e\u0026#34;error\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"nx\"\u003eerrorMsg\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n                            \u003cspan class=\"s\"\u003e\u0026#34;rule\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e  \u003cspan class=\"nx\"\u003erule\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eRule\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n                        \u003cspan class=\"p\"\u003e}},\u003c/span\u003e\n                        \u003cspan class=\"s\"\u003e\u0026#34;执行规则 {{rule}} 时发生错误: {{error}}\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n                    \u003cspan class=\"p\"\u003e),\u003c/span\u003e\n                \u003cspan class=\"p\"\u003e)\u003c/span\u003e\n                \u003cspan class=\"nx\"\u003epr\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eAdd\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003efailureResult\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n            \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n            \u003cspan class=\"c1\"\u003e// 发送结果\n\u003c/span\u003e\u003cspan class=\"c1\"\u003e\u003c/span\u003e            \u003cspan class=\"nx\"\u003eresultCh\u003c/span\u003e \u003cspan class=\"o\"\u003e\u0026lt;-\u003c/span\u003e \u003cspan class=\"nx\"\u003epr\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}()\u003c/span\u003e\n\n    \u003cspan class=\"c1\"\u003e// 执行巡检\n\u003c/span\u003e\u003cspan class=\"c1\"\u003e\u003c/span\u003e    \u003cspan class=\"nx\"\u003eerr\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"nx\"\u003eprod\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eRun\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003eresultCh\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"nx\"\u003eerr\u003c/span\u003e \u003cspan class=\"o\"\u003e!=\u003c/span\u003e \u003cspan class=\"kc\"\u003enil\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"nx\"\u003eglobal\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eGVA_LOG\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eError\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;执行巡检任务失败\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nx\"\u003ezap\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eError\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003eerr\u003c/span\u003e\u003cspan class=\"p\"\u003e),\u003c/span\u003e \u003cspan class=\"nx\"\u003ezap\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eString\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;jobName\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nx\"\u003einspectionJob\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eName\u003c/span\u003e\u003cspan class=\"p\"\u003e))\u003c/span\u003e\n        \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n    \u003cspan class=\"nx\"\u003eglobal\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eGVA_LOG\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eInfo\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;巡检任务已启动\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nx\"\u003ezap\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eString\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;jobName\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nx\"\u003einspectionJob\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eName\u003c/span\u003e\u003cspan class=\"p\"\u003e))\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp data-pid=\"mZaC3tun\"\u003e在\u003ccode\u003eprod.Run\u003c/code\u003e中，会去做真正的指标数据查询。\u003c/p\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode class=\"language-go\"\u003e\u003cspan class=\"kd\"\u003efunc\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003ep\u003c/span\u003e \u003cspan class=\"o\"\u003e*\u003c/span\u003e\u003cspan class=\"nx\"\u003eProduct\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"nf\"\u003eRun\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003eresultCh\u003c/span\u003e \u003cspan class=\"kd\"\u003echan\u003c/span\u003e \u003cspan class=\"o\"\u003e*\u003c/span\u003e\u003cspan class=\"nx\"\u003eresult\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eProductsResult\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"kt\"\u003eerror\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"nx\"\u003eglobal\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eGVA_LOG\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eInfo\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003efmt\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eSprintf\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;开始巡检, %s\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nx\"\u003ep\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eName\u003c/span\u003e\u003cspan class=\"p\"\u003e))\u003c/span\u003e\n    \u003cspan class=\"nx\"\u003epr\u003c/span\u003e \u003cspan class=\"o\"\u003e:=\u003c/span\u003e \u003cspan class=\"o\"\u003e\u0026amp;\u003c/span\u003e\u003cspan class=\"nx\"\u003eresult\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eProductsResult\u003c/span\u003e\u003cspan class=\"p\"\u003e{\u003c/span\u003e\u003cspan class=\"nx\"\u003eProductName\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"nx\"\u003ep\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eName\u003c/span\u003e\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"c1\"\u003e// prometheus巡检规则\n\u003c/span\u003e\u003cspan class=\"c1\"\u003e\u003c/span\u003e    \u003cspan class=\"k\"\u003efor\u003c/span\u003e \u003cspan class=\"nx\"\u003e_\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nx\"\u003eprometheusRule\u003c/span\u003e \u003cspan class=\"o\"\u003e:=\u003c/span\u003e \u003cspan class=\"k\"\u003erange\u003c/span\u003e \u003cspan class=\"nx\"\u003ep\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eRules\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003ePrometheus\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"nx\"\u003eruleInspectRes\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nx\"\u003eerr\u003c/span\u003e \u003cspan class=\"o\"\u003e:=\u003c/span\u003e \u003cspan class=\"nx\"\u003eprometheusRule\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eRun\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\n        \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"nx\"\u003eerr\u003c/span\u003e \u003cspan class=\"o\"\u003e!=\u003c/span\u003e \u003cspan class=\"kc\"\u003enil\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n            \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"nx\"\u003eerr\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n        \u003cspan class=\"nx\"\u003epr\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eAdd\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003eruleInspectRes\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"nx\"\u003eresultCh\u003c/span\u003e \u003cspan class=\"o\"\u003e\u0026lt;-\u003c/span\u003e \u003cspan class=\"nx\"\u003epr\u003c/span\u003e\n    \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"kc\"\u003enil\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp data-pid=\"PSZj0vTq\"\u003e然后调用\u003ccode\u003eprometheusRule.Run\u003c/code\u003e获取结果。\u003c/p\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode class=\"language-go\"\u003e\u003cspan class=\"kd\"\u003efunc\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003er\u003c/span\u003e \u003cspan class=\"o\"\u003e*\u003c/span\u003e\u003cspan class=\"nx\"\u003ePrometheusRule\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"nf\"\u003eRun\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"o\"\u003e*\u003c/span\u003e\u003cspan class=\"nx\"\u003eresult\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eRuleResult\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"kt\"\u003eerror\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"nx\"\u003eds\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nx\"\u003eerr\u003c/span\u003e \u003cspan class=\"o\"\u003e:=\u003c/span\u003e \u003cspan class=\"nx\"\u003edatasource\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eGetByName\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003er\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eDataSourceName\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"nx\"\u003eerr\u003c/span\u003e \u003cspan class=\"o\"\u003e!=\u003c/span\u003e \u003cspan class=\"kc\"\u003enil\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"kc\"\u003enil\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nx\"\u003eerr\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"nx\"\u003epds\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nx\"\u003eok\u003c/span\u003e \u003cspan class=\"o\"\u003e:=\u003c/span\u003e \u003cspan class=\"nx\"\u003eds\u003c/span\u003e\u003cspan class=\"p\"\u003e.(\u003c/span\u003e\u003cspan class=\"o\"\u003e*\u003c/span\u003e\u003cspan class=\"nx\"\u003edatasource\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003ePrometheusDataSource\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"p\"\u003e!\u003c/span\u003e\u003cspan class=\"nx\"\u003eok\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"kc\"\u003enil\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nx\"\u003efmt\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eErrorf\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;数据源类型错误: %s 不是Prometheus数据源\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nx\"\u003er\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eDataSourceName\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"nx\"\u003epds\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eClient\u003c/span\u003e \u003cspan class=\"o\"\u003e==\u003c/span\u003e \u003cspan class=\"kc\"\u003enil\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"kc\"\u003enil\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nx\"\u003efmt\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eErrorf\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;数据源为空: %s\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nx\"\u003er\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eDataSourceName\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"nx\"\u003eres\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nx\"\u003eerr\u003c/span\u003e \u003cspan class=\"o\"\u003e:=\u003c/span\u003e \u003cspan class=\"nx\"\u003epds\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eRun\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003er\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eRule\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nx\"\u003er\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eLabelFilter\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"nx\"\u003eerr\u003c/span\u003e \u003cspan class=\"o\"\u003e!=\u003c/span\u003e \u003cspan class=\"kc\"\u003enil\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"kc\"\u003enil\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nx\"\u003eerr\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"nx\"\u003eruleRes\u003c/span\u003e \u003cspan class=\"o\"\u003e:=\u003c/span\u003e \u003cspan class=\"nx\"\u003er\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003ebuildRuleResult\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003eres\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"nx\"\u003eruleRes\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"kc\"\u003enil\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n\u003cspan class=\"kd\"\u003efunc\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003er\u003c/span\u003e \u003cspan class=\"o\"\u003e*\u003c/span\u003e\u003cspan class=\"nx\"\u003ePrometheusRule\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"nf\"\u003ebuildRuleResult\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003eresultLabels\u003c/span\u003e \u003cspan class=\"p\"\u003e[]\u003c/span\u003e\u003cspan class=\"kd\"\u003emap\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"kt\"\u003estring\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u003c/span\u003e\u003cspan class=\"kt\"\u003estring\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"o\"\u003e*\u003c/span\u003e\u003cspan class=\"nx\"\u003eresult\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eRuleResult\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"nb\"\u003elen\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003eresultLabels\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"o\"\u003e==\u003c/span\u003e \u003cspan class=\"mi\"\u003e0\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"nx\"\u003eresult\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eNewRuleResult\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003eresult\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eWithInspectionInfo\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003efmt\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eSprintf\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;%s\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nx\"\u003er\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eName\u003c/span\u003e\u003cspan class=\"p\"\u003e)),\u003c/span\u003e\n            \u003cspan class=\"nx\"\u003eresult\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eWithInspectionResult\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003eresult\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eNORMAL\u003c/span\u003e\u003cspan class=\"p\"\u003e))\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"nx\"\u003eresult\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eNewRuleResult\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003eresult\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eWithInspectionInfo\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003efmt\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eSprintf\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;%s\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nx\"\u003er\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eName\u003c/span\u003e\u003cspan class=\"p\"\u003e)),\u003c/span\u003e\n        \u003cspan class=\"nx\"\u003eresult\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eWithInspectionResult\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003eresult\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eABNORMAL\u003c/span\u003e\u003cspan class=\"p\"\u003e),\u003c/span\u003e\n        \u003cspan class=\"nx\"\u003eresult\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eWithInspectionErrorInfo\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003eresultLabels\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nx\"\u003er\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eAlertInfo\u003c/span\u003e\u003cspan class=\"p\"\u003e))\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp data-pid=\"eM2PVcRP\"\u003e具体的查询是封装在\u003ccode\u003epds.Run\u003c/code\u003e中的，它会去调用\u003ccode\u003ePrometheus\u003c/code\u003e的接口去查询数据。\u003c/p\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode class=\"language-go\"\u003e\u003cspan class=\"kd\"\u003efunc\u003c/span\u003e \u003cspan class=\"nf\"\u003eQuery\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003eclient\u003c/span\u003e \u003cspan class=\"nx\"\u003eapi\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eClient\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nx\"\u003erule\u003c/span\u003e \u003cspan class=\"kt\"\u003estring\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003emodel\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eValue\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"p\"\u003e[]\u003c/span\u003e\u003cspan class=\"kt\"\u003estring\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"kt\"\u003eerror\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"c1\"\u003e// 添加空指针检查\n\u003c/span\u003e\u003cspan class=\"c1\"\u003e\u003c/span\u003e    \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"nx\"\u003eclient\u003c/span\u003e \u003cspan class=\"o\"\u003e==\u003c/span\u003e \u003cspan class=\"kc\"\u003enil\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"kc\"\u003enil\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"kc\"\u003enil\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nx\"\u003eerrors\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eNew\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;Prometheus client is nil\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"nx\"\u003ev1Api\u003c/span\u003e \u003cspan class=\"o\"\u003e:=\u003c/span\u003e \u003cspan class=\"nx\"\u003epromV1\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eNewAPI\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003eclient\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"nx\"\u003ectx\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nx\"\u003ecancel\u003c/span\u003e \u003cspan class=\"o\"\u003e:=\u003c/span\u003e \u003cspan class=\"nx\"\u003econtext\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eWithTimeout\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003econtext\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eBackground\u003c/span\u003e\u003cspan class=\"p\"\u003e(),\u003c/span\u003e \u003cspan class=\"mi\"\u003e10\u003c/span\u003e\u003cspan class=\"o\"\u003e*\u003c/span\u003e\u003cspan class=\"nx\"\u003etime\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eSecond\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"k\"\u003edefer\u003c/span\u003e \u003cspan class=\"nf\"\u003ecancel\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\n    \u003cspan class=\"nx\"\u003evalue\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nx\"\u003ewarnings\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nx\"\u003eerr\u003c/span\u003e \u003cspan class=\"o\"\u003e:=\u003c/span\u003e \u003cspan class=\"nx\"\u003ev1Api\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eQuery\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003ectx\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nx\"\u003erule\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nx\"\u003etime\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eNow\u003c/span\u003e\u003cspan class=\"p\"\u003e(),\u003c/span\u003e \u003cspan class=\"nx\"\u003epromV1\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eWithTimeout\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"mi\"\u003e10\u003c/span\u003e\u003cspan class=\"o\"\u003e*\u003c/span\u003e\u003cspan class=\"nx\"\u003etime\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eSecond\u003c/span\u003e\u003cspan class=\"p\"\u003e))\u003c/span\u003e\n    \u003cspan class=\"nx\"\u003eglobal\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eGVA_LOG\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eDebug\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;查询结果\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nx\"\u003ezap\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eString\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;value\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nx\"\u003evalue\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eString\u003c/span\u003e\u003cspan class=\"p\"\u003e()),\u003c/span\u003e \u003cspan class=\"nx\"\u003ezap\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eAny\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;warnings\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nx\"\u003ewarnings\u003c/span\u003e\u003cspan class=\"p\"\u003e))\u003c/span\u003e\n    \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"nx\"\u003eerr\u003c/span\u003e \u003cspan class=\"o\"\u003e!=\u003c/span\u003e \u003cspan class=\"kc\"\u003enil\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"kc\"\u003enil\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"kc\"\u003enil\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nx\"\u003eerrors\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eWithStack\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003eerr\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"nx\"\u003evalue\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nx\"\u003ewarnings\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"kc\"\u003enil\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp data-pid=\"ZlxIFxBm\"\u003e（3）如果需要发送到企业微信，就会构建发送结果进行发送。\u003c/p\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode class=\"language-go\"\u003e\u003cspan class=\"kd\"\u003efunc\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003einspectionExecutionJobService\u003c/span\u003e \u003cspan class=\"o\"\u003e*\u003c/span\u003e\u003cspan class=\"nx\"\u003eInspectionExecutionJobService\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"nf\"\u003esendInspectionNotification\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003ejob\u003c/span\u003e \u003cspan class=\"o\"\u003e*\u003c/span\u003e\u003cspan class=\"nx\"\u003eAutoInspection\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eInspectionExecutionJob\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nx\"\u003ejobExecution\u003c/span\u003e \u003cspan class=\"o\"\u003e*\u003c/span\u003e\u003cspan class=\"nx\"\u003eAutoInspection\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eJobExecution\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nx\"\u003eresults\u003c/span\u003e \u003cspan class=\"p\"\u003e[]\u003c/span\u003e\u003cspan class=\"o\"\u003e*\u003c/span\u003e\u003cspan class=\"nx\"\u003eresult\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eProductsResult\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"c1\"\u003e// 获取通知配置\n\u003c/span\u003e\u003cspan class=\"c1\"\u003e\u003c/span\u003e    \u003cspan class=\"kd\"\u003evar\u003c/span\u003e \u003cspan class=\"nx\"\u003enotifyService\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"nx\"\u003eNotifyService\u003c/span\u003e\u003cspan class=\"p\"\u003e{}\u003c/span\u003e\n    \u003cspan class=\"nx\"\u003enotify\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nx\"\u003eerr\u003c/span\u003e \u003cspan class=\"o\"\u003e:=\u003c/span\u003e \u003cspan class=\"nx\"\u003enotifyService\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eGetNotify\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003efmt\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eSprintf\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;%d\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nx\"\u003ejob\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eNoticdId\u003c/span\u003e\u003cspan class=\"p\"\u003e))\u003c/span\u003e\n    \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"nx\"\u003eerr\u003c/span\u003e \u003cspan class=\"o\"\u003e!=\u003c/span\u003e \u003cspan class=\"kc\"\u003enil\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"nx\"\u003eglobal\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eGVA_LOG\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eError\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;获取通知配置失败\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nx\"\u003ezap\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eError\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003eerr\u003c/span\u003e\u003cspan class=\"p\"\u003e))\u003c/span\u003e\n        \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n    \u003cspan class=\"c1\"\u003e// 构建通知内容\n\u003c/span\u003e\u003cspan class=\"c1\"\u003e\u003c/span\u003e    \u003cspan class=\"c1\"\u003e// 1. 巡检摘要\n\u003c/span\u003e\u003cspan class=\"c1\"\u003e\u003c/span\u003e    \u003cspan class=\"nx\"\u003etaskCount\u003c/span\u003e \u003cspan class=\"o\"\u003e:=\u003c/span\u003e \u003cspan class=\"nb\"\u003elen\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003eresults\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e   \u003cspan class=\"c1\"\u003e// 巡检任务数量\n\u003c/span\u003e\u003cspan class=\"c1\"\u003e\u003c/span\u003e    \u003cspan class=\"nx\"\u003eitemCount\u003c/span\u003e \u003cspan class=\"o\"\u003e:=\u003c/span\u003e \u003cspan class=\"mi\"\u003e0\u003c/span\u003e              \u003cspan class=\"c1\"\u003e// 巡检项数量\n\u003c/span\u003e\u003cspan class=\"c1\"\u003e\u003c/span\u003e    \u003cspan class=\"nx\"\u003enormalCount\u003c/span\u003e \u003cspan class=\"o\"\u003e:=\u003c/span\u003e \u003cspan class=\"mi\"\u003e0\u003c/span\u003e            \u003cspan class=\"c1\"\u003e// 正常项数量\n\u003c/span\u003e\u003cspan class=\"c1\"\u003e\u003c/span\u003e    \u003cspan class=\"nx\"\u003eabnormalCount\u003c/span\u003e \u003cspan class=\"o\"\u003e:=\u003c/span\u003e \u003cspan class=\"mi\"\u003e0\u003c/span\u003e          \u003cspan class=\"c1\"\u003e// 异常项数量\n\u003c/span\u003e\u003cspan class=\"c1\"\u003e\u003c/span\u003e    \u003cspan class=\"nx\"\u003eabnormalItems\u003c/span\u003e \u003cspan class=\"o\"\u003e:=\u003c/span\u003e \u003cspan class=\"p\"\u003e[]\u003c/span\u003e\u003cspan class=\"kt\"\u003estring\u003c/span\u003e\u003cspan class=\"p\"\u003e{}\u003c/span\u003e \u003cspan class=\"c1\"\u003e// 异常项列表\n\u003c/span\u003e\u003cspan class=\"c1\"\u003e\u003c/span\u003e\n    \u003cspan class=\"c1\"\u003e// 统计巡检项、正常项和异常项的数量\n\u003c/span\u003e\u003cspan class=\"c1\"\u003e\u003c/span\u003e    \u003cspan class=\"k\"\u003efor\u003c/span\u003e \u003cspan class=\"nx\"\u003e_\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nx\"\u003etask\u003c/span\u003e \u003cspan class=\"o\"\u003e:=\u003c/span\u003e \u003cspan class=\"k\"\u003erange\u003c/span\u003e \u003cspan class=\"nx\"\u003eresults\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"nx\"\u003eitemCount\u003c/span\u003e \u003cspan class=\"o\"\u003e+=\u003c/span\u003e \u003cspan class=\"nb\"\u003elen\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003etask\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eSubRuleResults\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n        \u003cspan class=\"k\"\u003efor\u003c/span\u003e \u003cspan class=\"nx\"\u003e_\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nx\"\u003eitem\u003c/span\u003e \u003cspan class=\"o\"\u003e:=\u003c/span\u003e \u003cspan class=\"k\"\u003erange\u003c/span\u003e \u003cspan class=\"nx\"\u003etask\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eSubRuleResults\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n            \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"nx\"\u003eitem\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eInspectionResult\u003c/span\u003e \u003cspan class=\"o\"\u003e==\u003c/span\u003e \u003cspan class=\"nx\"\u003eresult\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eNORMAL\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n                \u003cspan class=\"nx\"\u003enormalCount\u003c/span\u003e\u003cspan class=\"o\"\u003e++\u003c/span\u003e\n            \u003cspan class=\"p\"\u003e}\u003c/span\u003e \u003cspan class=\"k\"\u003eelse\u003c/span\u003e \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"nx\"\u003eitem\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eInspectionResult\u003c/span\u003e \u003cspan class=\"o\"\u003e==\u003c/span\u003e \u003cspan class=\"nx\"\u003eresult\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eABNORMAL\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n                \u003cspan class=\"nx\"\u003eabnormalCount\u003c/span\u003e\u003cspan class=\"o\"\u003e++\u003c/span\u003e\n                \u003cspan class=\"c1\"\u003e// 收集异常项信息\n\u003c/span\u003e\u003cspan class=\"c1\"\u003e\u003c/span\u003e                \u003cspan class=\"nx\"\u003eabnormalDetail\u003c/span\u003e \u003cspan class=\"o\"\u003e:=\u003c/span\u003e \u003cspan class=\"nx\"\u003efmt\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eSprintf\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;【%s】%s\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nx\"\u003etask\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eProductName\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nx\"\u003eitem\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eInspectionInfo\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n                \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"nb\"\u003elen\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003eitem\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eInspectionErrorInfo\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"mi\"\u003e0\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n                    \u003cspan class=\"nx\"\u003eabnormalDetail\u003c/span\u003e \u003cspan class=\"o\"\u003e+=\u003c/span\u003e \u003cspan class=\"s\"\u003e\u0026#34;\\n\u0026#34;\u003c/span\u003e \u003cspan class=\"o\"\u003e+\u003c/span\u003e \u003cspan class=\"nx\"\u003estrings\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eJoin\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003eitem\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eInspectionErrorInfo\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"s\"\u003e\u0026#34;\\n\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n                \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n                \u003cspan class=\"nx\"\u003eabnormalItems\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"nb\"\u003eappend\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003eabnormalItems\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nx\"\u003eabnormalDetail\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n            \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n    \u003cspan class=\"c1\"\u003e// 格式化摘要信息\n\u003c/span\u003e\u003cspan class=\"c1\"\u003e\u003c/span\u003e    \u003cspan class=\"nx\"\u003esummary\u003c/span\u003e \u003cspan class=\"o\"\u003e:=\u003c/span\u003e \u003cspan class=\"nx\"\u003efmt\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eSprintf\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;巡检任务%d个，巡检项%d个，正常%d个，异常%d个\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nx\"\u003etaskCount\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nx\"\u003eitemCount\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nx\"\u003enormalCount\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nx\"\u003eabnormalCount\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\n    \u003cspan class=\"c1\"\u003e// 构建企业微信通知内容\n\u003c/span\u003e\u003cspan class=\"c1\"\u003e\u003c/span\u003e    \u003cspan class=\"kd\"\u003evar\u003c/span\u003e \u003cspan class=\"nx\"\u003econtent\u003c/span\u003e \u003cspan class=\"kt\"\u003estring\u003c/span\u003e\n    \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"nx\"\u003enotify\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eTemplateType\u003c/span\u003e \u003cspan class=\"o\"\u003e==\u003c/span\u003e \u003cspan class=\"s\"\u003e\u0026#34;markdown\u0026#34;\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"c1\"\u003e// Markdown格式\n\u003c/span\u003e\u003cspan class=\"c1\"\u003e\u003c/span\u003e        \u003cspan class=\"nx\"\u003econtent\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"nx\"\u003efmt\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eSprintf\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e`{\n\u003c/span\u003e\u003cspan class=\"s\"\u003e            \u0026#34;msgtype\u0026#34;: \u0026#34;markdown\u0026#34;,\n\u003c/span\u003e\u003cspan class=\"s\"\u003e            \u0026#34;markdown\u0026#34;: {\n\u003c/span\u003e\u003cspan class=\"s\"\u003e                \u0026#34;content\u0026#34;: \u0026#34;# 自动化巡检结果通知\\n\\n\u0026gt; ### 执行作业：%s\\n\u0026gt; ### 执行时间：%s\\n\u0026gt; ### 执行结果：%s\\n\\n### **异常项列表：**\\n%s\u0026#34;\n\u003c/span\u003e\u003cspan class=\"s\"\u003e            }\n\u003c/span\u003e\u003cspan class=\"s\"\u003e        }`\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n            \u003cspan class=\"nx\"\u003ejobExecution\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eExecutionJobName\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n            \u003cspan class=\"nx\"\u003ejobExecution\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eEndTime\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eFormat\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;2006-01-02 15:04:05\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e),\u003c/span\u003e\n            \u003cspan class=\"nx\"\u003esummary\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n            \u003cspan class=\"nf\"\u003eformatAbnormalItems\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003eabnormalItems\u003c/span\u003e\u003cspan class=\"p\"\u003e))\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e \u003cspan class=\"k\"\u003eelse\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"c1\"\u003e// 文本格式\n\u003c/span\u003e\u003cspan class=\"c1\"\u003e\u003c/span\u003e        \u003cspan class=\"nx\"\u003econtent\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"nx\"\u003efmt\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eSprintf\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e`{\n\u003c/span\u003e\u003cspan class=\"s\"\u003e            \u0026#34;msgtype\u0026#34;: \u0026#34;text\u0026#34;,\n\u003c/span\u003e\u003cspan class=\"s\"\u003e            \u0026#34;text\u0026#34;: {\n\u003c/span\u003e\u003cspan class=\"s\"\u003e                \u0026#34;content\u0026#34;: \u0026#34;巡检结果通知\\n执行作业：%s\\n执行时间：%s\\n执行结果：%s\\n\\n异常项列表：\\n%s\u0026#34;\n\u003c/span\u003e\u003cspan class=\"s\"\u003e            }\n\u003c/span\u003e\u003cspan class=\"s\"\u003e        }`\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n            \u003cspan class=\"nx\"\u003ejobExecution\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eExecutionJobName\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n            \u003cspan class=\"nx\"\u003ejobExecution\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eEndTime\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eFormat\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;2006-01-02 15:04:05\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e),\u003c/span\u003e\n            \u003cspan class=\"nx\"\u003esummary\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n            \u003cspan class=\"nf\"\u003eformatAbnormalItemsText\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003eabnormalItems\u003c/span\u003e\u003cspan class=\"p\"\u003e))\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n    \u003cspan class=\"c1\"\u003e// 发送通知\n\u003c/span\u003e\u003cspan class=\"c1\"\u003e\u003c/span\u003e    \u003cspan class=\"nx\"\u003ectx\u003c/span\u003e \u003cspan class=\"o\"\u003e:=\u003c/span\u003e \u003cspan class=\"nx\"\u003econtext\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eBackground\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\n    \u003cspan class=\"nx\"\u003esendParams\u003c/span\u003e \u003cspan class=\"o\"\u003e:=\u003c/span\u003e \u003cspan class=\"nx\"\u003esender\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eSendParams\u003c/span\u003e\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"nx\"\u003eNoticeType\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"nx\"\u003enotify\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eType\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n        \u003cspan class=\"nx\"\u003eNoticeId\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e   \u003cspan class=\"nx\"\u003efmt\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eSprintf\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;%d\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nx\"\u003enotify\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eID\u003c/span\u003e\u003cspan class=\"p\"\u003e),\u003c/span\u003e\n        \u003cspan class=\"nx\"\u003eNoticeName\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"nx\"\u003enotify\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eName\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n        \u003cspan class=\"nx\"\u003eHook\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e       \u003cspan class=\"nx\"\u003enotify\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eAddress\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n        \u003cspan class=\"nx\"\u003eContent\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e    \u003cspan class=\"nx\"\u003econtent\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n    \u003cspan class=\"nx\"\u003eerr\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"nx\"\u003esender\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eSender\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"o\"\u003e\u0026amp;\u003c/span\u003e\u003cspan class=\"nx\"\u003ectx\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nx\"\u003esendParams\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"nx\"\u003eerr\u003c/span\u003e \u003cspan class=\"o\"\u003e!=\u003c/span\u003e \u003cspan class=\"kc\"\u003enil\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"nx\"\u003eglobal\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eGVA_LOG\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eError\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;发送巡检通知失败\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nx\"\u003ezap\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eError\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003eerr\u003c/span\u003e\u003cspan class=\"p\"\u003e))\u003c/span\u003e\n        \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n    \u003cspan class=\"nx\"\u003eglobal\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eGVA_LOG\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eInfo\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;发送巡检通知成功\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n        \u003cspan class=\"nx\"\u003ezap\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eString\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;jobName\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nx\"\u003ejobExecution\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eExecutionJobName\u003c/span\u003e\u003cspan class=\"p\"\u003e),\u003c/span\u003e\n        \u003cspan class=\"nx\"\u003ezap\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eString\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;summary\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nx\"\u003esummary\u003c/span\u003e\u003cspan class=\"p\"\u003e))\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp data-pid=\"5Bhq4wgW\"\u003e（4）PDF导出是用\u003ccode\u003ewkhtmltopdf\u003c/code\u003e实现，该包依赖服务器上的\u003ccode\u003ewkhtmltopdf\u003c/code\u003e命令。\u003c/p\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode class=\"language-go\"\u003e\u003cspan class=\"kd\"\u003efunc\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003ejobExecutionService\u003c/span\u003e \u003cspan class=\"o\"\u003e*\u003c/span\u003e\u003cspan class=\"nx\"\u003eJobExecutionService\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"nf\"\u003eGeneratePDF\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003ejobExecution\u003c/span\u003e \u003cspan class=\"o\"\u003e*\u003c/span\u003e\u003cspan class=\"nx\"\u003eAutoInspection\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eJobExecution\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kt\"\u003estring\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"kt\"\u003eerror\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n\n    \u003cspan class=\"nx\"\u003epdf\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nx\"\u003eerr\u003c/span\u003e \u003cspan class=\"o\"\u003e:=\u003c/span\u003e \u003cspan class=\"nx\"\u003ewkhtmltopdf\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eNewPDFGenerator\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\n    \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"nx\"\u003eerr\u003c/span\u003e \u003cspan class=\"o\"\u003e!=\u003c/span\u003e \u003cspan class=\"kc\"\u003enil\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"nx\"\u003eglobal\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eGVA_LOG\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eError\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;PDF生成器初始化失败\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nx\"\u003ezap\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eError\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003eerr\u003c/span\u003e\u003cspan class=\"p\"\u003e))\u003c/span\u003e\n        \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"s\"\u003e\u0026#34;\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nx\"\u003eerr\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n    \u003cspan class=\"c1\"\u003e// 设置全局选项\n\u003c/span\u003e\u003cspan class=\"c1\"\u003e\u003c/span\u003e    \u003cspan class=\"nx\"\u003epdf\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eDpi\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eSet\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"mi\"\u003e300\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"nx\"\u003epdf\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eOrientation\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eSet\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003ewkhtmltopdf\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eOrientationPortrait\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"nx\"\u003epdf\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003ePageSize\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eSet\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003ewkhtmltopdf\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003ePageSizeA4\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"nx\"\u003epdf\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eMarginTop\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eSet\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"mi\"\u003e20\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"nx\"\u003epdf\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eMarginBottom\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eSet\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"mi\"\u003e20\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"nx\"\u003epdf\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eMarginLeft\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eSet\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"mi\"\u003e20\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"nx\"\u003epdf\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eMarginRight\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eSet\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"mi\"\u003e20\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\n    \u003cspan class=\"c1\"\u003e// 渲染HTML模板\n\u003c/span\u003e\u003cspan class=\"c1\"\u003e\u003c/span\u003e    \u003cspan class=\"nx\"\u003ehtmlContent\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nx\"\u003eerr\u003c/span\u003e \u003cspan class=\"o\"\u003e:=\u003c/span\u003e \u003cspan class=\"nx\"\u003ejobExecutionService\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003erenderHTMLTemplate\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003ejobExecution\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"nx\"\u003eerr\u003c/span\u003e \u003cspan class=\"o\"\u003e!=\u003c/span\u003e \u003cspan class=\"kc\"\u003enil\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"nx\"\u003eglobal\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eGVA_LOG\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eError\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;HTML模板渲染失败\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nx\"\u003ezap\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eError\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003eerr\u003c/span\u003e\u003cspan class=\"p\"\u003e))\u003c/span\u003e\n        \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"s\"\u003e\u0026#34;\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nx\"\u003eerr\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n    \u003cspan class=\"c1\"\u003e// 创建一个页面并添加到生成器\n\u003c/span\u003e\u003cspan class=\"c1\"\u003e\u003c/span\u003e    \u003cspan class=\"nx\"\u003epage\u003c/span\u003e \u003cspan class=\"o\"\u003e:=\u003c/span\u003e \u003cspan class=\"nx\"\u003ewkhtmltopdf\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eNewPageReader\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003ebytes\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eNewBufferString\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003ehtmlContent\u003c/span\u003e\u003cspan class=\"p\"\u003e))\u003c/span\u003e\n    \u003cspan class=\"nx\"\u003epdf\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eAddPage\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003epage\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\n    \u003cspan class=\"c1\"\u003e// 生成PDF\n\u003c/span\u003e\u003cspan class=\"c1\"\u003e\u003c/span\u003e    \u003cspan class=\"nx\"\u003eerr\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"nx\"\u003epdf\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eCreate\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\n    \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"nx\"\u003eerr\u003c/span\u003e \u003cspan class=\"o\"\u003e!=\u003c/span\u003e \u003cspan class=\"kc\"\u003enil\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"s\"\u003e\u0026#34;\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nx\"\u003eerr\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n    \u003cspan class=\"nx\"\u003ebasePath\u003c/span\u003e \u003cspan class=\"o\"\u003e:=\u003c/span\u003e \u003cspan class=\"s\"\u003e\u0026#34;uploads/pdf\u0026#34;\u003c/span\u003e\n    \u003cspan class=\"c1\"\u003e// 创建目录（如果不存在）\n\u003c/span\u003e\u003cspan class=\"c1\"\u003e\u003c/span\u003e    \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"nx\"\u003eerr\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"nx\"\u003eos\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eMkdirAll\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003ebasePath\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"mo\"\u003e0755\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e \u003cspan class=\"nx\"\u003eerr\u003c/span\u003e \u003cspan class=\"o\"\u003e!=\u003c/span\u003e \u003cspan class=\"kc\"\u003enil\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"nx\"\u003eglobal\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eGVA_LOG\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eError\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;创建PDF保存目录失败\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nx\"\u003ezap\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eError\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003eerr\u003c/span\u003e\u003cspan class=\"p\"\u003e))\u003c/span\u003e\n        \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"s\"\u003e\u0026#34;\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nx\"\u003eerr\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n    \u003cspan class=\"nx\"\u003efilename\u003c/span\u003e \u003cspan class=\"o\"\u003e:=\u003c/span\u003e \u003cspan class=\"nf\"\u003egeneratePDFFileName\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003ejobExecution\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"nx\"\u003efilePath\u003c/span\u003e \u003cspan class=\"o\"\u003e:=\u003c/span\u003e \u003cspan class=\"nx\"\u003efilepath\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eJoin\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003ebasePath\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nx\"\u003efilename\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\n    \u003cspan class=\"c1\"\u003e// 3. 保存PDF到文件\n\u003c/span\u003e\u003cspan class=\"c1\"\u003e\u003c/span\u003e    \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"nx\"\u003eerr\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"nx\"\u003eos\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eWriteFile\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003efilePath\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nx\"\u003epdf\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eBytes\u003c/span\u003e\u003cspan class=\"p\"\u003e(),\u003c/span\u003e \u003cspan class=\"mo\"\u003e0644\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e \u003cspan class=\"nx\"\u003eerr\u003c/span\u003e \u003cspan class=\"o\"\u003e!=\u003c/span\u003e \u003cspan class=\"kc\"\u003enil\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"nx\"\u003eglobal\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eGVA_LOG\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eError\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;保存PDF文件失败\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nx\"\u003ezap\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eError\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003eerr\u003c/span\u003e\u003cspan class=\"p\"\u003e))\u003c/span\u003e\n        \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"s\"\u003e\u0026#34;\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nx\"\u003eerr\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n    \u003cspan class=\"o\"\u003e...\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\n\n    \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"nx\"\u003edownloadURL\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"kc\"\u003enil\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp data-pid=\"aDAmBVtU\"\u003e以上就是实现巡检的主要代码。\u003c/p\u003e\u003ch3\u003e最后\u003c/h3\u003e\u003cp data-pid=\"MlgBw3-q\"\u003e大部分企业虽然都有监控告警，但是自动化巡检在日常的运维工作中还是必要的，它可以聚合目前系统、集群存在的问题，避免遗漏告警信息。另外，在AI发展迅猛的今天，可以把AI也结合到自动化巡检中，比如在巡检中增加一些AI预测，AI故障诊断、AI根因分析等功能。\u003c/p\u003e","is_labeled":false,"visited_count":57,"thumbnails":["https://pic1.zhimg.com/v2-0d8094a48c965e9e28c819213050a1a1.jpg?source=7e7ef6e2\u0026needBackground=1","https://picx.zhimg.com/50/v2-f15609d610572d9a0d0dd8f03176d54e_720w.jpg?source=b6762063","https://picx.zhimg.com/50/v2-d29167780962b773462159766651240e_720w.jpg?source=b6762063"],"favorite_count":3,"article_type":"normal","is_navigator":false,"navigator_vote":false,"vote_next_step":"vote"},"brief":"{\"source\": \"TS\", \"type\": \"article\", \"id\": 1921598786490333168}","attached_info":"CqAMCMuWuZCFn/rsoAEQBxoJMjU5NTg3MjkyILv+88IGKAAwAEBISiMKGFRTX1NPVVJDRV9XQVJNX1VQX0JPT1NUMhIBMBgAIAA6AEovCiRUU19TT1VSQ0VfV0FSTVVQX1RXT1RPV0VSX0VYUFYyX1RFWFQSATAYACAAOgBiIGIzZThiOWYwYTJjMTUyMzVkMjBiZjdiMDcxYWJjZmE1chMxOTIxNTk4Nzg2NDkwMzMzMTY4ggFfaHR0cHM6Ly9waWMxLnpoaW1nLmNvbS92Mi0wZDgwOTRhNDhjOTY1ZTllMjhjODE5MjEzMDUwYTFhMS5qcGc/c291cmNlPTdlN2VmNmUyJm5lZWRCYWNrZ3JvdW5kPTGqAQlyZWNvbW1lbmTCASAxNWQ4MTZmZmUyZWRkNzdkNGQ0ZmRiNzBlOTVkOGQ5NvIBCggMEgZOb3JtYWzyASgIChIkYjIwYzZhY2MtYTQ3Ny00OTc1LWE5NGYtODg3YjA3Y2FlMTZi8gEGCAsSAjEzggIAiAKXotn0+jKSAiAxNWQ4MTZmZmUyZWRkNzdkNGQ0ZmRiNzBlOTVkOGQ5NpoCAMoCFlNob3JJbnRlcmVzdFdlaWdodFJ1bGXKAhVVc2VyTGNuRXhpdFdlaWdodFJ1bGXaAhhUU19TT1VSQ0VfV0FSTV9VUF9CT09TVDLoAgP6AgtOT1JNQUxfRkxPV4oDIGRjMjNlYTM2NjdkNDRiNTlhYTY0YjdiMDczYTIxMTJkmgMNCgJ2MhAAGgVvdGhlcqgDOdgDAOoDLmNvbnRlbnRXYXJtdXBUd29Ub3dlclR2cFRleHRCb29zdEV4cFYyUmVjYWxsZXL6A48GEgxVTktOT1dOX01PREUgACoNTk9fSU1BR0VfTU9ERTotCAMQ5gMY/AciI3YyLTIyOTVhNmQxNTNhYzhlYWI3YzI2YTU2YjYyNThkYWQ2Oi0IAhCzBxivAiIjdjItNWRjYmJhODBkNjdhY2ZmM2VmYTBhM2I5NjlkYTUwNjI6LQgCELIMGMoCIiN2Mi1hMTBmZTg1OGU4NDIwYjg4M2NmYjk0YmE2ZDcxYjBmYzotCAIQswcY5AQiI3YyLTI3OTExNThhMmY3Y2JmNTI5NzA4ZDRlNzI0ZGI5NzEzOi0IAhDiDBjXBCIjdjItYzBmOWJkYWFjMDhiMjVlMWFjYTdkNTkxYzZiYjE5MjQ6LQgCEKwHGOoBIiN2Mi0zOTQzMWY3YTk4ZDFiMGExNTEyOTM2YzQxMWI3NmQwYTotCAIQzwkYlgEiI3YyLWU0M2IwYjE5ZDhmOWIyZjBhN2JmM2ZlOTgyMGVhNTRiOi0IAhC8BxjXAiIjdjItMTg2YTEzZWM3Njk5MTFhNDAwODQ0ZWRkY2FkYWZjODg6LQgCEOEKGNsBIiN2Mi05YTk1NmEyMDE0YTNlZjY3ZTNhN2U3ZjllZDViOTk1ODotCAIQrgcYzwQiI3YyLTZjMGI5OTU5MDQ2NmE4YjMwYTc1NTgwZjQ2MWU0MDEwOi0IAhDnCxjzAiIjdjItMTgwOGFjYTU5YjhhYmU5MmZhNjQyMzIwMjEzNzJiZmQ6LQgCEO0JGOwBIiN2Mi1lNjg3ZDAwMDA4YWQ5OGRhNmU0MGM0YWM4NTNlNWFmMDotCAIQmQkYoQUiI3YyLWY4MjI0NjQ0NmY0MTMxMjliZGJjNzA3MTFhZDVhYTIzOi0IAhCBBhjkBCIjdjItNTFjZWIyYjM2NzA3YjA0MjAxMDk1NTkyZDAxNmQyNjA6LQgCEPoHGIwCIiN2Mi1lY2MxZjM0OTcyNjU4M2M0ZTJlZDcyMWJhYWFlOWFiOTotCAMQgAwY4AYiI3YyLTBkODA5NGE0OGM5NjVlOWUyOGM4MTkyMTMwNTBhMWExgAQAiAQAkgQGTm9ybWFsmgQBM6AEAKgEALAEALoEAmFpwgQDNDAwyAQA0gQP5o6o6I2Q5bey5pu05paw2AQA8AQA+QQAAABAR/F2P4EFAAAAAAAAAACJBRuq4RQTVcw/kgUAmgUDZGZ0ogUDZGZ0sgUBMbkFAAAAAAAAAADQBQDgBQDoBQDwBQ2QBgCgBkioBgGSAi4KCTI1OTU4NzI5MhITMTkyMTU5ODc4NjQ5MDMzMzE2OBgHIgpJTUFHRV9URVhU","action_card":false},{"id":"73_1750980776.400","type":"feed","offset":73,"verb":"TOPIC_ACKNOWLEDGED_ANSWER","created_time":1750980776,"updated_time":1750980776,"target":{"id":"1921559282299696753","type":"answer","url":"https://api.zhihu.com/answers/1921559282299696753","author":{"id":"12f467db6e420803a16c32e873bcdc8d","url":"https://api.zhihu.com/people/12f467db6e420803a16c32e873bcdc8d","user_type":"people","url_token":"an-sheng-qiang-14","name":"安小强","headline":"专注于AI领域; 大模型炼丹师; AI Agent; ","avatar_url":"https://picx.zhimg.com/50/v2-199c6bb0736b2b896458ab1b2fc1ae46_l.jpg?source=b6762063","is_org":false,"gender":1,"followers_count":445,"is_following":false,"is_followed":false},"created_time":1750915433,"updated_time":1750915433,"voteup_count":12,"thanks_count":1,"comment_count":1,"is_copyable":false,"question":{"id":"1921204517170537729","type":"question","url":"https://api.zhihu.com/questions/1921204517170537729","author":{"id":"a1cdaa3353c17f8cc92042efd18d3da1","url":"https://api.zhihu.com/people/a1cdaa3353c17f8cc92042efd18d3da1","user_type":"people","url_token":"hongdi-10","name":"holiday111","headline":"菜鸡","avatar_url":"https://picx.zhimg.com/50/v2-20c216f8ba404461765c47855e1a68ef_l.jpg?source=b6762063","is_org":false,"gender":-1,"followers_count":14,"is_following":false,"is_followed":false},"title":"谷歌推出能本地运行的VLA模型 Gemini Robotics On-Device，哪些信息值得关注？","created":1750830851,"answer_count":0,"follower_count":0,"comment_count":0,"bound_topic_ids":[350,5231,666694,2450152,3968657],"is_following":false,"excerpt":"","relationship":{"is_author":false},"detail":"","question_type":"normal"},"thumbnail":"https://pica.zhimg.com/50/v2-ef2bc777f16699ad552bae23f0587164_720w.jpg?source=b6762063","excerpt":"有点小激动，这是首个能在机器人本地运行的“具身”Gemini模型（基于gemini 2.0），我一直期待一个小巧又具身的模型，现在终于来了。 一直以来，大模型常常是在思考，很难触及到真实的物理世界，但具身LLM就不一样了：既能思考，又能干活。   Google的这个Gemini Robotics On-Device很强，官方开源了一个sdk，可以用来训练、部署、评估，访问检查点（里面提到可信人员，不知道啥意思，还没细看）: https://github.com/google-deepmind/gemini-robotics-sdk 还开源了…","excerpt_new":"有点小激动，这是首个能在机器人本地运行的“具身”Gemini模型（基于gemini 2.0），我一直期待一个小巧又具身的模型，现在终于来了。 一直以来，大模型常常是在思考，很难触及到真实的物理世界，但具身LLM就不一样了：既能思考，又能干活。   Google的这个Gemini Robotics On-Device很强，官方开源了一个sdk，可以用来训练、部署、评估，访问检查点（里面提到可信人员，不知道啥意思，还没细看）: https://github.com/google-deepmind/gemini-robotics-sdk 还开源了…","preview_type":"default","preview_text":"","reshipment_settings":"need_payment","content":"\u003cp data-pid=\"HfHRdUKO\"\u003e有点小激动，这是首个能在机器人本地运行的“具身”Gemini模型（基于gemini 2.0），我一直期待一个小巧又具身的模型，现在终于来了。\u003cbr/\u003e一直以来，大模型常常是在思考，很难触及到真实的物理世界，但具身LLM就不一样了：\u003cb\u003e既能思考，又能干活\u003c/b\u003e。\u003cbr/\u003e\u003c/p\u003e\u003cfigure data-size=\"normal\"\u003e\u003cimg src=\"https://picx.zhimg.com/v2-8e8eb981948f4491f30b2118be6e6471_1440w.jpg\" data-size=\"normal\" data-rawwidth=\"1222\" data-rawheight=\"686\" data-original-token=\"v2-5230b6ea1711e8b5de16086c5cbc9046\" data-default-watermark-src=\"https://pica.zhimg.com/v2-93b515bcbdaa0a97358c5fa48a4839ce_b.jpg\" class=\"origin_image zh-lightbox-thumb\" width=\"1222\" data-original=\"https://picx.zhimg.com/v2-8e8eb981948f4491f30b2118be6e6471_r.jpg\"/\u003e\u003cfigcaption\u003eGemini Robotics 机械臂\u003c/figcaption\u003e\u003c/figure\u003e\u003cp data-pid=\"XWpA5C7i\"\u003e\u003cbr/\u003eGoogle的这个\u003cb\u003eGemini Robotics On-Device\u003c/b\u003e很强，官方开源了一个sdk，可以用来训练、部署、评估，访问检查点（里面提到可信人员，不知道啥意思，还没细看）: \u003ca href=\"https://link.zhihu.com/?target=https%3A//github.com/google-deepmind/gemini-robotics-sdk\" class=\" external\" target=\"_blank\" rel=\"nofollow noreferrer\"\u003e\u003cspan class=\"invisible\"\u003ehttps://\u003c/span\u003e\u003cspan class=\"visible\"\u003egithub.com/google-deepm\u003c/span\u003e\u003cspan class=\"invisible\"\u003eind/gemini-robotics-sdk\u003c/span\u003e\u003cspan class=\"ellipsis\"\u003e\u003c/span\u003e\u003c/a\u003e\u003cbr/\u003e还开源了一个物理仿真环境的库：\u003ca href=\"https://link.zhihu.com/?target=https%3A//github.com/google-deepmind/aloha_sim\" class=\" external\" target=\"_blank\" rel=\"nofollow noreferrer\"\u003e\u003cspan class=\"invisible\"\u003ehttps://\u003c/span\u003e\u003cspan class=\"visible\"\u003egithub.com/google-deepm\u003c/span\u003e\u003cspan class=\"invisible\"\u003eind/aloha_sim\u003c/span\u003e\u003cspan class=\"ellipsis\"\u003e\u003c/span\u003e\u003c/a\u003e\u003cbr/\u003e这是首个能在机器人本地（如NVIDIA Jetson）高效运行的通用视觉-语言-动作（VLA）大模型。\u003cbr/\u003e\u003cbr/\u003e\u003cbr/\u003e从事LLM、AI Agent和RAG多年，我深刻理解将大模型能力赋予物理实体的难度和意义。谷歌这次发布的Gemini Robotics On-Device（以下简称本地Gemini），确实带来了值得所有AI和机器人从业者关注的关键信息。\u003cbr/\u003e\u003cbr/\u003e\u003cb\u003e1.  能本地运行：\u003c/b\u003e \u003c/p\u003e\u003cp data-pid=\"dDoDZvWx\"\u003e以往强大的具身模型如PaLM-E，动辄数千亿参数，必须依赖云端算力，导致延迟高、依赖网络、隐私风险大。本地Gemini的关键在于，经过深度优化（包括模型结构精简、算子优化、量化等），它能在NVIDIA Jetson Orin这种嵌入式平台上流畅运行（最低要求8GB内存，优化支持AGX Orin 64GB/NX 16GB）。\u003c/p\u003e\u003cp data-pid=\"_TfPdjTq\"\u003e这意味着机器人本体只需搭载一块Jetson模块，就能独立承载这个能“看、想、动”的VLA大脑。带来的直接好处是：毫秒级实时响应（避障、交互必备）、无网/弱网环境可靠工作（野外、矿井、工厂）、数据不出设备（家庭、医疗隐私保障）、真正自主性（不惧云端故障）。\u003cbr/\u003e\u003c/p\u003e\u003cfigure data-size=\"normal\"\u003e\u003cimg src=\"https://pic2.zhimg.com/v2-74cb99f853cf473c1bd4793191297da7_1440w.jpg\" data-size=\"normal\" data-rawwidth=\"1868\" data-rawheight=\"1314\" data-original-token=\"v2-807f11d36100ff088859572d271f42cb\" data-default-watermark-src=\"https://pic4.zhimg.com/v2-c8110de4b4db15f7c236892327fa70bb_b.jpg\" class=\"origin_image zh-lightbox-thumb\" width=\"1868\" data-original=\"https://pic2.zhimg.com/v2-74cb99f853cf473c1bd4793191297da7_r.jpg\"/\u003e\u003cfigcaption\u003eGemini Robotics具身智能整体概览\u003c/figcaption\u003e\u003c/figure\u003e\u003cp class=\"ztext-empty-paragraph\"\u003e\u003cbr/\u003e\u003c/p\u003e\u003ch2\u003e\u003cb\u003e2.  能力强悍\u003c/b\u003e\u003c/h2\u003e\u003cp data-pid=\"bv9mJ9q6\"\u003e\u003cb\u003e泛化能力突出。\u003c/b\u003e 这不是个阉割版。它基于Gemini 2.0的多模态基础，继承了其强大的视觉理解、语义推理和世界知识。输入摄像头画面和自然语言指令，它能直接输出底层的机器人关节控制序列（如Franka机械臂的关节角度），形成“感知-认知-动作”的闭环。\u003c/p\u003e\u003cp data-pid=\"LhIA0lih\"\u003e官方演示中，它成功完成了折叠衣物、整理手提袋这类需要复杂规划和手眼协调的任务，甚至攻克了机器人界的经典难题——\u003cb\u003e系鞋带\u003c/b\u003e，展现了惊人的灵巧度。更关键的是其泛化能力：能理解并执行从未见过的物体和场景下的新指令（如“把魔方放进那个蓝色布袋”），并能根据环境变化（如物体被移动）或人的中途指令（如“小心别碰倒杯子”）实时调整动作。在多项基准测试中，其任务泛化能力据称达到了此前最好VLA模型的两倍以上。\u003cbr/\u003e\u003c/p\u003e\u003cfigure data-size=\"normal\"\u003e\u003cimg src=\"https://pic3.zhimg.com/v2-b5b8cd4890351ddb9ae778511e2d95f8_1440w.jpg\" data-size=\"normal\" data-rawwidth=\"1226\" data-rawheight=\"688\" data-original-token=\"v2-04e127d4a7e6abb99dd9a9da34b6bf15\" data-default-watermark-src=\"https://pic4.zhimg.com/v2-a96cb8a2bdc6fb738e52bae740dccec1_b.jpg\" class=\"origin_image zh-lightbox-thumb\" width=\"1226\" data-original=\"https://pic3.zhimg.com/v2-b5b8cd4890351ddb9ae778511e2d95f8_r.jpg\"/\u003e\u003cfigcaption\u003eGemini Robotics机器人正在听指令干活\u003c/figcaption\u003e\u003c/figure\u003e\u003cp data-pid=\"Kd-0ejaz\"\u003e\u003cbr/\u003e\u003cbr/\u003e\u003cb\u003e3. 跨平台通用 + 开放微调\u003c/b\u003e\u003c/p\u003e\u003cp data-pid=\"99WmJgAj\"\u003e没有绑定特定机器人。虽然主要在Google的ALOHA双臂机器人上训练，但已成功适配到Franka Emika双臂机器人和Apptronik人形机器人Apollo上。这证明了其具身智能能理解不同形态机器人的“身体”并生成适配的控制指令。它是Google首个开放给开发者微调的机器人大模型（想要试试的可以去github上找：gemini-robotics-sdk ）。\u003c/p\u003e\u003cp data-pid=\"_JRJVhFa\"\u003e开箱即用，对于特定任务（比如工厂里某个特殊零件的装配），如果效果不理想，开发者只需提供50-100次该任务的示范数据（如遥控操作记录），就能对模型进行轻量微调，使其快速掌握新技能。这种“小样本任务适应”能力大幅降低了机器人学习新技能的成本和周期，是实用化的关键。\u003cbr/\u003e\u003cbr/\u003e\u003c/p\u003e\u003ch2\u003e\u003cb\u003e4.  \u003c/b\u003e对比其他模型\u003c/h2\u003e\u003cp data-pid=\"yApbtV7a\"\u003ePaLM-E (谷歌)\u003cb\u003e：\u003c/b\u003e 更侧重超大模型的知识与推理验证，云端运行，输出文本需二次转换，无法本地实时控制。\u003cbr/\u003e RT-2 / RT-X (谷歌)\u003cb\u003e：\u003c/b\u003e 前代VLA模型，性能优秀但闭源，未开放微调，且对云端算力依赖较大。最新开源的OpenVLA 7B在多项任务上已超越闭源的RT-2-X (55B)，体现了开源社区的活力。\u003cbr/\u003e OpenVLA 7B (开源)\u003cb\u003e：\u003c/b\u003e 当前开源VLA的标杆，门槛低、社区活跃，在29项任务上表现出色甚至超越RT-2-X。其优势是完全开源易得，但绝对性能（尤其在复杂语义理解和超高精度操作上）和官方支持的硬件平台广度可能仍逊于本地Gemini。\u003cbr/\u003e Fuyu-8B (Adept)\u003cb\u003e：\u003c/b\u003e 优秀的多模态模型，擅长数字世界理解（如UI操作），架构轻快可本地运行，但非为物理机器人控制设计，缺乏对实体操作和力学的专门优化。\u003cbr/\u003e\u003cbr/\u003e\u003cbr/\u003e\u003cb\u003e本地Gemini的核心优势在于：顶尖性能 + 本地离线运行 + 直接动作输出 + 跨平台通用 + 开放微调。\u003c/b\u003e 它代表了将最强大模型能力“塞进”实体机器人的前沿。\u003cbr/\u003e\u003cbr/\u003e\u003cbr/\u003e\u003cb\u003e总结：\u003c/b\u003e 很强大。作为相关从业者，我非常期待它能早日全面开放，推动整个生态的爆发。\u003cbr/\u003e我是安小强，专注LLM、AI Agent与RAG，欢迎交流讨论，求个关注共同探索AI前沿。\u003c/p\u003e","relationship":{"is_thanked":false,"is_nothelp":false,"voting":0},"is_labeled":false,"visited_count":812,"thumbnails":["https://picx.zhimg.com/50/v2-ef2bc777f16699ad552bae23f0587164_720w.jpg?source=b6762063","https://picx.zhimg.com/50/v2-9b5e7daab9832b165bd17ae4347f3aa4_720w.jpg?source=b6762063","https://pic1.zhimg.com/50/v2-1d0df24df032d7a0c8daf711a8d0337d_720w.jpg?source=b6762063"],"favorite_count":47,"answer_type":"normal","is_navigator":false,"navigator_vote":false,"vote_next_step":"vote"},"brief":"{\"source\": \"TS\", \"type\": \"answer\", \"id\": 1921559282299696753}","attached_info":"CrkJCMuWuZCFn/rsoAEQBBoJNzM0MTAwMjk0IOmy88IGKAwwAUBJSjsKH1RTX1NPVVJDRV9DT05UUk9MX0lOVEVSRVNUX1dPUkQSEjI4ODIzMDM3NjE1NDc0MTc2MxgAIAA6AEoxCiBUU19TT1VSQ0VfQ09OVFJPTF9JTlRFUkVTVF9CQVlFUxIHMTM4MDAyNRgAIAA6AEpKCi1UU19TT1VSQ0VfQ09OVFJPTF9JTlRFUkVTVF9PUEVSQVRPUl8yMElNUF9BTEwSEzM0NTg3NjQ1MTM4MjMzODkyMjYYACAAOgBKMAobVFNfU09VUkNFX0ZFRURSRV9USU1FTElORVNTEgEwGAAgADoKeyJyYXciOiIifUpFCilUU19TT1VSQ0VfQ09OVFJPTF9JTlRFUkVTVF9SRUFMVElNRV9UT1BJQxISMjg4MjMwMzc2MTU0NzQxNzYzGAAgADoAWgkxMTU1NDU1MTFiIGIzZThiOWYwYTJjMTUyMzVkMjBiZjdiMDcxYWJjZmE1chMxOTIxNTU5MjgyMjk5Njk2NzUzigETMTkyMTIwNDUxNzE3MDUzNzcyOaoBCXJlY29tbWVuZMIBIDEyZjQ2N2RiNmU0MjA4MDNhMTZjMzJlODczYmNkYzhk8gEKCAwSBk5vcm1hbPIBKAgKEiRjY2Y0MDI1Mi05ZDRkLTRhYjctYjEwZS00Yzg1MmNhMTllZmLyAQYICxICMTOCAgCIApei2fT6MpICIDEyZjQ2N2RiNmU0MjA4MDNhMTZjMzJlODczYmNkYzhkmgIAygIWU2hvckludGVyZXN0V2VpZ2h0UnVsZcoCFVVzZXJMY25FeGl0V2VpZ2h0UnVsZcoCFkZlZWRDb250cm9sQnJlYWtJblJ1bGXaAh9UU19TT1VSQ0VfQ09OVFJPTF9JTlRFUkVTVF9XT1JE6AIE+gILTk9STUFMX0ZMT1eKAyBkYzIzZWEzNjY3ZDQ0YjU5YWE2NGI3YjA3M2EyMTEyZJoDDQoCdjIQABoFb3RoZXKoA6wG2AMA6gMTQ29udHJvbEludGVyZXN0V29yZPoDrAESDFVOS05PV05fTU9ERSAAKg1OT19JTUFHRV9NT0RFOi0IBBDGCRiuBSIjdjItNTIzMGI2ZWExNzExZThiNWRlMTYwODZjNWNiYzkwNDY6LQgEEMwOGKIKIiN2Mi04MDdmMTFkMzYxMDBmZjA4ODg1OTU3MmQyNzFmNDJjYjotCAIQygkYsAUiI3YyLTA0ZTEyN2Q0YTdlNmFiYjk5ZGQ5YTlkYTM0YjZiZjE1gAQAiAQAkgQGTm9ybWFsmgQBNKAEAKgEALAEALoEBm1hbnVhbMIEAzE1N8gEANIED+aOqOiNkOW3suabtOaWsNgEAPAEk8zBAvkEAAAA4IOOgj+BBQAAAAAAAAAAiQUbquEUE1XMP5IFAJoFA2RmdKIFA2RmdLIFATG5BQAAAAAAAAAA0AUa4AUA6AUA8AUNigZOCkMI4IP2BhIn6LC35q2M5o6o5Ye66IO95pys5Zyw6L+Q6KGM55qEVkxB5qih5Z6LGIei7sIGIM2EPSgEMKerjDc4AEAAEgcIARUAAIA/kAYAoAZJqAYDkgIuCgk3MzQxMDAyOTQSEzE5MjE1NTkyODIyOTk2OTY3NTMYBCIKSU1BR0VfVEVYVA==","action_card":false},{"id":"74_1750980776.540","type":"feed","offset":74,"verb":"TOPIC_ACKNOWLEDGED_ANSWER","created_time":1750980776,"updated_time":1750980776,"target":{"id":"128445814960","type":"answer","url":"https://api.zhihu.com/answers/128445814960","author":{"id":"15c5d0af009c0ecff32f4e15352cca5f","url":"https://api.zhihu.com/people/15c5d0af009c0ecff32f4e15352cca5f","user_type":"people","url_token":"fei-fei-hang-yan","name":"飞飞航燕","headline":"","avatar_url":"https://picx.zhimg.com/50/v2-abed1a8c04700ba7d72b45195223e0ff_l.jpg?source=b6762063","is_org":false,"gender":-1,"followers_count":106,"is_following":false,"is_followed":false},"created_time":1742459818,"updated_time":1742459818,"voteup_count":2360,"thanks_count":41,"comment_count":448,"is_copyable":true,"question":{"id":"406640394","type":"question","url":"https://api.zhihu.com/questions/406640394","author":{"id":"f932d96ba6083f2a29b7f08ea004b9b9","url":"https://api.zhihu.com/people/f932d96ba6083f2a29b7f08ea004b9b9","user_type":"people","url_token":"zu-sa-la-82","name":"组撒啦","headline":"","avatar_url":"https://pic1.zhimg.com/50/v2-8ec784707e989adb5676bf1ab4b5096d_l.jpg?source=b6762063","is_org":false,"gender":-1,"followers_count":363,"is_following":false,"is_followed":false},"title":"为啥雄鹿一年后就不要易建联了？","created":1594620365,"answer_count":0,"follower_count":0,"comment_count":8,"bound_topic_ids":[744,4196,35069],"is_following":false,"excerpt":"","relationship":{"is_author":false},"detail":"","question_type":"normal"},"excerpt":"因为雄鹿发现他的实力根本打不来nba，这点他自己未必清楚，但他的经纪人费根绝对清楚。在cba的最后一个赛季被从国外好几年没球打而回国的王治郅带领的81队4比1干掉，经纪人怕他露馅，试训的时候不敢真人对抗然后搬条椅子充当防守球员，人送外号chairman，把雄鹿忽悠的用6号签拿下他，又怕打几场就露馅，就威胁球队给首发场次保证，不然宁愿不去nba，雄鹿怕自己的6号签白白浪费，不得不同意，结果就是更强的无毛大侠被强行当了大…","excerpt_new":"因为雄鹿发现他的实力根本打不来nba，这点他自己未必清楚，但他的经纪人费根绝对清楚。在cba的最后一个赛季被从国外好几年没球打而回国的王治郅带领的81队4比1干掉，经纪人怕他露馅，试训的时候不敢真人对抗然后搬条椅子充当防守球员，人送外号chairman，把雄鹿忽悠的用6号签拿下他，又怕打几场就露馅，就威胁球队给首发场次保证，不然宁愿不去nba，雄鹿怕自己的6号签白白浪费，不得不同意，结果就是更强的无毛大侠被强行当了大…","preview_type":"default","preview_text":"","reshipment_settings":"allowed","content":"\u003cp data-pid=\"hY10R_9x\"\u003e因为雄鹿发现他的实力根本打不来nba，这点他自己未必清楚，但他的经纪人费根绝对清楚。在cba的最后一个赛季被从国外好几年没球打而回国的王治郅带领的81队4比1干掉，经纪人怕他露馅，试训的时候不敢真人对抗然后搬条椅子充当防守球员，人送外号chairman，把雄鹿忽悠的用6号签拿下他，又怕打几场就露馅，就威胁球队给首发场次保证，不然宁愿不去nba，雄鹿怕自己的6号签白白浪费，不得不同意，结果就是更强的无毛大侠被强行当了大半个赛季的替补，易建联也被调侃中国近代一个人让美国人签下不平等条约的中国人。新秀赛季打完，发现他要防守没防守，要对抗没对抗，要投射没投射，移动速度也不行，吹破天的身体天赋在nba更是不够看，加上他和经纪人的各种骚操作，雄鹿果断将他扫地出门，至于说什么性格问题啥的就别扯了，一个新秀敢联合经纪人威胁球队，你说他腼腆？鬼才信，其次，他那种操作外人都嗤之以鼻，更别说队友了，不孤立他都算队友大度了\u003c/p\u003e","relationship":{"is_thanked":false,"is_nothelp":false,"voting":0},"is_labeled":false,"visited_count":643351,"favorite_count":298,"answer_type":"normal","is_navigator":false,"navigator_vote":false,"vote_next_step":"vote"},"brief":"{\"source\": \"TS\", \"type\": \"answer\", \"id\": 128445814960}","attached_info":"Cv8FCMuWuZCFn/rsoAEQBBoJNzE5MDE0NTg1IKqn774GKLgSMMADQEpKKAodVFNfU09VUkNFX05FQVJMSU5FX0NPTlRFTlRfVjISATAYACAAOgBKKAoTVFNfU09VUkNFX0ZFRURSRV9WORIBMBgAIAA6CnsicmF3IjoiIn1KMAobVFNfU09VUkNFX0JBU0lDX0lORk9fUkVDQUxMEgEwGAAgADoKeyJyYXciOiIifVoINTI2NDE5NDZiIGIzZThiOWYwYTJjMTUyMzVkMjBiZjdiMDcxYWJjZmE1cgwxMjg0NDU4MTQ5NjCKAQk0MDY2NDAzOTSqAQlyZWNvbW1lbmTCASAxNWM1ZDBhZjAwOWMwZWNmZjMyZjRlMTUzNTJjY2E1ZvIBCggMEgZOb3JtYWzyASgIChIkY2QyZjBjMGUtOWFiNi00YWU2LWIzM2EtZTNmYmZjOTRlMWI28gEGCAsSAjEzggIAiAKXotn0+jKSAiAxNWM1ZDBhZjAwOWMwZWNmZjMyZjRlMTUzNTJjY2E1ZpoCAMoCFlNob3JJbnRlcmVzdFdlaWdodFJ1bGXKAhVVc2VyTGNuRXhpdFdlaWdodFJ1bGXKAhRDb250ZW50QWdlV2VpZ2h0UnVsZdoCHVRTX1NPVVJDRV9ORUFSTElORV9DT05URU5UX1Yy6AIC+gILTk9STUFMX0ZMT1eKAyBkYzIzZWEzNjY3ZDQ0YjU5YWE2NGI3YjA3M2EyMTEyZJoDDQoCdjIQABoFb3RoZXKoA5eiJ9gDAPoDHxIMVU5LTk9XTl9NT0RFIAAqDU5PX0lNQUdFX01PREWABACIBACSBAZOb3JtYWyaBAEyoAQAqAQAsAQAugQGbWFudWFswgQDMTYwyAQA0gQP5o6o6I2Q5bey5pu05paw2AQA8AQA+QQAAAAA2vawP4EFAAAAAAAAAACJBRuq4RQTVcw/kgUAmgUDZGZ0ogUDZGZ0sgUBMbkFAAAAAAAAAADQBQDgBQDoBQDwBQ2QBgCgBkqoBgCSAicKCTcxOTAxNDU4NRIMMTI4NDQ1ODE0OTYwGAQiCklNQUdFX1RFWFQ=","action_card":false},{"id":"75_1750980776.821","type":"feed","offset":75,"verb":"TOPIC_ACKNOWLEDGED_ANSWER","created_time":1750980776,"updated_time":1750980776,"target":{"id":"1916541653054891758","type":"answer","url":"https://api.zhihu.com/answers/1916541653054891758","author":{"id":"b56aafd2ce2d459d2fa4c9f90a215bdb","url":"https://api.zhihu.com/people/b56aafd2ce2d459d2fa4c9f90a215bdb","user_type":"people","url_token":"ruan-you-xun","name":"幼浔","headline":"少欲则心静，心静则事简","avatar_url":"https://pic1.zhimg.com/50/v2-84d413c3b33bab99c1351adcfa7420e2_l.jpg?source=b6762063","is_org":false,"gender":1,"followers_count":7208,"is_following":false,"is_followed":false},"created_time":1749719137,"updated_time":1749719137,"voteup_count":117,"thanks_count":4,"comment_count":5,"is_copyable":true,"question":{"id":"398907117","type":"question","url":"https://api.zhihu.com/questions/398907117","author":{"id":"2d6fcc7c5ad95120f037977bf64ab9d3","url":"https://api.zhihu.com/people/2d6fcc7c5ad95120f037977bf64ab9d3","user_type":"people","url_token":"gcdggddtt","name":"大富豪","headline":"","avatar_url":"https://picx.zhimg.com/50/v2-abed1a8c04700ba7d72b45195223e0ff_l.jpg?source=b6762063","is_org":false,"gender":-1,"followers_count":536,"is_following":false,"is_followed":false},"title":"拥有什么样的性格才能成事？","created":1591061321,"answer_count":0,"follower_count":0,"comment_count":13,"bound_topic_ids":[404,740,5582,16208,208101],"is_following":false,"excerpt":"","relationship":{"is_author":false},"detail":"","question_type":"normal"},"excerpt":"1、能成大事的人都很冷血。真正有权有势的人，牛人，高人，富人，老板，他们脑子里的念头都是很少的，不会随便让念头分散自己的注意力。他们只对自己负责，从不干涉别人的事情。 当一个人变得冷血的时候，他的内心一定会产生更多的能量，而能量多了，自然而然就会吸引更多的财富，因为金钱是有灵性的。 2、对人性的理解非常透切，尤其是对人性的弱点，比如懒惰、贪婪、嫉妒、愤怒等等，且非常善于利用人性的弱点。 总结：料事准…","excerpt_new":"1、能成大事的人都很冷血。真正有权有势的人，牛人，高人，富人，老板，他们脑子里的念头都是很少的，不会随便让念头分散自己的注意力。他们只对自己负责，从不干涉别人的事情。 当一个人变得冷血的时候，他的内心一定会产生更多的能量，而能量多了，自然而然就会吸引更多的财富，因为金钱是有灵性的。 2、对人性的理解非常透切，尤其是对人性的弱点，比如懒惰、贪婪、嫉妒、愤怒等等，且非常善于利用人性的弱点。 总结：料事准…","preview_type":"default","preview_text":"","reshipment_settings":"allowed","content":"\u003cp data-pid=\"e2BVZCla\"\u003e1、能成大事的人都很冷血。真正有权有势的人，牛人，高人，富人，老板，他们脑子里的念头都是很少的，不会随便让念头分散自己的注意力。他们只对自己负责，从不干涉别人的事情。\u003c/p\u003e\u003cp data-pid=\"o_oChTjb\"\u003e\u003cbr/\u003e当一个人变得冷血的时候，他的内心一定会产生更多的能量，而能量多了，自然而然就会吸引更多的财富，因为金钱是有灵性的。\u003cbr/\u003e\u003c/p\u003e\u003cp data-pid=\"HLqIXSbJ\"\u003e2、对人性的理解非常透切，尤其是对人性的弱点，比如懒惰、贪婪、嫉妒、愤怒等等，且非常善于利用人性的弱点。\u003c/p\u003e\u003cp data-pid=\"0-B25Ruf\"\u003e总结：料事准，遇事忍，出手狠，善后稳。\u003c/p\u003e\u003cp class=\"ztext-empty-paragraph\"\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp data-pid=\"RhursAP4\"\u003e3、敢于拥抱成功的人。很认同罗翔老师说过的这句话：你害怕抛头露面，你害怕出丑丢人露面，害怕成为重要人物，害怕承担责任，实际上就是你害怕成功，你害怕成功，怎么可能成功？ \u003c/p\u003e\u003cp class=\"ztext-empty-paragraph\"\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp data-pid=\"uukdsGRN\"\u003e4、零内耗的人。不会让自己的思维反刍，不会对过去过度反思，对未来过度焦虑。 \u003c/p\u003e\u003cp class=\"ztext-empty-paragraph\"\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp data-pid=\"7vBtzblW\"\u003e过多的关注过去或未来其实就是在内耗，能量足的人，都是不纠结不内耗的，即便是反思，也会在吸取教训和总结经验之后停下，不再继续钻牛角尖。\u003c/p\u003e\u003cp class=\"ztext-empty-paragraph\"\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp data-pid=\"AdilU_VN\"\u003e5、不被别人、外物操控大脑。比如某音、某博。懂得自我控制是更爽的事，彻底摆脱了这些外物的操控。 \u003c/p\u003e\u003cp class=\"ztext-empty-paragraph\"\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp data-pid=\"HzatroQm\"\u003e6、低调不炫耀，不懂的东西就空杯心态的虚心探讨学习，不会强装自己很懂的样子，能压低姿态和下面的人相处，持续提升自己。 \u003c/p\u003e\u003cp class=\"ztext-empty-paragraph\"\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp data-pid=\"9jcUrYOI\"\u003e7、精进自己的特长，而不是挣扎在短板上。不要苛求自己变成一个全能的人，那是神不是人，在你擅长的领域持续深耕，挖出来的宝藏，绝对比你费劲心思，扭转自己的弱项更有价值。\u003c/p\u003e\u003cp class=\"ztext-empty-paragraph\"\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp data-pid=\"L1CYJwA6\"\u003e8、能控制情绪，而不是成为情绪的奴隶。生活中出现各种状况，不会条件反应似的一点就爆。他们总是能根据情况，有选择的表现出自己该表现的情绪，而不是事情让他该有的情绪。 \u003c/p\u003e\u003cp class=\"ztext-empty-paragraph\"\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp data-pid=\"rm4gKg4R\"\u003e9、不需要从他人身上获得认同感。无论待人处事，都以“做自己”为原则，别人喜不喜欢都不会影响他对自己的看法，因为他对自己的认同感完全生于自己的内心，而非他人的眼光。 \u003c/p\u003e\u003cp class=\"ztext-empty-paragraph\"\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp data-pid=\"rHMXPvlM\"\u003e10、对自己狠，对别人更狠的人。自己“知行合一”说到做到，拥有超强执行力。对别人也毫不留情，在工作商业的决断上干脆利索，不怒自威。\u003c/p\u003e\u003cp class=\"ztext-empty-paragraph\"\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp data-pid=\"MP7BvVI9\"\u003e11、专注于目标的人。现实中有很多人，你看他一年换五个工作，两年换四个项目，基本上都是没有定性。厉害的人都明白聚焦的重要性，他一定是去持续的做有积累的事情，所谓的厚积薄发。 \u003c/p\u003e\u003cp class=\"ztext-empty-paragraph\"\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp data-pid=\"Ieh7L18d\"\u003e12、胆子足够大。人都是先有胆后有钱，真正能成大事的人也都是勇者无惧，是敢于尝试和挑战的强者，即便遇到再强的对手，面对再大的风险或者遭遇再大的失败，也绝不会弃而逃之。 \u003c/p\u003e\u003cp class=\"ztext-empty-paragraph\"\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp data-pid=\"vXeYygKL\"\u003e13、寡言寡语。心胸浅的人，急于说出“真相”，最后却很可能因为言语，既伤害了别人，也伤害了自己。\u003c/p\u003e\u003cp class=\"ztext-empty-paragraph\"\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp data-pid=\"M7cKcHsn\"\u003e所谓“三思而后行”，就是出言之前，多加思考。城府深的人，往往喜欢沉默，因为他们明白“多言数穷”的道理。\u003c/p\u003e\u003cp class=\"ztext-empty-paragraph\"\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp data-pid=\"AtdoAiKM\"\u003e14、 “世界上最厉害的人，是说起床就起床，说睡觉就睡觉，说做事就做事，说玩就玩，说收心就收心，说不爱就不爱。”\u003c/p\u003e\u003cp class=\"ztext-empty-paragraph\"\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp data-pid=\"qm7-5QRl\"\u003e一定要狠下心来努力变成一个很厉害的人，我自光芒万丈，何须他人半点光。 \u003c/p\u003e\u003cp class=\"ztext-empty-paragraph\"\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp data-pid=\"plKDnXnh\"\u003e15、行动，是打败焦虑最好的办法。当你不知道该做什么的时候，就把手头的每件小事都做好，当你不知道该怎么开始时，就把离你最近的那件事情做好。 \u003c/p\u003e\u003cp class=\"ztext-empty-paragraph\"\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp data-pid=\"3V1C2aGJ\"\u003e16、世上有一条永恒不变的法则，当你不在乎，你就得到。当你变好，你才会遇到更好的。只有当你变强大，你才不害怕孤单。当你不害怕孤单，你才能宁缺毋滥。 \u003c/p\u003e\u003cp class=\"ztext-empty-paragraph\"\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp data-pid=\"36N_ncdt\"\u003e17、摔倒了就自己爬起来，有困难就自己熬过去，受了委屈就自己消化，自己的路自己走，生活的苦自己吃，想要的东西自己买，靠自己长大的人，才会有底气跟这个世界对话。\u003c/p\u003e\u003cp class=\"ztext-empty-paragraph\"\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp data-pid=\"bGmEYClL\"\u003e18、会重复做好一件事情，这个世界上除了天才，其他人之间的差距其实真的不大。唯一的区别就是你做一件事花费了多少的时间和精力，做一遍做不好，那就两遍、五遍、甚至十遍。\u003c/p\u003e\u003cp class=\"ztext-empty-paragraph\"\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp data-pid=\"ArZwI-zv\"\u003e19、只盯结果，对目标负责，再来复盘。不以目标为导向，如同蝼蚁一般，一件事不懂得复盘等于没做，目标和复盘才是一个人成事的关键要素。\u003c/p\u003e\u003cp class=\"ztext-empty-paragraph\"\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp data-pid=\"F8BAM2rs\"\u003e20、沉浸思考。有本事的人往往都能静下来思考，而不是天天看起来充实的忙碌，瞎忙而没有结果。\u003c/p\u003e\u003cp class=\"ztext-empty-paragraph\"\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp data-pid=\"aQQOZbAh\"\u003e很多人为了逃避真正的思考而愿意去做任何事，而真正有本事的人，他看起来是静态的，但大脑在不停运转思考，因为他知道总结复盘很重要，思维缜密，不会停止思考。 \u003c/p\u003e\u003cp class=\"ztext-empty-paragraph\"\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp data-pid=\"UqY0_Qxb\"\u003e21、羞耻心不太重，强者都是我行我素，没有什么羞耻心。不管别人怎么看他，怎么说他，都能心安理得。\u003c/p\u003e\u003cp class=\"ztext-empty-paragraph\"\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp data-pid=\"f7J_CpfL\"\u003e而穷人呢，规矩多，太在意别人的看法，别人说他两句吧，就吃不好睡不好，想想得有多脆弱。过度敏感都是弱者的表现。\u003c/p\u003e\u003cp class=\"ztext-empty-paragraph\"\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp data-pid=\"pJ9J8dIU\"\u003e22、我从未见过一个早起，勤奋，谨慎，诚实的人，抱怨命运不好的。 努力是一件特别需要沉下心来长久坚持的事。\u003c/p\u003e\u003cp class=\"ztext-empty-paragraph\"\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp data-pid=\"lZL58Q_Q\"\u003e它成长的土壤需要一个人单打独斗，忍受无数个孤独和寂寞的日子，心可以碎，手不能停，该干什么干什么，在崩溃中继续前行，这才是一个成年人该有的素养。 \u003c/p\u003e\u003cp class=\"ztext-empty-paragraph\"\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp data-pid=\"STsopThw\"\u003e23、非常自律，因为自律才能掌控自己的人生，也才能影响他人，乃至让他人为我所用，而不自律的人，只会被别人所掌控，城府深，想成大事的人，是绝不允许这种情况出现的。\u003c/p\u003e\u003cp class=\"ztext-empty-paragraph\"\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp data-pid=\"VGBMOzEc\"\u003e24、不需要借助外物来增强自己的自信心。不是每年赚一干万，开着豪车住着别墅才有自信，而是发自内心地接纳真实的自己，自卑个屁，有什么大不了的，都是第一次做人，何必在乎那么多？ \u003c/p\u003e\u003cp class=\"ztext-empty-paragraph\"\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp data-pid=\"05SsKghA\"\u003e25、强大的承受力和忍耐力。面对种种不如意、不公平，还有艰苦的环境和条件，常人会为其所困扰，选择抱怨，或者自暴自弃。\u003c/p\u003e\u003cp class=\"ztext-empty-paragraph\"\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp data-pid=\"fCWzDbdB\"\u003e但真正有本事的高手，却能顽强地承受下来，选择默默地忍受，百折不挠， 永不放弃，在忍耐中迎接机遇的到来。\u003c/p\u003e\u003cp class=\"ztext-empty-paragraph\"\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp data-pid=\"VceQH_DY\"\u003e26、等风来不如去追风，靠别人不如靠自己。去做自己热爱的事情，把生活过成自己想要的样子。 \u003c/p\u003e\u003cp class=\"ztext-empty-paragraph\"\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp data-pid=\"TDSpvuWi\"\u003e27、与人相处的时候，都是懂分寸、知进退，尤其是不会犯“好为人师”的毛病，哪怕你的出发点是好的，是想要指点人家，但人家却只会当成你是在指指点点，只会对你产生厌烦之心。 \u003c/p\u003e\u003cp class=\"ztext-empty-paragraph\"\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp data-pid=\"cI9-ZjUC\"\u003e28、从不会轻易就对人掏心掏肺，关系再好、再亲密，也会有所保留，不会把自己的真实想法全说出来，而是真假参半，真的是为了与人交往，假的是为了避免被人利用。\u003c/p\u003e\u003cp class=\"ztext-empty-paragraph\"\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp data-pid=\"IPP-vehR\"\u003e29、永远不抱怨。一个人成熟的标志，就是把“这件事为什么发生在我身上”的怨念，转变成“这件事为了教会我什么”的觉醒。\u003c/p\u003e\u003cp class=\"ztext-empty-paragraph\"\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp data-pid=\"iwIhdc1-\"\u003e30、拥有超强的执行力。强者的强，大部分不是天生的，而是别人还在抱怨时，他已经开始尝试改变。\u003c/p\u003e\u003cp class=\"ztext-empty-paragraph\"\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp data-pid=\"bJy8_vai\"\u003e好道理的储量其实大家都差不多，核心是执行，对于优质内容的敏感度和超强的执行力，是拉开人们差距的关键。 \u003c/p\u003e\u003cp class=\"ztext-empty-paragraph\"\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp data-pid=\"5MDDXV-G\"\u003e31、有“自我边界”感。朋友总是放你鸽子，超过3次，远离他。不会因为把他当朋友，就一味的原谅对方不合理的行为。你现在的大度，只会成为对方轻视你的借口。\u003c/p\u003e\u003cp class=\"ztext-empty-paragraph\"\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp data-pid=\"q1w_uscR\"\u003e32、他不再为所谓的好的、坏的；弱小的、强大的； 美好的、丑陋的等等这些名相所累，他对于事物的评判标准只会是：他想或不想。\u003c/p\u003e","relationship":{"is_thanked":false,"is_nothelp":false,"voting":0},"is_labeled":false,"visited_count":9255,"favorite_count":173,"answer_type":"normal","is_navigator":false,"navigator_vote":false,"vote_next_step":"vote"},"brief":"{\"source\": \"TS\", \"type\": \"answer\", \"id\": 1916541653054891758}","attached_info":"CroFCMuWuZCFn/rsoAEQBBoJNzMxODYyNzUyIOGwqsIGKHUwBUBLSigKHVRTX1NPVVJDRV9ORUFSTElORV9DT05URU5UX1YyEgEwGAAgADoASigKE1RTX1NPVVJDRV9GRUVEUkVfVjkSATAYACAAOgp7InJhdyI6IiJ9Wgg1MDkyNTAzOWIgYjNlOGI5ZjBhMmMxNTIzNWQyMGJmN2IwNzFhYmNmYTVyEzE5MTY1NDE2NTMwNTQ4OTE3NTiKAQkzOTg5MDcxMTeqAQlyZWNvbW1lbmTCASBiNTZhYWZkMmNlMmQ0NTlkMmZhNGM5ZjkwYTIxNWJkYvIBCggMEgZOb3JtYWzyASgIChIkNWFkNzBjOGMtOGYzYy00ZWU2LTk1Y2EtYTg0Njc2NjUzMWU28gEGCAsSAjEzggIAiAKXotn0+jKSAiBiNTZhYWZkMmNlMmQ0NTlkMmZhNGM5ZjkwYTIxNWJkYpoCAMoCFlNob3JJbnRlcmVzdFdlaWdodFJ1bGXKAhVVc2VyTGNuRXhpdFdlaWdodFJ1bGXaAh1UU19TT1VSQ0VfTkVBUkxJTkVfQ09OVEVOVF9WMugCAvoCC05PUk1BTF9GTE9XigMgZGMyM2VhMzY2N2Q0NGI1OWFhNjRiN2IwNzNhMjExMmSaAw0KAnYyEAAaBW90aGVyqAOnSNgDAPoDHxIMVU5LTk9XTl9NT0RFIAAqDU5PX0lNQUdFX01PREWABACIBACSBAZOb3JtYWyaBAEyoAQAqAQAsAQAugQGbWFudWFswgQDMTcwyAQA0gQP5o6o6I2Q5bey5pu05paw2AQA8AQA+QQAAADgrk6tP4EFAAAAAAAAAACJBRuq4RQTVcw/kgUAmgUDZGZ0ogUDZGZ0sgUBMbkFAAAAAAAAAADQBQDgBQDoBQDwBQ2QBgCgBkuoBgCSAi4KCTczMTg2Mjc1MhITMTkxNjU0MTY1MzA1NDg5MTc1OBgEIgpJTUFHRV9URVhU","action_card":false},{"id":"76_1750980776.189","type":"feed","offset":76,"verb":"TOPIC_ACKNOWLEDGED_ARTICLE","created_time":1750980776,"updated_time":1750980776,"target":{"id":"1921517917809414809","type":"article","url":"https://api.zhihu.com/articles/1921517917809414809","author":{"id":"1adc1ec991ac03222895b7c1fe52877e","url":"https://api.zhihu.com/people/1adc1ec991ac03222895b7c1fe52877e","user_type":"people","url_token":"--24-34-25","name":"白菜职场视频博客","headline":"分享YouTube / B站优质职场视频,供学习交流  ","avatar_url":"https://pic1.zhimg.com/50/v2-d1b719ce608cc3d48fbd23a43a0a0ca4_l.jpg?source=b6762063","is_org":false,"gender":0,"followers_count":43,"is_following":false,"is_followed":false},"title":"个人跨境创业前的3点准备","comment_permission":"all","created":1750905694,"updated":1750905694,"voteup_count":1,"voting":0,"comment_count":0,"linkbox":{"category":"","pic":"","title":"","url":""},"excerpt":"我看到一篇很好的文章，想给大家分享下   如果你计划进行个人跨境电商创业，特别是在 亚马逊平台上，前期需要做好以下三方面的准备，这些都非常关键。首先是 心态的准备。多数创业者在初期失败并非因为经验或能力不足，而是心态未调整好。对于首次创业者而言，往往对创业项目所需的心态准备一无所知。以我为例，我的第一个创业项目是跨境电商B端业务。当时独自在出租屋工作，昼夜颠倒地与客户沟通，导致生活与真实世界脱节，心态几…","excerpt_new":"我看到一篇很好的文章，想给大家分享下   如果你计划进行个人跨境电商创业，特别是在 亚马逊平台上，前期需要做好以下三方面的准备，这些都非常关键。首先是 心态的准备。多数创业者在初期失败并非因为经验或能力不足，而是心态未调整好。对于首次创业者而言，往往对创业项目所需的心态准备一无所知。以我为例，我的第一个创业项目是跨境电商B端业务。当时独自在出租屋工作，昼夜颠倒地与客户沟通，导致生活与真实世界脱节，心态几…","preview_type":"default","preview_text":"","content":"\u003ch2\u003e我看到一篇很好的文章，想给大家分享下\u003c/h2\u003e\u003cfigure data-size=\"normal\"\u003e\u003cimg src=\"https://pic2.zhimg.com/v2-e05baf29554a5bb392ca5be3770ddcb9_1440w.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"360\" data-rawheight=\"640\" data-original-token=\"v2-e05baf29554a5bb392ca5be3770ddcb9\" class=\"content_image\" width=\"360\"/\u003e\u003c/figure\u003e\u003cp data-pid=\"mp5Ti-pW\"\u003e如果你计划进行个人跨境电商创业，特别是在\u003cb\u003e亚马逊平台\u003c/b\u003e上，前期需要做好以下三方面的准备，这些都非常关键。\u003c/p\u003e\u003cp data-pid=\"nYnJXsbp\"\u003e首先是\u003cb\u003e心态的准备\u003c/b\u003e。多数创业者在初期失败并非因为经验或能力不足，而是心态未调整好。对于首次创业者而言，往往对创业项目所需的心态准备一无所知。\u003c/p\u003e\u003cp data-pid=\"SYAq99FL\"\u003e以我为例，我的第一个创业项目是跨境电商B端业务。当时独自在出租屋工作，昼夜颠倒地与客户沟通，导致生活与真实世界脱节，心态几近崩溃。由于对未来充满不确定性和恐惧，加上对商业规则认知不足，每天都活在焦虑中，担心无法盈利、支付不起房租甚至基本生活。尽管实际经济状况并未到极端困难的地步，但半年后仍因心理准备不足和缺乏创业认知而宣告失败。这次失败更多是心态而非能力的失败。\u003c/p\u003e\u003cp data-pid=\"X0r0VFKy\"\u003e后来开始亚马逊跨境电商创业时，我独自在30平米的出租屋中工作，生活与工作完全融合，每天醒来即开始工作，工作累了便休息。\u003c/p\u003e\u003cfigure data-size=\"normal\"\u003e\u003cimg src=\"https://pica.zhimg.com/v2-7837101a9468a38edfa0b2a210418baa_1440w.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"360\" data-rawheight=\"640\" data-original-token=\"v2-7837101a9468a38edfa0b2a210418baa\" class=\"content_image\" width=\"360\"/\u003e\u003c/figure\u003e\u003cp data-pid=\"qcbmXuGd\"\u003e这种生活状态是你从未经历过的。\u003cb\u003e无人管理\u003c/b\u003e，无人给予TBI，也无人监督你的行为。你的努力是否有回报，投入的资金是否会打水漂，这条路能否走通，未来是否一片迷茫，全都不得而知。\u003c/p\u003e\u003cp data-pid=\"iJByOHzR\"\u003e这种心态极大地消磨人的意志和能量。当我第二次创业时，幸好已有男友陪伴。\u003c/p\u003e\u003cfigure data-size=\"normal\"\u003e\u003cimg src=\"https://pic2.zhimg.com/v2-c3bd54657a33004493e325bfe4cc10a5_1440w.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"360\" data-rawheight=\"640\" data-original-token=\"v2-c3bd54657a33004493e325bfe4cc10a5\" class=\"content_image\" width=\"360\"/\u003e\u003c/figure\u003e\u003cp data-pid=\"ZxFyuLEI\"\u003e每晚下班后，我会外出散步。我曾对男友说，这是为了”吸收人气”。当一个人\u003cb\u003e能量不足\u003c/b\u003e且难以自我补充时，需要通过观察外界来获取能量。当时经济压力不大，没有房车负担，生活开支有限，依靠男友支持，逐渐调整了心态。我告诉自己循序渐进，不必急于求成，也不给自己太大压力——能做就做，做不成大不了回去上班。\u003c/p\u003e\u003cp data-pid=\"4YLpKo8g\"\u003e幸运的是，我首次尝试就获得平台推荐成功，随后第二、第三次也都顺利推进。半年后，收入已达打工时的五六倍。这些\u003cb\u003e正向反馈\u003c/b\u003e让我明白创业和赚钱的本质。前期的迷茫与焦虑随着项目步入正轨而逐渐消解，形成良性循环后，这些心态问题才真正得到解决。\u003c/p\u003e\u003cp data-pid=\"XidOKyrU\"\u003e需要强调的是，创业过程中的焦虑和迷茫是常态，即便现在我也仍会经历，但已学会与之共处。对于初次创业者而言，做好\u003cb\u003e心理准备\u003c/b\u003e尤为重要——必然会经历焦虑、恐惧和迷茫。其次要管理好期望值，很多人抱着赚大钱或认为创业更简单的想法进入这个行业，特别是将亚马逊视为红利渠道，但往往不了解创业者实际是最辛苦的群体。\u003c/p\u003e\u003cp data-pid=\"m9XcfXio\"\u003e我们可能清晨8点开始工作，深夜12点仍在处理货物，但下个月的结果未必理想。事实上，创业可能比打工更辛苦，而收入却未必更高。\u003c/p\u003e\u003cfigure data-size=\"normal\"\u003e\u003cimg src=\"https://pic2.zhimg.com/v2-231482f500faa640acb8d5bb315feb51_1440w.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"360\" data-rawheight=\"640\" data-original-token=\"v2-231482f500faa640acb8d5bb315feb51\" class=\"content_image\" width=\"360\"/\u003e\u003c/figure\u003e\u003cp data-pid=\"nTXjMkcU\"\u003e尤其在初期阶段，我们对行业的认知往往不够客观。\u003cb\u003e部分人认为跨境电商是一个充满红利的行业\u003c/b\u003e，误以为随便选择产品就能盈利，这种观点显然是错误的。另一部分人则过度高估行业难度，因畏惧而迟迟不敢行动，最终因缺乏尝试而导致失败。\u003c/p\u003e\u003cp data-pid=\"4jOkVT35\"\u003e这反映出对行业的认知不足，以及对自身期望值的不合理设定——有人期望过高，有人期望过低，后者往往因畏缩不前而错失机会。\u003c/p\u003e\u003cfigure data-size=\"normal\"\u003e\u003cimg src=\"https://pic2.zhimg.com/v2-920a9eb2a0ec501552b83307523cec5f_1440w.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"360\" data-rawheight=\"640\" data-original-token=\"v2-920a9eb2a0ec501552b83307523cec5f\" class=\"content_image\" width=\"360\"/\u003e\u003c/figure\u003e\u003cp data-pid=\"ibxTVo9h\"\u003e\u003cb\u003e期望过高可能导致投入过多资金而效果不佳。\u003c/b\u003e因此，在进入跨境电商行业前，必须做好心理准备，保持合理的期望值。这是一个创业项目，与其他创业项目无异。新手想要在陌生行业中直接获利非常困难。\u003c/p\u003e\u003cp data-pid=\"JSYkjCZt\"\u003e如果作为行业新人，却未听闻该行业存在红利期，那么很可能这个行业已经过了红利时代。以我在深圳多年跨境电商经验来看，当前行业已完全进入\u003cb\u003e靠实力、产品和选品取胜\u003c/b\u003e的阶段。若仅听信”上传产品就能出单”的说法，结果必定令人失望。因此，客观认知行业现状、管理好预期至关重要。\u003c/p\u003e\u003cp data-pid=\"rrVzmllQ\"\u003e关于\u003cb\u003e知识储备\u003c/b\u003e，理论知识是最基础且容易获取的。但需注意，知识本身价值有限，真正宝贵的是将知识融会贯通并实现盈利的经验。前期需要掌握的基础知识包括：\u003cbr/\u003e- 店铺注册所需材料（信用卡、电话号码、网络、电脑、收款账户如万里汇等）\u003cbr/\u003e- 品牌注册（可通过代理完成）\u003cbr/\u003e- 选品方法（需进行市场分析）\u003cbr/\u003e- 产品链接创建（涉及文案、视频、图片等）\u003cbr/\u003e- 运营环节（包括广告投放、测评、定价策略、促销活动和站外推广等）\u003c/p\u003e\u003cp data-pid=\"ZHGP2Exf\"\u003e最终需要计算店铺利润水平，评估产品盈利周期。\u003c/p\u003e\u003cfigure data-size=\"normal\"\u003e\u003cimg src=\"https://pic2.zhimg.com/v2-4fdbce0c286c9e547f1e42d39229be27_1440w.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"360\" data-rawheight=\"640\" data-original-token=\"v2-4fdbce0c286c9e547f1e42d39229be27\" class=\"content_image\" width=\"360\"/\u003e\u003c/figure\u003e\u003cp data-pid=\"SeNoxJIo\"\u003e这些内容是对理论的补充，你需要提前掌握相关知识。\u003c/p\u003e\u003cp data-pid=\"FIddRl40\"\u003e我一直认为，在个人创业过程中，\u003cb\u003e知识储备\u003c/b\u003e反而是最不重要的部分。对于新手来说，可能会将其视为最关键的因素。但根据我多年的创业经验，\u003cb\u003e最重要的其实是心态\u003c/b\u003e。如果心态崩溃，项目必然失败。\u003c/p\u003e\u003cp data-pid=\"zc7so3OY\"\u003e因此，关键在于管理好自己的心态，要明白这是一个创业项目，必然会面临诸多挑战。遇到困难时不要轻易退缩，认为项目无法继续。\u003cb\u003e赚钱\u003c/b\u003e确实不易，但也没有想象中那么困难。\u003c/p\u003e\u003cfigure data-size=\"normal\"\u003e\u003cimg src=\"https://picx.zhimg.com/v2-5b203473435967fbd73056e60dd59069_1440w.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"360\" data-rawheight=\"640\" data-original-token=\"v2-5b203473435967fbd73056e60dd59069\" class=\"content_image\" width=\"360\"/\u003e\u003c/figure\u003e\u003cp data-pid=\"t7qtJH7P\"\u003e我是夏日豪，张志余，分享最真实的个人跨境电商经验，欢迎关注。\u003c/p\u003e","is_labeled":false,"visited_count":3,"favorite_count":0,"article_type":"normal","is_navigator":false,"navigator_vote":false,"vote_next_step":"vote"},"brief":"{\"source\": \"TS\", \"type\": \"article\", \"id\": 1921517917809414809}","attached_info":"CvQHCMuWuZCFn/rsoAEQBxoJMjU5NTcxMDE5IN7m8sIGKAEwAEBMSiQKGVRTX1NPVVJDRV9XQVJNX1VQX05PUk1BTDESATAYACAAOgBiIGIzZThiOWYwYTJjMTUyMzVkMjBiZjdiMDcxYWJjZmE1chMxOTIxNTE3OTE3ODA5NDE0ODA5qgEJcmVjb21tZW5kwgEgMWFkYzFlYzk5MWFjMDMyMjI4OTViN2MxZmU1Mjg3N2XyAQoIDBIGTm9ybWFs8gEoCAoSJGU3MmYwNjYwLWVlOGYtNDYwOC1iNTA2LWZkMWI1ZjE5YWQ5MvIBBggLEgIxM4ICAIgCl6LZ9PoykgIgMWFkYzFlYzk5MWFjMDMyMjI4OTViN2MxZmU1Mjg3N2WaAgDKAhZTaG9ySW50ZXJlc3RXZWlnaHRSdWxlygIVVXNlckxjbkV4aXRXZWlnaHRSdWxlygIYQ29udGVudFdhcm1VcEJyZWFrSW5SdWxl2gIZVFNfU09VUkNFX1dBUk1fVVBfTk9STUFMMegCA/oCC05PUk1BTF9GTE9XigMgZGMyM2VhMzY2N2Q0NGI1OWFhNjRiN2IwNzNhMjExMmSaAw0KAnYyEAAaBW90aGVyqAMD2AMA6gMfdGV4dF8xMmhvdXJfdW5pZmluc2hlZF9yZWNhbGxlcvoD6AISDFVOS05PV05fTU9ERSAAKg1OT19JTUFHRV9NT0RFOi0IAhDoAhiABSIjdjItZTA1YmFmMjk1NTRhNWJiMzkyY2E1YmUzNzcwZGRjYjk6LQgCEOgCGIAFIiN2Mi03ODM3MTAxYTk0NjhhMzhlZGZhMGIyYTIxMDQxOGJhYTotCAEQ6AIYgAUiI3YyLWMzYmQ1NDY1N2EzMzAwNDQ5M2UzMjViZmU0Y2MxMGE1Oi0IAhDoAhiABSIjdjItMjMxNDgyZjUwMGZhYTY0MGFjYjhkNWJiMzE1ZmViNTE6LQgCEOgCGIAFIiN2Mi05MjBhOWViMmEwZWM1MDE1NTJiODMzMDc1MjNjZWM1ZjotCAEQ6AIYgAUiI3YyLTRmZGJjZTBjMjg2YzllNTQ3ZjFlNDJkMzkyMjliZTI3Oi0IAhDoAhiABSIjdjItNWIyMDM0NzM0MzU5NjdmYmQ3MzA1NmU2MGRkNTkwNjmABACIBACSBAZOb3JtYWyaBAEzoAQAqAQAsAQAugQCYWnCBAM0MDDIBADSBA/mjqjojZDlt7Lmm7TmlrDYBADwBAD5BAAAAKBT44I/gQUAAAAAAAAAAIkFG6rhFBNVzD+SBQCaBQNkZnSiBQNkZnSyBQExuQUAAAAAAAAAANAFAOAFAOgFAPAFDZAGAKAGTKgGAZICLgoJMjU5NTcxMDE5EhMxOTIxNTE3OTE3ODA5NDE0ODA5GAciCklNQUdFX1RFWFQ=","action_card":false},{"id":"77_1750980776.292","type":"feed","offset":77,"verb":"TOPIC_ACKNOWLEDGED_ANSWER","created_time":1750980776,"updated_time":1750980776,"target":{"id":"1921574652385402904","type":"answer","url":"https://api.zhihu.com/answers/1921574652385402904","author":{"id":"d9ef562b362ebc7f2cb52f06d7b5e10d","url":"https://api.zhihu.com/people/d9ef562b362ebc7f2cb52f06d7b5e10d","user_type":"people","url_token":"sinya-lee","name":"李新野","headline":"人人网过气网红，清华姚班毕业，日入百万","avatar_url":"https://pic1.zhimg.com/50/v2-ca1987dd4a6b0a82f901255a8cb9cca6_l.jpg?source=b6762063","is_org":false,"gender":1,"followers_count":9403,"is_following":false,"is_followed":false},"created_time":1750919098,"updated_time":1750923174,"voteup_count":1234,"thanks_count":33,"comment_count":253,"is_copyable":true,"question":{"id":"1920792980362589565","type":"question","url":"https://api.zhihu.com/questions/1920792980362589565","author":{"id":"d371683fd9673e521609ae7a4788e856","url":"https://api.zhihu.com/people/d371683fd9673e521609ae7a4788e856","user_type":"people","url_token":"bo-ben-er-ba-26","name":"liisu","headline":"路人甲","avatar_url":"https://pica.zhimg.com/50/v2-d24ffbc4102e48b6f12d8996682207ae_l.jpg?source=b6762063","is_org":false,"gender":-1,"followers_count":1377,"is_following":false,"is_followed":false},"title":"清华姚班、量化天才李新野再撕亲爹和亲姐，称要让他们破产，具体是怎么回事？","created":1750732733,"answer_count":0,"follower_count":0,"comment_count":10,"bound_topic_ids":[215,3004,4330],"is_following":false,"excerpt":"","relationship":{"is_author":false},"detail":"","question_type":"normal"},"excerpt":"《我的父亲李松坚》这篇文章，是我很满意的一篇短篇文章。这篇文章在我心中构思了2个月左右，但是最后写下来，只花了不到2个小时的时间，胸有成竹，一气呵成。这两个月时间，文章的第一段点题和倒数第二段高潮的文字，已经在我的脑海中重复了几十遍上百遍。在被写下来之前，这篇文章在我的体内已孕育出了生命。 这篇文章写到最后，其实进入了一种艺术创作最高潮的那种无上的炫技的爽感。这是任何女人都比不上的。世界上那些顶级…","excerpt_new":"《我的父亲李松坚》这篇文章，是我很满意的一篇短篇文章。这篇文章在我心中构思了2个月左右，但是最后写下来，只花了不到2个小时的时间，胸有成竹，一气呵成。这两个月时间，文章的第一段点题和倒数第二段高潮的文字，已经在我的脑海中重复了几十遍上百遍。在被写下来之前，这篇文章在我的体内已孕育出了生命。 这篇文章写到最后，其实进入了一种艺术创作最高潮的那种无上的炫技的爽感。这是任何女人都比不上的。世界上那些顶级…","preview_type":"default","preview_text":"","reshipment_settings":"allowed","content":"\u003cp data-pid=\"aTGe8_Yp\"\u003e《我的父亲李松坚》这篇文章，是我很满意的一篇短篇文章。这篇文章在我心中构思了2个月左右，但是最后写下来，只花了不到2个小时的时间，胸有成竹，一气呵成。这两个月时间，文章的第一段点题和倒数第二段高潮的文字，已经在我的脑海中重复了几十遍上百遍。在被写下来之前，这篇文章在我的体内已孕育出了生命。\u003c/p\u003e\u003cp data-pid=\"Zc6V1XFT\"\u003e这篇文章写到最后，其实进入了一种艺术创作最高潮的那种无上的炫技的爽感。这是任何女人都比不上的。世界上那些顶级的艺术家应该可以理解我。三岛由纪夫谈为什么要写《金阁寺》第十章时说：“中断性交是有害的啊！” 莫言对三岛的这句名言推崇之至。写作到最高层的境界，跟书法、画画、弹钢琴没有区别：钢琴弹错音，最好的处理方式就是当作没发生过，继续演奏。而很多伟大的书法作品，如王羲之《兰亭集序》、颜真卿《祭侄文稿》，也是充斥着涂改痕迹。所以这篇文章虽然缺点不少，但是我也不想做大修改，会损害这种一气呵成的爽感。只不过原版文章很多人误会李松坚和凌菲菲复婚。（事实是凌菲菲在李松坚失踪的时候起诉离婚，李松坚出狱后想复婚，凌菲菲不同意。）所以对相关内容做了一点小补充，以避免误会。\u003c/p\u003e\u003cp data-pid=\"HfzjeUH4\"\u003e这篇文章，很难说是记述文、小说、杂文还是散文。甚至有人还把这篇文章称作散文诗。其实我自己也很难界定。文章借鉴了很多小说的叙事方法。但是每一件事都是真实存在的，没有任何虚构。把真实事件打散，再按照短篇小说的写作手法糅合在一起。比虚构小说还更有难度和乐趣（无论是创作乐趣还是阅读乐趣）。\u003c/p\u003e\u003cp data-pid=\"YYK5yRL6\"\u003e更有趣的，这篇文章又同时是一篇大家最熟悉的三段式论述文。但是把第一段总结和每部份第一句点题的文字去掉，又变成一篇（真实的）小说了。为了达到这个效果，事件的选取，一方面要符三段式每段的主题，大家明白三张脸的矛盾和对比。另一方面，通过这个事件编排的顺序，又把李松坚从起朱楼到烂尾楼的故事讲明白了。这种编排的精妙，就像写了一首七言律诗，改改句读，就变成一首不减字的《木兰花》。所以也有我肆意炫耀才华的小小心思。\u003c/p\u003e\u003cp data-pid=\"wsQCB3VV\"\u003e文章的文字，是故意选择最直白的语言。以前识字率不高，文学是少数知识精英小圈子孤芳自赏的游戏，所以喜欢堆砌词藻。但是在互联网和社交媒体的时代，文章是给所有人看的。所以用最简单的文字，制造最高级的阅读体验，再传达出最深刻的思想，是互联网时代写作的最高境界。（有一些评论说我文笔普通，这是很愚蠢的评价了。）而且，这种文字，无论翻译成哪种语言，艺术性几乎不会折损。所以这种文学形式的价值，是有普适性的。这种文学的进步，是现代互联网科技对文学界的巨大贡献。\u003c/p\u003e\u003cp data-pid=\"7tUt8vcz\"\u003e这篇文章我试图表达的感情，不是恨，而是一种荒诞感。很多人说我是逆子，还有人说这是一篇檄文，这都是看不懂文章的表现。说实话，李松坚对我的伤害，是这篇文章表达的10倍不止。但是我不想要写一篇充满仇恨的文章，也不想要写一篇诉苦PDF——这样就毫无文学价值和阅读价值了。李松坚做过的恶心事，写出来是不能通过审核的。所以我抽取的事情，每件事单拿出来，似乎都是正常的。甚至我还故意找出李松坚有人性光辉的一面，比如送书、比如爱情、比如月假。但是这些貌似正常的行为，放在一起，强烈的对比，就显示出巨大的荒诞感。而如何通过真实素材，选材、杂糅，从简单的文字，平常的素材，组装出一种荒诞的感觉。很多人读完文章余韵未了。其实是这种巧思的结果。\u003c/p\u003e\u003cp data-pid=\"TRmeeaPr\"\u003e这种荒诞感，其实是我本人最真实的情感。2021年回国，看着李松坚和他周围的所有人，“荒诞”一词最能描述我当时的感受。我像一个飞行员，看着泰坦尼克号被冰山切开了一个大口子。然后船上有一群猴子，互相厮杀，你死我活。我发自好心，短暂的降落在船上，试图跟猴子们说赶紧逃生吧。结果猴子们一看，“你是不是要抢我的香蕉？”猴子们把石头都砸向了我。我笑笑，又坐上了直升飞机，走了。\u003c/p\u003e\u003cp data-pid=\"zx06at0z\"\u003e然后我调转我的阿帕奇，对着那群荒诞的猴子，射出了我自卫的地狱火。\u003c/p\u003e\u003chr/\u003e\u003cp data-pid=\"J_5-FENJ\"\u003e附《我的父亲李松坚》原文：\u003ca href=\"https://link.zhihu.com/?target=https%3A//sinyalee.com/blog/%3Fp%3D1001\" class=\" external\" target=\"_blank\" rel=\"nofollow noreferrer\"\u003e\u003cspan class=\"invisible\"\u003ehttps://\u003c/span\u003e\u003cspan class=\"visible\"\u003esinyalee.com/blog/?\u003c/span\u003e\u003cspan class=\"invisible\"\u003ep=1001\u003c/span\u003e\u003cspan class=\"ellipsis\"\u003e\u003c/span\u003e\u003c/a\u003e\u003c/p\u003e","relationship":{"is_thanked":false,"is_nothelp":false,"voting":0},"is_labeled":false,"visited_count":70351,"favorite_count":448,"answer_type":"normal","is_navigator":false,"navigator_vote":false,"vote_next_step":"vote"},"brief":"{\"source\": \"TS\", \"type\": \"answer\", \"id\": 1921574652385402904}","attached_info":"CrUGCMuWuZCFn/rsoAEQBBoJNzM0MTA5NzkzILrP88IGKNIJMP0BQE1KKAoTVFNfU09VUkNFX0ZFRURSRV9WORIBMBgAIAA6CnsicmF3IjoiIn1KMAobVFNfU09VUkNFX0ZFRURSRV9USU1FTElORVNTEgEwGAAgADoKeyJyYXciOiIifVoJMTE1NTI2NTIyYiBiM2U4YjlmMGEyYzE1MjM1ZDIwYmY3YjA3MWFiY2ZhNXITMTkyMTU3NDY1MjM4NTQwMjkwNIoBEzE5MjA3OTI5ODAzNjI1ODk1NjWqAQlyZWNvbW1lbmTCASBkOWVmNTYyYjM2MmViYzdmMmNiNTJmMDZkN2I1ZTEwZPIBCggMEgZOb3JtYWzyASgIChIkMjIxYTk1ZTMtNTdkMC00ODM2LThkNTUtZTk3ZmFjZDdiZDY08gEGCAsSAjEzggIAiAKXotn0+jKSAiBkOWVmNTYyYjM2MmViYzdmMmNiNTJmMDZkN2I1ZTEwZJoCAMoCFlNob3JJbnRlcmVzdFdlaWdodFJ1bGXKAhZSZXZpc2l0VmFsdWVXZWlnaHRSdWxlygIVVXNlckxjbkV4aXRXZWlnaHRSdWxl2gITVFNfU09VUkNFX0ZFRURSRV9WOegCA/oCC05PUk1BTF9GTE9XigMgZGMyM2VhMzY2N2Q0NGI1OWFhNjRiN2IwNzNhMjExMmSaAw0KAnYyEAAaBW90aGVyqAPPpQTYAwDqAwlmZWVkcmVfdjn6Ax8SDFVOS05PV05fTU9ERSAAKg1OT19JTUFHRV9NT0RFgAQAiAQAkgQGTm9ybWFsmgQBM6AEAKgEALAEALoEBm1hbnVhbMIEAzE1N8gEANIED+aOqOiNkOW3suabtOaWsNgEAPAEAPkEAAAAIDw0mD+BBQAAAAAAAAAAiQUbquEUE1XMP5IFAJoFA2RmdKIFA2RmdLIFATG5BQAAAAAAAAAA0AUA4AUA6AUA8AUNigZHCjwIiYKBBxIb5p2O5paw6YeO5omL5pKV5Lqy54i55Lqy5aeQGLag6MIGINWEPSgEMPqWizcw0vqHNzgAQAASBwgBFQAAgD+QBgCgBk2oBgCSAi4KCTczNDEwOTc5MxITMTkyMTU3NDY1MjM4NTQwMjkwNBgEIgpJTUFHRV9URVhU","action_card":false}],"paging":{"is_end":false,"is_start":false,"next":"https://www.zhihu.com/api/v3/feed/topstory/recommend?action=down\u0026ad_interval=-10\u0026after_id=77\u0026desktop=true\u0026end_offset=77\u0026page_number=14\u0026session_token=b3e8b9f0a2c15235d20bf7b071abcfa5","previous":"https://www.zhihu.com/api/v3/feed/topstory/recommend?action=pull\u0026ad_interval=-10\u0026before_id=77\u0026desktop=true\u0026end_offset=77\u0026page_number=14\u0026session_token=b3e8b9f0a2c15235d20bf7b071abcfa5","totals":0},"fresh_text":"推荐已更新"}
