{"data":[{"id":"AD_3567839_17508987548480","type":"feed_advert","brief":"{\"source\":\"PR\",\"type\":\"feed_advert\",\"id\":3567839}","action_text":"","attached_info":"CqgBCL651tz1op/cjAFASJABAdoBJGM1NTY1YzFjLWViZWEtNDNhZS04MDM2LTg4MDFlOWFmYzllYfIBBggMEgJBZIgCoIrLzfoy+gILQURWRVJUX0ZMT1eKAyA2Y2VjYmJjZjU3YjM0N2JiOTI3ODZkOTVmNzA0ZGI5ZoAEAZIEC0J1c2luZXNzX0Fk+QQAAAAAAADwP4EFAAAAAADAYkCyBQExoAZNqAYBMhQtODMwNjc1MTk3MzQxMDYyODQxOA==","ad":{"count":0,"position":0,"ad_verb":"PROMOTE_URL_CARD","close_track":"https://sugar.zhihu.com/plutus_adreaper?ar=0.003008931875228882\u0026ut=075acd00a0774b9d9d2a3786e8226e3a\u0026pdi=1744681538355662\u0026di=tower\u0026idi=100010136\u0026s=99046e2b-d5b1-4ee8-9871-bcf94ad2c066\u0026pf=4\u0026ed=CjEEfR4wM316QGoCCTIvBUZ8DH9bbm5yKxJ_BVdhKh1cdl19ACBocncWNwEXMTYNXGNYI1x-aXV4EmpUCHY8WVZ3DH0NcmJ4aEY7WgJkdQhYcQhsWzdncGhGPVoEYGpSG3gMeh4vL317F2pQAGN1BU0wUHcKd2p5dB0zVlRqelNedAN5DHtqei0ca11VMnwAUXxffg95bXd9Q3QTQm19B151AXMAdG90aEQlWgF2L1hWdR8rTX5tcHwTYlMXIC1ZVnUfPkssZ3FoRiJaAXYjUxh4CWxXID19fgM0BkJtfBYNJEt3CGU3IzwYYkFEJSVUVnQOfgx1YnF7FmpUBGV6BlljWCNbfmpmOlBvD0UkPENOdnhvCgV_cghSJRAfMiNdWSdMMxYgNS1rFxQFXj04XwQpHHl-Ni4tEVY9EkMzKRVYAUMiUSsvZXwTJxNcDyFVDyxMJx1wHiM-RndVByU4XTQmWCdIIjMnIABhI0EiI10EGlQrQXFqcnsDIgkMMiNdWSdMMx4xP31_EGJJBWR6BVJ2DnwJd250fwMgBENtfBYJIwR7roYWxsWPM90%3D\u0026nt=0\u0026t=7","revert_close_track":"https://sugar.zhihu.com/plutus_adreaper?pdi=1744681538355662\u0026nt=0\u0026idi=100010136\u0026pf=4\u0026s=99046e2b-d5b1-4ee8-9871-bcf94ad2c066\u0026t=8\u0026di=tower\u0026ed=CjEEch4wM316QGoCCTIvBUZ8DH9bbm5yKxJ_BVdhKh1cdl19ACBocncWNwEXMTYNXGNYI1x-aXV4EmpUCHY8WVZ3DH0NcmJ4aEY7WgJkdQhYcQhsWzdncGhGPVoEYGpSG3gMeh4vL317F2pQAGN1BU0wUHcKd2p5dB0zVlRqelNedAN5DHtqei0ca11VMnwAUXxffg95bXd9Q3QTQm19B151AXMAdG90aEQlWgF2L1hWdR8rTX5tcHwTYlMXIC1ZVnUfPkssZ3FoRiJaAXYjUxh4CWxXID19fgM0BkJtfBYNJEt3CGU3IzwYYkFEJSVUVnQOfgx1YnF7FmpUBGV6BlljWCNbfmpmOlBvD0UkPENOdnhvCgV_cghSJRAfMiNdWSdMMxYgNS1rFxQFXj04XwQpHHl-Ni4tEVY9EkMzKRVYAUMiUSsvZXwTJxNcDyFVDyxMJx1wHiM-RndVByU4XTQmWCdIIjMnIABhI0EiI10EGlQrQXFqcnsDIgkMMiNdWSdMMx4xP31_EGJJBWR6BVJ2DnwJd250fwMgBENtfBYJIwR7oA7Go7QCUfw%3D\u0026ut=075acd00a0774b9d9d2a3786e8226e3a\u0026ar=0.003008931875228882","template":"web_image_feed","load_tracks":["https://sugar.zhihu.com/plutus_adreaper?di=tower\u0026pdi=1744681538355662\u0026s=99046e2b-d5b1-4ee8-9871-bcf94ad2c066\u0026ar=0.003008931875228882\u0026idi=100010136\u0026pf=4\u0026nt=0\u0026t=2\u0026ed=CjEEeB4wM316QGoCCTIvBUZ8DH9bbm5yKxJ_BVdhKh1cdl19ACBocncWNwEXMTYNXGNYI1x-aXV4EmpUCHY8WVZ3DH0NcmJ4aEY7WgJkdQhYcQhsWzdncGhGPVoEYGpSG3gMeh4vL317F2pQAGN1BU0wUHcKd2p5dB0zVlRqelNedAN5DHtqei0ca11VMnwAUXxffg95bXd9Q3QTQm19B151AXMAdG90aEQlWgF2L1hWdR8rTX5tcHwTYlMXIC1ZVnUfPkssZ3FoRiJaAXYjUxh4CWxXID19fgM0BkJtfBYNJEt3CGU3IzwYYkFEJSVUVnQOfgx1YnF7FmpUBGV6BlljWCNbfmpmOlBvD0UkPENOdnhvCgV_cghSJRAfMiNdWSdMMxYgNS1rFxQFXj04XwQpHHl-Ni4tEVY9EkMzKRVYAUMiUSsvZXwTJxNcDyFVDyxMJx1wHiM-RndVByU4XTQmWCdIIjMnIABhI0EiI10EGlQrQXFqcnsDIgkMMiNdWSdMMx4xP31_EGJJBWR6BVJ2DnwJd250fwMgBENtfBYJIwR7f0zYY6fjIKo%3D\u0026ut=075acd00a0774b9d9d2a3786e8226e3a"],"creatives":[{"landing_url":"https://www.bom2buy.com/bomtool?utm_source=zhihu\u0026utm_medium=cpc\u0026utm_campaign=promo_may2025\u0026spu=biz%3D0%26ci%3D3498341%26si%3Dc5565c1c-ebea-43ae-8036-8801e9afc9ea%26ts%3D1750898754%26zid%3D7","image":"https://pic4.zhimg.com/v2-f6d1ccb5b414722ceee200665c606029_bh.jpg?source=d6434cab","image_2x":"","title":"电子行业采购如何高效处理BOM表风险并优化采购成本？","description":"作为采购工程师，BOM表清洗、型号风险分析、替代料匹配和精准报价核算一直是痛点。最近尝试了一款工具，可自动清洗杂乱型号数据，检测元器件停产/库存风险，推荐Pin to Pin兼容替代方案，并基于实时渠道价格生成最低成本采购方案","button":"查看详情","action_button":false,"footer":{"value":""},"cta":{"value":"查看详情"},"brand":{"id":0,"name":"bom2buy","logo":"https://pic3.zhimg.com/v2-301d482a89280b578ce683feac30bb48_xl.jpg?source=d6434cab"},"app_promotion_url":"","native_url":"","deep_url":"","video_watch_num":55640,"za_ad_info":"CN/h2QEQByIBMV0xudBOYOXC1QE=","za_ad_info_json":"{\"ad_id\":3567839,\"ad_zone_id\":7,\"category\":\"1\",\"timestamp\":1750898800,\"creative_id\":3498341}","external_click_url":"","impression_tracks":["https://sugar.zhihu.com/plutus_adreaper?pdi=1744681538355662\u0026ed=CjEEeR4wM316QGoCCTIvBUZ8DH9bbm5yKxJ_BVdhKh1cdl19ACBocncWNwEXMTYNXGNYI1x-aXV4EmpUCHY8WVZ3DH0NcmJ4aEY7WgJkdQhYcQhsWzdncGhGPVoEYGpSG3gMeh4vL317F2pQAGN1BU0wUHcKd2p5dB0zVlRqelNedAN5DHtqei0ca11VMnwAUXxffg95bXd9Q3QTQm19B151AXMAdG90aEQlWgF2L1hWdR8rTX5tcHwTYlMXIC1ZVnUfPkssZ3FoRiJaAXYjUxh4CWxXID19fgM0BkJtfBYNJEt3CGU3IzwYYkFEJSVUVnQOfgx1YnF7FmpUBGV6BlljWCNbfmpmOlBvD0UkPENOdnhvCgV_cghSJRAfMiNdWSdMMxYgNS1rFxQFXj04XwQpHHl-Ni4tEVY9EkMzKRVYAUMiUSsvZXwTJxNcDyFVDyxMJx1wHiM-RndVByU4XTQmWCdIIjMnIABhI0EiI10EGlQrQXFqcnsDIgkMMiNdWSdMMx4xP31_EGJJBWR6BVJ2DnwJd250fwMgBENtfBYJIwR7Sm1dj1PuGF8%3D\u0026ut=075acd00a0774b9d9d2a3786e8226e3a\u0026nt=0\u0026ar=0.003008931875228882\u0026pf=4\u0026di=tower\u0026idi=100010136\u0026s=99046e2b-d5b1-4ee8-9871-bcf94ad2c066\u0026t=3"],"click_tracks":["https://sugar.zhihu.com/plutus_adreaper?pdi=1744681538355662\u0026s=99046e2b-d5b1-4ee8-9871-bcf94ad2c066\u0026ed=CjEEfh4wM316QGoCCTIvBUZ8DH9bbm5yKxJ_BVdhKh1cdl19ACBocncWNwEXMTYNXGNYI1x-aXV4EmpUCHY8WVZ3DH0NcmJ4aEY7WgJkdQhYcQhsWzdncGhGPVoEYGpSG3gMeh4vL317F2pQAGN1BU0wUHcKd2p5dB0zVlRqelNedAN5DHtqei0ca11VMnwAUXxffg95bXd9Q3QTQm19B151AXMAdG90aEQlWgF2L1hWdR8rTX5tcHwTYlMXIC1ZVnUfPkssZ3FoRiJaAXYjUxh4CWxXID19fgM0BkJtfBYNJEt3CGU3IzwYYkFEJSVUVnQOfgx1YnF7FmpUBGV6BlljWCNbfmpmOlBvD0UkPENOdnhvCgV_cghSJRAfMiNdWSdMMxYgNS1rFxQFXj04XwQpHHl-Ni4tEVY9EkMzKRVYAUMiUSsvZXwTJxNcDyFVDyxMJx1wHiM-RndVByU4XTQmWCdIIjMnIABhI0EiI10EGlQrQXFqcnsDIgkMMiNdWSdMMx4xP31_EGJJBWR6BVJ2DnwJd250fwMgBENtfBYJIwR7sD093iFGE7s%3D\u0026di=tower\u0026t=4\u0026ut=075acd00a0774b9d9d2a3786e8226e3a\u0026ar=0.003008931875228882\u0026nt=0\u0026idi=100010136\u0026pf=4"],"id":3567839,"name":"","conversion_tracks":["https://sugar.zhihu.com/plutus_adreaper?di=tower\u0026ar=0.003008931875228882\u0026t=5\u0026ed=CjEEfx4wM316QGoCCTIvBUZ8DH9bbm5yKxJ_BVdhKh1cdl19ACBocncWNwEXMTYNXGNYI1x-aXV4EmpUCHY8WVZ3DH0NcmJ4aEY7WgJkdQhYcQhsWzdncGhGPVoEYGpSG3gMeh4vL317F2pQAGN1BU0wUHcKd2p5dB0zVlRqelNedAN5DHtqei0ca11VMnwAUXxffg95bXd9Q3QTQm19B151AXMAdG90aEQlWgF2L1hWdR8rTX5tcHwTYlMXIC1ZVnUfPkssZ3FoRiJaAXYjUxh4CWxXID19fgM0BkJtfBYNJEt3CGU3IzwYYkFEJSVUVnQOfgx1YnF7FmpUBGV6BlljWCNbfmpmOlBvD0UkPENOdnhvCgV_cghSJRAfMiNdWSdMMxYgNS1rFxQFXj04XwQpHHl-Ni4tEVY9EkMzKRVYAUMiUSsvZXwTJxNcDyFVDyxMJx1wHiM-RndVByU4XTQmWCdIIjMnIABhI0EiI10EGlQrQXFqcnsDIgkMMiNdWSdMMx4xP31_EGJJBWR6BVJ2DnwJd250fwMgBENtfBYJIwR7gLAnue6sOYI%3D\u0026pf=4\u0026idi=100010136\u0026ut=075acd00a0774b9d9d2a3786e8226e3a\u0026pdi=1744681538355662\u0026s=99046e2b-d5b1-4ee8-9871-bcf94ad2c066\u0026nt=0"],"content_type":"","target_token":""}],"vote_up_count":0,"comment_count":0,"is_following":false,"category":1,"id":3567839,"can_interact":false,"user_id":0,"ctr":0,"display_advertising_tag":true,"debug_tracks":["https://sugar.zhihu.com/plutus_adreaper?pdi=1744681538355662\u0026ed=CjEEcx4wM316QGoCCTIvBUZ8DH9bbm5yKxJ_BVdhKh1cdl19ACBocncWNwEXMTYNXGNYI1x-aXV4EmpUCHY8WVZ3DH0NcmJ4aEY7WgJkdQhYcQhsWzdncGhGPVoEYGpSG3gMeh4vL317F2pQAGN1BU0wUHcKd2p5dB0zVlRqelNedAN5DHtqei0ca11VMnwAUXxffg95bXd9Q3QTQm19B151AXMAdG90aEQlWgF2L1hWdR8rTX5tcHwTYlMXIC1ZVnUfPkssZ3FoRiJaAXYjUxh4CWxXID19fgM0BkJtfBYNJEt3CGU3IzwYYkFEJSVUVnQOfgx1YnF7FmpUBGV6BlljWCNbfmpmOlBvD0UkPENOdnhvCgV_cghSJRAfMiNdWSdMMxYgNS1rFxQFXj04XwQpHHl-Ni4tEVY9EkMzKRVYAUMiUSsvZXwTJxNcDyFVDyxMJx1wHiM-RndVByU4XTQmWCdIIjMnIABhI0EiI10EGlQrQXFqcnsDIgkMMiNdWSdMMx4xP31_EGJJBWR6BVJ2DnwJd250fwMgBENtfBYJIwR7vJqKx_Q6f3I%3D\u0026ar=0.003008931875228882\u0026nt=0\u0026idi=100010136\u0026t=9\u0026di=tower\u0026pf=4\u0026ut=075acd00a0774b9d9d2a3786e8226e3a\u0026s=99046e2b-d5b1-4ee8-9871-bcf94ad2c066"],"land_prefetch":false,"native_prefetch":true,"is_new_webview":true,"experiment_info":"{}","download_silent":false,"is_speeding":false,"brand":{"name":"bom2buy","logo":"https://pic3.zhimg.com/v2-301d482a89280b578ce683feac30bb48_xl.jpg?source=d6434cab","type":"brand","action_text":""}},"ad_list":[],"adjson":"{\"ads\":[{\"id\":3567839,\"ad_zone_id\":7,\"template\":\"web_image_feed\",\"style\":\"psi_7\",\"impression_tracks\":[\"https://sugar.zhihu.com/plutus_adreaper?pf=4\\u0026idi=100010136\\u0026ar=0.003008931875228882\\u0026nt=0\\u0026ed=CjEEeB4wM316QGoCCTIvBUZ8DH9bbm5yKxJ_BVdhKh1cdl19ACBocncWNwEXMTYNXGNYI1x-aXV4EmpUCHY8WVZ3DH0NcmJ4aEY7WgJkdQhYcQhsWzdncGhGPVoEYGpSG3gMeh4vL317F2pQAGN1BU0wUHcKd2p5dB0zVlRqelNedAN5DHtqei0ca11VMnwAUXxffg95bXd9Q3QTQm19B151AXMAdG90aEQlWgF2L1hWdR8rTX5tcHwTYlMXIC1ZVnUfPkssZ3FoRiJaAXYjUxh4CWxXID19fgM0BkJtfBYNJEt3CGU3IzwYYkFEJSVUVnQOfgx1YnF7FmpUBGV6BlljWCNbfmpmOlBvD0UkPENOdnhvCgV_cghSJRAfMiNdWSdMMxYgNS1rFxQFXj04XwQpHHl-Ni4tEVY9EkMzKRVYAUMiUSsvZXwTJxNcDyFVDyxMJx1wHiM-RndVByU4XTQmWCdIIjMnIABhI0EiI10EGlQrQXFqcnsDIgkMMiNdWSdMMx4xP31_EGJJBWR6BVJ2DnwJd250fwMgBENtfBYJIwR7f0zYY6fjIKo%3D\\u0026pdi=1744681538355662\\u0026di=tower\\u0026t=2\\u0026s=1242d21a-9e4e-425b-a1a2-4f09f6f63455\\u0026ut=075acd00a0774b9d9d2a3786e8226e3a\"],\"view_tracks\":[\"https://sugar.zhihu.com/plutus_adreaper?ed=CjEEeR4wM316QGoCCTIvBUZ8DH9bbm5yKxJ_BVdhKh1cdl19ACBocncWNwEXMTYNXGNYI1x-aXV4EmpUCHY8WVZ3DH0NcmJ4aEY7WgJkdQhYcQhsWzdncGhGPVoEYGpSG3gMeh4vL317F2pQAGN1BU0wUHcKd2p5dB0zVlRqelNedAN5DHtqei0ca11VMnwAUXxffg95bXd9Q3QTQm19B151AXMAdG90aEQlWgF2L1hWdR8rTX5tcHwTYlMXIC1ZVnUfPkssZ3FoRiJaAXYjUxh4CWxXID19fgM0BkJtfBYNJEt3CGU3IzwYYkFEJSVUVnQOfgx1YnF7FmpUBGV6BlljWCNbfmpmOlBvD0UkPENOdnhvCgV_cghSJRAfMiNdWSdMMxYgNS1rFxQFXj04XwQpHHl-Ni4tEVY9EkMzKRVYAUMiUSsvZXwTJxNcDyFVDyxMJx1wHiM-RndVByU4XTQmWCdIIjMnIABhI0EiI10EGlQrQXFqcnsDIgkMMiNdWSdMMx4xP31_EGJJBWR6BVJ2DnwJd250fwMgBENtfBYJIwR7Sm1dj1PuGF8%3D\\u0026idi=100010136\\u0026ut=075acd00a0774b9d9d2a3786e8226e3a\\u0026nt=0\\u0026t=3\\u0026s=1242d21a-9e4e-425b-a1a2-4f09f6f63455\\u0026ar=0.003008931875228882\\u0026pf=4\\u0026di=tower\\u0026pdi=1744681538355662\"],\"click_tracks\":[\"https://sugar.zhihu.com/plutus_adreaper?t=4\\u0026pdi=1744681538355662\\u0026ed=CjEEfh4wM316QGoCCTIvBUZ8DH9bbm5yKxJ_BVdhKh1cdl19ACBocncWNwEXMTYNXGNYI1x-aXV4EmpUCHY8WVZ3DH0NcmJ4aEY7WgJkdQhYcQhsWzdncGhGPVoEYGpSG3gMeh4vL317F2pQAGN1BU0wUHcKd2p5dB0zVlRqelNedAN5DHtqei0ca11VMnwAUXxffg95bXd9Q3QTQm19B151AXMAdG90aEQlWgF2L1hWdR8rTX5tcHwTYlMXIC1ZVnUfPkssZ3FoRiJaAXYjUxh4CWxXID19fgM0BkJtfBYNJEt3CGU3IzwYYkFEJSVUVnQOfgx1YnF7FmpUBGV6BlljWCNbfmpmOlBvD0UkPENOdnhvCgV_cghSJRAfMiNdWSdMMxYgNS1rFxQFXj04XwQpHHl-Ni4tEVY9EkMzKRVYAUMiUSsvZXwTJxNcDyFVDyxMJx1wHiM-RndVByU4XTQmWCdIIjMnIABhI0EiI10EGlQrQXFqcnsDIgkMMiNdWSdMMx4xP31_EGJJBWR6BVJ2DnwJd250fwMgBENtfBYJIwR7sD093iFGE7s%3D\\u0026pf=4\\u0026nt=0\\u0026di=tower\\u0026s=1242d21a-9e4e-425b-a1a2-4f09f6f63455\\u0026idi=100010136\\u0026ar=0.003008931875228882\\u0026ut=075acd00a0774b9d9d2a3786e8226e3a\"],\"close_tracks\":[\"https://sugar.zhihu.com/plutus_adreaper?ar=0.003008931875228882\\u0026t=7\\u0026di=tower\\u0026pdi=1744681538355662\\u0026s=1242d21a-9e4e-425b-a1a2-4f09f6f63455\\u0026idi=100010136\\u0026pf=4\\u0026ed=CjEEfR4wM316QGoCCTIvBUZ8DH9bbm5yKxJ_BVdhKh1cdl19ACBocncWNwEXMTYNXGNYI1x-aXV4EmpUCHY8WVZ3DH0NcmJ4aEY7WgJkdQhYcQhsWzdncGhGPVoEYGpSG3gMeh4vL317F2pQAGN1BU0wUHcKd2p5dB0zVlRqelNedAN5DHtqei0ca11VMnwAUXxffg95bXd9Q3QTQm19B151AXMAdG90aEQlWgF2L1hWdR8rTX5tcHwTYlMXIC1ZVnUfPkssZ3FoRiJaAXYjUxh4CWxXID19fgM0BkJtfBYNJEt3CGU3IzwYYkFEJSVUVnQOfgx1YnF7FmpUBGV6BlljWCNbfmpmOlBvD0UkPENOdnhvCgV_cghSJRAfMiNdWSdMMxYgNS1rFxQFXj04XwQpHHl-Ni4tEVY9EkMzKRVYAUMiUSsvZXwTJxNcDyFVDyxMJx1wHiM-RndVByU4XTQmWCdIIjMnIABhI0EiI10EGlQrQXFqcnsDIgkMMiNdWSdMMx4xP31_EGJJBWR6BVJ2DnwJd250fwMgBENtfBYJIwR7roYWxsWPM90%3D\\u0026ut=075acd00a0774b9d9d2a3786e8226e3a\\u0026nt=0\"],\"debug_tracks\":[\"https://sugar.zhihu.com/plutus_adreaper?ed=CjEEcx4wM316QGoCCTIvBUZ8DH9bbm5yKxJ_BVdhKh1cdl19ACBocncWNwEXMTYNXGNYI1x-aXV4EmpUCHY8WVZ3DH0NcmJ4aEY7WgJkdQhYcQhsWzdncGhGPVoEYGpSG3gMeh4vL317F2pQAGN1BU0wUHcKd2p5dB0zVlRqelNedAN5DHtqei0ca11VMnwAUXxffg95bXd9Q3QTQm19B151AXMAdG90aEQlWgF2L1hWdR8rTX5tcHwTYlMXIC1ZVnUfPkssZ3FoRiJaAXYjUxh4CWxXID19fgM0BkJtfBYNJEt3CGU3IzwYYkFEJSVUVnQOfgx1YnF7FmpUBGV6BlljWCNbfmpmOlBvD0UkPENOdnhvCgV_cghSJRAfMiNdWSdMMxYgNS1rFxQFXj04XwQpHHl-Ni4tEVY9EkMzKRVYAUMiUSsvZXwTJxNcDyFVDyxMJx1wHiM-RndVByU4XTQmWCdIIjMnIABhI0EiI10EGlQrQXFqcnsDIgkMMiNdWSdMMx4xP31_EGJJBWR6BVJ2DnwJd250fwMgBENtfBYJIwR7vJqKx_Q6f3I%3D\\u0026t=9\\u0026idi=100010136\\u0026s=1242d21a-9e4e-425b-a1a2-4f09f6f63455\\u0026ar=0.003008931875228882\\u0026pf=4\\u0026nt=0\\u0026di=tower\\u0026pdi=1744681538355662\\u0026ut=075acd00a0774b9d9d2a3786e8226e3a\"],\"conversion_tracks\":[\"https://sugar.zhihu.com/plutus_adreaper?t=5\\u0026ut=075acd00a0774b9d9d2a3786e8226e3a\\u0026nt=0\\u0026pf=4\\u0026di=tower\\u0026ed=CjEEfx4wM316QGoCCTIvBUZ8DH9bbm5yKxJ_BVdhKh1cdl19ACBocncWNwEXMTYNXGNYI1x-aXV4EmpUCHY8WVZ3DH0NcmJ4aEY7WgJkdQhYcQhsWzdncGhGPVoEYGpSG3gMeh4vL317F2pQAGN1BU0wUHcKd2p5dB0zVlRqelNedAN5DHtqei0ca11VMnwAUXxffg95bXd9Q3QTQm19B151AXMAdG90aEQlWgF2L1hWdR8rTX5tcHwTYlMXIC1ZVnUfPkssZ3FoRiJaAXYjUxh4CWxXID19fgM0BkJtfBYNJEt3CGU3IzwYYkFEJSVUVnQOfgx1YnF7FmpUBGV6BlljWCNbfmpmOlBvD0UkPENOdnhvCgV_cghSJRAfMiNdWSdMMxYgNS1rFxQFXj04XwQpHHl-Ni4tEVY9EkMzKRVYAUMiUSsvZXwTJxNcDyFVDyxMJx1wHiM-RndVByU4XTQmWCdIIjMnIABhI0EiI10EGlQrQXFqcnsDIgkMMiNdWSdMMx4xP31_EGJJBWR6BVJ2DnwJd250fwMgBENtfBYJIwR7gLAnue6sOYI%3D\\u0026s=1242d21a-9e4e-425b-a1a2-4f09f6f63455\\u0026idi=100010136\\u0026pdi=1744681538355662\\u0026ar=0.003008931875228882\"],\"extra_conversion_tracks\":{\"call_back\":[\"https://sugar.zhihu.com/plutus_adreaper_callback?si=4e8e8bc5-955c-42e7-bf1f-73d78c2293ef\\u0026os=3\\u0026zid=7\\u0026zaid=3567839\\u0026zcid=3498341\\u0026cid=3498341\\u0026event=__EVENTTYPE__\\u0026value=__EVENTVALUE__\\u0026ts=__TIMESTAMP__\\u0026cts=__TS__\\u0026mh=0d4c67703d44506b579057ff6733c754\\u0026adv=702604\\u0026ocg=0\\u0026cp=0\\u0026ocs=0\\u0026aic=0\\u0026ct=0\"]},\"za_ad_info\":\"CN/h2QEQByIBMV0xudBOYOXC1QE=\",\"za_ad_info_json\":\"{\\\"ad_id\\\":3567839,\\\"ad_zone_id\\\":7,\\\"category\\\":\\\"1\\\",\\\"timestamp\\\":1750898800,\\\"creative_id\\\":3498341}\",\"creatives\":[{\"id\":3498341,\"asset\":{\"brand_name\":\"bom2buy\",\"brand_logo\":\"https://pic3.zhimg.com/v2-301d482a89280b578ce683feac30bb48_xl.jpg?source=d6434cab\",\"title\":\"电子行业采购如何高效处理BOM表风险并优化采购成本？\",\"desc\":\"作为采购工程师，BOM表清洗、型号风险分析、替代料匹配和精准报价核算一直是痛点。最近尝试了一款工具，可自动清洗杂乱型号数据，检测元器件停产/库存风险，推荐Pin to Pin兼容替代方案，并基于实时渠道价格生成最低成本采购方案\",\"imgs\":[\"https://pic4.zhimg.com/v2-f6d1ccb5b414722ceee200665c606029_bh.jpg?source=d6434cab\"],\"landing_url\":\"https://www.bom2buy.com/bomtool?utm_source=zhihu\\u0026utm_medium=cpc\\u0026utm_campaign=promo_may2025\\u0026spu=biz%3D0%26ci%3D3498341%26si%3Dc5565c1c-ebea-43ae-8036-8801e9afc9ea%26ts%3D1750898754%26zid%3D7\",\"img_size\":1,\"cta\":\"查看详情\",\"image_ratio_extra\":{\"width\":25,\"height\":14},\"native_asset\":{\"plugin_type\":\"\"},\"img_full_screen\":false,\"zm_landing_url\":\"https://www.bom2buy.com/bomtool?utm_source=zhihu\\u0026utm_medium=cpc\\u0026utm_campaign=promo_may2025\\u0026spu=biz%3D0%26ci%3D3498341%26si%3Dc5565c1c-ebea-43ae-8036-8801e9afc9ea%26ts%3D1750898754%26zid%3D7\"},\"video_watch_num\":55640,\"fact_ctr\":0.003008931875228882,\"fact_cvr\":-1}],\"expand\":{\"display_advertising_tag\":true,\"download_silent\":false,\"is_new_webview\":true,\"is_cdn_speeding\":false,\"extra\":{\"parameters\":\"plugcb=https%3A%2F%2Fsugar.zhihu.com%2Fplutus_adreaper_callback%3Fcid%3D3498341%26ccid%3D2575188%26adid%3D3567839%26zoneid%3D7%26adsource%3Deffect%26sid%3Dc5565c1c-ebea-43ae-8036-8801e9afc9ea\",\"sign\":\"4e8e8bc5-955c-42e7-bf1f-73d78c2293ef\"},\"is_apk_market_direct\":false,\"interactive\":{\"deliver_time\":\"25 分钟前\",\"browse_string\":\"4.7 万\",\"participate_string\":\"39 \",\"slide_time_one\":3,\"slide_time_two\":10,\"slide_end\":true,\"deep_link_jump_time\":3},\"launch_timeout\":600},\"experiment_info\":\"{}\",\"view_x_tracks\":[\"https://sugar.zhihu.com/plutus_adreaper?idi=100010136\\u0026ar=0.003008931875228882\\u0026s=1242d21a-9e4e-425b-a1a2-4f09f6f63455\\u0026ut=075acd00a0774b9d9d2a3786e8226e3a\\u0026pf=4\\u0026di=tower\\u0026t=10\\u0026pdi=1744681538355662\\u0026nt=0\\u0026ed=CjEEewhlKSlzETdfVGguU15oAH8NIHd0fEBlSlM2fVZGcgouD3s5cnwcYQJXdi1KVnIfK1EnZ3N7E2VfAmlqQAJ4C38Pdmt4dgMxDgxjeAlTdg17HiAufX4DMQgMZXwWCTUEfwhlNjVzEGBfBmF_CV5jTCMFcW5wdx9qBgA1dgYIcAhwC3dicHRGa14LNC4AW38ALAx0YHd5FjRBRSNxAVxwCXIBe211egMzEAxgalMDeAlsWTZnd34XZFcFdjxRAngJbEwwNX1_AzEXDGBqXwg2BHoeLDkncxV0AVAjcQBNI1g4BXN8LS1Xb1cXJTlZD3gIfQx3bHh_EGFfAmV5Bl13HytRIGdwaFEnWlkkOEAYYAoLHXEcZXxjJRBGfi5fBndbP0FtOS8jAGAhUz8hRAQqVW8LBS80I3ohCEQiL1VOdn0wUCoyNWsXZBJFPRNdDiFQP1VmaQQtVTFCA2Y5RAYaWitVMzspKUt3VHUgPl8GKmYnWTpocHwQdBdfbS5fBndbP0FlKCVzFGdXH2R4Bl58Cn0Ocm50ehR0FVIicQBNJ193CQ3K8X1zp5_-\"],\"mobile_experiment\":{\"feed_card_exp\":\"\"},\"traffic_source\":1,\"party_id\":-2,\"deliver_tracks\":[\"http://proxy-ad-track-plutus.pek01.rack.zhihu.com:10000/ad-track/plutus_log?ed=CjEEewplKSlzETdfVGguU15oAH8NIHd0fEBlSlM2fVZGcgouD3s5cnwcYQJXdi1KVnIfK1EnZ3N7E2VfAmlqQAJ4C38Pdmt4dgMxDgxjeAlTdg17HiAufX4DMQgMZXwWCTUEfwhlNjVzEGBfBmF_CV5jTCMFcW5wdx9qBgA1dgYIcAhwC3dicHRGa14LNC4AW38ALAx0YHd5FjRBRSNxAVxwCXIBe211egMzEAxgalMDeAlsWTZnd34XZFcFdjxRAngJbEwwNX1_AzEXDGBqXwg2BHoeLDkncxV0AVAjcQBNI1g4BXN8LS1Xb1cXJTlZD3gIfQx3bHh_EGFfAmV5Bl13HytRIGdwaFEnWlkkOEAYYAoLHXEcZXxjJRBGfi5fBndbP0FtOS8jAGAhUz8hRAQqVW8LBS80I3ohCEQiL1VOdn0wUCoyNWsXZBJFPRNdDiFQP1VmaQQtVTFCA2Y5RAYaWitVMzspKUt3VHUgPl8GKmYnWTpocHwQdBdfbS5fBndbP0FlKCVzFGdXH2R4Bl58Cn0Ocm50ehR0FVIicQBNJ193CUsB7afd5XFd\\u0026ri=c5565c1c-ebea-43ae-8036-8801e9afc9ea\\u0026pf=4\\u0026t=12\\u0026idi=100010136\\u0026s=1242d21a-9e4e-425b-a1a2-4f09f6f63455\\u0026ar=0.003008931875228882\\u0026pdi=1744681538355662\\u0026bn=0\\u0026ut=075acd00a0774b9d9d2a3786e8226e3a\\u0026di=tower\\u0026nt=0\\u0026rui=c5565c1c-ebea-43ae-8036-8801e9afc9ea\\u0026pty=50\"],\"product_uuid\":1744681538355662}]}","pcontent":"","ncontent":"https://zhuanlan.zhihu.com/p/1912987670776352887","ext_info":{"content_type":"","content_id":"","question_id":-1,"auction_type":1,"ecpm":150.0,"type":1,"fact_bid_price":50.0,"fact_ctr":0.003008931875228882,"fact_cvr":-1.0,"deliver_tracks":["http://proxy-ad-track-plutus.pek01.rack.zhihu.com:10000/ad-track/plutus_log?di=tower\u0026pdi=1744681538355662\u0026ed=CjEEewllKSlzETdfVGguU15oAH8NIHd0fEBlSlM2fVZGcgouD3s5cnwcYQJXdi1KVnIfK1EnZ3N7E2VfAmlqQAJ4C38Pdmt4dgMxDgxjeAlTdg17HiAufX4DMQgMZXwWCTUEfwhlNjVzEGBfBmF_CV5jTCMFcW5wdx9qBgA1dgYIcAhwC3dicHRGa14LNC4AW38ALAx0YHd5FjRBRSNxAVxwCXIBe211egMzEAxgalMDeAlsWTZnd34XZFcFdjxRAngJbEwwNX1_AzEXDGBqXwg2BHoeLDkncxV0AVAjcQBNI1g4BXN8LS1Xb1cXJTlZD3gIfQx3bHh_EGFfAmV5Bl13HytRIGdwaFEnWlkkOEAYYAoLHXEcZXxjJRBGfi5fBndbP0FtOS8jAGAhUz8hRAQqVW8LBS80I3ohCEQiL1VOdn0wUCoyNWsXZBJFPRNdDiFQP1VmaQQtVTFCA2Y5RAYaWitVMzspKUt3VHUgPl8GKmYnWTpocHwQdBdfbS5fBndbP0FlKCVzFGdXH2R4Bl58Cn0Ocm50ehR0FVIicQBNJ193CRyevH8Z1jSb\u0026pf=4\u0026ft=2\u0026t=11\u0026ar=0.003008931875228882\u0026ut=075acd00a0774b9d9d2a3786e8226e3a\u0026idi=100010136\u0026s=1242d21a-9e4e-425b-a1a2-4f09f6f63455\u0026nt=0"],"zfeature_content_info":null,"author_id":0,"parent_id":0,"title":null,"content_embedding":null,"media_type":null,"party_id":"EFFECT","creative_id":3498341}},{"id":"72_1750898754.316","type":"feed","offset":72,"verb":"TOPIC_ACKNOWLEDGED_ARTICLE","created_time":1750898754,"updated_time":1750898754,"target":{"id":"1912987670776352887","type":"article","url":"https://api.zhihu.com/articles/1912987670776352887","author":{"id":"ca98434047ec3c7f3305ab7c2eb3e49b","url":"https://api.zhihu.com/people/ca98434047ec3c7f3305ab7c2eb3e49b","user_type":"people","url_token":"skspcl","name":"周总聊期货","headline":"从业10年，交易陪跑，体系健全 交易稳定。","avatar_url":"https://pic1.zhimg.com/50/v2-43abb622af33547bc86aa3d4f9470120_l.jpg?source=b6762063","is_org":false,"gender":1,"followers_count":459,"is_following":false,"is_followed":false},"title":"大环境差个屁 赚钱逻辑早就变了","comment_permission":"all","created":1748871876,"updated":1748871876,"voteup_count":402,"voting":0,"comment_count":29,"linkbox":{"category":"","pic":"","title":"","url":""},"excerpt":"前天跟一朋友唠嗑，他跟我说：\u0026#39;\u0026#39;现在国内八成的生意，都是把国外玩剩下的那一套照搬过来。”   就拿他自己来说吧，去年他把国外那种宠物搞笑视频整合收集起来，重新剪辑配乐bgm，再配上中文解说，发在国内短视频平台。等粉丝多了，就挂宠物用品的小黄车，就双十一那天，纯利潤赚了小20。   他说，现在想搞钱没那么难，而且赚钱的逻辑早就变了。 简单列举几个，比如说： 1、花200元在国外创意写作网站买一堆故事大纲，用翻译软件翻译…","excerpt_new":"前天跟一朋友唠嗑，他跟我说：\u0026#39;\u0026#39;现在国内八成的生意，都是把国外玩剩下的那一套照搬过来。”   就拿他自己来说吧，去年他把国外那种宠物搞笑视频整合收集起来，重新剪辑配乐bgm，再配上中文解说，发在国内短视频平台。等粉丝多了，就挂宠物用品的小黄车，就双十一那天，纯利潤赚了小20。   他说，现在想搞钱没那么难，而且赚钱的逻辑早就变了。 简单列举几个，比如说： 1、花200元在国外创意写作网站买一堆故事大纲，用翻译软件翻译…","preview_type":"default","preview_text":"","content":"\u003cp data-pid=\"LBnA5JMr\"\u003e前天跟一朋友唠嗑，他跟我说：\u0026#39;\u0026#39;现在国内八成的生意，都是把国外玩剩下的那一套照搬过来。”\u003c/p\u003e\u003cfigure data-size=\"normal\"\u003e\u003cimg src=\"https://pic4.zhimg.com/v2-82d79e194e6e0cf9db4705baef4bf62b_1440w.jpg\" data-rawwidth=\"1008\" data-rawheight=\"1364\" data-size=\"normal\" data-original-token=\"v2-757ebd650cfde4176ead1a79a5e3bb4f\" class=\"origin_image zh-lightbox-thumb\" width=\"1008\" data-original=\"https://pic4.zhimg.com/v2-82d79e194e6e0cf9db4705baef4bf62b_r.jpg\"/\u003e\u003c/figure\u003e\u003cp data-pid=\"1r6wg-k7\"\u003e就拿他自己来说吧，去年他把国外那种宠物搞笑视频整合收集起来，重新剪辑配乐bgm，再配上中文解说，发在国内短视频平台。等粉丝多了，就挂宠物用品的小黄车，就双十一那天，纯利潤赚了小20。\u003c/p\u003e\u003cfigure data-size=\"normal\"\u003e\u003cimg src=\"https://pica.zhimg.com/v2-434520f1ae496e6ee91a8ed75051848a_1440w.jpg\" data-rawwidth=\"1125\" data-rawheight=\"882\" data-size=\"normal\" data-original-token=\"v2-b82c1f466bb559b9ee68070c9b68c919\" class=\"origin_image zh-lightbox-thumb\" width=\"1125\" data-original=\"https://pica.zhimg.com/v2-434520f1ae496e6ee91a8ed75051848a_r.jpg\"/\u003e\u003c/figure\u003e\u003cp data-pid=\"QCU2y2gZ\"\u003e他说，现在想搞钱没那么难，而且赚钱的逻辑早就变了。\u003c/p\u003e\u003cp data-pid=\"STjyOFPC\"\u003e简单列举几个，比如说：\u003c/p\u003e\u003cp data-pid=\"QGPousAE\"\u003e1、花200元在国外创意写作网站买一堆故事大纲，用翻译软件翻译成中文后，再结合国内热门题材，再丢给ai润色写成小说，在国内小说平台连载。\u003c/p\u003e\u003cp data-pid=\"zQUMnVl6\"\u003e等积累到一定人气，就开启付费阅读，几个月下来赚了小几十w。\u003c/p\u003e\u003cp data-pid=\"ITWkYHLC\"\u003e我看到小红书上，有人搬国外手工制作黏土小摆件教程，下zai去水印，再翻译成中文，放在小红书上卖，一份99块，已售出2580单。\u003c/p\u003e\u003cp data-pid=\"oYG7tTJA\"\u003e2、有人发现国外一个小众时尚品牌的复古眼镜很有特色，就联系品牌方代理，拿到小红书上卖，国外进价一副50块，在小红书卖到200块，利潤很可观。\u003c/p\u003e\u003cp data-pid=\"JM0k8C-D\"\u003e还有人在国外二手市场，花100块淘到一些有年代感的黑胶唱片，在国内的复古音乐爱好者圈子里售卖，一张卖300快，很多人加价抢着要。\u003c/p\u003e\u003cp data-pid=\"-XUE-OPb\"\u003e3、还有位老师去国外教育网站，花300块卖一套科学实验课程资料，翻译成中文后，结合国内教材进行优化，再做成线上课程，在教育平台上卖，一门课卖199，吸引了很多家长学生报名。\u003c/p\u003e\u003cp data-pid=\"6VTFDz2D\"\u003e这世界上，其实95%的财富都藏在信息差里。而你还在那抱怨大环境不好，人家早就靠信息差赚的盆满钵满，中国有13亿人口，就有10亿人没坐过飞机，信息差更是大到无法想象。\u003c/p\u003e\u003cp data-pid=\"6eCIwDZN\"\u003e赚 钱就是找需求供给，然后撮合，再找差价从中套利。\u003c/p\u003e\u003cp data-pid=\"CuZKoB4K\"\u003e2025是一人公司时代，期待与你一起进化。\u003c/p\u003e\u003cp\u003e\u003c/p\u003e","is_labeled":false,"visited_count":36290,"thumbnails":["https://pica.zhimg.com/50/v2-c2a41968e933fce7a6e7befb1fdf9a2c_720w.jpg?source=b6762063","https://pic1.zhimg.com/50/v2-467ff29730de49aa645d931349835d2c_720w.jpg?source=b6762063"],"favorite_count":1238,"article_type":"normal","is_navigator":false,"navigator_vote":false,"vote_next_step":"vote"},"brief":"{\"source\": \"TS\", \"type\": \"article\", \"id\": 1912987670776352887}","attached_info":"CoYHCL651tz1op/cjAEQBxoJMjU4NTAxMDQ4IMTV9sEGKJIDMB1ASEooCh1UU19TT1VSQ0VfTkVBUkxJTkVfQ09OVEVOVF9WMhIBMBgAIAA6AEooChNUU19TT1VSQ0VfRkVFRFJFX1Y5EgEwGAAgADoKeyJyYXciOiIifWIgYjFlYTFmZThjMjk1ZDk3ZGRjNTE2N2MzNmRkMTY3NjdyEzE5MTI5ODc2NzA3NzYzNTI4ODeqAQlyZWNvbW1lbmTCASBjYTk4NDM0MDQ3ZWMzYzdmMzMwNWFiN2MyZWIzZTQ5YvIBCggMEgZOb3JtYWzyASgIChIkODJjNTRmYjktNjFjMS00NDI4LWIyYjktNmYwMGMwMDEzOWRh8gEGCAsSAjEzggIAiAKhisvN+jKSAiBjYTk4NDM0MDQ3ZWMzYzdmMzMwNWFiN2MyZWIzZTQ5YpoCAMoCFlNob3JJbnRlcmVzdFdlaWdodFJ1bGXKAhZBY3Rpb25TaG9ySW50ZXJlc3RSdWxlygIbSW50ZXJhY3Rpb25TaG9ySW50ZXJlc3RSdWxlygIWUmV2aXNpdFZhbHVlV2VpZ2h0UnVsZcoCGFBlcmlvZEludGVyZXN0V2VpZ2h0UnVsZcoCFVVzZXJMY25FeGl0V2VpZ2h0UnVsZcoCFENvbnRlbnRBZ2VXZWlnaHRSdWxl2gIdVFNfU09VUkNFX05FQVJMSU5FX0NPTlRFTlRfVjLoAgL6AgtOT1JNQUxfRkxPV4oDIDZjZWNiYmNmNTdiMzQ3YmI5Mjc4NmQ5NWY3MDRkYjlmmgMNCgJ2MhAAGgVvdGhlcqgDwpsC2AMA+gN9EgxVTktOT1dOX01PREUgACoNTk9fSU1BR0VfTU9ERTotCAMQ8AcY1AoiI3YyLTc1N2ViZDY1MGNmZGU0MTc2ZWFkMWE3OWE1ZTNiYjRmOi0IAxDlCBjyBiIjdjItYjgyYzFmNDY2YmI1NTliOWVlNjgwNzBjOWI2OGM5MTmABACIBACSBAZOb3JtYWyaBAEyoAQAqAQAsAQAugQGbWFudWFswgQDMTYwyAQA0gQP5o6o6I2Q5bey5pu05paw2AQA8AQA+QQAAAAA4fHHP4EFAAAAAAAAAACJBYpNJQiRkNI/kgUAmgUDZGZ0ogUDZGZ0sgUBMbkFAAAAAAAAAADQBQDgBQDoBQDwBQ2QBgCgBk6oBgOSAi4KCTI1ODUwMTA0OBITMTkxMjk4NzY3MDc3NjM1Mjg4NxgHIgpJTUFHRV9URVhU","action_card":false},{"id":"73_1750898754.991","type":"feed","offset":73,"verb":"TOPIC_ACKNOWLEDGED_ARTICLE","created_time":1750898754,"updated_time":1750898754,"target":{"id":"1920972926808744255","type":"article","url":"https://api.zhihu.com/articles/1920972926808744255","author":{"id":"4f5641ed36af5676befb76811463b138","url":"https://api.zhihu.com/people/4f5641ed36af5676befb76811463b138","user_type":"people","url_token":"xiaodongQ","name":"又过了一秋","headline":"走更多的路，看更多的风景（AKA 菜就多练）","avatar_url":"https://pica.zhimg.com/50/55c48304a3e426bcfa0fd9a059aa04eb_l.jpg?source=b6762063","is_org":false,"gender":1,"followers_count":52,"is_following":false,"is_followed":false},"title":"TCP发送接收过程 -- 学习netfilter和iptables","comment_permission":"all","created":1750776194,"updated":1750895812,"voteup_count":3,"voting":0,"comment_count":0,"linkbox":{"category":"","pic":"","title":"","url":""},"excerpt":"博客文章链接：TCP发送接收过程 -- 学习netfilter和iptables netfilter作为网络协议栈非常关键的一部分，本篇学习下netfilter和iptables，有助于理解TCP发送接收过程 1. 背景在 追踪内核网络堆栈的几种方式 里记录了一下iptables设置日志跟踪的实践过程，CentOS8下为什么实验失败还没有定论。平常工作中设置iptables防火墙规则，基本只是浮于表面记住，不清楚为什么这么设置，规则也经常混淆。 TCP半连接全连接（一） -- 全连接队…","excerpt_new":"博客文章链接：TCP发送接收过程 -- 学习netfilter和iptables netfilter作为网络协议栈非常关键的一部分，本篇学习下netfilter和iptables，有助于理解TCP发送接收过程 1. 背景在 追踪内核网络堆栈的几种方式 里记录了一下iptables设置日志跟踪的实践过程，CentOS8下为什么实验失败还没有定论。平常工作中设置iptables防火墙规则，基本只是浮于表面记住，不清楚为什么这么设置，规则也经常混淆。 TCP半连接全连接（一） -- 全连接队…","preview_type":"default","preview_text":"","column":{"id":"c_1920966178395881871","type":"column","url":"https://api.zhihu.com/columns/c_1920966178395881871","author":{"id":"","url":"","user_type":"people","url_token":"","name":"匿名用户","headline":"","avatar_url":"https://pica.zhimg.com/v2-d41c2ceaed8f51999522f903672a521f_l.jpg?source=b6762063","is_org":false,"gender":-1,"followers_count":0,"is_following":false,"is_followed":false},"title":"TCP发送接收过程","imageUrl":"https://picx.zhimg.com/v2-f111d7ee1c41944859e975a712c0883b_720w.jpg?source=d16d100b","comment_permission":"private","intro":"\u003cp\u003eTCP发送接收过程相关实验和流程梳理\u003c/p\u003e","updated":1750775618,"is_following":false},"content":"\u003cblockquote data-pid=\"23GfUlnf\"\u003e博客文章链接：\u003ca href=\"https://link.zhihu.com/?target=https%3A//xiaodongq.github.io/2024/07/05/netfilter-iptables-learn/\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\"\u003eTCP发送接收过程 -- 学习netfilter和iptables\u003c/a\u003e\u003c/blockquote\u003e\u003cp data-pid=\"M8WhOPkC\"\u003enetfilter作为网络协议栈非常关键的一部分，本篇学习下netfilter和iptables，有助于理解TCP发送接收过程\u003c/p\u003e\u003ch2\u003e\u003cb\u003e1. 背景\u003c/b\u003e\u003c/h2\u003e\u003cp data-pid=\"fT4Qq0YC\"\u003e在\u003cb\u003e\u003ca href=\"https://link.zhihu.com/?target=https%3A//xiaodongq.github.io/2024/07/03/strace-kernel-network-stack\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\"\u003e追踪内核网络堆栈的几种方式\u003c/a\u003e\u003c/b\u003e里记录了一下iptables设置日志跟踪的实践过程，CentOS8下为什么实验失败还没有定论。\u003c/p\u003e\u003cp data-pid=\"2gqfo5xH\"\u003e平常工作中设置iptables防火墙规则，基本只是浮于表面记住，不清楚为什么这么设置，规则也经常混淆。\u003c/p\u003e\u003cp data-pid=\"Y3qc38qe\"\u003e\u003cb\u003e\u003ca href=\"https://link.zhihu.com/?target=https%3A//xiaodongq.github.io/2024/05/18/tcp_connect/\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\"\u003eTCP半连接全连接（一） -- 全连接队列相关过程\u003c/a\u003e\u003c/b\u003e里面的TODO项：“内核drop包的时机，以及跟抓包的关系。哪些情况可能会抓不到drop的包？”，在系列文章里分析了源码里全连接、半连接溢出时drop的位置，给了个tcpdump能抓到drop原始请求包的现象结论，但没有理清楚流程。\u003c/p\u003e\u003cp data-pid=\"G-3ics3-\"\u003e这些问题都或多或少，或直接或间接跟\u003cb\u003e内核中的netfilter框架\u003c/b\u003e有关系。\u003c/p\u003e\u003cp data-pid=\"V_zc7a4S\"\u003e基于上述几个原因，学习一下\u003ccode\u003enetfilter\u003c/code\u003e框架，以及它的“客户端”：\u003ccode\u003eiptables\u003c/code\u003e。同时说明下\u003ccode\u003etcpdump\u003c/code\u003e抓包跟\u003ccode\u003enetfilter\u003c/code\u003e的关系。\u003c/p\u003e\u003cp data-pid=\"YKHOlfbc\"\u003e主要参考学习以下文章：\u003c/p\u003e\u003cul\u003e\u003cli data-pid=\"KP73LU1M\"\u003e\u003cb\u003e\u003ca href=\"https://link.zhihu.com/?target=https%3A//arthurchiao.art/blog/deep-dive-into-iptables-and-netfilter-arch-zh\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\"\u003e[译] 深入理解 iptables 和 netfilter 架构\u003c/a\u003e\u003c/b\u003e\u003c/li\u003e\u003cli data-pid=\"b_Vn58MI\"\u003e\u003cb\u003e\u003ca href=\"https://link.zhihu.com/?target=https%3A//mp.weixin.qq.com/s%3F__biz%3DMjM5Njg5NDgwNA%3D%3D%26mid%3D2247486315%26idx%3D1%26sn%3Dce3a85a531447873e02ccef17198e8fe%26chksm%3Da6e30a509194834693bb7ee50cdd3868ab1f686a3a0807e2d1a514253ba1579d1246b99bf35d%26scene%3D178%26cur_album_id%3D1532487451997454337%23rd\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\"\u003e用户态 tcpdump 如何实现抓到内核网络包的?\u003c/a\u003e\u003c/b\u003e\u003c/li\u003e\u003cli data-pid=\"DDbMgavO\"\u003e\u003cb\u003e\u003ca href=\"https://link.zhihu.com/?target=https%3A//mp.weixin.qq.com/s%3F__biz%3DMjM5Njg5NDgwNA%3D%3D%26mid%3D2247487465%26idx%3D1%26sn%3Daace79dcb4edb011cf69e7cd9f7331f9%26chksm%3Da6e30ed2919487c402f20fdda822bc63f057a334e81e8d26e48194f5b679882c627311205bbe%26scene%3D178%26cur_album_id%3D1532487451997454337%23rd\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\"\u003e来，今天飞哥带你理解 iptables 原理！\u003c/a\u003e\u003c/b\u003e\u003c/li\u003e\u003cli data-pid=\"WJ7VlH5J\"\u003e\u003cb\u003e\u003ca href=\"https://link.zhihu.com/?target=https%3A//juejin.cn/book/6844733794801418253/section/7355436057355583528\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\"\u003eiptable 的基石：netfilter 原理与实战\u003c/a\u003e\u003c/b\u003e\u003c/li\u003e\u003c/ul\u003e\u003cp data-pid=\"40OVOzSj\"\u003e\u003ci\u003e说明：本博客作为个人学习实践笔记，可供参考但非系统教程，可能存在错误或遗漏，欢迎指正。若需系统学习，建议参考原链接。\u003c/i\u003e\u003c/p\u003e\u003ch2\u003e\u003cb\u003e2. netfilter基本介绍\u003c/b\u003e\u003c/h2\u003e\u003cp data-pid=\"dO7NdwJN\"\u003e官网：\u003cb\u003e\u003ca href=\"https://link.zhihu.com/?target=https%3A//netfilter.org/\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\"\u003enetfilter\u003c/a\u003e\u003c/b\u003e，上面可看到netfilter相关项目的动态，如iptables、nftables、conntrack-tools等。\u003c/p\u003e\u003cp data-pid=\"gBMtAkNQ\"\u003enetfilter是Linux内核中一个非常关键的子系统，它负责在网络协议栈的不同层级处理数据包，提供了一系列强大的网络数据包处理功能，包括但不限于数据包过滤、网络地址转换（NAT）以及连接跟踪。\u003c/p\u003e\u003cp data-pid=\"08v_i5B9\"\u003enetfilter框架由Linux内核防火墙和网络维护者 Rusty Russell 所提出和实现。这个作者还基于 netfilter 开发了大名鼎鼎的 iptables，用于在用户空间管理这些复杂的 netfilter 规则。（番外：这位大佬18年宣布退出并投入到比特币闪电网络的原型开发中了，大佬的\u003cb\u003e\u003ca href=\"https://link.zhihu.com/?target=https%3A//rusty.ozlabs.org/\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\"\u003e博客\u003c/a\u003e\u003c/b\u003e）\u003c/p\u003e\u003cul\u003e\u003cli data-pid=\"QphOM0S2\"\u003enetfilter最初在Linux 2.4.x内核系列中引入，作为继\u003ccode\u003eIPchains\u003c/code\u003e之后的新一代Linux防火墙框架。它至今仍是Linux系统中实现网络数据包处理的核心机制。\u003c/li\u003e\u003cli data-pid=\"Sm0mbFlQ\"\u003enetfilter的设计遵循高度模块化的原则，这意味着它的功能可以通过加载或卸载内核模块来动态扩展，从而实现了极高的灵活性和可扩展性。\u003c/li\u003e\u003cli data-pid=\"2nZ7CnXO\"\u003enetfilter的核心在于其hook机制。它在Linux网络堆栈的关键位置定义了多个挂载点（hook points），比如在数据包流入（PREROUTING）、流出（POSTROUTING）、进入本地进程（INPUT）和转发（FORWARD）时。当数据包经过这些点时，预先注册的hook函数会被调用，执行相应的处理逻辑，如过滤、修改或丢弃数据包。\u003c/li\u003e\u003cli data-pid=\"2YhQ6k1z\"\u003enetfilter通常与用户空间工具\u003ccode\u003eiptables\u003c/code\u003e一起提及。netfilter作为内核部分，负责实际的数据包处理；而\u003ccode\u003eiptables\u003c/code\u003e则是一个高级命令行工具，允许管理员定义复杂的规则集来控制netfilter的行为，比如设置过滤规则、NAT规则等。\u003c/li\u003e\u003c/ul\u003e\u003cp data-pid=\"O2PkbQTI\"\u003e\u003cb\u003enftables\u003c/b\u003e：（之前比较陌生，上面netfilter官网上也有nftables介绍）\u003c/p\u003e\u003cul\u003e\u003cli data-pid=\"vg2rheri\"\u003e也是一个netfilter项目，旨在替换现有的 {ip,ip6,arp,eb}tables 框架，为 {ip,ip6}tables 提供一个新的包过滤框架、一个新的用户空间实用程序（nft）和一个兼容层。\u003c/li\u003e\u003cli data-pid=\"aJeUiiVa\"\u003e虽然\u003ccode\u003eiptables\u003c/code\u003e长期以来是与netfilter交互的主要方式，但随着\u003ccode\u003enftables\u003c/code\u003e的引入，它提供了一种更现代、更灵活的方式来配置netfilter规则。\u003ccode\u003enftables\u003c/code\u003e支持更丰富的表达能力和更高效的内部实现。\u003c/li\u003e\u003cli data-pid=\"sBds_ZQv\"\u003eCentOS8里，就用 \u003ccode\u003enftables\u003c/code\u003e 框架替代了 \u003ccode\u003eiptables\u003c/code\u003e 框架作为默认的网络包过滤工具。（\u003cb\u003e难道这就是之前日志跟踪实验没成功的原因？ TODO\u003c/b\u003e）\u003c/li\u003e\u003c/ul\u003e\u003cp data-pid=\"d4Q4qnpM\"\u003e疑问：既然\u003ccode\u003enftables\u003c/code\u003e旨在替换\u003ccode\u003eiptables\u003c/code\u003e，现在的使用情况怎么样？\u003c/p\u003e\u003cblockquote data-pid=\"Zna9AjmQ\"\u003e 实际上目前各大 Linux 发行版都已经不建议使用 iptables 了，甚至把 iptables 重命名为了 iptables-legacy\u003cbr/\u003e 目前 opensuse/debian/opensuse 都已经预装了并且推荐使用 nftables，而且 firewalld 已经默认使用 nftables 作为它的后端了。\u003cbr/\u003e \u003cb\u003e但是现在 kubernetes/docker 都还是用的 iptables\u003c/b\u003e\u003cbr/\u003e 参考自：\u003cb\u003e\u003ca href=\"https://link.zhihu.com/?target=https%3A//thiscute.world/posts/iptables-and-container-networks/\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\"\u003eiptables 及 docker 容器网络分析\u003c/a\u003e\u003c/b\u003e\u003c/blockquote\u003e\u003cp data-pid=\"y-clXF1p\"\u003e查看自己当前CentOS8.5的环境，firewalld的配置文件：/etc/firewalld/firewalld.conf，看配的是iptables\u003c/p\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode class=\"language-text\"\u003e# FirewallBackend                                                                                                                                             \n# Selects the firewall backend implementation.\n# Choices are:\n#   - nftables (default)\n#   - iptables (iptables, ip6tables, ebtables and ipset)\n#FirewallBackend=nftables\nFirewallBackend=iptables\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch2\u003e\u003cb\u003e3. netfilter hooks\u003c/b\u003e\u003c/h2\u003e\u003cp data-pid=\"25IhZIPK\"\u003enetfilter提供了\u003ccode\u003e5\u003c/code\u003e个hook点，这些在内核协议栈中已经定义好了（之前学习eBPF时可了解到内核提供了各种类型hook钩子）\u003c/p\u003e\u003cp data-pid=\"VEGIRuNO\"\u003e\u003ci\u003e注意：下面列的hook类型是IPv4的宏，IPv6则为\u003ccode\u003eNF_IP6_PRE_ROUTING\u003c/code\u003e形式，枚举值是一样的。具体见下面\u003cb\u003eip_rcv逻辑\u003c/b\u003e小节的分析说明。\u003c/i\u003e\u003c/p\u003e\u003cul\u003e\u003cli data-pid=\"CdJq060u\"\u003e\u003ccode\u003eNF_IP_PRE_ROUTING\u003c/code\u003e：接收到的包进入协议栈后立即触发此 hook，在进行任何路由判断（将包发往哪里）之前\u003c/li\u003e\u003cli data-pid=\"9UsVB4nz\"\u003e\u003ccode\u003eNF_IP_LOCAL_IN\u003c/code\u003e：接收到的包经过路由判断，如果目的是本机，将触发此 hook\u003c/li\u003e\u003cli data-pid=\"KKMROuqW\"\u003e\u003ccode\u003eNF_IP_FORWARD\u003c/code\u003e：接收到的包经过路由判断，如果目的是其他机器，将触发此 hook\u003c/li\u003e\u003cli data-pid=\"wIXnE_8j\"\u003e\u003ccode\u003eNF_IP_LOCAL_OUT\u003c/code\u003e：本机产生的准备发送的包，在进入协议栈后立即触发此 hook\u003c/li\u003e\u003cli data-pid=\"LCQ6LO9G\"\u003e\u003ccode\u003eNF_IP_POST_ROUTING\u003c/code\u003e：本机产生的准备发送的包或者转发的包，在经过路由判断之后， 将触发此 hook\u003c/li\u003e\u003c/ul\u003e\u003cp data-pid=\"svo1b40z\"\u003e内核协议栈各hook点位置和控制流如下图所示（来自\u003cb\u003e\u003ca href=\"https://link.zhihu.com/?target=https%3A//upload.wikimedia.org/wikipedia/commons/3/37/Netfilter-packet-flow.svg\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\"\u003eWikipedia\u003c/a\u003e\u003c/b\u003e）：\u003c/p\u003e\u003cfigure data-size=\"normal\"\u003e\u003cimg src=\"https://picx.zhimg.com/v2-c3ed15c09ba55cf5ec1b76a4a88acde1_1440w.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1650\" data-rawheight=\"525\" data-original-token=\"v2-c3ed15c09ba55cf5ec1b76a4a88acde1\" class=\"origin_image zh-lightbox-thumb\" width=\"1650\" data-original=\"https://picx.zhimg.com/v2-c3ed15c09ba55cf5ec1b76a4a88acde1_r.jpg\"/\u003e\u003c/figure\u003e\u003ch3\u003e\u003cb\u003e3.1. iptables的“四表五链”\u003c/b\u003e\u003c/h3\u003e\u003cp data-pid=\"pz7Bksgs\"\u003e为了理解上面这张图，还需要了解 \u003cb\u003e\u003ccode\u003echain\u003c/code\u003e\u003c/b\u003e 和 \u003cb\u003e\u003ccode\u003etable\u003c/code\u003e\u003c/b\u003e的概念。\u003c/p\u003e\u003cp data-pid=\"uLxKAH_p\"\u003e上面我们说\u003ccode\u003eiptables\u003c/code\u003e是基于\u003ccode\u003enetfilter\u003c/code\u003e实现的，用于控制\u003ccode\u003enetfilter\u003c/code\u003e的行为。很多时候两者混在一起说，所以直接基于\u003ccode\u003eiptables\u003c/code\u003e来说明上图中的\u003ccode\u003echain\u003c/code\u003e和\u003ccode\u003etable\u003c/code\u003e。\u003c/p\u003e\u003cul\u003e\u003cli data-pid=\"6fdzNi4m\"\u003eiptables 使用 \u003ccode\u003etable\u003c/code\u003e 来组织规则，根据用来做什么类型的判断标准，将规则分为不同 \u003ccode\u003etable\u003c/code\u003e。\u003c/li\u003e\u003cli data-pid=\"DcauY2iq\"\u003e在每个 \u003ccode\u003etable\u003c/code\u003e 内部，规则被进一步组织成 \u003ccode\u003echain\u003c/code\u003e，内置的 \u003ccode\u003echain\u003c/code\u003e 是由内置的 \u003ccode\u003ehook\u003c/code\u003e 触发 的。\u003c/li\u003e\u003c/ul\u003e\u003cp data-pid=\"jDZngTG-\"\u003e\u003cb\u003echain：\u003c/b\u003e\u003c/p\u003e\u003cp data-pid=\"e_CmFyGr\"\u003echain基本上能决定规则是何时被匹配的。内置的 chain 名字和 netfilter hook 名字是一一对应的：\u003c/p\u003e\u003cul\u003e\u003cli data-pid=\"tThS5cbL\"\u003e\u003ccode\u003ePREROUTING\u003c/code\u003e：由 \u003ccode\u003eNF_IP_PRE_ROUTING\u003c/code\u003e hook 触发\u003c/li\u003e\u003cli data-pid=\"YGpGZsCJ\"\u003e\u003ccode\u003eINPUT\u003c/code\u003e：由 \u003ccode\u003eNF_IP_LOCAL_IN\u003c/code\u003e hook 触发\u003c/li\u003e\u003cli data-pid=\"D1avqERe\"\u003e\u003ccode\u003eFORWARD\u003c/code\u003e：由 \u003ccode\u003eNF_IP_FORWARD\u003c/code\u003e hook 触发\u003c/li\u003e\u003cli data-pid=\"AhFAmaFl\"\u003e\u003ccode\u003eOUTPUT\u003c/code\u003e：由 \u003ccode\u003eNF_IP_LOCAL_OUT\u003c/code\u003e hook 触发\u003c/li\u003e\u003cli data-pid=\"X1E58GY7\"\u003e\u003ccode\u003ePOSTROUTING\u003c/code\u003e：由 \u003ccode\u003eNF_IP_POST_ROUTING\u003c/code\u003e hook 触发\u003c/li\u003e\u003c/ul\u003e\u003cp data-pid=\"MSFkCalj\"\u003e为什么叫链，看下下面以\u003ccode\u003ePREROUTING\u003c/code\u003e为例的示意图就明白了：\u003c/p\u003e\u003cfigure data-size=\"normal\"\u003e\u003cimg src=\"https://pic4.zhimg.com/v2-1d5b515954cd92a714bb2935b85d3017_1440w.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1258\" data-rawheight=\"564\" data-original-token=\"v2-1d5b515954cd92a714bb2935b85d3017\" class=\"origin_image zh-lightbox-thumb\" width=\"1258\" data-original=\"https://pic4.zhimg.com/v2-1d5b515954cd92a714bb2935b85d3017_r.jpg\"/\u003e\u003c/figure\u003e\u003cp data-pid=\"87kQZ5dN\"\u003e规则列表以\u003cb\u003e链\u003c/b\u003e的方式组织，且归属不同的表(\u003ccode\u003etable\u003c/code\u003e)，不同表之间还有优先级关系。\u003c/p\u003e\u003cp data-pid=\"XxzQhr9s\"\u003e\u003cb\u003etable：\u003c/b\u003e\u003c/p\u003e\u003cp data-pid=\"rGeWRpzx\"\u003eiptables 提供的 table 类型如下：\u003c/p\u003e\u003cul\u003e\u003cli data-pid=\"7g55Xaoi\"\u003e\u003ccode\u003efilter\u003c/code\u003e：过滤（放行/拒绝），判断是否允许一个包通过，这个 table 提供了防火墙 的一些常见功能\u003c/li\u003e\u003cli data-pid=\"PEZc8m6m\"\u003e\u003ccode\u003enat\u003c/code\u003e：网络地址转换，通常用于将包路由到无法直接访问的网络\u003c/li\u003e\u003cli data-pid=\"CbMRylqa\"\u003e\u003ccode\u003emangle\u003c/code\u003e：修改 IP 头\u003c/li\u003e\u003cli data-pid=\"PKD8A4YR\"\u003e\u003ccode\u003eraw\u003c/code\u003e：conntrack 相关，其唯一目的就是提供一个让包绕过连接跟踪的框架\u003c/li\u003e\u003c/ul\u003e\u003cp data-pid=\"z-a08B4t\"\u003e四表五链的关系和优先级：\u003c/p\u003e\u003cfigure data-size=\"normal\"\u003e\u003cimg src=\"https://pic3.zhimg.com/v2-d7218501eeac25f21fa82c9d9a886402_1440w.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"581\" data-rawheight=\"342\" data-original-token=\"v2-d7218501eeac25f21fa82c9d9a886402\" class=\"origin_image zh-lightbox-thumb\" width=\"581\" data-original=\"https://pic3.zhimg.com/v2-d7218501eeac25f21fa82c9d9a886402_r.jpg\"/\u003e\u003c/figure\u003e\u003cp data-pid=\"MfPKxnbM\"\u003e\u003cb\u003e\u003ca href=\"https://link.zhihu.com/?target=https%3A//mp.weixin.qq.com/s%3F__biz%3DMjM5Njg5NDgwNA%3D%3D%26mid%3D2247487465%26idx%3D1%26sn%3Daace79dcb4edb011cf69e7cd9f7331f9%26chksm%3Da6e30ed2919487c402f20fdda822bc63f057a334e81e8d26e48194f5b679882c627311205bbe%26scene%3D178%26cur_album_id%3D1532487451997454337%23rd\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\"\u003e出处\u003c/a\u003e\u003c/b\u003e\u003c/p\u003e\u003cp data-pid=\"96Clgg6f\"\u003e下面跟踪分析下内核流程。这里先找TCP相关追踪点获取一个堆栈，再根据堆栈去找代码分析。\u003c/p\u003e\u003ch2\u003e\u003cb\u003e4. 接收流程内核代码跟踪\u003c/b\u003e\u003c/h2\u003e\u003cp data-pid=\"yMrYii4O\"\u003e说明：本篇环境基于CentOS8.5，内核：4.18.0-348.7.1.el8_5.x86_64\u003c/p\u003e\u003ch3\u003e\u003cb\u003e4.1. 先获取一份网络堆栈\u003c/b\u003e\u003c/h3\u003e\u003cp data-pid=\"tWnp7m8b\"\u003e有多种方式获取堆栈，可按之前\u003cb\u003e\u003ca href=\"https://link.zhihu.com/?target=https%3A//xiaodongq.github.io/2024/07/03/strace-kernel-network-stack/\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\"\u003e追踪内核网络堆栈的几种方式\u003c/a\u003e\u003c/b\u003e里的方法，这里用bpftrace来获取。\u003c/p\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode class=\"language-text\"\u003e# TCP相关追踪点\n[root@xdlinux ➜ ~ ]$ bpftrace -l |grep -E \u0026#39;:tcp:|sock:inet|skb:\u0026#39;\ntracepoint:skb:consume_skb\ntracepoint:skb:kfree_skb\ntracepoint:skb:skb_copy_datagram_iovec\ntracepoint:sock:inet_sock_set_state\ntracepoint:tcp:tcp_destroy_sock\ntracepoint:tcp:tcp_probe\ntracepoint:tcp:tcp_rcv_space_adjust\ntracepoint:tcp:tcp_receive_reset\ntracepoint:tcp:tcp_retransmit_skb\ntracepoint:tcp:tcp_retransmit_synack\ntracepoint:tcp:tcp_send_reset\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp data-pid=\"0oVacUaF\"\u003e先选取跟TCP状态变化有关的 \u003ccode\u003etracepoint:sock:inet_sock_set_state\u003c/code\u003e进行跟踪，并打印内核堆栈\u003c/p\u003e\u003cp data-pid=\"HbkK42SQ\"\u003e方法：用bpftrace启动eBPF跟踪，服务端\u003ccode\u003epython -m http.server\u003c/code\u003e起一个服务，并通过客户端\u003ccode\u003ecurl 192.168.1.150:8000\u003c/code\u003e。\u003c/p\u003e\u003cp data-pid=\"XhOeEspk\"\u003e截取一个网络接收的堆栈如下（从下到上）：\u003c/p\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode class=\"language-text\"\u003e[root@xdlinux ➜ ~ ]$ bpftrace -e \u0026#39;tracepoint:sock:inet_sock_set_state { printf(\u0026#34;comm:%s, stack:%s\\n\u0026#34;, comm, kstack); }\u0026#39;\n...\ncomm:swapper/9, stack:\n        inet_sk_state_store+132\n        # linux-4.18/net/ipv4/af_inet.c\n        inet_sk_state_store+132\n        # linux-4.18/net/ipv4/tcp.c\n        tcp_set_state+148\n        # linux-4.18/net/ipv4/tcp.c\n        tcp_done+54\n        tcp_rcv_state_process+3421\n        # linux-4.18/net/ipv4/tcp_input.c\n        tcp_v4_do_rcv+180\n        # 传输层，TCP协议初始化时.handler注册为该函数\n        # linux-4.18/net/ipv4/tcp_ipv4.c\n        tcp_v4_rcv+2883\n        ip_protocol_deliver_rcu+44\n        # linux-4.18/net/ipv4/ip_input.c\n        ip_local_deliver_finish+77\n        ip_local_deliver+224\n        # IP层\n        # linux-4.18/net/ipv4/ip_input.c\n        ip_rcv+635\n        # 网络协议栈收到skb，依次向上面的各协议调用栈传递\n        # linux-4.18/net/core/dev.c，声明为static int __netif_receive_skb_core(struct sk_buff *skb, bool pfmemalloc)\n        __netif_receive_skb_core+2963\n        # 数据包将被送到协议栈中\n        # linux-4.18/net/core/dev.c\n        netif_receive_skb_internal+61\n        # 网卡GRO特性，理解成把相关的小包合并成一个大包，目的是减少传送给网络栈的包数\n        # linux-4.18/net/core/dev.c，声明为napi_gro_receive(struct napi_struct *napi, struct sk_buff *skb)，传入已经是skb了\n        napi_gro_receive+186\n        # 网卡驱动注册的poll，这里面抽取数据成 struct sk_buff *skb\n        # linux-4.18/drivers/net/ethernet/realtek/r8169.c\n        rtl8169_poll+667\n        __napi_poll+45\n        # net_dev_init(void)时注册的 NET_RX_SOFTIRQ软中断 处理函数\n        # linux-4.18/net/core/dev.c\n        net_rx_action+595\n        # 软中断\n        __softirqentry_text_start+215\n        irq_exit+247\n        # 硬中断\n        do_IRQ+127\n        ret_from_intr+0\n        cpuidle_enter_state+219\n        cpuidle_enter+44\n        do_idle+564\n        cpu_startup_entry+111\n        start_secondary+411\n        secondary_startup_64_no_verify+194\n...\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp data-pid=\"GXR4Wb4k\"\u003e上面堆栈也映证了\u0026#34;\u003cb\u003e\u003ca href=\"https://link.zhihu.com/?target=https%3A//mp.weixin.qq.com/s%3F__biz%3DMjM5Njg5NDgwNA%3D%3D%26mid%3D2247484058%26idx%3D1%26sn%3Da2621bc27c74b313528eefbc81ee8c0f%26chksm%3Da6e303a191948ab7d06e574661a905ddb1fae4a5d9eb1d2be9f1c44491c19a82d95957a0ffb6%26scene%3D21%23wechat_redirect\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\"\u003e图解Linux网络包接收过程\u003c/a\u003e\u003c/b\u003e\u0026#34;里的分析流程图：\u003c/p\u003e\u003cp data-pid=\"eW14SZGo\"\u003e软中断处理：\u003c/p\u003e\u003cfigure data-size=\"normal\"\u003e\u003cimg src=\"https://pic2.zhimg.com/v2-b8ac1925f90c8b93a5c4cae2800ddc77_1440w.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1260\" data-rawheight=\"448\" data-original-token=\"v2-b8ac1925f90c8b93a5c4cae2800ddc77\" class=\"origin_image zh-lightbox-thumb\" width=\"1260\" data-original=\"https://pic2.zhimg.com/v2-b8ac1925f90c8b93a5c4cae2800ddc77_r.jpg\"/\u003e\u003c/figure\u003e\u003cp data-pid=\"QQoER1Ec\"\u003e网络协议栈处理：\u003c/p\u003e\u003cfigure data-size=\"normal\"\u003e\u003cimg src=\"https://pic2.zhimg.com/v2-5f0cb3d5a8fde6dbb46c90592a791459_1440w.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1244\" data-rawheight=\"320\" data-original-token=\"v2-5f0cb3d5a8fde6dbb46c90592a791459\" class=\"origin_image zh-lightbox-thumb\" width=\"1244\" data-original=\"https://pic2.zhimg.com/v2-5f0cb3d5a8fde6dbb46c90592a791459_r.jpg\"/\u003e\u003c/figure\u003e\u003cp data-pid=\"NaJoAw_l\"\u003e下面先分析下内核代码中网络包接收流程涉及的hook处理\u003c/p\u003e\u003ch3\u003e\u003cb\u003e4.2. 设备层处理\u003c/b\u003e\u003c/h3\u003e\u003cp data-pid=\"QUXQ4oQQ\"\u003e有上面的堆栈后，选取几个关键过程分析，直接参考下\u0026#34;\u003cb\u003e\u003ca href=\"https://link.zhihu.com/?target=https%3A//mp.weixin.qq.com/s%3F__biz%3DMjM5Njg5NDgwNA%3D%3D%26mid%3D2247484058%26idx%3D1%26sn%3Da2621bc27c74b313528eefbc81ee8c0f%26chksm%3Da6e303a191948ab7d06e574661a905ddb1fae4a5d9eb1d2be9f1c44491c19a82d95957a0ffb6%26scene%3D21%23wechat_redirect\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\"\u003e图解Linux网络包接收过程\u003c/a\u003e\u003c/b\u003e\u0026#34;里的梳理说明，过程大体是对应的。\u003c/p\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode class=\"language-text\"\u003e// linux-4.18/net/core/dev.c\nstatic int __netif_receive_skb_core(struct sk_buff *skb, bool pfmemalloc)\n{\n    struct packet_type *ptype, *pt_prev;\n    rx_handler_func_t *rx_handler;\n    struct net_device *orig_dev;\n    bool deliver_exact = false;\n    int ret = NET_RX_DROP;\n    __be16 type;\n\n    net_timestamp_check(!netdev_tstamp_prequeue, skb);\n\n    // 定义 tracepoint:net:netif_receive_skb，可以通过eBPF追踪\n    trace_netif_receive_skb(skb);\n    ...\n\n    // \u0026amp;ptype_all、\u0026amp;skb-\u0026gt;dev-\u0026gt;ptype_all 这里会将数据送入抓包点。\n    // tcpdump就是从这个入口获取包的\n    list_for_each_entry_rcu(ptype, \u0026amp;ptype_all, list) {\n        if (pt_prev)\n            // 从数据包中取出协议信息，然后遍历注册在这个协议上的回调函数列表\n            ret = deliver_skb(skb, pt_prev, orig_dev);\n        pt_prev = ptype;\n    }\n\n    list_for_each_entry_rcu(ptype, \u0026amp;skb-\u0026gt;dev-\u0026gt;ptype_all, list) {\n        if (pt_prev)\n            // 从数据包中取出协议信息，然后遍历注册在这个协议上的回调函数列表\n            ret = deliver_skb(skb, pt_prev, orig_dev);\n        pt_prev = ptype;\n    }\n    ...\n}\n\n// linux-4.18/net/core/dev.c\nstatic inline int deliver_skb(struct sk_buff *skb,\n                  struct packet_type *pt_prev,\n                  struct net_device *orig_dev)\n{\n    if (unlikely(skb_orphan_frags_rx(skb, GFP_ATOMIC)))\n        return -ENOMEM;\n    refcount_inc(\u0026amp;skb-\u0026gt;users);\n    // 协议层注册的处理函数，对于ip包来讲，就会进入到ip_rcv（如果是arp包的话，会进入到arp_rcv）\n    return pt_prev-\u0026gt;func(skb, skb-\u0026gt;dev, pt_prev, orig_dev);\n}\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp data-pid=\"xjfgVYEN\"\u003e贴一下pt_prev对应的\u003ccode\u003epacket_type\u003c/code\u003e结构：\u003c/p\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode class=\"language-text\"\u003e// linux-4.18/include/linux/netdevice.h\nstruct packet_type {\n    __be16          type;   /* This is really htons(ether_type). */\n    struct net_device *dev; /* NULL is wildcarded here      */\n    int             (*func) (struct sk_buff *,\n                        struct net_device *,\n                        struct packet_type *,\n                        struct net_device *);\n    bool            (*id_match)(struct packet_type *ptype,\n                        struct sock *sk);\n    void            *af_packet_priv;\n    struct list_head    list;\n};\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch3\u003e\u003cb\u003e4.3. 网络层ip_rcv注册时机\u003c/b\u003e\u003c/h3\u003e\u003cp data-pid=\"2dKJVS6t\"\u003e上面\u003ccode\u003edeliver_skb(xxx)\u003c/code\u003e中调用的\u003ccode\u003ept_prev-\u0026gt;func()\u003c/code\u003e，其中的\u003ccode\u003efunc\u003c/code\u003e就是网络子系统\u003ccode\u003einet_init()\u003c/code\u003e初始化时，注册的IP网络层处理函数\u003c/p\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode class=\"language-text\"\u003e// linux-4.18/net/ipv4/af_inet.c\nstatic int __init inet_init(void)\n{\n    ...\n    rc = proto_register(\u0026amp;tcp_prot, 1);\n    if (rc)\n        goto out;\n\n    rc = proto_register(\u0026amp;udp_prot, 1);\n    if (rc)\n        goto out_unregister_tcp_proto;\n    ...\n    // 注册ip网络层的处理函数为 ip_rcv\n    dev_add_pack(\u0026amp;ip_packet_type);\n    ...\n}\n\n// ip_packet_type结构如下\nstatic struct packet_type ip_packet_type __read_mostly = {\n    .type = cpu_to_be16(ETH_P_IP),\n    .func = ip_rcv,\n};\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch3\u003e\u003cb\u003e4.4. ip_rcv逻辑\u003c/b\u003e\u003c/h3\u003e\u003cp data-pid=\"Z46U7tme\"\u003e继续看一下IP层的处理逻辑 \u003ccode\u003eip_rcv\u003c/code\u003e，可看到\u003ccode\u003eNF_INET_PRE_ROUTING\u003c/code\u003e这个hook\u003c/p\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode class=\"language-text\"\u003e// linux-4.18/net/ipv4/ip_input.c\nint ip_rcv(struct sk_buff *skb, struct net_device *dev, struct packet_type *pt, struct net_device *orig_dev)\n{\n    const struct iphdr *iph;\n    struct net *net;\n    u32 len;\n    ...\n\n    // 这里就是一个 netfilter 的hook了，类型为 NF_INET_PRE_ROUTING\n    return NF_HOOK(NFPROTO_IPV4, NF_INET_PRE_ROUTING,\n               net, NULL, skb, dev, NULL,\n               ip_rcv_finish);\n\ncsum_error:\n    __IP_INC_STATS(net, IPSTATS_MIB_CSUMERRORS);\ninhdr_error:\n    __IP_INC_STATS(net, IPSTATS_MIB_INHDRERRORS);\ndrop:\n    kfree_skb(skb);\nout:\n    return NET_RX_DROP;\n}\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp data-pid=\"UjD0iorF\"\u003e这里\u003ccode\u003eNF_HOOK\u003c/code\u003e是一个钩子函数，当执行完注册的钩子后就会执行到最后一个参数指向的函数\u003ccode\u003eip_rcv_finish\u003c/code\u003e。\u003c/p\u003e\u003cp data-pid=\"yaPGhE2c\"\u003ehook类型看起来和上面netfilter介绍时的没完全对应起来。检索下代码可知是IPv4和IPv6各自定义了宏跟hook枚举值对应，实际的值是一样的。\u003cbr/\u003e而上面介绍时也只是放了IPv4的hook。\u003c/p\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode class=\"language-text\"\u003e// linux-4.18/include/uapi/linux/netfilter.h\nenum nf_inet_hooks {\n    NF_INET_PRE_ROUTING,\n    NF_INET_LOCAL_IN,\n    NF_INET_FORWARD,\n    NF_INET_LOCAL_OUT,\n    NF_INET_POST_ROUTING,\n    NF_INET_NUMHOOKS\n};\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp data-pid=\"xIMaS386\"\u003eIPv4的netfilter hooks：\u003c/p\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode class=\"language-text\"\u003e// linux-4.18/include/uapi/linux/netfilter_ipv4.h\n/* IP Hooks */\n/* After promisc drops, checksum checks. */\n#define NF_IP_PRE_ROUTING 0\n/* If the packet is destined for this box. */\n#define NF_IP_LOCAL_IN  1\n/* If the packet is destined for another interface. */\n#define NF_IP_FORWARD  2\n/* Packets coming from a local process. */\n#define NF_IP_LOCAL_OUT  3\n/* Packets about to hit the wire. */\n#define NF_IP_POST_ROUTING 4\n#define NF_IP_NUMHOOKS  5\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp data-pid=\"fjKDaBmd\"\u003eIPv6的netfilter hooks：\u003c/p\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode class=\"language-text\"\u003e// linux-4.18/include/uapi/linux/netfilter_ipv6.h\n/* IP6 Hooks */\n/* After promisc drops, checksum checks. */\n#define NF_IP6_PRE_ROUTING 0\n/* If the packet is destined for this box. */\n#define NF_IP6_LOCAL_IN  1\n/* If the packet is destined for another interface. */\n#define NF_IP6_FORWARD  2\n/* Packets coming from a local process. */\n#define NF_IP6_LOCAL_OUT  3\n/* Packets about to hit the wire. */\n#define NF_IP6_POST_ROUTING 4\n#define NF_IP6_NUMHOOKS  5\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch3\u003e\u003cb\u003e4.5. ip_rcv_finish\u003c/b\u003e\u003c/h3\u003e\u003cp data-pid=\"iSk1cclq\"\u003e上面执行完\u003ccode\u003eNF_INET_PRE_ROUTING\u003c/code\u003e hook后，进入 \u003ccode\u003eip_rcv_finish\u003c/code\u003e 函数处理\u003c/p\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode class=\"language-text\"\u003e// linux-4.18/net/ipv4/ip_input.c\nstatic int ip_rcv_finish(struct net *net, struct sock *sk, struct sk_buff *skb)\n{\n    const struct iphdr *iph = ip_hdr(skb);\n    int (*edemux)(struct sk_buff *skb);\n    struct net_device *dev = skb-\u0026gt;dev;\n    struct rtable *rt;\n    int err;\n    ...\n    // 处理input，rt_dst_alloc 时(route.c)，input函数注册为了 ip_local_deliver\n    return dst_input(skb);\n\n    ...\ndrop:\n    kfree_skb(skb);\n    return NET_RX_DROP;\n\ndrop_error:\n    if (err == -EXDEV)\n        __NET_INC_STATS(net, LINUX_MIB_IPRPFILTER);\n    goto drop;\n}\n\n// linux-4.18/include/net/dst.h\n/* Input packet from network to transport.  */\nstatic inline int dst_input(struct sk_buff *skb)\n{\n    return skb_dst(skb)-\u0026gt;input(skb);\n}\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp data-pid=\"Mv-JBBH_\"\u003e上面的\u003ccode\u003einput\u003c/code\u003e处理函数，实际调用到 \u003ccode\u003eip_local_deliver\u003c/code\u003e，可看到这里又有个hook：\u003ccode\u003eNF_INET_LOCAL_IN\u003c/code\u003e\u003c/p\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode class=\"language-text\"\u003e// linux-4.18/net/ipv4/ip_input.c\nint ip_local_deliver(struct sk_buff *skb)\n{\n    /*\n     * Reassemble IP fragments.\n     */\n    struct net *net = dev_net(skb-\u0026gt;dev);\n\n    if (ip_is_fragment(ip_hdr(skb))) {\n        if (ip_defrag(net, skb, IP_DEFRAG_LOCAL_DELIVER))\n            return 0;\n    }\n\n    // netfilter hook: NF_INET_LOCAL_IN\n    return NF_HOOK(NFPROTO_IPV4, NF_INET_LOCAL_IN,\n               net, NULL, skb, skb-\u0026gt;dev, NULL,\n               ip_local_deliver_finish);\n}\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp data-pid=\"Zs_sSODT\"\u003e传输层的处理，比如跟踪堆栈中\u003ccode\u003etcp_v4_rcv\u003c/code\u003e及后续的调用，这里暂不展开分析了，简单过一下。\u003c/p\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode class=\"language-text\"\u003estatic int ip_local_deliver_finish(struct net *net, struct sock *sk, struct sk_buff *skb)\n{\n    ...\n    const struct net_protocol *ipprot;\n    ...\n    ipprot = rcu_dereference(inet_protos[protocol]);\n    ...\n    // 对于TCP这里是tcp_v4_rcv，对应struct net_protocol tcp_protocol等协议初始化注册的接口\n    ret = ipprot-\u0026gt;handler(skb);\n    ...\n}\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch3\u003e\u003cb\u003e4.6. 接收流程小结\u003c/b\u003e\u003c/h3\u003e\u003cp data-pid=\"_aWa5nAd\"\u003e小结上述网络包接收时的netfilter hook，先经过\u003ccode\u003ePREROUTING\u003c/code\u003e，而后经过\u003ccode\u003eINPUT\u003c/code\u003e hook。\u003c/p\u003e\u003cp data-pid=\"6uOqc_dj\"\u003e简单总结接收数据的处理流程是：PREROUTING链 -\u0026gt; 路由判断（是本机）-\u0026gt; INPUT链 -\u0026gt; ...，如下图所示。\u003c/p\u003e\u003cfigure data-size=\"normal\"\u003e\u003cimg src=\"https://pic3.zhimg.com/v2-5c064accce1b703296b7ced147113e9e_1440w.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1154\" data-rawheight=\"722\" data-original-token=\"v2-5c064accce1b703296b7ced147113e9e\" class=\"origin_image zh-lightbox-thumb\" width=\"1154\" data-original=\"https://pic3.zhimg.com/v2-5c064accce1b703296b7ced147113e9e_r.jpg\"/\u003e\u003c/figure\u003e\u003cp data-pid=\"XdcKFE8M\"\u003e\u003cb\u003e\u003ca href=\"https://link.zhihu.com/?target=https%3A//mp.weixin.qq.com/s%3F__biz%3DMjM5Njg5NDgwNA%3D%3D%26mid%3D2247487465%26idx%3D1%26sn%3Daace79dcb4edb011cf69e7cd9f7331f9%26chksm%3Da6e30ed2919487c402f20fdda822bc63f057a334e81e8d26e48194f5b679882c627311205bbe%26scene%3D178%26cur_album_id%3D1532487451997454337%23rd\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\"\u003e出处\u003c/a\u003e\u003c/b\u003e\u003c/p\u003e\u003ch2\u003e\u003cb\u003e5. 发送流程内核代码跟踪\u003c/b\u003e\u003c/h2\u003e\u003cp data-pid=\"7dqGJwuU\"\u003e发送流程也如上跟踪一下。\u003c/p\u003e\u003ch3\u003e\u003cb\u003e5.1. 获取发送堆栈\u003c/b\u003e\u003c/h3\u003e\u003cp data-pid=\"YwmtFLaF\"\u003e上面\u003ccode\u003ebpftrace -l |grep -E \u0026#39;:tcp:|sock:inet|skb:\u0026#39;\u003c/code\u003e过滤的几个追踪点，看起来貌似没特别合适跟踪发送数据的。\u003c/p\u003e\u003cp data-pid=\"CW4R98Ee\"\u003e接收流程里我们看到有\u003ccode\u003etracepoint:net:netif_receive_skb\u003c/code\u003e，到tracefs支持的符号里找下类似的发送追踪点。\u003c/p\u003e\u003cul\u003e\u003cli data-pid=\"I9dSMurl\"\u003e\u003ccode\u003e/sys/kernel/tracing/available_events\u003c/code\u003e里是支持的各类tracepoint\u003c/li\u003e\u003cli data-pid=\"atVyhQJY\"\u003e\u003ccode\u003e/sys/kernel/tracing/available_filter_functions\u003c/code\u003e里一般是支持的各类kprobe\u003c/li\u003e\u003c/ul\u003e\u003cp data-pid=\"wSkTUnMW\"\u003e优先选择tracepoint，看\u003ccode\u003enetif_receive_skb\u003c/code\u003e附近的\u003ccode\u003enet_dev_xmit\u003c/code\u003e是设备层发送数据的，先跟踪看下\u003c/p\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode class=\"language-text\"\u003e# available_events 文件内容截取\n...\nnet:netif_rx\nnet:netif_receive_skb\nnet:net_dev_queue\nnet:net_dev_xmit_timeout\nnet:net_dev_xmit\nnet:net_dev_start_xmit\nskb:skb_copy_datagram_iovec\nskb:consume_skb\nskb:kfree_skb\n...\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp data-pid=\"F-s6yFT5\"\u003e仍旧是上面的方法：用bpftrace启动eBPF跟踪，服务端\u003ccode\u003epython -m http.server\u003c/code\u003e起一个服务，并通过客户端\u003ccode\u003ecurl 192.168.1.150:8000\u003c/code\u003e。\u003c/p\u003e\u003cp data-pid=\"I7FcXyKk\"\u003e这里加个python进程的pid过滤条件，追踪堆栈信息截取如下（从下到上）：\u003c/p\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode class=\"language-text\"\u003e[root@xdlinux ➜ tracing ]$ bpftrace -e \u0026#39;tracepoint:net:net_dev_xmit /pid==1569531/ { printf(\u0026#34;comm:%s, stack:%s\\n\u0026#34;, comm, kstack); }\u0026#39;\nAttaching 1 probe...\ncomm:python, stack:\n        dev_hard_start_xmit+394\n        # 调用驱动程序来发送数据\n        dev_hard_start_xmit+394\n        sch_direct_xmit+159\n        # 通过网络设备子系统发送数据\n        __dev_queue_xmit+2140\n        ip_finish_output2+738\n        ip_output+112\n        # 网络层发送数据\n        __ip_queue_xmit+349\n        __tcp_transmit_skb+1362\n        # 传输层发送数据\n        tcp_write_xmit+1077\n        __tcp_push_pending_frames+50\n        tcp_sendmsg_locked+3128\n        # TCP协议注册的sendmsg函数为tcp_sendmsg，具体见下面网络协议初始化小节的分析\n        tcp_sendmsg+39\n        # 系统调用里会调到 sock_sendmsg，里面会调用到具体协议的 sendmsg\n        sock_sendmsg+62\n        # 实际调用到__sys_sendto\n        __sys_sendto+238\n        __x64_sys_sendto+36\n        # 用户态进行系统调用\n        do_syscall_64+91\n        entry_SYSCALL_64_after_hwframe+101\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp data-pid=\"PjIDd0R0\"\u003e这里的堆栈映证\u0026#34;\u003cb\u003e\u003ca href=\"https://link.zhihu.com/?target=https%3A//mp.weixin.qq.com/s%3F__biz%3DMjM5Njg5NDgwNA%3D%3D%26mid%3D2247485146%26idx%3D1%26sn%3De5bfc79ba915df1f6a8b32b87ef0ef78%26chksm%3Da6e307e191948ef748dc73a4b9a862a22ce1db806a486afce57475d4331d905827d6ca161711%26scene%3D178%26cur_album_id%3D1532487451997454337%23rd\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\"\u003e25 张图，一万字，拆解 Linux 网络包发送过程\u003c/a\u003e\u003c/b\u003e\u0026#34;里的流程分析图一起查看：\u003c/p\u003e\u003cfigure data-size=\"normal\"\u003e\u003cimg src=\"https://pic1.zhimg.com/v2-f253d891967f0d566c2df4904e652bb4_1440w.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"511\" data-rawheight=\"751\" data-original-token=\"v2-f253d891967f0d566c2df4904e652bb4\" class=\"origin_image zh-lightbox-thumb\" width=\"511\" data-original=\"https://pic1.zhimg.com/v2-f253d891967f0d566c2df4904e652bb4_r.jpg\"/\u003e\u003c/figure\u003e\u003cp data-pid=\"ZvHApLNp\"\u003e虽然堆栈和上述流程图没有全部一一对应，但总体流程差别不大，具体可查看原文及源码跟踪。\u003c/p\u003e\u003cp data-pid=\"WFrRsUxv\"\u003e下面跟踪堆栈到内核代码里看一下。\u003c/p\u003e\u003ch3\u003e\u003cb\u003e5.2. __sys_sendto\u003c/b\u003e\u003c/h3\u003e\u003cp data-pid=\"5vCz86-5\"\u003e这里的系统调用是\u003ccode\u003esendto\u003c/code\u003e，man一下\u003ccode\u003esend\u003c/code\u003e或者\u003ccode\u003esendto\u003c/code\u003e，可看到\u003ccode\u003esendto\u003c/code\u003e默认后两个参数为零值时即跟\u003ccode\u003esend\u003c/code\u003e是等价的。\u003c/p\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode class=\"language-text\"\u003eDESCRIPTION\n    The  system  calls  send(), sendto(), and sendmsg() are used to transmit a message to\n    another socket.\n\n    The send() call may be used only when the socket is in a connected state (so that the\n    intended recipient is known).  The only difference between send() and write(2) is the\n    presence of flags.  With a zero flags argument, send()  is  equivalent  to  write(2).\n    Also, the following call\n        send(sockfd, buf, len, flags);\n\n    is equivalent to\n        sendto(sockfd, buf, len, flags, NULL, 0);\n\n// linux-4.18/net/socket.c\nint __sys_sendto(int fd, void __user *buff, size_t len, unsigned int flags,\n         struct sockaddr __user *addr,  int addr_len)\n{\n    struct socket *sock;\n    struct sockaddr_storage address;\n    ...\n    // 根据fd找到socket\n    sock = sockfd_lookup_light(fd, \u0026amp;err, \u0026amp;fput_needed);\n    if (!sock)\n        goto out;\n\n    ...\n    // 调用到 sock_sendmsg\n    err = sock_sendmsg(sock, \u0026amp;msg);\n    ...\n}\n\n// linux-4.18/net/socket.c\nint sock_sendmsg(struct socket *sock, struct msghdr *msg)\n{\n    // 安全相关校验，暂不关注\n    int err = security_socket_sendmsg(sock, msg,\n                      msg_data_left(msg));\n\n    return err ?: sock_sendmsg_nosec(sock, msg);\n}\n\nstatic inline int sock_sendmsg_nosec(struct socket *sock, struct msghdr *msg)\n{\n    // socket注册的相应 sendmsg 函数\n    int ret = sock-\u0026gt;ops-\u0026gt;sendmsg(sock, msg, msg_data_left(msg));\n    BUG_ON(ret == -EIOCBQUEUED);\n    return ret;\n}\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp data-pid=\"aDBsd7XH\"\u003e查看af_inet.c的协议初始化，对于TCP(stream)、UDP(dgram)、RAW类型的协议，虽然\u003ccode\u003esendmsg\u003c/code\u003e操作都初始化为\u003ccode\u003einet_sendmsg\u003c/code\u003e，但\u003ccode\u003einet_sendmsg\u003c/code\u003e里还有一层，里面会按具体网络协议区分处理函数。\u003c/p\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode class=\"language-text\"\u003e// linux-4.18/net/ipv4/af_inet.c\nconst struct proto_ops inet_stream_ops = {\n    .family     = PF_INET,\n    ...\n    .sendmsg    = inet_sendmsg,\n    ...\n}\n\nint inet_sendmsg(struct socket *sock, struct msghdr *msg, size_t size)\n{\n    struct sock *sk = sock-\u0026gt;sk;\n    ...\n    // sk_prot 的定义：#define sk_prot __sk_common.skc_prot（对应的结构是：struct proto *skc_prot; 这里会进行协议接口区分）\n    // 对于TCP协议的，此处注册为 tcp_sendmsg 接口，具体可见下面小节的梳理\n    return sk-\u0026gt;sk_prot-\u0026gt;sendmsg(sk, msg, size);\n}\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch3\u003e\u003cb\u003e5.2.1. 再次分析网络协议初始化\u003c/b\u003e\u003c/h3\u003e\u003cp data-pid=\"p2H4qYXp\"\u003e上面\u003ccode\u003esk_prot\u003c/code\u003e对应的具体网络协议(\u003ccode\u003estruct proto\u003c/code\u003e结构)，之前梳理过流程，这里再说明一下加强印象。（初始化相关逻辑对于理清内核网络代码非常重要）\u003c/p\u003e\u003cul\u003e\u003cli data-pid=\"qXuu73Oc\"\u003eaf_inet.c中\u003ccode\u003einet_init\u003c/code\u003e初始化网络时，遍历\u003ccode\u003einetsw_array\u003c/code\u003e全局数组进行各类网络协议注册\u003c/li\u003e\u003cli data-pid=\"8D34sP0M\"\u003e其中的\u003ccode\u003e.prot\u003c/code\u003e里是具体协议，如TCP、UDP。这里的\u0026#34;具体协议\u0026#34;都是\u003ccode\u003estruct proto\u003c/code\u003e结构的实例，不同协议各自定义了一个\u003ccode\u003estruct proto\u003c/code\u003e全局变量用于注册 \u003c/li\u003e\u003cul\u003e\u003cli data-pid=\"8DnndOsC\"\u003e\u003ccode\u003estruct proto\u003c/code\u003e里定义了一堆函数指针（linux-4.18/include/net/sock.h中）\u003c/li\u003e\u003cli data-pid=\"59gZ4kMH\"\u003e比如下面TCP协议，对应协议实例为：\u003ccode\u003estruct proto tcp_prot\u003c/code\u003e \u003c/li\u003e\u003c/ul\u003e\u003c/ul\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode class=\"language-text\"\u003e// linux-4.18/net/ipv4/af_inet.c\nstatic struct inet_protosw inetsw_array[] =\n{\n    {\n        .type =       SOCK_STREAM,\n        .protocol =   IPPROTO_TCP,\n        .prot =       \u0026amp;tcp_prot,\n        .ops =        \u0026amp;inet_stream_ops,\n        .flags =      INET_PROTOSW_PERMANENT |\n                  INET_PROTOSW_ICSK,\n    },\n    {\n        .type =       SOCK_DGRAM,\n        .protocol =   IPPROTO_UDP,\n        .prot =       \u0026amp;udp_prot,\n        .ops =        \u0026amp;inet_dgram_ops,\n        .flags =      INET_PROTOSW_PERMANENT,\n    },\n    ...\n};\n\n// linux-4.18/net/ipv4/tcp_ipv4.c\n// 这里是定义一个`struct proto`实例，并初始化各种操作接口，用于指代TCP协议，网络初始化时会进行注册\nstruct proto tcp_prot = {\n    .name           = \u0026#34;TCP\u0026#34;,\n    .owner          = THIS_MODULE,\n    .close          = tcp_close,\n    .pre_connect    = tcp_v4_pre_connect,\n    .connect        = tcp_v4_connect,\n    ...\n    .recvmsg        = tcp_recvmsg,\n    .sendmsg        = tcp_sendmsg,\n    ...\n}\nEXPORT_SYMBOL(tcp_prot);\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp data-pid=\"hrkqMokd\"\u003e\u003cb\u003e于是，就知道上面TCP协议后面会调用到\u003ccode\u003etcp_sendmsg\u003c/code\u003e，跟堆栈一致。\u003c/b\u003e\u003c/p\u003e\u003cp data-pid=\"lL5rwsS0\"\u003e作为对比，把UDP协议实例也贴一下\u003c/p\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode class=\"language-text\"\u003estruct proto udp_prot = {\n    .name           = \u0026#34;UDP\u0026#34;,\n    .owner          = THIS_MODULE,\n    .close          = udp_lib_close,\n    .pre_connect    = udp_pre_connect,\n    .connect        = ip4_datagram_connect,\n    .disconnect     = udp_disconnect,\n    ...\n    .sendmsg        = udp_sendmsg,\n    .recvmsg        = udp_recvmsg,\n    ...\n}\nEXPORT_SYMBOL(udp_prot);\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch3\u003e\u003cb\u003e5.3. tcp_sendmsg\u003c/b\u003e\u003c/h3\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode class=\"language-text\"\u003e// linux-4.18/net/ipv4/tcp.c\nint tcp_sendmsg(struct sock *sk, struct msghdr *msg, size_t size)\n{\n    int ret;\n\n    lock_sock(sk);\n    ret = tcp_sendmsg_locked(sk, msg, size);\n    release_sock(sk);\n\n    return ret;\n}\n\n// linux-4.18/net/ipv4/tcp.c\nint tcp_sendmsg_locked(struct sock *sk, struct msghdr *msg, size_t size)\n{\n    struct tcp_sock *tp = tcp_sk(sk);\n    struct ubuf_info *uarg = NULL;\n    struct sk_buff *skb;\n    ...\n    while (msg_data_left(msg)) {\n        int copy = 0;\n\n        // 获取发送队列\n        skb = tcp_write_queue_tail(sk);\n        if (skb)\n            copy = size_goal - skb-\u0026gt;len;\n        ...\n        // 只有满足下面2个条件之一，内核才会真正启动发送数据包\n        // 这里判断的是未发送的数据数据是否已经超过最大窗口的一半\n        if (forced_push(tp)) {\n            tcp_mark_push(tp, skb);\n            __tcp_push_pending_frames(sk, mss_now, TCP_NAGLE_PUSH);\n        } else if (skb == tcp_send_head(sk))\n            tcp_push_one(sk, mss_now);\n        ...\n    }\n    ...\n}\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp data-pid=\"gTUqYHtl\"\u003e上述\u003ccode\u003e__tcp_push_pending_frames\u003c/code\u003e 和 \u003ccode\u003etcp_push_one\u003c/code\u003e 中，都会调用到 \u003ccode\u003etcp_write_xmit\u003c/code\u003e发送数据。\u003c/p\u003e\u003ch3\u003e\u003cb\u003e5.4. tcp_write_xmit\u003c/b\u003e\u003c/h3\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode class=\"language-text\"\u003e// linux-4.18/net/ipv4/tcp_output.c\nstatic bool tcp_write_xmit(struct sock *sk, unsigned int mss_now, int nonagle,\n               int push_one, gfp_t gfp)\n{\n    struct tcp_sock *tp = tcp_sk(sk);\n    struct sk_buff *skb;\n    ...\n    while ((skb = tcp_send_head(sk))) {\n        // 真正开启发送\n        if (unlikely(tcp_transmit_skb(sk, skb, 1, gfp)))\n            break;\n        ...\n    }\n}\n\n// linux-4.18/net/ipv4/tcp_output.c\nstatic int tcp_transmit_skb(struct sock *sk, struct sk_buff *skb, int clone_it,\n                gfp_t gfp_mask)\n{\n    return __tcp_transmit_skb(sk, skb, clone_it, gfp_mask,\n                  tcp_sk(sk)-\u0026gt;rcv_nxt);\n}\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp data-pid=\"GXFuxPUP\"\u003e\u003ccode\u003e__tcp_transmit_skb\u003c/code\u003e即上述调用栈中的打印的接口，逻辑如下：\u003c/p\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode class=\"language-text\"\u003e// linux-4.18/net/ipv4/tcp_output.c\nstatic int __tcp_transmit_skb(struct sock *sk, struct sk_buff *skb,\n                  int clone_it, gfp_t gfp_mask, u32 rcv_nxt)\n{\n    const struct inet_connection_sock *icsk = inet_csk(sk);\n    struct inet_sock *inet;\n    struct tcp_sock *tp;\n    struct tcp_skb_cb *tcb;\n    ...\n    tp = tcp_sk(sk);\n\n    // 1.克隆新 skb 出来\n    if (clone_it) {\n        TCP_SKB_CB(skb)-\u0026gt;tx.in_flight = TCP_SKB_CB(skb)-\u0026gt;end_seq\n            - tp-\u0026gt;snd_una;\n        oskb = skb;\n        ...\n        skb = skb_clone(oskb, gfp_mask);\n    }\n    ...\n    // 2.封装 TCP 头\n    /* Build TCP header and checksum it. */\n    th = (struct tcphdr *)skb-\u0026gt;data;\n    th-\u0026gt;source  = inet-\u0026gt;inet_sport;\n    th-\u0026gt;dest  = inet-\u0026gt;inet_dport;\n    th-\u0026gt;seq   = htonl(tcb-\u0026gt;seq);\n    ...\n    // 3.调用网络层发送接口\n    err = icsk-\u0026gt;icsk_af_ops-\u0026gt;queue_xmit(sk, skb, \u0026amp;inet-\u0026gt;cork.fl);\n    ...\n}\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch3\u003e\u003cb\u003e5.4.1. 分析 queue_xmit 对应的注册函数\u003c/b\u003e\u003c/h3\u003e\u003cp data-pid=\"MfrIAws_\"\u003e先说结果：上面\u003ccode\u003equeue_xmit\u003c/code\u003e中注册的函数是\u003ccode\u003eip_queue_xmit\u003c/code\u003e，下面进行分析说明。\u003c/p\u003e\u003cp data-pid=\"HDi07W58\"\u003e我们在\u0026#34;\u003cb\u003e\u003ca href=\"https://link.zhihu.com/?target=https%3A//xiaodongq.github.io/2024/05/30/tcp_syn_queue/\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\"\u003eTCP半连接全连接（二） -- 半连接队列代码逻辑\u003c/a\u003e\u003c/b\u003e\u0026#34;中梳理过，面向连接的sock相关的初始化。这里再贴一下：\u003c/p\u003e\u003cp data-pid=\"yxCaT7JL\"\u003e\u003ccode\u003einet_init\u003c/code\u003e初始化网络协议-\u0026gt;注册TCP协议(\u003ccode\u003estruct proto tcp_prot\u003c/code\u003e)\u003c/p\u003e\u003cp data-pid=\"13bve6P7\"\u003e注册的init接口为： \u003ccode\u003e.init = tcp_v4_init_sock,\u003c/code\u003e，其中会指定tcp协议socket连接的处理接口\u003ccode\u003eipv4_specific\u003c/code\u003e\u003c/p\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode class=\"language-text\"\u003e// linux-5.10.10/net/ipv4/tcp_ipv4.c\nstatic int tcp_v4_init_sock(struct sock *sk)\n{\n    struct inet_connection_sock *icsk = inet_csk(sk);\n\n    tcp_init_sock(sk);\n\n    icsk-\u0026gt;icsk_af_ops = \u0026amp;ipv4_specific;\n\n#ifdef CONFIG_TCP_MD5SIG\n    tcp_sk(sk)-\u0026gt;af_specific = \u0026amp;tcp_sock_ipv4_specific;\n#endif\n\n    return 0;\n}\n\n// linux-5.10.10/net/ipv4/tcp_ipv4.c（之前看的是5.10内核，此处4.18结构是一样的）\nconst struct inet_connection_sock_af_ops ipv4_specific = {\n    // 发送数据的函数。用于将数据从传输层（TCP）发送到网络层（IP）\n    .queue_xmit    = ip_queue_xmit,\n    // 用于计算校验和的函数\n    .send_check    = tcp_v4_send_check,\n    .rebuild_header    = inet_sk_rebuild_header,\n    .sk_rx_dst_set    = inet_sk_rx_dst_set,\n    // 处理SYN段的函数。在TCP三次握手的开始阶段被调用，用于处理来自客户端的SYN包\n    .conn_request    = tcp_v4_conn_request,\n    // 创建和初始化新socket的函数。在TCP三次握手完成后被调用，用于为新的连接创建一个传输控制块（TCB）并初始化它\n    .syn_recv_sock    = tcp_v4_syn_recv_sock,\n    .net_header_len    = sizeof(struct iphdr),\n    ...\n};\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch3\u003e\u003cb\u003e5.5. 网络层处理：ip_queue_xmit\u003c/b\u003e\u003c/h3\u003e\u003cp data-pid=\"MTW18zZ3\"\u003e在网络层里主要处理路由项查找、IP 头设置、netfilter 过滤、skb 切分（大于 MTU 的话）等几项工作，处理完这些工作后会交给更下层的邻居子系统来处理。\u003c/p\u003e\u003cp data-pid=\"tf-BNIRl\"\u003e这里暂不细看，详情可跟着参考链接的流程分析。\u003c/p\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode class=\"language-text\"\u003e// linux-4.18/net/ipv4/ip_output.c\nint ip_queue_xmit(struct sock *sk, struct sk_buff *skb, struct flowi *fl)\n{\n    struct inet_sock *inet = inet_sk(sk);\n    struct net *net = sock_net(sk);\n    ...\n    // 检查 socket 中是否有缓存的路由表；没有时会查找路由项并缓存到socket中\n    rt = (struct rtable *)__sk_dst_check(sk, 0);\n    ...\n    // 为 skb 设置路由表\n    skb_dst_set_noref(skb, \u0026amp;rt-\u0026gt;dst);\n    ...\n    // 设置 IP 头\n    iph = ip_hdr(skb);\n    ...\n    // 发送\n    res = ip_local_out(net, sk, skb);\n    ...\n}\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch3\u003e\u003cb\u003e5.6. ip_local_out：NF_INET_LOCAL_OUT hook\u003c/b\u003e\u003c/h3\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode class=\"language-text\"\u003e// linux-4.18/net/ipv4/ip_output.c\nint ip_local_out(struct net *net, struct sock *sk, struct sk_buff *skb)\n{\n    int err;\n\n    err = __ip_local_out(net, sk, skb);\n    if (likely(err == 1))\n        err = dst_output(net, sk, skb);\n\n    return err;\n}\n// 可通过kprobe跟踪到\nEXPORT_SYMBOL_GPL(ip_local_out);\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp data-pid=\"7QCAE4Bc\"\u003e到这里，终于找到netfilter hook了，此处为\u003ccode\u003eNF_INET_LOCAL_OUT\u003c/code\u003e\u003c/p\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode class=\"language-text\"\u003e// linux-4.18/net/ipv4/ip_output.c\nint __ip_local_out(struct net *net, struct sock *sk, struct sk_buff *skb)\n{\n    struct iphdr *iph = ip_hdr(skb);\n\n    iph-\u0026gt;tot_len = htons(skb-\u0026gt;len);\n    ip_send_check(iph);\n\n    /* if egress device is enslaved to an L3 master device pass the\n     * skb to its handler for processing\n     */\n    skb = l3mdev_ip_out(sk, skb);\n    if (unlikely(!skb))\n        return 0;\n\n    skb-\u0026gt;protocol = htons(ETH_P_IP);\n\n    // 这里是netfilter hook：NF_INET_LOCAL_OUT\n    return nf_hook(NFPROTO_IPV4, NF_INET_LOCAL_OUT,\n               net, sk, skb, NULL, skb_dst(skb)-\u0026gt;dev,\n               dst_output);\n}\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp data-pid=\"hLMUJr70\"\u003e这里再看下钩子结束后调用的\u003ccode\u003edst_output\u003c/code\u003e\u003c/p\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode class=\"language-text\"\u003e/* Output packet to network from transport.  */\nstatic inline int dst_output(struct net *net, struct sock *sk, struct sk_buff *skb)\n{\n    return skb_dst(skb)-\u0026gt;output(net, sk, skb);\n}\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp data-pid=\"hRRiCQ9q\"\u003e根据eBPF追踪打印的调用栈，\u003ccode\u003eoutput\u003c/code\u003e对应的应该是\u003ccode\u003eip_output\u003c/code\u003e\u003c/p\u003e\u003cp data-pid=\"wPWSohcr\"\u003e全局搜了下是在linux-4.18/net/ipv4/route.c的\u003ccode\u003ert_dst_alloc\u003c/code\u003e中进行的赋值，暂不细究注册的流程\u003c/p\u003e\u003ch3\u003e\u003cb\u003e5.7. ip_output：NF_INET_POST_ROUTING hook\u003c/b\u003e\u003c/h3\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode class=\"language-text\"\u003e// linux-4.18/net/ipv4/ip_output.c\nint ip_output(struct net *net, struct sock *sk, struct sk_buff *skb)\n{\n    struct net_device *dev = skb_dst(skb)-\u0026gt;dev;\n\n    IP_UPD_PO_STATS(net, IPSTATS_MIB_OUT, skb-\u0026gt;len);\n\n    skb-\u0026gt;dev = dev;\n    skb-\u0026gt;protocol = htons(ETH_P_IP);\n\n    return NF_HOOK_COND(NFPROTO_IPV4, NF_INET_POST_ROUTING,\n                net, sk, skb, NULL, dev,\n                ip_finish_output,\n                !(IPCB(skb)-\u0026gt;flags \u0026amp; IPSKB_REROUTED));\n}\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp data-pid=\"ey7iCdwU\"\u003e简单看下\u003ccode\u003eip_finish_output\u003c/code\u003e，可看到如果数据大于 MTU 的话，是会执行分片的\u003c/p\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode class=\"language-text\"\u003e// linux-4.18/net/ipv4/ip_output.c\nstatic int ip_finish_output(struct net *net, struct sock *sk, struct sk_buff *skb)\n{\n    unsigned int mtu;\n    int ret;\n    ...\n    mtu = ip_skb_dst_mtu(sk, skb);\n    if (skb_is_gso(skb))\n        return ip_finish_output_gso(net, sk, skb, mtu);\n\n    if (skb-\u0026gt;len \u0026gt; mtu || (IPCB(skb)-\u0026gt;flags \u0026amp; IPSKB_FRAG_PMTU))\n        // ip分片\n        return ip_fragment(net, sk, skb, mtu, ip_finish_output2);\n\n    return ip_finish_output2(net, sk, skb);\n}\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch3\u003e\u003cb\u003e5.8. 发送流程小结\u003c/b\u003e\u003c/h3\u003e\u003cp data-pid=\"XeHjgsR4\"\u003e基于上述流程可知，Linux在网络包发送的过程中，首先是发送的路由选择，然后碰到的第一个netfilter hook就是\u003ccode\u003eOUTPUT\u003c/code\u003e，然后接着进入\u003ccode\u003ePOSTROUTING\u003c/code\u003e链。\u003c/p\u003e\u003cp data-pid=\"W7khQBB7\"\u003e基本流程如下图所示：\u003c/p\u003e\u003cfigure data-size=\"normal\"\u003e\u003cimg src=\"https://pic2.zhimg.com/v2-f4090e70eee5cea2af17e3a1d5c6294d_1440w.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1150\" data-rawheight=\"790\" data-original-token=\"v2-f4090e70eee5cea2af17e3a1d5c6294d\" class=\"origin_image zh-lightbox-thumb\" width=\"1150\" data-original=\"https://pic2.zhimg.com/v2-f4090e70eee5cea2af17e3a1d5c6294d_r.jpg\"/\u003e\u003c/figure\u003e\u003cp data-pid=\"3wwfpPqm\"\u003e\u003cb\u003e\u003ca href=\"https://link.zhihu.com/?target=https%3A//mp.weixin.qq.com/s%3F__biz%3DMjM5Njg5NDgwNA%3D%3D%26mid%3D2247487465%26idx%3D1%26sn%3Daace79dcb4edb011cf69e7cd9f7331f9%26chksm%3Da6e30ed2919487c402f20fdda822bc63f057a334e81e8d26e48194f5b679882c627311205bbe%26scene%3D178%26cur_album_id%3D1532487451997454337%23rd\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\"\u003e出处\u003c/a\u003e\u003c/b\u003e\u003c/p\u003e\u003ch2\u003e\u003cb\u003e6. 发送接收总体流程\u003c/b\u003e\u003c/h2\u003e\u003cp data-pid=\"P_3RJqqE\"\u003e转发流程我们本篇就先不看了，具体可参考\u0026#34;\u003cb\u003e\u003ca href=\"https://link.zhihu.com/?target=https%3A//mp.weixin.qq.com/s%3F__biz%3DMjM5Njg5NDgwNA%3D%3D%26mid%3D2247487465%26idx%3D1%26sn%3Daace79dcb4edb011cf69e7cd9f7331f9%26chksm%3Da6e30ed2919487c402f20fdda822bc63f057a334e81e8d26e48194f5b679882c627311205bbe%26scene%3D178%26cur_album_id%3D1532487451997454337%23rd\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\"\u003e来，今天飞哥带你理解 iptables 原理！\u003c/a\u003e\u003c/b\u003e\u0026#34;。直接放一下其中对上述过程汇总后的总体流程。\u003c/p\u003e\u003cp data-pid=\"wcn_0Z4Q\"\u003e到这里，再回头看开头那张\u003ccode\u003enetfilter\u003c/code\u003e/\u003ccode\u003eiptables\u003c/code\u003e的hook点和流程（里面还包含优先级）经典配图，就清晰不少了。\u003c/p\u003e\u003ch2\u003e\u003cb\u003e7. tcpdump和netfilter说明\u003c/b\u003e\u003c/h2\u003e\u003cp data-pid=\"Vv2_6CZ2\"\u003etcpdump是基于libpcap抓取内核态的包的，这里引出一个问题：\u003cb\u003enetfilter 过滤的包 tcpdump 是否可以抓的到？\u003c/b\u003e\u003c/p\u003e\u003cp data-pid=\"OyHAGG4J\"\u003e需要分发送和接收过程分别说明，这里贴一下结论，详情请参考原链接。\u003c/p\u003e\u003cp data-pid=\"BsA6DueP\"\u003e参考：\u003cb\u003e\u003ca href=\"https://link.zhihu.com/?target=https%3A//mp.weixin.qq.com/s%3F__biz%3DMjM5Njg5NDgwNA%3D%3D%26mid%3D2247486315%26idx%3D1%26sn%3Dce3a85a531447873e02ccef17198e8fe%26chksm%3Da6e30a509194834693bb7ee50cdd3868ab1f686a3a0807e2d1a514253ba1579d1246b99bf35d%26scene%3D178%26cur_album_id%3D1532487451997454337%23rd\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\"\u003e用户态 tcpdump 如何实现抓到内核网络包的?\u003c/a\u003e\u003c/b\u003e\u003c/p\u003e\u003ch3\u003e\u003cb\u003e7.1. 接收过程\u003c/b\u003e\u003c/h3\u003e\u003cul\u003e\u003cli data-pid=\"tnzHEfv1\"\u003etcpdump在\u003ccode\u003eptype_all\u003c/code\u003e上挂了虚拟协议，上述的\u003ccode\u003e__netif_receive_skb_core\u003c/code\u003e中会遍历\u003ccode\u003eptype_all\u003c/code\u003e上的每个协议\u003c/li\u003e\u003c/ul\u003e\u003cfigure data-size=\"normal\"\u003e\u003cimg src=\"https://pic1.zhimg.com/v2-aaec6017bae6e8c04ff54d226ba819f6_1440w.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1204\" data-rawheight=\"534\" data-original-token=\"v2-aaec6017bae6e8c04ff54d226ba819f6\" class=\"origin_image zh-lightbox-thumb\" width=\"1204\" data-original=\"https://pic1.zhimg.com/v2-aaec6017bae6e8c04ff54d226ba819f6_r.jpg\"/\u003e\u003c/figure\u003e\u003cp data-pid=\"7Nm_o6AW\"\u003e\u003cb\u003e可以捕获到命中 netfilter 过滤规则的包。\u003c/b\u003e\u003c/p\u003e\u003ch3\u003e\u003cb\u003e7.2. 发送过程\u003c/b\u003e\u003c/h3\u003e\u003cul\u003e\u003cli data-pid=\"qz9YisyS\"\u003e\u003ccode\u003edev_queue_xmit_nit\u003c/code\u003e中也会遍历 ptype_all 中的协议，会执行到 tcpdump 挂在上面的虚拟协议\u003c/li\u003e\u003c/ul\u003e\u003cfigure data-size=\"normal\"\u003e\u003cimg src=\"https://pic4.zhimg.com/v2-c7f1521393e2cd157d977a0ee436438f_1440w.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1264\" data-rawheight=\"522\" data-original-token=\"v2-c7f1521393e2cd157d977a0ee436438f\" class=\"origin_image zh-lightbox-thumb\" width=\"1264\" data-original=\"https://pic4.zhimg.com/v2-c7f1521393e2cd157d977a0ee436438f_r.jpg\"/\u003e\u003c/figure\u003e\u003cp data-pid=\"q6FgsjjJ\"\u003e\u003cb\u003e不可以捕获到 netfilter 过滤掉的包。\u003c/b\u003e\u003c/p\u003e\u003ch2\u003e\u003cb\u003e8. 小结\u003c/b\u003e\u003c/h2\u003e\u003cp data-pid=\"R02suYi3\"\u003e学习了解了netfilter模块功能、和iptables、tcpdump的关系，并跟踪了内核中TCP网络包接收和发送过程中涉及到的netfileter hook。\u003c/p\u003e\u003cp data-pid=\"mmtAwtA_\"\u003e当前只是先跟踪了部分流程，并未深入探究很多详细逻辑，后续涉及细节再基于参考链接进一步学习。\u003c/p\u003e\u003ch2\u003e\u003cb\u003e9. 参考\u003c/b\u003e\u003c/h2\u003e\u003cp data-pid=\"W7Cd9bVQ\"\u003e1、\u003cb\u003e\u003ca href=\"https://link.zhihu.com/?target=https%3A//arthurchiao.art/blog/deep-dive-into-iptables-and-netfilter-arch-zh\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\"\u003e[译] 深入理解 iptables 和 netfilter 架构\u003c/a\u003e\u003c/b\u003e\u003c/p\u003e\u003cp data-pid=\"BUQKQ18y\"\u003e2、\u003cb\u003e\u003ca href=\"https://link.zhihu.com/?target=https%3A//mp.weixin.qq.com/s%3F__biz%3DMjM5Njg5NDgwNA%3D%3D%26mid%3D2247486315%26idx%3D1%26sn%3Dce3a85a531447873e02ccef17198e8fe%26chksm%3Da6e30a509194834693bb7ee50cdd3868ab1f686a3a0807e2d1a514253ba1579d1246b99bf35d%26scene%3D178%26cur_album_id%3D1532487451997454337%23rd\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\"\u003e用户态 tcpdump 如何实现抓到内核网络包的?\u003c/a\u003e\u003c/b\u003e\u003c/p\u003e\u003cp data-pid=\"pH8XUTFD\"\u003e3、\u003cb\u003e\u003ca href=\"https://link.zhihu.com/?target=https%3A//mp.weixin.qq.com/s%3F__biz%3DMjM5Njg5NDgwNA%3D%3D%26mid%3D2247487465%26idx%3D1%26sn%3Daace79dcb4edb011cf69e7cd9f7331f9%26chksm%3Da6e30ed2919487c402f20fdda822bc63f057a334e81e8d26e48194f5b679882c627311205bbe%26scene%3D178%26cur_album_id%3D1532487451997454337%23rd\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\"\u003e来，今天飞哥带你理解 iptables 原理！\u003c/a\u003e\u003c/b\u003e\u003c/p\u003e\u003cp data-pid=\"sz1f46_W\"\u003e4、\u003cb\u003e\u003ca href=\"https://link.zhihu.com/?target=https%3A//juejin.cn/book/6844733794801418253/section/7355436057355583528\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\"\u003eiptable 的基石：netfilter 原理与实战\u003c/a\u003e\u003c/b\u003e\u003c/p\u003e\u003cp data-pid=\"9Ad4FnFD\"\u003e5、\u003cb\u003e\u003ca href=\"https://link.zhihu.com/?target=https%3A//thiscute.world/posts/iptables-and-container-networks/\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\"\u003eiptables 及 docker 容器网络分析\u003c/a\u003e\u003c/b\u003e\u003c/p\u003e\u003cp data-pid=\"ytlhxvB0\"\u003e6、\u003cb\u003e\u003ca href=\"https://link.zhihu.com/?target=https%3A//mp.weixin.qq.com/s%3F__biz%3DMjM5Njg5NDgwNA%3D%3D%26mid%3D2247484058%26idx%3D1%26sn%3Da2621bc27c74b313528eefbc81ee8c0f%26chksm%3Da6e303a191948ab7d06e574661a905ddb1fae4a5d9eb1d2be9f1c44491c19a82d95957a0ffb6%26scene%3D21%23wechat_redirect\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\"\u003e图解Linux网络包接收过程\u003c/a\u003e\u003c/b\u003e\u003c/p\u003e\u003cp data-pid=\"QemluyUY\"\u003e7、\u003cb\u003e\u003ca href=\"https://link.zhihu.com/?target=https%3A//mp.weixin.qq.com/s%3F__biz%3DMjM5Njg5NDgwNA%3D%3D%26mid%3D2247485146%26idx%3D1%26sn%3De5bfc79ba915df1f6a8b32b87ef0ef78%26chksm%3Da6e307e191948ef748dc73a4b9a862a22ce1db806a486afce57475d4331d905827d6ca161711%26scene%3D178%26cur_album_id%3D1532487451997454337%23rd\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\"\u003e25 张图，一万字，拆解 Linux 网络包发送过程\u003c/a\u003e\u003c/b\u003e\u003c/p\u003e\u003cp data-pid=\"OwFvzmMI\"\u003e8、GPT\u003c/p\u003e\u003cp\u003e\u003c/p\u003e","is_labeled":false,"visited_count":82,"thumbnails":["https://picx.zhimg.com/50/v2-b3a742c64d9ca1f10987684189838262_720w.jpg?source=b6762063","https://picx.zhimg.com/50/v2-9a26ffd02f8660226dbb9cd35358f39e_720w.jpg?source=b6762063"],"favorite_count":12,"article_type":"normal","is_navigator":false,"navigator_vote":false,"vote_next_step":"vote"},"brief":"{\"source\": \"TS\", \"type\": \"article\", \"id\": 1920972926808744255}","attached_info":"CuEJCL651tz1op/cjAEQBxoJMjU5NTExNDAzIILz6sIGKAMwAEBJSiMKGFRTX1NPVVJDRV9XQVJNX1VQX0JPT1NUMhIBMBgAIAA6AEovCiRUU19TT1VSQ0VfV0FSTVVQX1RXT1RPV0VSX0VYUFYyX1RFWFQSATAYACAAOgBaCDEzNzAxMTI1YiBiMWVhMWZlOGMyOTVkOTdkZGM1MTY3YzM2ZGQxNjc2N3ITMTkyMDk3MjkyNjgwODc0NDI1NYoBFWNfMTkyMDk2NjE3ODM5NTg4MTg3MaoBCXJlY29tbWVuZMIBIDRmNTY0MWVkMzZhZjU2NzZiZWZiNzY4MTE0NjNiMTM48gEKCAwSBk5vcm1hbPIBKAgKEiQ3ZmQzYTkxMi0zMmZjLTRlYWYtYmVhYy04Mjg4NzYxMjA5YWHyAQYICxICMTOCAgCIAqGKy836MpICIDRmNTY0MWVkMzZhZjU2NzZiZWZiNzY4MTE0NjNiMTM4mgIAygIWU2hvckludGVyZXN0V2VpZ2h0UnVsZcoCGFBlcmlvZEludGVyZXN0V2VpZ2h0UnVsZcoCFVVzZXJMY25FeGl0V2VpZ2h0UnVsZdoCGFRTX1NPVVJDRV9XQVJNX1VQX0JPT1NUMugCA/oCC05PUk1BTF9GTE9XigMgNmNlY2JiY2Y1N2IzNDdiYjkyNzg2ZDk1ZjcwNGRiOWaaAw0KAnYyEAAaBW90aGVyqANS2AMA6gMuY29udGVudFdhcm11cFR3b1Rvd2VyVHZwVGV4dEJvb3N0RXhwVjJSZWNhbGxlcvoD9QMSDFVOS05PV05fTU9ERSAAKg1OT19JTUFHRV9NT0RFOi0IAhDyDBiNBCIjdjItYzNlZDE1YzA5YmE1NWNmNWVjMWI3NmE0YTg4YWNkZTE6LQgDEOoJGLQEIiN2Mi0xZDViNTE1OTU0Y2Q5MmE3MTRiYjI5MzViODVkMzAxNzotCAIQxQQY1gIiI3YyLWQ3MjE4NTAxZWVhYzI1ZjIxZmE4MmM5ZDlhODg2NDAyOi0IAhDsCRjAAyIjdjItYjhhYzE5MjVmOTBjOGI5M2E1YzRjYWUyODAwZGRjNzc6LQgDENwJGMACIiN2Mi01ZjBjYjNkNWE4ZmRlNmRiYjQ2YzkwNTkyYTc5MTQ1OTotCAMQggkY0gUiI3YyLTVjMDY0YWNjY2UxYjcwMzI5NmI3Y2VkMTQ3MTEzZTllOi0IAhD/AxjvBSIjdjItZjI1M2Q4OTE5NjdmMGQ1NjZjMmRmNDkwNGU2NTJiYjQ6LQgCEP4IGJYGIiN2Mi1mNDA5MGU3MGVlZTVjZWEyYWYxN2UzYTFkNWM2Mjk0ZDotCAMQtAkYlgQiI3YyLWFhZWM2MDE3YmFlNmU4YzA0ZmY1NGQyMjZiYTgxOWY2Oi0IAxDwCRiKBCIjdjItYzdmMTUyMTM5M2UyY2QxNTdkOTc3YTBlZTQzNjQzOGaABACIBACSBAZOb3JtYWyaBAEzoAQAqAQAsAQAugQCYWnCBAM0MDDIBADSBA/mjqjojZDlt7Lmm7TmlrDYBADwBAD5BAAAAADQlXw/gQUAAAAAAAAAAIkFik0lCJGQ0j+SBQCaBQNkZnSiBQNkZnSyBQExuQUAAAAAAAAAANAFAOAFAOgFAPAFDZAGAKAGT6gGAJICLgoJMjU5NTExNDAzEhMxOTIwOTcyOTI2ODA4NzQ0MjU1GAciCklNQUdFX1RFWFQ=","action_card":false},{"id":"74_1750898754.546","type":"feed","offset":74,"verb":"TOPIC_ACKNOWLEDGED_ANSWER","created_time":1750898754,"updated_time":1750898754,"target":{"id":"2875544279","type":"answer","url":"https://api.zhihu.com/answers/2875544279","author":{"id":"62dc598edf143c8b2dca85eee273b12e","url":"https://api.zhihu.com/people/62dc598edf143c8b2dca85eee273b12e","user_type":"people","url_token":"shun-da-da-53","name":"顺达达","headline":"","avatar_url":"https://pica.zhimg.com/50/v2-96c187006306c1d8d6ea913f13ec734e_l.jpg?source=b6762063","is_org":false,"gender":-1,"followers_count":692,"is_following":false,"is_followed":false},"created_time":1675461044,"updated_time":1738561747,"voteup_count":7671,"thanks_count":678,"comment_count":745,"is_copyable":true,"question":{"id":"473451016","type":"question","url":"https://api.zhihu.com/questions/473451016","author":{"id":"028cc75440be2e8f05834cc9ad689059","url":"https://api.zhihu.com/people/028cc75440be2e8f05834cc9ad689059","user_type":"people","url_token":"zhang-yong-29-9","name":"吴用","headline":"大华律师事务所","avatar_url":"https://picx.zhimg.com/50/v2-abed1a8c04700ba7d72b45195223e0ff_l.jpg?source=b6762063","is_org":false,"gender":-1,"followers_count":158,"is_following":false,"is_followed":false},"title":"为什么外国妈妈带娃很轻松，我国却很难？","created":1626768494,"answer_count":0,"follower_count":0,"comment_count":70,"bound_topic_ids":[1395,2265,4719,65149,214071],"is_following":false,"excerpt":"","relationship":{"is_author":false},"detail":"","question_type":"normal"},"excerpt":"1，所有衣服一律洗衣机混洗，宝宝衣服要是比较脏就60度高温清洗。 2，奶瓶啥的大一点了一天就用一个两个，洗碗机洗就好了。 3，早餐午餐是超市买的米糊混着蔬菜和肉粉，外加一块抹着黄油或者奶酪的面包。晚餐和我们是一样的，做菜时不加盐，切成小块自己抓着吃（九个月大）。 4，我们这娃八九个月就可以去托儿所了 5，产假育儿假有一年多，爸爸妈妈俩人计划着换着休。我休了八个月，现在换老公在家，他休三个月。我没全休，超过…","excerpt_new":"1，所有衣服一律洗衣机混洗，宝宝衣服要是比较脏就60度高温清洗。 2，奶瓶啥的大一点了一天就用一个两个，洗碗机洗就好了。 3，早餐午餐是超市买的米糊混着蔬菜和肉粉，外加一块抹着黄油或者奶酪的面包。晚餐和我们是一样的，做菜时不加盐，切成小块自己抓着吃（九个月大）。 4，我们这娃八九个月就可以去托儿所了 5，产假育儿假有一年多，爸爸妈妈俩人计划着换着休。我休了八个月，现在换老公在家，他休三个月。我没全休，超过…","preview_type":"default","preview_text":"","reshipment_settings":"allowed","content":"\u003cp data-pid=\"uF2B5-DE\"\u003e1，所有衣服一律洗衣机混洗，宝宝衣服要是比较脏就60度高温清洗。\u003c/p\u003e\u003cp data-pid=\"3QWDgKZS\"\u003e2，奶瓶啥的大一点了一天就用一个两个，洗碗机洗就好了。\u003c/p\u003e\u003cp data-pid=\"lqpslIsN\"\u003e3，早餐午餐是超市买的米糊混着蔬菜和肉粉，外加一块抹着黄油或者奶酪的面包。晚餐和我们是一样的，做菜时不加盐，切成小块自己抓着吃（九个月大）。\u003c/p\u003e\u003cp data-pid=\"vZbXidii\"\u003e4，我们这娃八九个月就可以去托儿所了\u003c/p\u003e\u003cp data-pid=\"vz1MXaPw\"\u003e5，产假育儿假有一年多，爸爸妈妈俩人计划着换着休。我休了八个月，现在换老公在家，他休三个月。我没全休，超过六个月就拿不到全额工资了，政府补贴还是比工资少很多。\u003c/p\u003e\u003cp data-pid=\"fl5LS4g6\"\u003e6，公婆周末偶尔帮忙照顾一会孩子。他们帮的不多，但是管的也不多。真的需要帮忙可以顶一会，从来不干涉你怎么带娃，爱怎么带怎么带。同样，孩子交给他们帮忙看着，我们也不干涉他们怎带，安全健康就行了。\u003c/p\u003e\u003cp data-pid=\"3sKf3BPw\"\u003e7，夫妻同心，其利断金。小怪兽一个人应付太磨人，两个人一起就好很多。家务带娃还有养狗，休假的人主力，上班的打辅助。等都上班了就五五开吧。\u003c/p\u003e\u003cp data-pid=\"GsRrf4nz\"\u003e8，分房睡。一个月大宝宝就在自己房间睡了，我们拿婴儿监控，他哭了我们会醒，然后去他的房间哄。我睡眠质量不好，同屋睡休息不好，宝宝翻身我就醒。\u003c/p\u003e\u003cp data-pid=\"djooYhNB\"\u003e9，不强求母乳。能母乳这面都母乳喂。奶不够的就追一个月，要是还不够基本就改奶粉了，没必要给自己找罪受。一般妈妈休完产假，就断母乳了。\u003c/p\u003e\u003cp data-pid=\"PU9lOhIS\"\u003e10，养孩子在哪都不容易。所以就别给自己没事找事，别在身边安插个找事的人。\u003c/p\u003e\u003cp data-pid=\"losWUEgn\"\u003e儿子现在快两岁了，几条加在前面。\u003c/p\u003e\u003cp data-pid=\"dAbSCEXM\"\u003e11，托儿所早上六点半开门到下午五点，早上爸爸六点五十送到，在托儿所吃早餐，下午四点我去接。不晓得其他家长都是什么神仙工作，四点到基本就剩一两个小朋友了。\u003c/p\u003e\u003cp data-pid=\"5_b9ZW_Z\"\u003e12，周日把一整周的菜单列出来，把菜都买好。\u003c/p\u003e\u003cp data-pid=\"mRRYsJ2Y\"\u003e13，他现在和我们吃的都一样，已经能很好的用勺子和叉子了。不用喂饭，一家人一起吃，吃饱了他会要求擦手下去玩。\u003c/p\u003e\u003cp data-pid=\"eqRo73fZ\"\u003e14，babyproof，在他一岁多的时候，把家里危险的地方babyproof一下。我们也没有很细致，就是易碎危险的东西拿走，楼梯安上婴儿门。家里有一个安全空间，不用时刻盯着他。\u003c/p\u003e\u003cp data-pid=\"e39Pq9V9\"\u003e15，自主入睡，真香。一岁多开始，八点放上床，基本十分钟内入睡。每个月会有一次两次半夜醒了，基本安抚几分钟就翻身接着睡了。我是使用的降阶发，娃两三个月的时候也是要深蹲爬楼梯哄睡的，然后变成走路，放在床里轻拍，坐在床边陪伴，只留下白噪音，这样一点点降低难度。大概用了两三个月的时间。\u003c/p\u003e\u003cp data-pid=\"0pyQOD5D\"\u003e16，还有一个，入睡包括起夜，如果爸爸来会简单很多。宝宝对母亲的味道很敏感，对母亲的需求更高，如果晚上闻到身边是父亲，就没什么兴趣折腾了。起码在我俩身上是这样。\u003c/p\u003e\u003cp data-pid=\"y8LvWA4-\"\u003e17，带娃旅行是绝佳的亲子项目，增进感情和了解孩子。尤其是家里母亲是带娃主力的，很建议一家人出去度假，让爸爸在度假途中多承担带娃任务。这样可以很快的增进父子感情。\u003c/p\u003e\u003cp data-pid=\"qyQcG_Ih\"\u003e18，现在每天早上起床后就跟上战场似的，儿子喝奶洗漱去托儿所，上班，然后接孩子遛狗陪玩做晚饭吃晚饭收拾洗漱直到儿子八点上床睡觉。我也没觉着轻松啊\u003c/p\u003e\u003cp data-pid=\"9Vcxz3w_\"\u003e19，之前我们这面的儿医说过，小孩子五六个月开始吃辅食，要尽量让孩子多接触不同的食物。孩子在一岁半之后会开始拒绝很多没吃过的东西。所以一岁半之前接触的食物种类味道越多，越不容易挑食。第二次开放期是7-9岁左右。\u003c/p\u003e\u003cp data-pid=\"bDUEr_pI\"\u003e20，关于过敏，我和孩儿他爸都是易过敏体质，生之前和助产士沟通过。生完之后第一口奶很有讲究，当时给他喂的是一种特殊的奶粉，就是预防宝宝过敏的（我早产也没有母乳）。这个奶粉我们坚持给他喝了三四个月。目前为止还没什么过敏症状。再就是顺产/母乳/和小动物接触，可以降低过敏概率。（这面医生说的哈）\u003c/p\u003e\u003cp data-pid=\"w-YwmN6u\"\u003e2025新年加个塞。夏虫不可语冰，我很真诚的想和大家探讨育儿经验和方法，大家相互学习共同进步嘛。和育儿无关的请就不要留言了，答主正在怀二胎，脾气劲爆，骂人不好听。————————————————————————\u003c/p\u003e\u003cp data-pid=\"sTixEb-Z\"\u003e和身边环境有关吧。我在国内时是感觉身边各种事情压力都很大。学习工作收入外貌婚恋。。。然后又延伸到生育\u003c/p\u003e\u003cp data-pid=\"woBGZQ87\"\u003e我们这有妈妈组，就镇子上生育期接近的妈妈一起，每周去一家里聚会。在一起交流带娃经验，养育心德，然后，一起比烂。\u003c/p\u003e\u003cp data-pid=\"1gOHbIiU\"\u003e丹麦这面产检生育免费，产后回家会有育儿护士上门。第一个月每周来一次，半岁前然后每个月或每两个月来一次，之后每半年或者每年来一次。护士负责给宝宝做体检，探勘家庭养育环境，父母是否负责。同时解答育儿的相关问题，传授养育经验。宝宝黄疸，红屁股，湿疹，疫苗，喂奶，睡眠，辅食。。。这些都是专业护士，受过培训，传授的都是科学育儿方法，也比较符合当地生活习惯。\u003c/p\u003e\u003cp data-pid=\"sgCSLn-2\"\u003e和宝宝分房睡是护士建议的，她还说我没必要坚持第一个月睡一个房间。\u003c/p\u003e\u003cp data-pid=\"GBAEIo3K\"\u003e宝宝半岁我们一家三口去日本，十几个小时的飞机，也都是问了护士的。提前确认不需要打其他疫苗，她说宝宝七天就可以上飞机，半岁完全没问题。\u003c/p\u003e\u003cp data-pid=\"TMow-M_B\"\u003e宝宝和狗狗一起玩也确认过，狗狗除虫疫苗都很全面，也不是放养，性格温和，对宝宝免疫力也有帮助。\u003c/p\u003e\u003cp data-pid=\"Y_nqatgS\"\u003e洗碗机洗奶瓶，洗衣机洗衣服很正常，这面没有专业婴儿洗衣用品，都是一家人混洗。除非嫌弃宝宝衣服太脏了，那就单独洗一锅。\u003c/p\u003e\u003cp data-pid=\"dZ_18J5V\"\u003e玩具不可以太多，一次不要超过三个。\u003c/p\u003e\u003cp data-pid=\"na2Ty5Kb\"\u003e每天要补充维生素D（高纬度日照少混血宝宝）\u003c/p\u003e\u003cp data-pid=\"cu1nv1wM\"\u003e家庭氛围和谐，周边环境安静，宝宝一般也不会太闹腾。\u003c/p\u003e\u003cp data-pid=\"xbPDZ8Uw\"\u003e新生儿暴露在高噪音环境，宝宝会有应激反应。\u003c/p\u003e\u003cp data-pid=\"ceD24nAB\"\u003e新生儿第一个月尽量增加肌肤接触，让宝宝肌肤紧贴父母肌肤，有助宝宝发育。\u003c/p\u003e\u003cp data-pid=\"9Hp7J1YV\"\u003e这只是我觉得大家比较能接受的点，还有一些北欧育儿特色，其实我接受起来也用了一些时间，并不敢写在这里接受审判 ，但是习惯了以后就-真香。\u003c/p\u003e\u003cp data-pid=\"hOPCKoIN\"\u003e————————————————\u003c/p\u003e\u003cp data-pid=\"SsFPFai2\"\u003e中国父母的一些压力和困境我也能感受到一些。\u003c/p\u003e\u003cp data-pid=\"IOIlJFxn\"\u003e孕期两个月定的狗狗，四个月抱回来的。这个过程中，医生护士包括宠物医生都有咨询过，答复都是没问题（疫苗除虫啥的肯定要做），唯一就是宠物医生担心狗狗独生女变姐姐会缺乏安全感 。选品种的时候定的maltipoo，就是看中脾性好不致敏品种。\u003c/p\u003e\u003cp data-pid=\"u19Apead\"\u003e抱回家后发了个朋友圈，然后。。。就感受到了国内亲戚朋友们的关怀。\u003c/p\u003e\u003cp data-pid=\"ASy-UsUQ\"\u003e国外的同事朋友们都是“哇塞，两个宝宝一起长大，太棒啦”\u003c/p\u003e\u003cp data-pid=\"G66V_nUX\"\u003e这面的朋友同事们不是没有观点，比较亲近的朋友会给一些建设性意见，孕期生育一些注意事项，还有个好友给我准备了一大盒备产用品。\u003c/p\u003e\u003cp data-pid=\"oNmt-WNS\"\u003e大家会分享经验，但是不会“指导工作”。每个宝宝，每位妈妈都不一样。各人有各人的养法，各人有各人的活法。亲友邻居老师医生乃至国家，关注保障的是孩子身心的健康，但是你每天喂宝宝婴儿罐头还是天天忙两三个小时做饭，真的没人在乎。营养均衡就好了，吃啥不是吃。\u003c/p\u003e\u003cp data-pid=\"-clGsmSn\"\u003e我也认识一些比较紧张的妈妈，我也偶尔会变成一个非常紧张的妈妈。这个时候周边的人更多的是宽慰，不是苛责。\u003c/p\u003e\u003cp data-pid=\"hPLW-58E\"\u003e我拒绝接受任何未生未育人的孕期、产后护理和育儿建议。我拒绝任何非专业医护营养专家的婴儿喂养建议。我拒绝任何“我还不是为你好”“我不是担心孩子么”“不就是辛苦妈妈一点么”“我听人家谁谁谁（非专业人士）说”“你看人家都怎么怎么样”“谁家不都这么样”“你是个中国人，你得比人家小心”“中医说了”。。之类的建议。\u003c/p\u003e\u003cp data-pid=\"zjNJUzxM\"\u003e没人比我更在乎我自己的娃。没人比我更了解我自己的娃。养娃没有不犯错的。为啥大家都要一模一样的做事情，养娃也有标准答案了？\u003c/p\u003e\u003cp data-pid=\"rgciqlKE\"\u003e—————————————————\u003c/p\u003e\u003cp data-pid=\"tGPlgzjo\"\u003e最近拖家带口回国了，更直观的感受到一些带娃方式的不同。我也会不断反思自己的带娃方式，毕竟是第一次当妈，宝宝年纪还小，要向有经验的妈妈学习的很多。\u003c/p\u003e\u003cp data-pid=\"Z-3LMif0\"\u003e回国比较难接受的就是各种干扰了吧，我自己父母提前沟通的很好，他们会帮忙带娃，但没有过多干预。好笑的是我们飞上海一程，在维也纳机场，就听到有阿姨开始教育一个带娃的妈妈如何带孩子了。我个人觉得还蛮亲切的，可能教育的不是我吧。上海飞家的一程颠簸厉害，宝宝哭的比较多。后面座位的阿姨会主动逗宝宝玩，分散注意力。这些在国外是不会有的。就距离感和人情味儿只能选一个。\u003c/p\u003e\u003cp data-pid=\"CXFecKdQ\"\u003e至于和宝宝分房睡，因为回老家，宝宝的婴儿床在我们卧室，直观感受是宝宝的睡眠质量有所下降。平时他晚上哪怕醒了，哼唧一声也会继续睡。但是和我在一个房间，他醒了以后会站起来要我抱，入睡不是那么流畅。我也会反思，他自己睡会不会在亲密关系上有影响。但是我的想法是，白天在家的时间我们尽可能的陪伴，增加亲密关系，在他真正需要我的时候（生病，疲劳）要陪在身边。但是睡眠要分开，这样增加我们全家的睡眠质量，也对夫妻关系有益。之前看过一篇文章讲述亚洲宝宝的平均睡眠时间要比欧美低一到两个小时，就是因为居住环境的关系。不知道其他妈妈怎么做到的，但是我晚上睡不好的话，整个人的工作效率和耐心程度会大幅下降。所以我还是要坚持分开睡，计划二胎会更早分房，也防止老大会不开心。\u003c/p\u003e\u003cp data-pid=\"q60eJubV\"\u003e再就是看病了。国外对抗生素管控很严格。我儿子八个月大和我们一去感染新冠，烧了一两天，就是吃止痛剂过去的。我有找婆婆咨询（她是医生），但是我们连家庭医生都没有看，因为吃了止痛剂体温就降下去了。像是吃消炎药打吊针，在国外是非常非常少见的，那要是病的很严重了。\u003c/p\u003e\u003cp data-pid=\"RpIYBsg3\"\u003e不过就医这件事，我真的是觉得国内公立医院的医生，在全球范围内，医疗水平，工作素养，敬业精神是最棒的。回国前夕，宝宝一岁体检，家庭医生说心脏有杂音，建议找儿科医生进行全面检查，做心电图。当时觉得天都塌了。而且我们计划是五天后就出发飞回国了。公立医院给的预约时间是两到三个月之后（全民免费医疗）。我们给私人保险公司打电话，能找到的最快的也是要一周之后。后来我们挨个私立医院打电话，找到一个儿科医生愿意加号当天看，半个小时的身体检查，就是拿听筒检测，确认宝宝十分健康，杂音是小宝宝常见的现象，账单是四千块人民币。\u003c/p\u003e\u003cp data-pid=\"2E0d97zj\"\u003e回国的时候，可能是由于我手贱，撕了一个倒刺，加上不知道宝宝手指在哪挤压到了，有一个指甲剥离的厉害。我们赶早去的妇儿医院，挂了个六块钱的号。外科医生看了一眼然我们回家自己剪指甲就好，最后连那个号都没收。\u003c/p\u003e\u003cp data-pid=\"8qJDbzVa\"\u003e———————————\u003c/p\u003e\u003cp data-pid=\"DWTIbcgP\"\u003e再接着写就变成我儿子的成长日记了。\u003c/p\u003e\u003cp data-pid=\"zdUND9aE\"\u003e夏天回国在家呆了一段时间，然后和爸爸妈妈一起去苏州上海玩了一周，虽然做好了心理准备，但国内确实带宝宝出行有很多不方便。\u003c/p\u003e\u003cp data-pid=\"mCHner4U\"\u003e一路上换了三个酒店，都是设施很齐全的酒店（好贵），因为定的时候就要求要有婴儿床，三个酒店只有最后一家和平饭店拿出来了合格的婴儿床，其余两家都是浅浅的睡篮，六个月以下宝宝用的那种，明明说清楚了是一岁的宝宝，但很明显酒店方面完全没有这些准备。\u003c/p\u003e\u003cp data-pid=\"MT4TXc5f\"\u003e为了有婴儿座椅，全程是定了车的，但中间去上海要换车，司机大哥拿出来了一个淘宝买了二十几块塑料垫，上面带了两个绳子，跟我说是安全座椅。我一口老血咽了下去。\u003c/p\u003e\u003cp data-pid=\"xgrRvSBZ\"\u003e再就是景点里，没有残障通道。婴儿车不能去的地方，残疾人也进不去呀，我们之前在东京经历过，一个人抱娃，一个人扛车式逛街。所以这次很明智的只带了背带，没带车。一路上对那些扛着车的爸爸妈妈爷爷奶奶深切的同情。\u003c/p\u003e\u003cp data-pid=\"mB9yKTMi\"\u003e母婴间约等于没有，只在机场看见过。好在我儿子不喝母乳了，要是母乳妈妈这可咋办，在丹麦公共场合母乳很正常，大家也都视而不见，但在国内我估计是不敢的。换尿布就很麻烦，洗手台将就换，可是洗手台经常很多水，平时一个人的活就一定要两个人才能搞定。\u003c/p\u003e\u003cp data-pid=\"Trrzm493\"\u003e方便的就是不用做饭不用做饭不用做饭，外卖我老公点上瘾了，早上他自己醒了就拿着平板研究今天吃啥。儿童游乐场所也蛮多的，可惜宝宝太小玩不了。\u003c/p\u003e\u003cp data-pid=\"sPSi0_aE\"\u003e从国内回来以后我们就入托啦！本来是计划十个月到十一个月入托，结果这两年大家都在不停生孩子，家门口的托儿所到现在宝宝十五个月了还没排到，所以十四个月时，我们去了村儿里的另一家托儿所。托儿所是早上6:45-下午4:30，我们早上一般七点送过去，他可以在那吃早餐，我们也可以早点去公司上班，下午一般三点半四点去接，不想让他做最后一个被接走的宝宝。\u003c/p\u003e\u003cp data-pid=\"NdI5bMCz\"\u003e从上托儿所到现在两个月，我们每周末都要生病一次。所有人都说太正常了，都感染一遍以后就好了。所以一到周末就三个人➕狗狗一起躺平，休养生息，积蓄力量，喘息之余去公婆家蹭顿饭。两周前休了一个礼拜去罗马尼亚玩了一周参加好朋友的婚礼。\u003c/p\u003e\u003cp data-pid=\"c12arE9o\"\u003e现在没有老妈给开外挂，带娃基本就是我们俩。每周日列好下一周的菜谱，每周一超市有会员折扣，把一周的菜都买好，然后根据工作安排一个人做两顿晚饭。早饭午饭在公司解决，或者在家办公随便凑合。周五当然就吃剩菜啦，周末争取蹭饭。宝宝跟我们吃的差不多，但做菜时会低盐或者不放盐，取出宝宝的部分我们再加，单独做是不可能的，没那个力气。喂饭是不存在的，宝宝饿，他妈他爸更饿，把菜切小小块，放碗里自己抓着吃，反正有那种全身围嘴，吃完了擦手擦脸，掉地上的狗狗解决，晚上扫地机器人再工作一遍也就差不多了。\u003c/p\u003e\u003cp data-pid=\"A5-5uejp\"\u003e衣服周末一起洗，洗衣机烘干机轮流上，出来叠好了搞定。\u003c/p\u003e\u003cp data-pid=\"AxecwrT5\"\u003e这个阶段，不出去玩的话，宝宝除了托儿所，没有太大的支出。买些衣服鞋子也没那么贵，吃喝上也没有多少，这面一岁就开始喝纯牛奶了，奶粉就不用了，去托儿所纸尿布消耗都少了。托儿所差不多一个月四千多块人民币，是不小的开支，要是家里有两三个还真有压力。等过两年上幼儿园费用会便宜一半，幼儿园还有第二个半价的政策，会好一些。\u003c/p\u003e\u003cp data-pid=\"zJbXyLBd\"\u003e期待我婆婆十月份退休，她是真能干，坚挺到七十岁。她有时间会帮我们收拾下花园，照顾下宝宝，退休以后不知道会不会多帮一些，不然我们俩现在的精力要二胎会有些吃力。\u003c/p\u003e","relationship":{"is_thanked":false,"is_nothelp":false,"voting":0},"is_labeled":false,"visited_count":849836,"favorite_count":5441,"answer_type":"normal","is_navigator":false,"navigator_vote":false,"vote_next_step":"vote"},"brief":"{\"source\": \"TS\", \"type\": \"answer\", \"id\": 2875544279}","attached_info":"Co4GCL651tz1op/cjAEQBBoJNTUyOTA5MjI2ILSD9p4GKPc7MOkFQEpKKAoTVFNfU09VUkNFX0ZFRURSRV9WORIBMBgAIAA6CnsicmF3IjoiIn1aCDY3NDkxMDUyYiBiMWVhMWZlOGMyOTVkOTdkZGM1MTY3YzM2ZGQxNjc2N3IKMjg3NTU0NDI3OYoBCTQ3MzQ1MTAxNqoBCXJlY29tbWVuZMIBIDYyZGM1OThlZGYxNDNjOGIyZGNhODVlZWUyNzNiMTJl8gEKCAwSBk5vcm1hbPIBKAgKEiQ4ODRiNmYzYi1lZDIwLTQ4MDMtODQ3Yy1iODk3Nzk1Y2UwMzHyAQYICxICMTOCAgCIAqGKy836MpICIDYyZGM1OThlZGYxNDNjOGIyZGNhODVlZWUyNzNiMTJlmgIAygIWU2hvckludGVyZXN0V2VpZ2h0UnVsZcoCFkFjdGlvblNob3JJbnRlcmVzdFJ1bGXKAhtJbnRlcmFjdGlvblNob3JJbnRlcmVzdFJ1bGXKAhZSZXZpc2l0VmFsdWVXZWlnaHRSdWxlygIYUGVyaW9kSW50ZXJlc3RXZWlnaHRSdWxlygIVVXNlckxjbkV4aXRXZWlnaHRSdWxlygIUQ29udGVudEFnZVdlaWdodFJ1bGXaAhNUU19TT1VSQ0VfRkVFRFJFX1Y56AIC+gILTk9STUFMX0ZMT1eKAyA2Y2VjYmJjZjU3YjM0N2JiOTI3ODZkOTVmNzA0ZGI5ZpoDDQoCdjIQABoFb3RoZXKoA6zvM9gDAOoDCWZlZWRyZV92OfoDHxIMVU5LTk9XTl9NT0RFIAAqDU5PX0lNQUdFX01PREWABACIBACSBAZOb3JtYWyaBAEyoAQAqAQAsAQAugQGbWFudWFswgQDMTYwyAQA0gQP5o6o6I2Q5bey5pu05paw2AQA8AQA+QQAAABgu2W8P4EFAAAAAAAAAACJBYpNJQiRkNI/kgUAmgUDZGZ0ogUDZGZ0sgUBMbkFAAAAAAAAAADQBQDgBQDoBQDwBQ2QBgCgBlCoBgCSAiUKCTU1MjkwOTIyNhIKMjg3NTU0NDI3ORgEIgpJTUFHRV9URVhU","action_card":false},{"id":"75_1750898754.645","type":"feed","offset":75,"verb":"TOPIC_ACKNOWLEDGED_ANSWER","created_time":1750898754,"updated_time":1750898754,"target":{"id":"1920537011137254462","type":"answer","url":"https://api.zhihu.com/answers/1920537011137254462","author":{"id":"5b372e7224a4271cc0088a81abd31343","url":"https://api.zhihu.com/people/5b372e7224a4271cc0088a81abd31343","user_type":"people","url_token":"yi-mu-90-48","name":"楼兰笔记","headline":"走心文案|自媒体干货｜愿你好运","avatar_url":"https://pic1.zhimg.com/50/v2-16ea6c14dfe1061714d2b01c1928847f_l.jpg?source=b6762063","is_org":false,"gender":0,"followers_count":3162,"is_following":false,"is_followed":false},"created_time":1750671705,"updated_time":1750671705,"voteup_count":87,"thanks_count":9,"comment_count":4,"is_copyable":true,"question":{"id":"659733012","type":"question","url":"https://api.zhihu.com/questions/659733012","author":{"id":"fb7ccee13cafa9a62ca7ff166279510e","url":"https://api.zhihu.com/people/fb7ccee13cafa9a62ca7ff166279510e","user_type":"people","url_token":"36-22-61-86","name":"夢舒","headline":"","avatar_url":"https://pic1.zhimg.com/50/v2-25e4d7803e256253fb696f2287a2022b_l.jpg?source=b6762063","is_org":false,"gender":0,"followers_count":295,"is_following":false,"is_followed":false},"title":"大彻大悟的人，都看透了什么 ？","created":1719194646,"answer_count":0,"follower_count":0,"comment_count":15,"bound_topic_ids":[7490,89325,139227],"is_following":false,"excerpt":"","relationship":{"is_author":false},"detail":"","question_type":"normal"},"thumbnail":"https://pic1.zhimg.com/50/v2-9580fafb21bb08efd09c2490e420f0c5_720w.jpg?source=b6762063","excerpt":"1. 富不住大屋”，这句话亘古不变。凡事发迹后搬进大房子，但家里人丁不兴镇不住的，或者是本人的主卧空间很大那种，都富不过三五年。 大家可以去看看，很多法拍查封的豪宅，都是主卧很宽敞的户型，这种房子谁来了都接不住，住进去财气很快就散没了。 有钱了换大房子没问题，大平层、别墅、四合院.....前提是家里人多热闹，都住进去旺人气; 另外卧室设计一定要隐蔽且温馨小巧，不要太空。 2. 人年轻的时候，千万不要太讲究。 开…","excerpt_new":"1. 富不住大屋”，这句话亘古不变。凡事发迹后搬进大房子，但家里人丁不兴镇不住的，或者是本人的主卧空间很大那种，都富不过三五年。 大家可以去看看，很多法拍查封的豪宅，都是主卧很宽敞的户型，这种房子谁来了都接不住，住进去财气很快就散没了。 有钱了换大房子没问题，大平层、别墅、四合院.....前提是家里人多热闹，都住进去旺人气; 另外卧室设计一定要隐蔽且温馨小巧，不要太空。 2. 人年轻的时候，千万不要太讲究。 开…","preview_type":"default","preview_text":"","reshipment_settings":"allowed","content":"\u003cp data-pid=\"GAk9PZcB\"\u003e1.\u003c/p\u003e\u003cp data-pid=\"1Z8UZwHn\"\u003e\u003cb\u003e富不住大屋”，这句话亘古不变。\u003c/b\u003e\u003c/p\u003e\u003cp data-pid=\"uIBJYiX6\"\u003e凡事发迹后搬进大房子，但家里人丁不兴镇不住的，或者是本人的主卧空间很大那种，都富不过三五年。\u003c/p\u003e\u003cp data-pid=\"GMIJbNEA\"\u003e大家可以去看看，很多法拍查封的豪宅，都是主卧很宽敞的户型，这种房子谁来了都接不住，住进去财气很快就散没了。\u003c/p\u003e\u003cp data-pid=\"Ofo6un_a\"\u003e有钱了换大房子没问题，大平层、别墅、四合院.....前提是家里人多热闹，都住进去旺人气;\u003c/p\u003e\u003cp data-pid=\"eEl6re7h\"\u003e另外卧室设计一定要隐蔽且温馨小巧，不要太空。\u003c/p\u003e\u003cp data-pid=\"P-s3D6te\"\u003e2.\u003c/p\u003e\u003cp data-pid=\"Y0WgNptt\"\u003e人年轻的时候，千万不要太讲究。 开什么样的车子、用什么样的手机、戴什么样的手表、穿什么样的衣服，不是你考虑的主要问题。买了和经济实力不匹配的物品，用起来都小心翼翼的，无形中增加了精神损耗。人的精力有限，年轻的时候应该多想办法搞钱。 \u003c/p\u003e\u003cp data-pid=\"78w5Foeh\"\u003e3.\u003c/p\u003e\u003cp data-pid=\"FCNFWthK\"\u003e只要利益不产生冲突，别人讲的话，一般不需要反驳。\u003c/p\u003e\u003cp data-pid=\"zgpTEbir\"\u003e4.\u003c/p\u003e\u003cp data-pid=\"8V9GotKH\"\u003e\u003cb\u003e世界是公平的拿你有的换你要的，所谓门槛，能力够了就是门，能力不够就是槛。\u003c/b\u003e\u003c/p\u003e\u003cp data-pid=\"tGwymuAI\"\u003e所谓选择恐惧症，本质是穷;所谓的优柔寡断，本质就是怂。\u003c/p\u003e\u003cp data-pid=\"6uu1TlX0\"\u003e5.\u003c/p\u003e\u003cp data-pid=\"HP03oOaa\"\u003e比变好更好的方式是慢慢变好，比瘦更好的方式是健康地瘦，比多读书更好的阅读是有选择地读，比结婚更重要的事情是遇到合适的人。不用担心“暂时落后”，不必恐慌“一无所有”，人生的路曲折且漫长，偶尔堵车很正常，就像导航提示的那样：前方道路拥堵，但你仍然在最佳路线上。\u003c/p\u003e\u003cfigure data-size=\"normal\"\u003e\u003cimg src=\"https://pica.zhimg.com/v2-f561699bfb012210e1978bc16d3b85b8_1440w.jpg\" data-rawwidth=\"700\" data-rawheight=\"700\" data-size=\"normal\" data-original-token=\"v2-447a3b9789fec53e29070a69cff27517\" data-default-watermark-src=\"https://pic4.zhimg.com/v2-95725b79f21becac0cd1a2d598913e27_b.jpg\" class=\"origin_image zh-lightbox-thumb\" width=\"700\" data-original=\"https://pica.zhimg.com/v2-f561699bfb012210e1978bc16d3b85b8_r.jpg\"/\u003e\u003c/figure\u003e\u003cp data-pid=\"ZsTOQ3tH\"\u003e6.\u003c/p\u003e\u003cp data-pid=\"jLj-QFTD\"\u003e心软和不好意思，只会杀死自己。理想的薄情和无情，才是生存的利器。\u003c/p\u003e\u003cp data-pid=\"u3c2FAPs\"\u003e7.\u003c/p\u003e\u003cp data-pid=\"jFJksJmV\"\u003e如果想要讨好所有的人，注定是平庸的命运。\u003c/p\u003e\u003cp data-pid=\"k7Ig2752\"\u003e当你的见识超过大多数人的时候，你绝对不会是一个很受欢迎的人。你也不可能做着大众认同的事情，还期待着与众不同的结果。\u003c/p\u003e\u003cp data-pid=\"XIrHB-O3\"\u003e\u003cb\u003e❤️看到好的回答，记得点赞收藏，如果你还想没事的时候回头看看警示自己的话\u003c/b\u003e。\u003c/p\u003e\u003cp data-pid=\"7utB5GQQ\"\u003e8.\u003c/p\u003e\u003cp data-pid=\"2iBos3WW\"\u003e巧厨难烹百人餐，一人难如千人愿。没有人可以阻止别人的评价，但你可以选择不听。别人的话，总放在心上，你就输了。\u003c/p\u003e\u003cp data-pid=\"7jzDxhDB\"\u003e9.\u003c/p\u003e\u003cp data-pid=\"TG8Zq9f0\"\u003e搞钱才能让一个人通透，性、爱情、婚姻，都只会让一个人愚蠢。从赚100块钱，1000块钱，1万块钱，10万块钱开始赚。\u003c/p\u003e\u003cp data-pid=\"_9desM2n\"\u003e实践是检验真理的唯一标准，只有赚钱才会让一个人越来越聪明。一个人只有赚到了钱，才会对这个世界的认知更加深刻，才会真的了解这个社会的运转机制。\u003c/p\u003e\u003cp data-pid=\"e0h4hWQo\"\u003e10.\u003c/p\u003e\u003cp data-pid=\"ZqHpsnUz\"\u003e很通透的一段话，看完瞬间清醒。曾仕强说，我不惑之年才悟出这些道理。\u003c/p\u003e\u003cp data-pid=\"1z52J2Px\"\u003e心软之人，便是无福之人，心软之人，纵然委屈自己，也要成全对方。心软，看似豁达，实则愚钝，看似善良，实则懦弱。\u003c/p\u003e\u003cp data-pid=\"tCdEbGpj\"\u003e太多人因为可怜别人，最后自己变成了可怜人。人品越好，朋友越少，心越善良，苦难越多。\u003c/p\u003e\u003cp data-pid=\"eN4P4SQF\"\u003e不要随便可怜任何人。心软之人，处处妥协，不断退让，经常给别人伤害自己的机会。千万记住人不应该心软，尤其是因为心软去帮助不应该帮助人，那是在分走自己的福气。\u003c/p\u003e\u003cfigure data-size=\"normal\"\u003e\u003cimg src=\"https://pic2.zhimg.com/v2-1663741d1ec10eff7f9e2e5d4abf237d_1440w.jpg\" data-rawwidth=\"700\" data-rawheight=\"700\" data-size=\"normal\" data-original-token=\"v2-e9faea7b0dc30e9aa83ef25fb2f5b078\" data-default-watermark-src=\"https://pic2.zhimg.com/v2-d099d7b6680371a1f910c462e15c6103_b.jpg\" class=\"origin_image zh-lightbox-thumb\" width=\"700\" data-original=\"https://pic2.zhimg.com/v2-1663741d1ec10eff7f9e2e5d4abf237d_r.jpg\"/\u003e\u003c/figure\u003e\u003cp data-pid=\"P9ZCwHuQ\"\u003e11.\u003c/p\u003e\u003cp data-pid=\"rnI4Bpcq\"\u003e这个世界并不在乎你的自尊，只在乎你做出来的成绩，然后再去强调你的感受。\u003c/p\u003e\u003cp data-pid=\"7spmGFlq\"\u003e12.\u003c/p\u003e\u003cp data-pid=\"EAwGZJeh\"\u003e所谓向内求，就是当我们有所求的时候，要明白在关键的时刻只有自己才能救自己，只有自己才能给自己答案，别人只能给自己一个指点或启示，最终拯救自己的还是自己。求人不如求己就是这个道理。\u003c/p\u003e\u003cp data-pid=\"bYkVZEal\"\u003e所谓向外修，就是当我们想修行提升的时候，要借助他人才能修自己，而不是把自己关闭起来谁也不见，甚至跑到深山老林里躲着，红尘俗世就是最好的修行。\u003c/p\u003e\u003cp data-pid=\"ACOQUuA8\"\u003e13.\u003c/p\u003e\u003cp data-pid=\"xHPMz2aA\"\u003e最近看到一段话希望可以鼓励到你：\u003c/p\u003e\u003cp data-pid=\"RRWbBWLZ\"\u003e我知道你最近很累，是那种看不见的，身体上和精神上的疲惫感，但是请你一定要坚持下去。就算无人问津也好，技不如人也好，千万别让烦躁和焦虑毁了你本就不多的热情和定力。\u003c/p\u003e\u003cp data-pid=\"vThUIRpk\"\u003e\u003cb\u003e别贪心，我们不可能什么都有，也别灰心，我们不可能什么也没有。\u003c/b\u003e\u003c/p\u003e\u003cp data-pid=\"CjV6x050\"\u003e14.\u003c/p\u003e\u003cp data-pid=\"9JkW_nDK\"\u003e99%焦虑都来自于虚度时间和没有好好做事，所以唯一的解决办法就是行动起来，认真做完事情，战胜焦虑，战胜那些心里空荡荡的时刻，而不是选择逃避。不要站在原地想象困难，行动永远是改变现状的最佳方式。\u003c/p\u003e\u003cp data-pid=\"e6JJoE29\"\u003e\u003cb\u003e点一个赞和关注，我会毎日更新最新优质干货❤️\u003c/b\u003e\u003c/p\u003e\u003cp data-pid=\"__Zr-7NN\"\u003e15.\u003c/p\u003e\u003cp data-pid=\"JxbK5SfY\"\u003e一个屡试不爽的法则：\u003c/p\u003e\u003cp data-pid=\"mDrAiwdh\"\u003e当你全身心觉得舒服，觉得自己超级无敌棒，自信满满，从内到外闪闪发光，做事非常有干劲，元气十足的时候，\u003c/p\u003e\u003cp data-pid=\"DyZaaVNo\"\u003e你原来一直纠结对方喜不喜欢你的人，你原来一直梦想的事业机会，你一直渴望得到的资源，会一下子朝你涌来。\u003c/p\u003e\u003cfigure data-size=\"normal\"\u003e\u003cimg src=\"https://pic4.zhimg.com/v2-1c520aa06ff1297dc25d58d3fad21b25_1440w.jpg\" data-rawwidth=\"700\" data-rawheight=\"700\" data-size=\"normal\" data-original-token=\"v2-99dd92730a7eb9aa914dd8d2ea733b3a\" data-default-watermark-src=\"https://pic1.zhimg.com/v2-988b79c3147a3f3bcda08e934cfd03f2_b.jpg\" class=\"origin_image zh-lightbox-thumb\" width=\"700\" data-original=\"https://pic4.zhimg.com/v2-1c520aa06ff1297dc25d58d3fad21b25_r.jpg\"/\u003e\u003c/figure\u003e\u003cp data-pid=\"JBXSqEdc\"\u003e16.\u003c/p\u003e\u003cp data-pid=\"OKTd_8ov\"\u003e人在什么时候会大彻大悟，只要你爱错一个人，结错一次婚，生一场大病，生意失败破产，经历至亲的生死离别或背叛伤害时，你就会明白什么是人生。\u003c/p\u003e\u003cp data-pid=\"mm8fT-UO\"\u003e这些事情的发生算是命运对你的考验，同样也是你在渡劫。\u003c/p\u003e\u003cp data-pid=\"LCHxoly-\"\u003e所有大彻大悟之人，都曾无可救药过，记住：心不死，则道不生。\u003c/p\u003e\u003cp data-pid=\"HdlO2kQk\"\u003e17.\u003c/p\u003e\u003cp data-pid=\"aZPOcMPU\"\u003e很喜欢罗翔老师说的这段话：\u003c/p\u003e\u003cp data-pid=\"nkXuaYi4\"\u003e类所有真实的快乐，一定是恒久的努力。那些瞬间的满足、短暂的享乐之后便是无尽的空虚。\u003c/p\u003e\u003cp data-pid=\"zz4WaRdZ\"\u003e世上真正有价值的事情，从来都不是轻松就能达到的，你必须克服懒惰、克服急躁、克制你一蹴而就的妄想。\u003c/p\u003e\u003cp data-pid=\"ZdCfReD0\"\u003e通过自律 、克制、努力所实现的人生，才会令人拥有持续的快乐与平和，希望我们都能成为自由又自律的人。\u003c/p\u003e\u003cp data-pid=\"LWKV2C7y\"\u003e18.\u003c/p\u003e\u003cp data-pid=\"OxGqK_Un\"\u003e一个旋学真相：\u003cb\u003e不要说自己的不好，不要总是吐槽自己。\u003c/b\u003e\u003c/p\u003e\u003cp data-pid=\"KxmY6mjG\"\u003e一个人的言行举止都会影响到自己的磁场和运势。\u003c/p\u003e\u003cp data-pid=\"NrFg4VoH\"\u003e如果你经常说自己的坏话，那么你的气场就会变得低迷，吸引来的也会是负能量和事情。\u003c/p\u003e\u003cp data-pid=\"W4rLSL1m\"\u003e19.\u003c/p\u003e\u003cp data-pid=\"wyj8Ei99\"\u003e被研究生导师一句话鼓励到了：\u003c/p\u003e\u003cp data-pid=\"tTtNoJHn\"\u003e\u003cb\u003e“你要是不抽出时间来创造你想要的生活，你最终一定会花费大量的时间，来应付自己不想要的生活。\u003c/b\u003e你现在就是得认真学习，努力充实自己，而不是焦虑时光。” \u003c/p\u003e\u003cp data-pid=\"dqo6iNJj\"\u003e所有逆袭都是有备而来，所有光芒都需要时间绽放。你最好的状态，应该是知道自己想要什么并全力以赴！\u003c/p\u003e\u003cp data-pid=\"_DYovhIF\"\u003e20.\u003c/p\u003e\u003cp data-pid=\"r-xAKU3f\"\u003e\u003cb\u003e返璞归真，简约而生\u003c/b\u003e。\u003c/p\u003e\u003cp data-pid=\"OLcO5HFo\"\u003e终有一天，你会突然醒悟过来，原来那些生活中的优质男女们，并不比你优秀多少。\u003c/p\u003e\u003cp data-pid=\"vL5A4Qij\"\u003e而是人家从最基本的生活作息，都是健康且明朗的。\u003c/p\u003e\u003cp data-pid=\"Lt8U6r1k\"\u003e所以人生结出的所有成果，自然也是甜美可口的。\u003c/p\u003e\u003cfigure data-size=\"normal\"\u003e\u003cimg src=\"https://pic2.zhimg.com/v2-d1c890f0b67f2fb7d128ac65f2659329_1440w.jpg\" data-rawwidth=\"700\" data-rawheight=\"700\" data-size=\"normal\" data-original-token=\"v2-69f3a3f152a5d830a869a153efafc903\" data-default-watermark-src=\"https://pic3.zhimg.com/v2-c26cad8f2d62806ab063176854dcf8ae_b.jpg\" class=\"origin_image zh-lightbox-thumb\" width=\"700\" data-original=\"https://pic2.zhimg.com/v2-d1c890f0b67f2fb7d128ac65f2659329_r.jpg\"/\u003e\u003c/figure\u003e\u003cblockquote data-pid=\"vqKYfvva\"\u003e\u003cb\u003e图文来源网络：侵删\u003c/b\u003e\u003c/blockquote\u003e\u003cp data-pid=\"izJXJFBK\"\u003e❤️谢谢你这么优秀，还给我点赞。祝你想要的都拥有，得不到的都释怀。\u003c/p\u003e\u003cp data-pid=\"7ml1fua0\"\u003e我是 \u003ca class=\"member_mention\" href=\"https://www.zhihu.com/people/5b372e7224a4271cc0088a81abd31343\" data-hash=\"5b372e7224a4271cc0088a81abd31343\" data-hovercard=\"p$b$5b372e7224a4271cc0088a81abd31343\"\u003e@楼兰笔记\u003c/a\u003e ，每日分享优质文案。欢迎关注我~愿我们所想之事皆能如愿~\u003c/p\u003e\u003cp\u003e\u003c/p\u003e","relationship":{"is_thanked":false,"is_nothelp":false,"voting":0},"is_labeled":false,"visited_count":12710,"thumbnails":["https://picx.zhimg.com/50/v2-9580fafb21bb08efd09c2490e420f0c5_720w.jpg?source=b6762063","https://pic1.zhimg.com/50/v2-fa43748a7f11ab2942267a83ce29dda9_720w.jpg?source=b6762063","https://picx.zhimg.com/50/v2-4b3050caf6a474508c157e7596e41919_720w.jpg?source=b6762063","https://pica.zhimg.com/50/v2-73f6cf2a1091956aeaf33eefe70103a4_720w.jpg?source=b6762063"],"favorite_count":160,"answer_type":"normal","is_navigator":false,"navigator_vote":false,"vote_next_step":"vote"},"brief":"{\"source\": \"TS\", \"type\": \"answer\", \"id\": 1920537011137254462}","attached_info":"CrsHCL651tz1op/cjAEQBBoJNzMzNjI3MDE5INnC5MIGKFcwBEBLSigKE1RTX1NPVVJDRV9GRUVEUkVfVjkSATAYACAAOgp7InJhdyI6IiJ9WgkxMDg4ODUxOTViIGIxZWExZmU4YzI5NWQ5N2RkYzUxNjdjMzZkZDE2NzY3chMxOTIwNTM3MDExMTM3MjU0NDYyigEJNjU5NzMzMDEyqgEJcmVjb21tZW5kwgEgNWIzNzJlNzIyNGE0MjcxY2MwMDg4YTgxYWJkMzEzNDPyAQoIDBIGTm9ybWFs8gEoCAoSJDkyNGNlYjliLWMyNTAtNGVhYS05Mzg3LTY2NWE1OTZkMmJhYfIBBggLEgIxM4ICAIgCoYrLzfoykgIgNWIzNzJlNzIyNGE0MjcxY2MwMDg4YTgxYWJkMzEzNDOaAgDKAhZTaG9ySW50ZXJlc3RXZWlnaHRSdWxlygIWQWN0aW9uU2hvckludGVyZXN0UnVsZcoCG0ludGVyYWN0aW9uU2hvckludGVyZXN0UnVsZcoCFlJldmlzaXRWYWx1ZVdlaWdodFJ1bGXKAhhQZXJpb2RJbnRlcmVzdFdlaWdodFJ1bGXKAhVVc2VyTGNuRXhpdFdlaWdodFJ1bGXaAhNUU19TT1VSQ0VfRkVFRFJFX1Y56AIC+gILTk9STUFMX0ZMT1eKAyA2Y2VjYmJjZjU3YjM0N2JiOTI3ODZkOTVmNzA0ZGI5ZpoDDQoCdjIQABoFb3RoZXKoA6Zj2AMA6gMJZmVlZHJlX3Y5+gPbARIMVU5LTk9XTl9NT0RFIAAqDU5PX0lNQUdFX01PREU6LQgCELwFGLwFIiN2Mi00NDdhM2I5Nzg5ZmVjNTNlMjkwNzBhNjljZmYyNzUxNzotCAIQvAUYvAUiI3YyLWU5ZmFlYTdiMGRjMzBlOWFhODNlZjI1ZmIyZjViMDc4Oi0IAhC8BRi8BSIjdjItOTlkZDkyNzMwYTdlYjlhYTkxNGRkOGQyZWE3MzNiM2E6LQgCELwFGLwFIiN2Mi02OWYzYTNmMTUyYTVkODMwYTg2OWExNTNlZmFmYzkwM4AEAIgEAJIEBk5vcm1hbJoEATKgBACoBACwBAC6BAZtYW51YWzCBAMxNzDIBADSBA/mjqjojZDlt7Lmm7TmlrDYBADwBAD5BAAAAMAoXME/gQUAAAAAAAAAAIkFik0lCJGQ0j+SBQCaBQNkZnSiBQNkZnSyBQExuQUAAAAAAAAAANAFAOAFAOgFAPAFDZAGAKAGUagGAZICLgoJNzMzNjI3MDE5EhMxOTIwNTM3MDExMTM3MjU0NDYyGAQiCklNQUdFX1RFWFQ=","action_card":false},{"id":"76_1750898754.217","type":"feed","offset":76,"verb":"TOPIC_ACKNOWLEDGED_ANSWER","created_time":1750898754,"updated_time":1750898754,"target":{"id":"1921467764331251075","type":"answer","url":"https://api.zhihu.com/answers/1921467764331251075","author":{"id":"de55d2d760ac6aaa067fb3526ae35482","url":"https://api.zhihu.com/people/de55d2d760ac6aaa067fb3526ae35482","user_type":"people","url_token":"84-73-9-8","name":"李亚教授","headline":"顾问式管理专家，南开大学教授，上市公司福田汽车独立董事","avatar_url":"https://pica.zhimg.com/50/v2-947af543e36e654f970de89babebc4a6_l.jpg?source=b6762063","is_org":false,"gender":1,"followers_count":1063,"is_following":false,"is_followed":false},"created_time":1750893614,"updated_time":1750893614,"voteup_count":0,"thanks_count":0,"comment_count":0,"is_copyable":true,"question":{"id":"9377314328","type":"question","url":"https://api.zhihu.com/questions/9377314328","author":{"id":"82cbaaaf977fe848fb2e11382f167375","url":"https://api.zhihu.com/people/82cbaaaf977fe848fb2e11382f167375","user_type":"people","url_token":"16-54-24-7","name":"紫麓易","headline":"擅长写作和中国传统文化，相信明天更美好。","avatar_url":"https://pic1.zhimg.com/50/v2-a7deadd70849d1271b4b6e2b594066b1_l.jpg?source=b6762063","is_org":false,"gender":1,"followers_count":1,"is_following":false,"is_followed":false},"title":"只有知识或技术能创业吗？","created":1736644615,"answer_count":0,"follower_count":0,"comment_count":0,"is_following":false,"excerpt":"","relationship":{"is_author":false},"detail":"","question_type":"normal"},"thumbnail":"https://picx.zhimg.com/50/v2-0c8bb53144d403a02e80f635e0169c5d_720w.jpg?source=b6762063","excerpt":"必须找一个营销合伙人。 [文章: 股神巴菲特的背后智囊是什么人？] [视频: 用什么方式让管理变轻松？]","excerpt_new":"必须找一个营销合伙人。 [文章: 股神巴菲特的背后智囊是什么人？] [视频: 用什么方式让管理变轻松？]","preview_type":"default","preview_text":"","reshipment_settings":"allowed","content":"\u003cp data-pid=\"gJn0R8VF\"\u003e必须找一个营销合伙人。\u003c/p\u003e\u003ca data-draft-node=\"block\" data-draft-type=\"link-card\" href=\"https://zhuanlan.zhihu.com/p/542826244\" class=\"internal\"\u003e股神巴菲特的背后智囊是什么人？\u003c/a\u003e\u003cp class=\"ztext-empty-paragraph\"\u003e\u003cbr/\u003e\u003c/p\u003e\u003ca href=\"https://www.zhihu.com/zvideo/1551172932294082560\" data-draft-node=\"block\" data-draft-type=\"link-card\"\u003e\u003c/a\u003e","relationship":{"is_thanked":false,"is_nothelp":false,"voting":0},"is_labeled":true,"visited_count":9,"thumbnails":["https://picx.zhimg.com/50/v2-0c8bb53144d403a02e80f635e0169c5d_720w.jpg?source=b6762063"],"favorite_count":0,"answer_type":"normal","is_navigator":false,"navigator_vote":false,"vote_next_step":"vote"},"brief":"{\"source\": \"TS\", \"type\": \"answer\", \"id\": 1921467764331251075}","attached_info":"Co0GCL651tz1op/cjAEQBBoJNzM0MDM5NzMzIK6I8sIGKAAwAEBMSiQKGVRTX1NPVVJDRV9XQVJNX1VQX05PUk1BTDESATAYACAAOgBKLwokVFNfU09VUkNFX1dBUk1VUF9UV09UT1dFUl9FWFBWMl9URVhUEgEwGAAgADoAWgkxMTI4NTE5NDZiIGIxZWExZmU4YzI5NWQ5N2RkYzUxNjdjMzZkZDE2NzY3aIDA2Yr/8bfDFXITMTkyMTQ2Nzc2NDMzMTI1MTA3NYoBCjkzNzczMTQzMjiqAQlyZWNvbW1lbmTCASBkZTU1ZDJkNzYwYWM2YWFhMDY3ZmIzNTI2YWUzNTQ4MvIBCggMEgZOb3JtYWzyASgIChIkMTBjYWQxYzQtZGY4Ni00NTZmLWIyZGYtOWFhNTQ2NDgzMDdl8gEGCAsSAjEzggIAiAKhisvN+jKSAiBkZTU1ZDJkNzYwYWM2YWFhMDY3ZmIzNTI2YWUzNTQ4MpoCAMoCFlNob3JJbnRlcmVzdFdlaWdodFJ1bGXKAhVVc2VyTGNuRXhpdFdlaWdodFJ1bGXKAhhDb250ZW50V2FybVVwQnJlYWtJblJ1bGXaAhlUU19TT1VSQ0VfV0FSTV9VUF9OT1JNQUwx6AIC+gILTk9STUFMX0ZMT1eKAyA2Y2VjYmJjZjU3YjM0N2JiOTI3ODZkOTVmNzA0ZGI5ZpoDDQoCdjIQABoFb3RoZXKoAwnYAwDqAy9jb250ZW50V2FybXVwVHdvVG93ZXJUdnBUZXh0Tm9ybWFsRXhwVjJSZWNhbGxlcvoDHxIMVU5LTk9XTl9NT0RFIAAqDU5PX0lNQUdFX01PREWABACIBACSBAZOb3JtYWyaBAEyoAQAqAQAsAQAugQCYWnCBAM0MDDIBADSBA/mjqjojZDlt7Lmm7TmlrDYBADwBAD5BAAAAKDkVaI/gQUAAAAAAAAAAIkFik0lCJGQ0j+SBQCaBQNkZnSiBQNkZnSyBQExuQUAAAAAAAAAANAFAOAFAOgFAPAFDZAGAKAGUqgGAJICLgoJNzM0MDM5NzMzEhMxOTIxNDY3NzY0MzMxMjUxMDc1GAQiCklNQUdFX1RFWFQ=","action_card":false},{"id":"77_1750898754.9","type":"feed","offset":77,"verb":"TOPIC_ACKNOWLEDGED_ANSWER","created_time":1750898754,"updated_time":1750898754,"target":{"id":"1919427367618708333","type":"answer","url":"https://api.zhihu.com/answers/1919427367618708333","author":{"id":"e61c54f27f72220e041855c7b17b0393","url":"https://api.zhihu.com/people/e61c54f27f72220e041855c7b17b0393","user_type":"people","url_token":"chang-sheng-ju-shi","name":"励志脱坑的化学妹","headline":"车企HR｜职场观察者","avatar_url":"https://picx.zhimg.com/50/v2-fdff08a0140942bb65396b5de59c2b6b_l.jpg?source=b6762063","is_org":false,"gender":0,"followers_count":13552,"is_following":false,"is_followed":false},"created_time":1750407145,"updated_time":1750407145,"voteup_count":361,"thanks_count":20,"comment_count":18,"is_copyable":false,"question":{"id":"608927584","type":"question","url":"https://api.zhihu.com/questions/608927584","author":{"id":"e2013be3bccefc4586aaf1d93f5faac7","url":"https://api.zhihu.com/people/e2013be3bccefc4586aaf1d93f5faac7","user_type":"people","url_token":"luo-ling-72-34","name":"九月","headline":"随心记录身边事，记录生活的点滴","avatar_url":"https://picx.zhimg.com/50/v2-00c2fcb73877e25ad5db0dcdcb35ad77_l.jpg?source=b6762063","is_org":false,"gender":0,"followers_count":41,"is_following":false,"is_followed":false},"title":"为什么很多人在一个公司工作2-3年就会离职？","created":1687840362,"answer_count":0,"follower_count":0,"comment_count":11,"bound_topic_ids":[522,3842,184355],"is_following":false,"excerpt":"","relationship":{"is_author":false},"detail":"","question_type":"normal"},"excerpt":"普通人能够容忍的最长反馈周期就是3年，超出这个周期，人会主动求变。 学生时代的学制，大多以3年为反馈周期，初中3年，高中3年，本科4年，研究生3年，博士3-4年，期间还穿插着许多小周期，例如学期、学年、交换期。 反馈机制也很简单，每经历一个周期，都有明确的结论，高分/低分，升学成功/不成功，毕业/不毕业，论文发表/被拒等等。 将以上思维带入到职场，理所当然会觉得入职3年该有些变化，无论是升职加薪，还是工作技能的…","excerpt_new":"普通人能够容忍的最长反馈周期就是3年，超出这个周期，人会主动求变。 学生时代的学制，大多以3年为反馈周期，初中3年，高中3年，本科4年，研究生3年，博士3-4年，期间还穿插着许多小周期，例如学期、学年、交换期。 反馈机制也很简单，每经历一个周期，都有明确的结论，高分/低分，升学成功/不成功，毕业/不毕业，论文发表/被拒等等。 将以上思维带入到职场，理所当然会觉得入职3年该有些变化，无论是升职加薪，还是工作技能的…","preview_type":"default","preview_text":"","reshipment_settings":"need_payment","content":"\u003cp data-pid=\"IJRJm4iZ\"\u003e普通人能够容忍的最长反馈周期就是3年，超出这个周期，人会主动求变。\u003c/p\u003e\u003cp data-pid=\"myNnAkKL\"\u003e学生时代的学制，大多以3年为反馈周期，初中3年，高中3年，本科4年，研究生3年，博士3-4年，期间还穿插着许多小周期，例如学期、学年、交换期。\u003c/p\u003e\u003cp data-pid=\"wBB6QuHb\"\u003e反馈机制也很简单，每经历一个周期，都有明确的结论，高分/低分，升学成功/不成功，毕业/不毕业，论文发表/被拒等等。\u003c/p\u003e\u003cp data-pid=\"bRGRoM8d\"\u003e将以上思维带入到职场，理所当然会觉得入职3年该有些变化，无论是升职加薪，还是工作技能的提高，抑或泡到领导同事，如果没有，员工就会想方设法寻求反馈。\u003c/p\u003e\u003cp data-pid=\"QusPHN_k\"\u003e为什么领导总诟病，员工刚入职时干劲满满，几年后变成老油条，原因就在于此，长期没有反馈，员工选择调整工作态度，让工作变得轻松些，自己给自己一个反馈。\u003c/p\u003e\u003cp data-pid=\"SIfK_lpk\"\u003e离职，选择换个地方发展也是种反馈。\u003c/p\u003e\u003cp data-pid=\"wJXiVNMp\"\u003e有人会讲，依靠外界反馈不是长久之计，这种模式在学校没有问题，可一旦进入到社会，随着明确的目标和路径消失，经历过一两次打击，人很快会垮掉，所以一定要找到内心真正的热爱，要沉得住气，坐得了冷板凳，真正优秀的人是抱着做事业的心态，而不仅仅是为了升职加薪去盲目跳槽。\u003c/p\u003e\u003cp data-pid=\"UG9zhQYf\"\u003e没错，非常正确！我很认可。\u003c/p\u003e\u003cp data-pid=\"_3JRxldP\"\u003e但绝大多数人都是普通人，别说10年冷板凳，4-5年的博士能坚持下来的已是人中龙凤，我们凡人，没有愚公移山的毅力，也没有淡薄名利的境界，说白了，做事的动机和海洋馆里的海豹差不多，为了游客的投喂，顶一次球，再喂一次，再顶一次，只有不断收到正反馈，才能继续保持前进的动力。\u003c/p\u003e\u003cp data-pid=\"APBdwm8t\"\u003e找到热爱并终其一生是很难的事，如果找到，衷心祝福；找不到也没关系，依靠反馈过活也不是错，更不能成为接受找寻到热爱的人蔑视的理由。\u003c/p\u003e","relationship":{"is_thanked":false,"is_nothelp":false,"voting":0},"is_labeled":false,"visited_count":39714,"favorite_count":227,"answer_type":"normal","is_navigator":false,"navigator_vote":false,"vote_next_step":"vote"},"brief":"{\"source\": \"TS\", \"type\": \"answer\", \"id\": 1919427367618708333}","attached_info":"CpMHCL651tz1op/cjAEQBBoJNzMzMTU4MDY3IOmv1MIGKOkCMBJATUo4Ci1UU19TT1VSQ0VfSU5URVJFU1RfV09SRF9DT05URU5UX1ZBTFVFX0xFVkVMX0MSATAYACAAOgBKKAoTVFNfU09VUkNFX0ZFRURSRV9WORIBMBgAIAA6CnsicmF3IjoiIn1aCDk3NTk3OTgxYiBiMWVhMWZlOGMyOTVkOTdkZGM1MTY3YzM2ZGQxNjc2N3ITMTkxOTQyNzM2NzYxODcwODMzM4oBCTYwODkyNzU4NKoBCXJlY29tbWVuZMIBIGU2MWM1NGYyN2Y3MjIyMGUwNDE4NTVjN2IxN2IwMzkz8gEKCAwSBk5vcm1hbPIBKAgKEiQwZTE0MGM3Yy00NjVjLTRiZGQtOTgzMC1iYjI0M2ViZGIzYzbyAQYICxICMTOCAgCIAqGKy836MpICIGU2MWM1NGYyN2Y3MjIyMGUwNDE4NTVjN2IxN2IwMzkzmgIAygIWU2hvckludGVyZXN0V2VpZ2h0UnVsZcoCFkFjdGlvblNob3JJbnRlcmVzdFJ1bGXKAhtJbnRlcmFjdGlvblNob3JJbnRlcmVzdFJ1bGXKAhZSZXZpc2l0VmFsdWVXZWlnaHRSdWxlygIYUGVyaW9kSW50ZXJlc3RXZWlnaHRSdWxlygIVVXNlckxjbkV4aXRXZWlnaHRSdWxlygIcQmF5ZXNGaXJzdExldmVsSXNvbGF0aW9uUnVsZdoCLVRTX1NPVVJDRV9JTlRFUkVTVF9XT1JEX0NPTlRFTlRfVkFMVUVfTEVWRUxfQ+gCAvoCC05PUk1BTF9GTE9XigMgNmNlY2JiY2Y1N2IzNDdiYjkyNzg2ZDk1ZjcwNGRiOWaaAw0KAnYyEAAaBW90aGVyqAOitgLYAwDqAypJbnRlcmVzdFdvcmRDb250ZW50VmFsdWVMZXZlbENQb29sUmVjYWxsZXL6Ax8SDFVOS05PV05fTU9ERSAAKg1OT19JTUFHRV9NT0RFgAQAiAQAkgQGTm9ybWFsmgQBMqAEAKgEALAEALoEBm1hbnVhbMIEAzE2MMgEANIED+aOqOiNkOW3suabtOaWsNgEAPAEAPkEAAAAgExYwD+BBQAAAAAAAAAAiQWKTSUIkZDSP5IFAJoFA2RmdKIFA2RmdLIFATG5BQAAAAAAAAAA0AUA4AUA6AUA8AUNkAYAoAZTqAYAkgIuCgk3MzMxNTgwNjcSEzE5MTk0MjczNjc2MTg3MDgzMzMYBCIKSU1BR0VfVEVYVA==","action_card":false}],"paging":{"is_end":false,"is_start":false,"next":"https://www.zhihu.com/api/v3/feed/topstory/recommend?action=down\u0026ad_interval=-10\u0026after_id=77\u0026desktop=true\u0026end_offset=83\u0026page_number=14\u0026session_token=b1ea1fe8c295d97ddc5167c36dd16767","previous":"https://www.zhihu.com/api/v3/feed/topstory/recommend?action=pull\u0026ad_interval=-10\u0026before_id=77\u0026desktop=true\u0026end_offset=83\u0026page_number=14\u0026session_token=b1ea1fe8c295d97ddc5167c36dd16767","totals":0},"fresh_text":"推荐已更新"}
