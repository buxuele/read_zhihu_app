{
  "data": [
    {
      "id": "114_1767705692.786",
      "type": "feed",
      "offset": 114,
      "verb": "TOPIC_ACKNOWLEDGED_ANSWER",
      "created_time": 1767705692,
      "updated_time": 1767705692,
      "target": {
        "is_copyable": true,
        "content": "<p data-pid=\"U9UAriU6\">1、理发店如果都这样，生意能不好吗</p><figure data-size=\"normal\"><img src=\"https://pica.zhimg.com/v2-1b5f900d27925880cd2d1cc1566dc75c_1440w.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1199\" data-rawheight=\"1824\" data-original-token=\"v2-046a4b4c4b0cafb6abfcce65d49d45ba\" class=\"origin_image zh-lightbox-thumb\" width=\"1199\" data-original=\"https://pica.zhimg.com/v2-1b5f900d27925880cd2d1cc1566dc75c_r.jpg\"/></figure><p data-pid=\"2xHYl7Fd\">2、乘客会被均匀地涂抹在列车两壁</p><figure data-size=\"normal\"><img src=\"https://picx.zhimg.com/v2-bb10d143704bdfba435fffaeb65a999d_1440w.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1198\" data-rawheight=\"1770\" data-original-token=\"v2-caeeffdc20fcc39a29e8f1ba53d7ea30\" class=\"origin_image zh-lightbox-thumb\" width=\"1198\" data-original=\"https://picx.zhimg.com/v2-bb10d143704bdfba435fffaeb65a999d_r.jpg\"/></figure><p data-pid=\"XCnTXmg2\">3、他是真的想结婚了</p><figure data-size=\"normal\"><img src=\"https://picx.zhimg.com/v2-99999a34ef97c8196a85457506415ddf_1440w.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1199\" data-rawheight=\"1601\" data-original-token=\"v2-34a97bf1ceaffa37011ba27328f14363\" class=\"origin_image zh-lightbox-thumb\" width=\"1199\" data-original=\"https://picx.zhimg.com/v2-99999a34ef97c8196a85457506415ddf_r.jpg\"/></figure><p data-pid=\"4058ET7o\">4、斑马:都过来看啊，大庭广众之下·····</p><figure data-size=\"normal\"><img src=\"https://picx.zhimg.com/v2-8a705eead9274131cad468694d011c6f_1440w.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1199\" data-rawheight=\"1199\" data-original-token=\"v2-3cc49ea550a698bce84ce8be3e54c365\" class=\"origin_image zh-lightbox-thumb\" width=\"1199\" data-original=\"https://picx.zhimg.com/v2-8a705eead9274131cad468694d011c6f_r.jpg\"/></figure><p data-pid=\"IWHzSg8h\">5、甘蔗</p><figure data-size=\"normal\"><img src=\"https://pic3.zhimg.com/v2-ee61091abbf734e3613fddd5a0b093e6_1440w.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1198\" data-rawheight=\"1171\" data-original-token=\"v2-f8ed47a29b116286d4e64a4ddefc2e9b\" class=\"origin_image zh-lightbox-thumb\" width=\"1198\" data-original=\"https://pic3.zhimg.com/v2-ee61091abbf734e3613fddd5a0b093e6_r.jpg\"/></figure><p data-pid=\"-qqzvbjy\">6、不结婚不生娃，老了怎么办?</p><figure data-size=\"normal\"><img src=\"https://picx.zhimg.com/v2-59008e62f7789e797f2fb85d8ae89e8b_1440w.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1199\" data-rawheight=\"1648\" data-original-token=\"v2-1ed842ba69902244aa05ef28f7450ad4\" class=\"origin_image zh-lightbox-thumb\" width=\"1199\" data-original=\"https://picx.zhimg.com/v2-59008e62f7789e797f2fb85d8ae89e8b_r.jpg\"/></figure><p data-pid=\"SxSDsTwB\">7、前台:这不巧了吗，刚踩了屎..</p><figure data-size=\"normal\"><img src=\"https://pic1.zhimg.com/v2-90bac41637bdde9bc0e6b176ef4b2cf8_1440w.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1198\" data-rawheight=\"1608\" data-original-token=\"v2-717190092d633a155df2c167b99d5fbc\" class=\"origin_image zh-lightbox-thumb\" width=\"1198\" data-original=\"https://pic1.zhimg.com/v2-90bac41637bdde9bc0e6b176ef4b2cf8_r.jpg\"/></figure><p data-pid=\"2hgYGuS7\">8、因为生死簿上没有名。</p><figure data-size=\"normal\"><img src=\"https://pic1.zhimg.com/v2-5f000015365d7557af30b24c2092dc60_1440w.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1199\" data-rawheight=\"1818\" data-original-token=\"v2-3481b82c5c0fee343c0520fdf9027981\" class=\"origin_image zh-lightbox-thumb\" width=\"1199\" data-original=\"https://pic1.zhimg.com/v2-5f000015365d7557af30b24c2092dc60_r.jpg\"/></figure><p data-pid=\"oUaAc51e\">9、来自娘家的底气</p><figure data-size=\"normal\"><img src=\"https://pic4.zhimg.com/v2-0a6fe829a0be7a5368699b6f10b675ff_1440w.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1199\" data-rawheight=\"1689\" data-original-token=\"v2-deb396556847aa6dbd8b53adb8bce99a\" class=\"origin_image zh-lightbox-thumb\" width=\"1199\" data-original=\"https://pic4.zhimg.com/v2-0a6fe829a0be7a5368699b6f10b675ff_r.jpg\"/></figure><p data-pid=\"YwUU5Xkl\">10、吃香的喝辣的</p><figure data-size=\"normal\"><img src=\"https://picx.zhimg.com/v2-7c3c0801ff8036d09dea2c2034b6c683_1440w.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1199\" data-rawheight=\"1664\" data-original-token=\"v2-2cec568245ad3a98ec0a393b20d3d290\" class=\"origin_image zh-lightbox-thumb\" width=\"1199\" data-original=\"https://picx.zhimg.com/v2-7c3c0801ff8036d09dea2c2034b6c683_r.jpg\"/></figure><p data-pid=\"9iW9J0V4\">11、鸡见了你都得捂着屁股</p><figure data-size=\"normal\"><img src=\"https://pica.zhimg.com/v2-3256cbfd0417a58e8565e61e29e928d8_1440w.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1199\" data-rawheight=\"1812\" data-original-token=\"v2-818c0030a1262030392fe31209122883\" class=\"origin_image zh-lightbox-thumb\" width=\"1199\" data-original=\"https://pica.zhimg.com/v2-3256cbfd0417a58e8565e61e29e928d8_r.jpg\"/></figure><p data-pid=\"_Odm7_Pp\">12、差点吃了有文化的亏</p><figure data-size=\"normal\"><img src=\"https://pic1.zhimg.com/v2-e4766c75c24e748c4208f3528e93f44a_1440w.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1198\" data-rawheight=\"1581\" data-original-token=\"v2-57faf66cb8439c321968419bbcaa84a0\" class=\"origin_image zh-lightbox-thumb\" width=\"1198\" data-original=\"https://pic1.zhimg.com/v2-e4766c75c24e748c4208f3528e93f44a_r.jpg\"/></figure><p data-pid=\"zIDjHl1i\">13、毕玉涛:你一定要幸福啊!</p><figure data-size=\"normal\"><img src=\"https://pic4.zhimg.com/v2-ca6493bde7d52a836829c8d766f433bf_1440w.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1199\" data-rawheight=\"1920\" data-original-token=\"v2-1a8f5fcc5a48ed97538a672f670697e0\" class=\"origin_image zh-lightbox-thumb\" width=\"1199\" data-original=\"https://pic4.zhimg.com/v2-ca6493bde7d52a836829c8d766f433bf_r.jpg\"/></figure><p data-pid=\"aAfs4P4c\">14、不胖 微吨而已</p><figure data-size=\"normal\"><img src=\"https://pic2.zhimg.com/v2-f2b1db7fb36ee09c93b3a57e6125545f_1440w.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1199\" data-rawheight=\"1562\" data-original-token=\"v2-ed28e6bd2a04c8e0a5fb0fc9f2cd81e7\" class=\"origin_image zh-lightbox-thumb\" width=\"1199\" data-original=\"https://pic2.zhimg.com/v2-f2b1db7fb36ee09c93b3a57e6125545f_r.jpg\"/></figure><p data-pid=\"vfQGdzrd\">15、再攻击力强一点</p><figure data-size=\"normal\"><img src=\"https://picx.zhimg.com/v2-70c9c0bd88c2a061b838529857b90b09_1440w.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1199\" data-rawheight=\"1904\" data-original-token=\"v2-9b82cf67ac3d654fec0f0eaeb1fb8428\" class=\"origin_image zh-lightbox-thumb\" width=\"1199\" data-original=\"https://picx.zhimg.com/v2-70c9c0bd88c2a061b838529857b90b09_r.jpg\"/></figure><p data-pid=\"XSRcERUs\"><b>快乐打包了，不妨花一秒钟点赞＋关注鼓励一下。❤️❤️❤️</b></p><p data-pid=\"XZTtLB7J\">16、你们其实都理解错了</p><figure data-size=\"normal\"><img src=\"https://pic3.zhimg.com/v2-122b783e5da1218acd8732b0f4ac27aa_1440w.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1199\" data-rawheight=\"1976\" data-original-token=\"v2-a116d37890ee71d1b9bc674a30368857\" class=\"origin_image zh-lightbox-thumb\" width=\"1199\" data-original=\"https://pic3.zhimg.com/v2-122b783e5da1218acd8732b0f4ac27aa_r.jpg\"/></figure><p data-pid=\"n2jbfgE0\">17、躺着也能上吊了</p><figure data-size=\"normal\"><img src=\"https://pic3.zhimg.com/v2-b5d3dc464591dee0d2827794eede4014_1440w.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1198\" data-rawheight=\"1766\" data-original-token=\"v2-acc8714ae63305e4f7d6c21014f350c5\" class=\"origin_image zh-lightbox-thumb\" width=\"1198\" data-original=\"https://pic3.zhimg.com/v2-b5d3dc464591dee0d2827794eede4014_r.jpg\"/></figure><p data-pid=\"yD1kAOu8\">18、我女朋友把锅背下来了</p><figure data-size=\"normal\"><img src=\"https://pic3.zhimg.com/v2-751f06ba6156ef01493a99fb792a085c_1440w.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1198\" data-rawheight=\"1243\" data-original-token=\"v2-1c342f2c5317476d1d3f71b18f40003f\" class=\"origin_image zh-lightbox-thumb\" width=\"1198\" data-original=\"https://pic3.zhimg.com/v2-751f06ba6156ef01493a99fb792a085c_r.jpg\"/></figure><p data-pid=\"0Oms2-ml\">19、为什么我读出了三种结果</p><figure data-size=\"normal\"><img src=\"https://pic3.zhimg.com/v2-d205328e16f5429ed771a4f3cc4b43d4_1440w.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1198\" data-rawheight=\"1538\" data-original-token=\"v2-127e7410e7e0d8b874577cfac5a71838\" class=\"origin_image zh-lightbox-thumb\" width=\"1198\" data-original=\"https://pic3.zhimg.com/v2-d205328e16f5429ed771a4f3cc4b43d4_r.jpg\"/></figure><p data-pid=\"5gRpYxom\">20、就是那个会吐丝会织网的那个鸡猪啊</p><figure data-size=\"normal\"><img src=\"https://picx.zhimg.com/v2-15e740239ba21b06c1f9ee82411f041f_1440w.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1199\" data-rawheight=\"1209\" data-original-token=\"v2-a9e50de46f83f1ccc29ed2e918e3b047\" class=\"origin_image zh-lightbox-thumb\" width=\"1199\" data-original=\"https://picx.zhimg.com/v2-15e740239ba21b06c1f9ee82411f041f_r.jpg\"/></figure><p data-pid=\"nLHnHvrW\">21、啷个办?</p><figure data-size=\"normal\"><img src=\"https://pic3.zhimg.com/v2-530e3597f363b32f956135b6397245fc_1440w.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1199\" data-rawheight=\"1836\" data-original-token=\"v2-52e9aa8088b3694b3a5157e7ccf6f5fb\" class=\"origin_image zh-lightbox-thumb\" width=\"1199\" data-original=\"https://pic3.zhimg.com/v2-530e3597f363b32f956135b6397245fc_r.jpg\"/></figure><p data-pid=\"UdiLtD0L\">22、洗天花板</p><figure data-size=\"normal\"><img src=\"https://picx.zhimg.com/v2-ee5ec48fcf98b531f8e0efc2ba1bdfe9_1440w.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1198\" data-rawheight=\"1151\" data-original-token=\"v2-726c285ee100e998e56c4ab41c1942bd\" class=\"origin_image zh-lightbox-thumb\" width=\"1198\" data-original=\"https://picx.zhimg.com/v2-ee5ec48fcf98b531f8e0efc2ba1bdfe9_r.jpg\"/></figure><p data-pid=\"sDlT8mg1\">23、跑丢了找不到</p><figure data-size=\"normal\"><img src=\"https://pic4.zhimg.com/v2-1a3cc1fb83a47427e2a0416f0c98bff5_1440w.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1199\" data-rawheight=\"1715\" data-original-token=\"v2-0ad91dc559be3f2dc1e897e0ef4221ae\" class=\"origin_image zh-lightbox-thumb\" width=\"1199\" data-original=\"https://pic4.zhimg.com/v2-1a3cc1fb83a47427e2a0416f0c98bff5_r.jpg\"/></figure><p data-pid=\"Yd9bfYV5\">24、就这智力，结婚20年没孩子</p><figure data-size=\"normal\"><img src=\"https://pic4.zhimg.com/v2-d9a0acd9501ddfc9cc36b663bcc697c5_1440w.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1199\" data-rawheight=\"1057\" data-original-token=\"v2-ddedc82c7988501237b6744119b23e8b\" class=\"origin_image zh-lightbox-thumb\" width=\"1199\" data-original=\"https://pic4.zhimg.com/v2-d9a0acd9501ddfc9cc36b663bcc697c5_r.jpg\"/></figure><p data-pid=\"uWJ3kHpf\">25、小东西那么精致吗 还成网红了</p><figure data-size=\"normal\"><img src=\"https://pic1.zhimg.com/v2-917db30b544bc1159bd96bcca562305e_1440w.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1199\" data-rawheight=\"1785\" data-original-token=\"v2-d7bb63279c01e6464ca30341b416ef19\" class=\"origin_image zh-lightbox-thumb\" width=\"1199\" data-original=\"https://pic1.zhimg.com/v2-917db30b544bc1159bd96bcca562305e_r.jpg\"/></figure><p data-pid=\"yBKkQz21\">26、有一个妹妹嫁了</p><figure data-size=\"normal\"><img src=\"https://pic2.zhimg.com/v2-21d431120ce81528755a9784a22b3d4f_1440w.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1199\" data-rawheight=\"1769\" data-original-token=\"v2-538e691d515649f137b4dbd998f6252f\" class=\"origin_image zh-lightbox-thumb\" width=\"1199\" data-original=\"https://pic2.zhimg.com/v2-21d431120ce81528755a9784a22b3d4f_r.jpg\"/></figure><p data-pid=\"bHOwCNgF\">27、我直接整个人钻进去，连洗澡时间一起省了。</p><figure data-size=\"normal\"><img src=\"https://pica.zhimg.com/v2-ffcbd4060894e92ac6d4a64527a0425e_1440w.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1199\" data-rawheight=\"1742\" data-original-token=\"v2-35340d7c31049948f2f48e343d3f0f40\" class=\"origin_image zh-lightbox-thumb\" width=\"1199\" data-original=\"https://pica.zhimg.com/v2-ffcbd4060894e92ac6d4a64527a0425e_r.jpg\"/></figure><p data-pid=\"QUevWyJu\">28、感觉怪怪的</p><figure data-size=\"normal\"><img src=\"https://pic3.zhimg.com/v2-e1871e786bf6b5dfb6d74acfd88a8884_1440w.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1199\" data-rawheight=\"1734\" data-original-token=\"v2-b82a88fad7cff0ac1f0b82d2df37ab18\" class=\"origin_image zh-lightbox-thumb\" width=\"1199\" data-original=\"https://pic3.zhimg.com/v2-e1871e786bf6b5dfb6d74acfd88a8884_r.jpg\"/></figure><p data-pid=\"OqZu1C5o\">29、当断则断，此子大有作为</p><figure data-size=\"normal\"><img src=\"https://pic1.zhimg.com/v2-ab11bac99fe9e27d860b75c4f4b11ef8_1440w.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1198\" data-rawheight=\"1561\" data-original-token=\"v2-12503ba37c794f93e425a2771201581e\" class=\"origin_image zh-lightbox-thumb\" width=\"1198\" data-original=\"https://pic1.zhimg.com/v2-ab11bac99fe9e27d860b75c4f4b11ef8_r.jpg\"/></figure><p data-pid=\"dqcdxW3L\">30、没烧开</p><figure data-size=\"normal\"><img src=\"https://picx.zhimg.com/v2-ded668adb8d140901bcb543362c28aa5_1440w.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1198\" data-rawheight=\"1618\" data-original-token=\"v2-eb90ec78d51b2e4e7aad674dfe57843e\" class=\"origin_image zh-lightbox-thumb\" width=\"1198\" data-original=\"https://picx.zhimg.com/v2-ded668adb8d140901bcb543362c28aa5_r.jpg\"/></figure><hr/><p data-pid=\"wRCbYryo\"><b>我是@安宁，一个喜欢写作和搞笑段子的创作者。以后会在知乎持续分享搞笑段子||生活感悟等等，让我们一起交流成长。</b></p><p data-pid=\"SQWCaLGe\"><b>如果你觉得这篇文章分享的还不错，不妨交个朋友吧，点点关注，近我者富！！！！</b></p><p data-pid=\"cUj_h0Nx\"><b>往期精选，更多搞笑段子点击跳转</b></p><a href=\"https://zhuanlan.zhihu.com/p/1969855376804520999\" data-draft-node=\"block\" data-draft-type=\"link-card\" class=\"internal\">你有哪些让人一看就笑死的图片？</a><p data-pid=\"He9lRtrI\">（图文源于网络，侵删致歉）</p>",
        "is_navigator": false,
        "vote_next_step": "vote",
        "type": "answer",
        "voteup_count": 688,
        "thanks_count": 237,
        "preview_text": "",
        "favorite_count": 69,
        "url": "https://api.zhihu.com/answers/1971116380943287756",
        "updated_time": 1762730766,
        "answer_type": "normal",
        "navigator_vote": false,
        "author": {
          "user_type": "people",
          "url_token": "53-60-32-45-63",
          "name": "安宁",
          "headline": "好物推荐 ‖ 搞笑图片 ‖ 治愈文案",
          "is_org": false,
          "gender": 0,
          "id": "380a46ecac8645b5fc91417f65b526a3",
          "url": "https://api.zhihu.com/people/380a46ecac8645b5fc91417f65b526a3",
          "is_following": false,
          "is_followed": false,
          "avatar_url": "https://picx.zhimg.com/50/v2-2f1413a6806a4bda2d567fbc3b55178e_l.jpg?source=b6762063",
          "followers_count": 283
        },
        "excerpt": "1、理发店如果都这样，生意能不好吗   2、乘客会被均匀地涂抹在列车两壁   3、他是真的想结婚了   4、斑马:都过来看啊，大庭广众之下·····   5、甘蔗   6、不结婚不生娃，老了怎么办?   7、前台:这不巧了吗，刚踩了屎..   8、因为生死簿上没有名。   9、来自娘家的底气   10、吃香的喝辣的   11、鸡见了你都得捂着屁股   12、差点吃了有文化的亏   13、毕玉涛:你一定要幸福啊!   14、不胖 微吨而已   15、再攻击力强一点   快乐打包了，不妨花一秒钟点赞…",
        "visited_count": 176936,
        "thumbnails": [
          "https://picx.zhimg.com/50/v2-046a4b4c4b0cafb6abfcce65d49d45ba_720w.jpg?source=b6762063",
          "https://picx.zhimg.com/50/v2-caeeffdc20fcc39a29e8f1ba53d7ea30_720w.jpg?source=b6762063",
          "https://pic1.zhimg.com/50/v2-34a97bf1ceaffa37011ba27328f14363_720w.jpg?source=b6762063",
          "https://pic1.zhimg.com/50/v2-3cc49ea550a698bce84ce8be3e54c365_720w.jpg?source=b6762063",
          "https://picx.zhimg.com/50/v2-f8ed47a29b116286d4e64a4ddefc2e9b_720w.jpg?source=b6762063",
          "https://picx.zhimg.com/50/v2-1ed842ba69902244aa05ef28f7450ad4_720w.jpg?source=b6762063",
          "https://picx.zhimg.com/50/v2-717190092d633a155df2c167b99d5fbc_720w.jpg?source=b6762063",
          "https://pic1.zhimg.com/50/v2-3481b82c5c0fee343c0520fdf9027981_720w.jpg?source=b6762063",
          "https://picx.zhimg.com/50/v2-deb396556847aa6dbd8b53adb8bce99a_720w.jpg?source=b6762063",
          "https://pic1.zhimg.com/50/v2-2cec568245ad3a98ec0a393b20d3d290_720w.jpg?source=b6762063",
          "https://pic1.zhimg.com/50/v2-818c0030a1262030392fe31209122883_720w.jpg?source=b6762063",
          "https://pica.zhimg.com/50/v2-57faf66cb8439c321968419bbcaa84a0_720w.jpg?source=b6762063",
          "https://picx.zhimg.com/50/v2-1a8f5fcc5a48ed97538a672f670697e0_720w.jpg?source=b6762063",
          "https://pica.zhimg.com/50/v2-ed28e6bd2a04c8e0a5fb0fc9f2cd81e7_720w.jpg?source=b6762063",
          "https://pic1.zhimg.com/50/v2-9b82cf67ac3d654fec0f0eaeb1fb8428_720w.jpg?source=b6762063",
          "https://picx.zhimg.com/50/v2-a116d37890ee71d1b9bc674a30368857_720w.jpg?source=b6762063",
          "https://picx.zhimg.com/50/v2-acc8714ae63305e4f7d6c21014f350c5_720w.jpg?source=b6762063",
          "https://pic1.zhimg.com/50/v2-1c342f2c5317476d1d3f71b18f40003f_720w.jpg?source=b6762063",
          "https://picx.zhimg.com/50/v2-127e7410e7e0d8b874577cfac5a71838_720w.jpg?source=b6762063",
          "https://pic1.zhimg.com/50/v2-a9e50de46f83f1ccc29ed2e918e3b047_720w.jpg?source=b6762063",
          "https://picx.zhimg.com/50/v2-52e9aa8088b3694b3a5157e7ccf6f5fb_720w.jpg?source=b6762063",
          "https://pic1.zhimg.com/50/v2-726c285ee100e998e56c4ab41c1942bd_720w.jpg?source=b6762063",
          "https://pic1.zhimg.com/50/v2-0ad91dc559be3f2dc1e897e0ef4221ae_720w.jpg?source=b6762063",
          "https://picx.zhimg.com/50/v2-ddedc82c7988501237b6744119b23e8b_720w.jpg?source=b6762063",
          "https://picx.zhimg.com/50/v2-d7bb63279c01e6464ca30341b416ef19_720w.jpg?source=b6762063",
          "https://pic1.zhimg.com/50/v2-538e691d515649f137b4dbd998f6252f_720w.jpg?source=b6762063",
          "https://picx.zhimg.com/50/v2-35340d7c31049948f2f48e343d3f0f40_720w.jpg?source=b6762063",
          "https://pic1.zhimg.com/50/v2-b82a88fad7cff0ac1f0b82d2df37ab18_720w.jpg?source=b6762063",
          "https://picx.zhimg.com/50/v2-12503ba37c794f93e425a2771201581e_720w.jpg?source=b6762063",
          "https://pic1.zhimg.com/50/v2-eb90ec78d51b2e4e7aad674dfe57843e_720w.jpg?source=b6762063"
        ],
        "comment_count": 5,
        "preview_type": "default",
        "relationship": {
          "is_thanked": false,
          "is_nothelp": false,
          "voting": 0
        },
        "allow_segment_interaction": true,
        "question": {
          "comment_count": 27,
          "question_type": "normal",
          "url": "https://api.zhihu.com/questions/610826065",
          "author": {
            "name": "匿名用户",
            "headline": "",
            "gender": -1,
            "followers_count": 0,
            "is_followed": false,
            "id": "",
            "url": "",
            "avatar_url": "https://picx.zhimg.com/v2-d41c2ceaed8f51999522f903672a521f_l.jpg?source=b6762063",
            "is_org": false,
            "is_following": false,
            "user_type": "people",
            "url_token": ""
          },
          "created": 1688700496,
          "follower_count": 0,
          "bound_topic_ids": [
            4447,
            16319,
            20223
          ],
          "excerpt": "",
          "relationship": {
            "is_author": false
          },
          "detail": "",
          "answer_count": 0,
          "is_following": false,
          "id": "610826065",
          "type": "question",
          "title": "有没有地狱笑话，来几则？"
        },
        "created_time": 1762730766,
        "thumbnail": "https://picx.zhimg.com/50/v2-046a4b4c4b0cafb6abfcce65d49d45ba_720w.jpg?source=b6762063",
        "excerpt_new": "1、理发店如果都这样，生意能不好吗   2、乘客会被均匀地涂抹在列车两壁   3、他是真的想结婚了   4、斑马:都过来看啊，大庭广众之下·····   5、甘蔗   6、不结婚不生娃，老了怎么办?   7、前台:这不巧了吗，刚踩了屎..   8、因为生死簿上没有名。   9、来自娘家的底气   10、吃香的喝辣的   11、鸡见了你都得捂着屁股   12、差点吃了有文化的亏   13、毕玉涛:你一定要幸福啊!   14、不胖 微吨而已   15、再攻击力强一点   快乐打包了，不妨花一秒钟点赞…",
        "reshipment_settings": "allowed",
        "is_labeled": false,
        "id": "1971116380943287756"
      },
      "brief": "{\"source\": \"TS\", \"type\": \"answer\", \"id\": 1971116380943287756}",
      "attached_info": "CuwRCPXn/uHbnZHUsAEQBBoJNzU1Nzc0OTM5II7GxMgGKLAFMAVAckptChxUU19TT1VSQ0VfSE9UX0NST1NTX1JFQUxUSU1FEkdob3RfcmVjYWxsX3JlYWx0aW1lX3Q6bm9ybWFsOjIwMjYtMDEtMDY6bWFsZTpiaWd5b3VuZ3N0ZXI6b3RoZXI6bW9udGhseRgAIAA6AEpDChdUU19TT1VSQ0VfVEhFTUVfV0FLRV9VUBIidGhlbWU6ZGV0ZWN0OmNvbnRlbnQ6dGhlbWU6aWQ6MzE1MxgAIAA6AFoIOTgwMTk5NThiIGVhZWE1NDA2NmM4MTlhNmE3OWI5ZmNiZTFkOTIyMzM0chMxOTcxMTE2MzgwOTQzMjg3NzU2igEJNjEwODI2MDY1qgEJcmVjb21tZW5kwgEgMzgwYTQ2ZWNhYzg2NDViNWZjOTE0MTdmNjViNTI2YTPyAQoIDBIGTm9ybWFs8gEoCAoSJDc2ZDRkOTc0LTQ1YWEtNDNkMS04NmJjLTBkMjk0M2IwZDc1YvIBBggLEgIyMIICAIgCupHhm7kzkgIgMzgwYTQ2ZWNhYzg2NDViNWZjOTE0MTdmNjViNTI2YTOaAgDKAhRGaXJzdEJydXNoV2VpZ2h0UnVsZcoCFlNob3JJbnRlcmVzdFdlaWdodFJ1bGXKAhRDb250ZW50QWdlV2VpZ2h0UnVsZcoCF1Rlc3RlZEFuZFdvcmtXZWlnaHRSdWxl2gIcVFNfU09VUkNFX0hPVF9DUk9TU19SRUFMVElNRegCAvoCC05PUk1BTF9GTE9XigMgMTg5YTU2Nzc1MjBlNGJjNDhiMmY1YjEyYjQ0MDE0NGGaAw0KAnYyEAAaBW90aGVyqAOo5grYAwDqAx9ob3RDcm9zc1JlYWxUaW1lQ29udGVudFJlY2FsbGVy+gOhCxIMVU5LTk9XTl9NT0RFIAAqDU5PX0lNQUdFX01PREU6LQgCEK8JGKAOIiN2Mi0wNDZhNGI0YzRiMGNhZmI2YWJmY2NlNjVkNDlkNDViYTotCAMQrgkY6g0iI3YyLWNhZWVmZmRjMjBmY2MzOWEyOWU4ZjFiYTUzZDdlYTMwOi0IAhCvCRjBDCIjdjItMzRhOTdiZjFjZWFmZmEzNzAxMWJhMjczMjhmMTQzNjM6LQgCEK8JGK8JIiN2Mi0zY2M0OWVhNTUwYTY5OGJjZTg0Y2U4YmUzZTU0YzM2NTotCAIQrgkYkwkiI3YyLWY4ZWQ0N2EyOWIxMTYyODZkNGU2NGE0ZGRlZmMyZTliOi0IAhCvCRjwDCIjdjItMWVkODQyYmE2OTkwMjI0NGFhMDVlZjI4Zjc0NTBhZDQ6LQgCEK4JGMgMIiN2Mi03MTcxOTAwOTJkNjMzYTE1NWRmMmMxNjdiOTlkNWZiYzotCAIQrwkYmg4iI3YyLTM0ODFiODJjNWMwZmVlMzQzYzA1MjBmZGY5MDI3OTgxOi0IAhCvCRiZDSIjdjItZGViMzk2NTU2ODQ3YWE2ZGJkOGI1M2FkYjhiY2U5OWE6LQgCEK8JGIANIiN2Mi0yY2VjNTY4MjQ1YWQzYTk4ZWMwYTM5M2IyMGQzZDI5MDotCAIQrwkYlA4iI3YyLTgxOGMwMDMwYTEyNjIwMzAzOTJmZTMxMjA5MTIyODgzOi0IAhCuCRitDCIjdjItNTdmYWY2NmNiODQzOWMzMjE5Njg0MTliYmNhYTg0YTA6LQgCEK8JGIAPIiN2Mi0xYThmNWZjYzVhNDhlZDk3NTM4YTY3MmY2NzA2OTdlMDotCAIQrwkYmgwiI3YyLWVkMjhlNmJkMmEwNGM4ZTBhNWZiMGZjOWYyY2Q4MWU3Oi0IAhCvCRjwDiIjdjItOWI4MmNmNjdhYzNkNjU0ZmVjMGYwZWFlYjFmYjg0Mjg6LQgCEK8JGLgPIiN2Mi1hMTE2ZDM3ODkwZWU3MWQxYjliYzY3NGEzMDM2ODg1NzotCAMQrgkY5g0iI3YyLWFjYzg3MTRhZTYzMzA1ZTRmN2Q2YzIxMDE0ZjM1MGM1Oi0IAhCuCRjbCSIjdjItMWMzNDJmMmM1MzE3NDc2ZDFkM2Y3MWIxOGY0MDAwM2Y6LQgCEK4JGIIMIiN2Mi0xMjdlNzQxMGU3ZTBkOGI4NzQ1NzdjZmFjNWE3MTgzODotCAIQrwkYuQkiI3YyLWE5ZTUwZGU0NmY4M2YxY2NjMjllZDJlOTE4ZTNiMDQ3Oi0IAhCvCRisDiIjdjItNTJlOWFhODA4OGIzNjk0YjNhNTE1N2U3Y2NmNmY1ZmI6LQgCEK4JGP8IIiN2Mi03MjZjMjg1ZWUxMDBlOTk4ZTU2YzRhYjQxYzE5NDJiZDotCAIQrwkYsw0iI3YyLTBhZDkxZGM1NTliZTNmMmRjMWU4OTdlMGVmNDIyMWFlOi0IBBCvCRihCCIjdjItZGRlZGM4MmM3OTg4NTAxMjM3YjY3NDQxMTliMjNlOGI6LQgCEK8JGPkNIiN2Mi1kN2JiNjMyNzljMDFlNjQ2NGNhMzAzNDFiNDE2ZWYxOTotCAIQrwkY6Q0iI3YyLTUzOGU2OTFkNTE1NjQ5ZjEzN2I0ZGJkOTk4ZjYyNTJmOi0IAhCvCRjODSIjdjItMzUzNDBkN2MzMTA0OTk0OGYyZjQ4ZTM0M2QzZjBmNDA6LQgCEK8JGMYNIiN2Mi1iODJhODhmYWQ3Y2ZmMGFjMWYwYjgyZDJkZjM3YWIxODotCAMQrgkYmQwiI3YyLTEyNTAzYmEzN2M3OTRmOTNlNDI1YTI3NzEyMDE1ODFlOi0IAxCuCRjSDCIjdjItZWI5MGVjNzhkNTFiMmU0ZTdhYWQ2NzRkZmU1Nzg0M2WABACIBACSBAZOb3JtYWyaBAEyoAQAqAQAsAQAugQCYWnCBAM0MDDIBADSBA/mjqjojZDlt7Lmm7TmlrDYBADwBAD5BAAAAAANw7Q/gQUAAAAAAAAAAIkF5DoBo5WKsj+SBQCaBQNkZnSiBQNkZnSyBQExuQUAAAAAAAAAANAFAOAFAOgFAPAFFJAGAKAGc6gGAZICLgoJNzU1Nzc0OTM5EhMxOTcxMTE2MzgwOTQzMjg3NzU2GAQiCklNQUdFX1RFWFQ=",
      "action_card": false
    },
    {
      "id": "115_1767705692.733",
      "type": "feed",
      "offset": 115,
      "verb": "TOPIC_ACKNOWLEDGED_ARTICLE",
      "created_time": 1767705692,
      "updated_time": 1767705692,
      "target": {
        "id": "1990882283306099502",
        "comment_count": 0,
        "linkbox": {
          "category": "",
          "pic": "",
          "title": "",
          "url": ""
        },
        "excerpt_new": "DDD架构背景盘点模块用的是DDD架构。代码里会看到聚合根(AggregateRoot)、领域服务(DomainService)、仓储(Repository)这些概念。如果你对DDD不熟悉,建议先了解一下基础: 实体(Entity): 有唯一ID的领域对象值对象(ValueObject): 没有ID,通过属性值区分聚合根(AggregateRoot): 聚合的根实体,保证数据一致性领域服务(DomainService): 不归属于某个实体的业务逻辑仓储(Repository): 封装数据访问,面向聚合根操作业务场景连锁店业务里…",
        "content": "<h2>DDD架构背景</h2><p data-pid=\"EM3eZ0sQ\">盘点模块用的是DDD架构。代码里会看到聚合根(AggregateRoot)、领域服务(DomainService)、仓储(Repository)这些概念。如果你对DDD不熟悉,建议先了解一下基础:</p><ul><li data-pid=\"0cQzoRKR\"><b>实体(Entity)</b>: 有唯一ID的领域对象</li><li data-pid=\"RqIxV0UQ\"><b>值对象(ValueObject)</b>: 没有ID,通过属性值区分</li><li data-pid=\"VNV19oRy\"><b>聚合根(AggregateRoot)</b>: 聚合的根实体,保证数据一致性</li><li data-pid=\"7czrxztS\"><b>领域服务(DomainService)</b>: 不归属于某个实体的业务逻辑</li><li data-pid=\"zYDPyo5e\"><b>仓储(Repository)</b>: 封装数据访问,面向聚合根操作</li></ul><hr/><h2>业务场景</h2><p data-pid=\"vA2grR7z\">连锁店业务里,物料盘点是进销存管理的核心。它用来矫正库存,保证系统数据和实物一致。餐饮、零售、仓储物流,只要有门店物料管理,都得做盘点。</p><p data-pid=\"O12FQ8Xf\">门店线下完成盘点后,系统要做两件事:第一,把盘点数据写入计划明细表;第二,同步到库存中心,保证数据一致。</p><hr/><h2>架构设计</h2><p data-pid=\"l1gcO-Uy\">我们用的是事件驱动模式:门店员工线下完成盘点并提交,系统发布一个”盘点作业已提交”的领域事件,放入消息队列,由事件监听器消费。</p><p data-pid=\"Ut__SZxA\">这里有个坑:盘点数据写入和库存同步属于重逻辑,要调领域服务、写数据库、还有外部RPC调用,耗时长。如果事件消费线程直接执行,会出问题:</p><ul><li data-pid=\"nfL0nLmJ\">消费线程被占用几百毫秒,期间无法消费新事件</li><li data-pid=\"YlnKAPkY\">晚上盘点高峰期几百个事件同时涌入,消费线程数量有限,事件积压</li><li data-pid=\"WXv9OupI\">系统吞吐下降,影响门店体验</li></ul><p data-pid=\"E_0Wd357\">解决方案是:<b>领域事件监听器 + CompletableFuture + 自定义线程池</b>。事件监听器接收到事件后,立即通过<code>CompletableFuture.runAsync</code>扔给线程池异步处理,消费线程立刻返回。这样做到了快速消费、异步处理,还能配置开关灰度上线。</p><h3>流程说明</h3><p data-pid=\"0jrZs80p\"><b>完整流程</b>:</p><ol><li data-pid=\"T0H8kWZo\">门店提交盘点作业→发布领域事件<code>WORK_SUBMITTED</code>→事件总线</li><li data-pid=\"6-WKklrO\"><code>CheckWorkSubmittedDomainEventListener</code>接收事件,检查异步开关:  </li></ol><ul><li data-pid=\"5nuhDjBh\">开启→<code>CompletableFuture.runAsync</code>提交线程池异步执行</li><li data-pid=\"q3pZPE_0\">关闭→同步执行<code>doHandle</code></li></ul><p class=\"ztext-empty-paragraph\"><br/></p><ol><li data-pid=\"keaoOABq\"><code>doHandle</code>业务处理:  </li></ol><ul><li data-pid=\"7-3r_www\">查询盘点作业聚合根</li><li data-pid=\"aOUezboC\">调用<code>addPlanItem</code>创建盘点计划项</li><li data-pid=\"1KwDaMat\">创建成功→调用<code>syncInventory</code>同步库存中心→更新作业成功状态</li><li data-pid=\"7NTZdjP6\">创建失败→标记失败状态</li></ul><p class=\"ztext-empty-paragraph\"><br/></p><p data-pid=\"RbCWHJ_p\">整个链路分为两部分:消息消费和业务处理。</p><h3>数据读写路径</h3><p data-pid=\"k7xIJOb1\"><b>读取路径</b>:异步任务执行时,要查这些数据:</p><ul><li data-pid=\"qeB9JWLZ\">从事件体解析 <code>SubmitCheckWorkCommand</code>,拿到作业ID、物料信息、盘点数量</li><li data-pid=\"M4akP4oh\">通过作业ID查询 <code>CheckWorkAggregateRoot</code>,获取完整上下文(门店、计划、物料)</li><li data-pid=\"P-aBVgND\">调领域服务时查盘点计划主表和已有明细,避免重复创建</li><li data-pid=\"yoDDKeUx\">同步库存时查门店与库存中心的仓库映射</li></ul><p data-pid=\"ElRfsYkU\"><b>写入路径</b>:事务执行成功后写这些:</p><ul><li data-pid=\"u31DxfjZ\">在盘点计划明细表插入 <code>CheckPlanItemEntity</code>,记录物料、数量、门店</li><li data-pid=\"6q9xYzyI\">更新盘点作业聚合根状态(“创建成功”或”创建失败”)</li><li data-pid=\"-aNWRNTy\">调库存中心接口同步数据(失败有补偿重试)</li></ul><p data-pid=\"DHUtFTVC\">核心思路:<b>用 <code>CompletableFuture</code> 把消息消费和业务执行分离到不同线程</b>。消费线程快速确认消息,业务线程并行处理多个盘点事件,吞吐能力提升明显。</p><hr/><h2>线程池配置</h2><p data-pid=\"NiBtO7on\">在 <code>CheckWorkSubmittedDomainEventListener</code> 里自定义了专用线程池:</p><div class=\"highlight\"><pre><code class=\"language-text\">private final ThreadPoolExecutor executor = new ThreadPoolExecutor(\n        4,\n        20,\n        60,\n        TimeUnit.SECONDS,\n        new LinkedBlockingQueue&lt;&gt;(5000),\n        new ThreadFactory() {\n            private final AtomicInteger mThreadNum = new AtomicInteger(1);\n\n            @Override\n            public Thread newThread(Runnable r) {\n                return new Thread(r, &#34;WorkSubmittedConsumerThreadPool-&#34; + Func.toStr(mThreadNum.getAndIncrement()));\n            }\n        },\n        new ThreadPoolExecutor.CallerRunsPolicy());</code></pre></div><h3>参数说明</h3><table data-draft-node=\"block\" data-draft-type=\"table\" data-size=\"normal\" data-row-style=\"normal\"><tbody><tr><th>参数</th><th>配置值</th><th>设计原因</th></tr><tr><td>核心线程数</td><td>4</td><td>在正常业务量下保持 4 个常驻线程，足以应对盘点事件的稳定消费速率，避免频繁创建/销毁线程开销</td></tr><tr><td>最大线程数</td><td>20</td><td>在盘点高峰期（早/晚门店集中盘点时段）可以动态扩展到 20 个线程，提升并发处理能力</td></tr><tr><td>空闲存活时间</td><td>60 秒</td><td>超过核心线程数的线程在空闲 60 秒后自动回收，避免资源长期占用</td></tr><tr><td>任务队列</td><td>LinkedBlockingQueue&lt;&gt;(5000)</td><td>有界队列，容量 5000，防止事件积压无限增长导致内存溢出。队列满后触发拒绝策略</td></tr><tr><td>线程工厂</td><td>自定义 ThreadFactory</td><td>为线程设置有业务含义的名称（WorkSubmittedConsumerThreadPool-{序号}），便于线程监控、问题排查和线程 dump 分析</td></tr><tr><td>拒绝策略</td><td>CallerRunsPolicy</td><td>当队列满且线程数达到最大值时，由调用线程（事件消费线程）同步执行任务，保证事件不丢失，同时反向施压减缓事件产生速率</td></tr></tbody></table><h3>为什么用有界队列 + CallerRunsPolicy</h3><p data-pid=\"UMcEkA1i\">生产环境的教训:无界队列+线程池在流量突增时容易<b>队列堆积→内存溢出→服务崩溃</b>。</p><p data-pid=\"d4ksmbol\">有界队列配合 <code>CallerRunsPolicy</code> 的好处:</p><ul><li data-pid=\"88eTukYu\">有界队列限制最大排队数,防止内存无限增长</li><li data-pid=\"xaLl_7P6\"><code>CallerRunsPolicy</code> 队列满时不抛弃任务,让调用方(事件消费线程)同步执行,既保证业务不丢失,又通过降低消费速率实现反向限流</li></ul><p data-pid=\"vm06tstU\">盘点场景很适合这种策略:事件优先级高不允许丢,反向压力还能保护下游服务和数据库。</p><h3>优雅关闭</h3><p data-pid=\"jB_YsfBV\">监听器实现了 <code>DisposableBean</code>,Spring容器销毁时正确关闭线程池:</p><div class=\"highlight\"><pre><code class=\"language-text\">@Override\npublic void destroy() throws Exception {\n    executor.shutdown();\n}</code></pre></div><p data-pid=\"fnB02fnN\"><code>shutdown()</code> 会等已提交任务执行完才关闭,避免服务重启时丢失正在处理的盘点事件。</p><hr/><h2>CompletableFuture 异步消费</h2><h3>事件入口</h3><p data-pid=\"rGY-0hWJ\"><code>onListened</code> 方法根据配置开关决定同步或异步:</p><div class=\"highlight\"><pre><code class=\"language-text\">@Override\npublic void onListened(DomainEvent&lt;String&gt; event) {\n    if (checkConfigProperties.getEnableAsyncConsumeWorkSubmittedSwitch()) {\n        CompletableFuture.runAsync(() -&gt; doHandle(event), executor);\n    } else {\n        doHandle(event);\n    }\n}</code></pre></div><p data-pid=\"sjKXpp9Y\"><b>这个设计关键在于</b>:</p><ul><li data-pid=\"98S-20_a\"><code>enableAsyncConsumeWorkSubmittedSwitch</code> 配置开关支持线上快速切换。异步出问题时立即降级为同步,不影响门店盘点业务</li><li data-pid=\"gX2erq-x\"><code>CompletableFuture.runAsync</code> 提交给线程池后立即返回,消费线程不被阻塞,队列吞吐高</li></ul><h3>业务处理</h3><p data-pid=\"3gIzKOmt\"><code>doHandle</code> 方法封装了完整链路:</p><div class=\"highlight\"><pre><code class=\"language-text\">private void doHandle(DomainEvent&lt;String&gt; event) {\n    Long workId = null;\n    try {\n        String body = event.getData();\n\n        SubmitCheckWorkCommand command = JSON.parseObject(body, SubmitCheckWorkCommand.class);\n        workId = command.getPartId();\n\n        CheckWorkAggregateRoot workAggregateRoot = checkWorkRepository.getById(command.getPartId());\n\n        // 添加盘点计划项\n        CheckPlanItemEntity checkPlanItemEntity = addPlanItem(workAggregateRoot, command);\n        if (Func.notNull(checkPlanItemEntity)) {\n            // 同步盘点作业到库存中心\n            syncInventory(workAggregateRoot, checkPlanItemEntity);\n        }\n    } catch (Exception e) {\n        log.warn(&#34;[CheckWorkSubmittedDomainEventListener] 处理盘点作业已提交事件失败|workId={}&#34;, workId, e);\n    }\n}</code></pre></div><p data-pid=\"e9jIpUGm\">执行流程:从事件体提取 <code>SubmitCheckWorkCommand</code>拿到作业ID,然后查询完整的 <code>CheckWorkAggregateRoot</code> 保证后续领域逻辑有上下文。调用 <code>addPlanItem</code> 写计划明细表,成功后 <code>syncInventory</code> 同步库存。所有异常内部捕获记录 <code>warn</code> 日志,避免线程异常终止。</p><h3>创建计划项</h3><p data-pid=\"lA_HDk97\"><code>addPlanItem</code> 负责转换数据并写入计划明细表:</p><div class=\"highlight\"><pre><code class=\"language-text\">private CheckPlanItemEntity addPlanItem(CheckWorkAggregateRoot workAggregateRoot, SubmitCheckWorkCommand command) {\n    CheckPlanItemCreator planItemCreator = null;\n    try {\n        // 1. 从聚合根中提取物料值对象\n        CheckWorkMaterialValueObject material = workAggregateRoot.getMaterial();\n        \n        // 2. 构建创建器对象，封装计划项创建参数\n        planItemCreator = builderCreator(workAggregateRoot, material, command);\n        \n        // 3. 调用领域服务执行实际写入逻辑\n        CheckPlanItemEntity checkPlanItemEntity = checkPlanDomainService.addPlanItem(planItemCreator);\n        \n        // 4. 更新作业聚合根为“创建成功”状态\n        checkWorkDomainService.addPlanItemSuccess(workAggregateRoot);\n        return checkPlanItemEntity;\n    } catch (Exception e) {\n        log.warn(&#34;[CheckWorkSubmittedDomainEventListener] AddPlanItemFail|planItemCreator={}&#34;, JSON.toJSONString(planItemCreator), e);\n        // 5. 失败时更新作业聚合根为“创建失败”状态\n        checkWorkDomainService.addPlanItemFail(workAggregateRoot);\n        return null;\n    }\n}</code></pre></div><h3>CheckPlanItemCreator 创建器</h3><p data-pid=\"xKLG_XPo\"><code>CheckPlanItemCreator</code> 是DDD的创建器模式,作用是:</p><ul><li data-pid=\"Fyiq7JyO\">把散落在多个对象里的字段(门店ID、计划ID、物料代码、盘点数量)聚合到一个对象</li><li data-pid=\"r7h37-P_\"><code>builderCreator</code> 封装了复杂的字段映射逻辑,避免主流程出现大量赋值代码</li><li data-pid=\"N3eRdKjW\">保证传递给领域服务的参数类型正确、字段完整</li></ul><p data-pid=\"zJokWadY\">举例,<code>CheckPlanItemCreator</code> 可能包含这些字段:</p><div class=\"highlight\"><pre><code class=\"language-text\">@Data\n@Builder\npublic class CheckPlanItemCreator {\n    private Long planId;           // 盘点计划ID\n    private Long shopId;           // 门店ID\n    private String materialCode;   // 物料代码\n    private String materialName;   // 物料名称\n    private BigDecimal checkQty;   // 盘点数量\n    private String unit;           // 单位\n    private Long workId;           // 盘点作业ID\n}</code></pre></div><p data-pid=\"KGwnTDXY\"><b>这里的关键点</b>:</p><ul><li data-pid=\"A87kE4c0\">用 <code>CheckPlanItemCreator</code> 封装创建参数,符合DDD规范</li><li data-pid=\"jyA4hjMJ\">实际数据写入委托给 <code>CheckPlanDomainService</code>,消费层职责清晰</li><li data-pid=\"nqJkF9ew\">创建成功调 <code>addPlanItemSuccess</code>,失败调 <code>addPlanItemFail</code>,保证作业状态与实际结果一致</li><li data-pid=\"NbIWUHr9\">创建失败返回 <code>null</code>,外层判空决定是否继续同步库存</li></ul><h3>同步库存中心</h3><div class=\"highlight\"><pre><code class=\"language-text\">private void syncInventory(CheckWorkAggregateRoot workAggregateRoot, CheckPlanItemEntity checkPlanItemEntity) {\n    checkWorkDomainService.syncInventoryWithCompensation(workAggregateRoot, checkPlanItemEntity);\n}</code></pre></div><p data-pid=\"U4FqIn8n\">这里调领域服务的带补偿逻辑的同步方法,保证数据最终能同步到库存中心。具体的补偿机制(失败重试、延时队列)由领域服务内部实现,消费层只负责触发。</p><hr/><h3>为什么需要 CompletableFuture</h3><p data-pid=\"TTFaMnUB\">盘点作业提交事件属于写事件,有这些特征:</p><ul><li data-pid=\"mPJIS3vx\">不需要同步返回结果,发布方只关心事件发出</li><li data-pid=\"0BNsEGD9\">业务逻辑重,创建盘点项+同步库存涉及多次数据库写入、RPC调用,耗时长</li><li data-pid=\"trDzsLB8\">并发量可能突增,早晚盘点高峰期数百个门店同时提交</li></ul><p data-pid=\"4lmbYLVL\">如果在消费线程里同步执行:</p><ul><li data-pid=\"iKAokLZd\">消费线程被长时间阻塞,队列吞吐下降</li><li data-pid=\"9h4BMHLQ\">多个事件串行消费,无法利用多核CPU</li><li data-pid=\"viFUDn1Z\">可能导致消息积压→内存占用→服务不稳</li></ul><p data-pid=\"UMtdJ4bX\">引入 <code>CompletableFuture</code> 配合自定义线程池后:</p><ul><li data-pid=\"IVh2mvXs\">消费线程只负责接收事件并提交到线程池,立即返回,保持高吞吐</li><li data-pid=\"lnSbOpk2\">多个盘点事件在线程池内并行执行,充分利用CPU和IO资源</li><li data-pid=\"YYIMpLlV\">通过有界队列和拒绝策略控制最大并发度,保护下游系统</li></ul><h3>为什么不用 @Async</h3><p data-pid=\"X5LRXrAf\">Spring 的 <code>@Async</code> 注解也能异步,但有限制:</p><ul><li data-pid=\"aA2xIQKz\">默认用Spring的公共线程池,容易与其他异步任务争抢资源</li><li data-pid=\"cZEMg86p\">需要全局配置 <code>TaskExecutor</code>,不方便为不同业务定制线程池参数</li><li data-pid=\"pcGCkaxP\">线程名称无法自定义,线程 dump 时难以区分不同业务</li><li data-pid=\"TwGTzQvL\">需要额外配置线程池的创建与销毁时机,容易遗漏</li></ul><p data-pid=\"xU09dTd-\">直接用 <code>CompletableFuture</code> + 自定义线程池:</p><ul><li data-pid=\"rlXCae5-\">每个监听器配置独立线程池,隔离不同业务的资源消耗</li><li data-pid=\"hbzcvn-R\">核心线程数、队列大小、拒绝策略都可根据业务特征精确调优</li><li data-pid=\"J3SDaGxK\">自定义 <code>ThreadFactory</code> 设置有意义的线程名称,问题定位方便</li><li data-pid=\"TZnugrgi\">实现 <code>DisposableBean</code> 显式管理线程池关闭,保证优雅下线</li></ul><h3>异常处理与日志</h3><p data-pid=\"_F5U1PyB\">异步任务里异常处理要特别注意:</p><ul><li data-pid=\"Brta0E1j\">异常捕获在 <code>doHandle</code> 内部,如果抛到 <code>CompletableFuture</code> 外部,线程异常终止但调用方无感知,任务丢失且无日志</li><li data-pid=\"8qNBertr\">记录关键业务ID,日志里记录 <code>workId</code>,通过业务ID追踪整个处理链路</li><li data-pid=\"tCPMf_vZ\">异常日志级别用 <code>warn</code> 而非 <code>error</code>,因为盘点事件消费失败属于业务异常(数据不存在、重复提交),不应触发告警</li></ul><p data-pid=\"T_lyyCAy\">如果需要更细粒度的监控,可以在 <code>doHandle</code> 的 <code>finally</code> 块中上报执行耗时、成功/失败次数等指标到监控系统。</p><h3>调优经验</h3><p data-pid=\"hitTxrc4\"><b>线程池参数要根据业务特征调</b>:</p><ul><li data-pid=\"Uyr6Boje\">核心线程数根据稳态消息速率估算。如果平均每秒10个盘点事件,每个事件处理耗时1秒,则需要核心线程数至少10</li><li data-pid=\"oahC0-ly\">最大线程数按高峰流量的1.5~2倍设置,保证峰值时有一定弹性</li><li data-pid=\"ktBT1CLg\">队列大小按”峰值流量下可接受的最大排队时间”计算。如果希望事件在队列中排队不超过10秒,峰值流量100 TPS,则队列大小至少1000</li></ul><p data-pid=\"8xo7pgCh\"><b>拒绝策略根据业务容忍度选</b>:</p><ul><li data-pid=\"M8DYJr8O\"><code>CallerRunsPolicy</code> 适合不允许丢失消息的场景,代价是会降低消费速率</li><li data-pid=\"Pk8Cz9Tk\"><code>AbortPolicy</code> 适合允许丢弃部分消息的场景,需要配合告警机制监控拒绝次数</li><li data-pid=\"40cZTl6q\">自定义策略可以将被拒绝的任务写入死信队列或持久化到数据库,后续人工处理</li></ul><p data-pid=\"N9X_Nncs\">盘点场景下,用 <code>CallerRunsPolicy</code> 是合理选择,因为盘点数据不允许丢失,且盘点事件的产生速率相对可控。</p><hr/><h2>总结</h2><p data-pid=\"LKfbMn1R\">通过 <code>CompletableFuture</code> + 自定义线程池的架构设计,实现了:</p><ul><li data-pid=\"s4LpA1rR\">高吞吐:事件消费线程不阻塞,多个盘点事件在线程池内并行执行</li><li data-pid=\"4SZBUfbj\">可控并发:有界队列和拒绝策略限制最大并发度,保护下游系统</li><li data-pid=\"g_ZcCp3-\">业务隔离:专用线程池避免与其他异步任务争抢资源</li><li data-pid=\"K8h6j6_m\">可观测:自定义线程名称、完整日志、监控指标便于问题排查</li><li data-pid=\"-tI4G8PU\">灰度降级:配置开关支持同步/异步切换,保证业务连续性</li></ul><p data-pid=\"DcFWeCdA\">这套异步消费模式具备通用性,可以应用于其他事件驱动场景,形成生产级的异步处理模板。</p>",
        "navigator_vote": false,
        "created": 1767456240,
        "updated": 1767458448,
        "preview_text": "",
        "is_labeled": false,
        "thumbnails": [
          "https://pic1.zhimg.com/v2-d5314c59931b1f942e568185e62fde83.jpg?source=7e7ef6e2&needBackground=1",
          "https://pica.zhimg.com/50/v2-d5314c59931b1f942e568185e62fde83_720w.jpg?source=b6762063"
        ],
        "is_navigator": false,
        "vote_next_step": "vote",
        "excerpt": "DDD架构背景盘点模块用的是DDD架构。代码里会看到聚合根(AggregateRoot)、领域服务(DomainService)、仓储(Repository)这些概念。如果你对DDD不熟悉,建议先了解一下基础: 实体(Entity): 有唯一ID的领域对象值对象(ValueObject): 没有ID,通过属性值区分聚合根(AggregateRoot): 聚合的根实体,保证数据一致性领域服务(DomainService): 不归属于某个实体的业务逻辑仓储(Repository): 封装数据访问,面向聚合根操作业务场景连锁店业务里…",
        "preview_type": "default",
        "favorite_count": 11,
        "type": "article",
        "title": "Java 17 CompletableFuture 生产环境实战:盘点事件异步消费架构",
        "visited_count": 171,
        "author": {
          "gender": 1,
          "followers_count": 1345,
          "is_following": false,
          "is_followed": false,
          "id": "1a26e3cba17f6566525300ad6af80a13",
          "url": "https://api.zhihu.com/people/1a26e3cba17f6566525300ad6af80a13",
          "user_type": "people",
          "url_token": "samge-ge-43",
          "name": "SamDeepThinking",
          "headline": "一个还在一线大量撸代码的技术管理者",
          "avatar_url": "https://picx.zhimg.com/50/v2-d4037a975c6be26e723acb795fafc273_l.jpg?source=b6762063",
          "is_org": false
        },
        "image_url": "https://pic1.zhimg.com/v2-d5314c59931b1f942e568185e62fde83.jpg?source=7e7ef6e2&needBackground=1",
        "allow_segment_interaction": true,
        "voteup_count": 3,
        "url": "https://api.zhihu.com/articles/1990882283306099502",
        "comment_permission": "all",
        "voting": 0,
        "article_type": "normal"
      },
      "brief": "{\"source\": \"TS\", \"type\": \"article\", \"id\": 1990882283306099502}",
      "attached_info": "CscGCPXn/uHbnZHUsAEQBxoJMjY4NTE1Mzk1IPD75MoGKAMwAEBzSkkKH1RTX1NPVVJDRV9aUkVDQUxMX0lURU1DRl9VUFZPVEUSIGRvY190eXBlOiBBcnRpY2xlCmlkOiAyNjczOTM3NzYKGAAgADoAYiBlYWVhNTQwNjZjODE5YTZhNzliOWZjYmUxZDkyMjMzNHITMTk5MDg4MjI4MzMwNjA5OTUwMoIBX2h0dHBzOi8vcGljMS56aGltZy5jb20vdjItZDUzMTRjNTk5MzFiMWY5NDJlNTY4MTg1ZTYyZmRlODMuanBnP3NvdXJjZT03ZTdlZjZlMiZuZWVkQmFja2dyb3VuZD0xqgEJcmVjb21tZW5kwgEgMWEyNmUzY2JhMTdmNjU2NjUyNTMwMGFkNmFmODBhMTPyAQoIDBIGTm9ybWFs8gEoCAoSJDBhNmJiOTNmLTc1MmQtNDU5ZS1hNzYzLWQzOThhOTgxYjYxNvIBBggLEgIyMIICAIgCu5Hhm7kzkgIgMWEyNmUzY2JhMTdmNjU2NjUyNTMwMGFkNmFmODBhMTOaAgDKAhRGaXJzdEJydXNoV2VpZ2h0UnVsZcoCFlNob3JJbnRlcmVzdFdlaWdodFJ1bGXaAh9UU19TT1VSQ0VfWlJFQ0FMTF9JVEVNQ0ZfVVBWT1RF6AIE+gILTk9STUFMX0ZMT1eKAyAxODlhNTY3NzUyMGU0YmM0OGIyZjViMTJiNDQwMTQ0YZoDDQoCdjIQABoFb3RoZXKoA6sB2AMA6gMbdGV4dEFsbFNpdGVIcUFjdGlvbkl0ZW1DRlYy+gNOEgxVTktOT1dOX01PREUgACoNTk9fSU1BR0VfTU9ERTotCAIQgAoYgAoiI3YyLWQ1MzE0YzU5OTMxYjFmOTQyZTU2ODE4NWU2MmZkZTgzgAQAiAQAkgQGTm9ybWFsmgQBNKAEAKgEALAEALoEAmFpwgQDNDAwyAQA0gQP5o6o6I2Q5bey5pu05paw2AQA8AQA+QQAAAAAjktiP4EFAAAAAAAAAACJBeQ6AaOVirI/kgUAmgUDZGZ0ogUDZGZ0sgUBMbkFAAAAAAAAAADQBQDgBQDoBQDwBRSQBgCgBnSoBgOSAi4KCTI2ODUxNTM5NRITMTk5MDg4MjI4MzMwNjA5OTUwMhgHIgpJTUFHRV9URVhU",
      "action_card": false
    },
    {
      "id": "116_1767705692.600",
      "type": "feed",
      "offset": 116,
      "verb": "TOPIC_ACKNOWLEDGED_ARTICLE",
      "created_time": 1767705692,
      "updated_time": 1767705692,
      "target": {
        "comment_permission": "all",
        "updated": 1735778236,
        "preview_text": "",
        "is_labeled": false,
        "visited_count": 14742,
        "thumbnails": [
          "https://picx.zhimg.com/50/v2-5683c41ac3e712c8b93197c3e4cfc932_720w.jpg?source=b6762063"
        ],
        "id": "15895222131",
        "author": {
          "id": "3b792dd234497faa138590f0ef6a9a75",
          "user_type": "people",
          "url_token": "abigsailor",
          "headline": "出海小产品开发者，践行地理套利的生活。公众号同名",
          "avatar_url": "https://picx.zhimg.com/50/v2-e43f6b310eb095e6a836080404629a56_l.jpg?source=b6762063",
          "is_org": false,
          "followers_count": 689,
          "url": "https://api.zhihu.com/people/3b792dd234497faa138590f0ef6a9a75",
          "name": "leviyuan",
          "gender": 1,
          "is_following": false,
          "is_followed": false
        },
        "title": "2024，被裁后独立开发者的第一年，低谷与收获",
        "content": "<p data-pid=\"D-Xo7Le2\">hi, 我是levi, 2024从普通产品经理被迫转型成开发者，历经波折，有低谷有收获，也算是初步完成了转型。</p><p class=\"ztext-empty-paragraph\"><br/></p><p data-pid=\"538XLa-y\"> 心态上的低谷</p><p data-pid=\"DLA6W_gM\">被裁员时，最开始家里只给了半年时间，赚不到钱就去工作，内心压力还是很大，前后做了几个产品都效果不大，然后痛定思痛，开始总结问题，接受自己的缺点，从头学习niche产品思路，学习编程，学习SEO，学习推广，学习销售。</p><p class=\"ztext-empty-paragraph\"><br/></p><p data-pid=\"wXkrqcKO\"> 开始输出内容</p><p data-pid=\"-st7H54A\">年初，我把自己学习的内容写在notion上，边学边分享，疯狂输出。佛教说：当开始给予时，就会收获回报。</p><p data-pid=\"V4yvg9qi\">我的《独立开发者出海手册》收获一批初始关注粉丝， 同时我的思路也开始清晰，产品开始有收入，输出的内容也有变现。</p><figure data-size=\"normal\"><img src=\"https://pic1.zhimg.com/v2-ab6a032726af9aec41c64a58b9129964_1440w.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"868\" data-rawheight=\"525\" data-original-token=\"v2-33a950e3a2c66b0c2eed7584a8b0b1d4\" class=\"origin_image zh-lightbox-thumb\" width=\"868\" data-original=\"https://pic1.zhimg.com/v2-ab6a032726af9aec41c64a58b9129964_r.jpg\"/></figure><p data-pid=\"X2SwB3Sl\"> 出现转机</p><p data-pid=\"fISgJ1Ma\">我在X上分享，分享经历，分享编程，分享产品和技术，分享旅居的感悟，年中的时候，在推特上结识了一些大佬。</p><p data-pid=\"uQ1lKf6O\">在他们帮助下，其中一个AI工具拿到product hunt日榜第二，找到了增长规律，又陆续上线两个产品，有些小成效。</p><p class=\"ztext-empty-paragraph\"><br/></p><p data-pid=\"XgUABVSF\"> 打通海外支付</p><p data-pid=\"KDKL2pq8\">曾经一段时间被海外支付搞得焦头烂额，于是花了一个月研究美国公司和海外银行，海外资金怎么最低成本的流转，申请了wise, n26，relay,  香港等各种银行卡，终于让美金收款和全球消费比较顺滑。</p><p data-pid=\"AWImBm4z\">也让我解锁了一个独立开发者赚美金，自由定居低成本国家和消费的商业蓝图，于是更加坚定这条路，做了未来十年布局海外的计划，并且研究各个国家低成本生活和长期签证。</p><p class=\"ztext-empty-paragraph\"><br/></p><p data-pid=\"6D7BP_Fb\"> 媒体增长</p><p data-pid=\"VIC80I4e\">2024年主要分享两个媒体</p><p data-pid=\"DSAVyMSv\">X: 0-&gt;13K</p><p data-pid=\"PDaDa7B_\">即刻：0-&gt;1400</p><p data-pid=\"TB-_9jul\">希望我2025能输出更多有价值的内容，增长数字对我来说其实并不重要。X有段时间增长太快，反而让我停了一段时间更新。</p><p class=\"ztext-empty-paragraph\"><br/></p><p data-pid=\"ih8uOYOO\"> ️海外旅居</p><p data-pid=\"L3zR6duB\">2024 有大半时间在国内旅居，包括四川各县城，重庆，云南，贵州，海南。</p><p data-pid=\"CrOYWotn\">最难忘的是我在海南某个乡村古寺庙禅修一个月，平静的思考过去、未来和经历的一切。</p><p data-pid=\"GiWE65qp\">也去了吉隆坡，东马，泰国清迈，年底第二次去了埃及，在红海赫尔格达休息了大半个月。</p><p class=\"ztext-empty-paragraph\"><br/></p><p data-pid=\"Ah-mnkZV\"> 意外惊喜</p><p data-pid=\"vPnWLlUk\">做了一段时间AI工具感觉有点累，所以在埃及旅游期间，由于网络不好，简单上线了一个adsense静态站，每月有300多美金广告收益，感觉是个不错的被动收入，开始有人找我付费学习。</p><p data-pid=\"Sy3CSvhm\">于是开始写了第一个正式的付费内容：adsense教程和社群: ggads.site，收获了一帮志同道合全球各地的华人朋友的支持，拥有了自己的第一个出海小社群。</p><p class=\"ztext-empty-paragraph\"><br/></p><p data-pid=\"raJiFhfx\"> 2025年展望和计划</p><p data-pid=\"bTtHP1C1\">今年，我的主要经历还是放在产品上，虽然2024开发了很多产品，但2025，作为一名前产品经理，希望我能专心做好一款产品。</p><p data-pid=\"jnIakSnv\">在做产品之余，将知识和经历沉淀下来，作为内容保持输出。</p><p data-pid=\"c9cCmDl3\">其次是融入海外社区，努力通过AI学习好英语，毕竟出海面向都是海外客户。</p><p data-pid=\"XfdTOTfe\">然后是3月左右到清迈再住一段时间，再考虑去其它国家。之前也申请了几个东南亚的水硕，如果有机会，我很期待能再次重回校园。</p><hr/><p class=\"ztext-empty-paragraph\"><br/></p><p data-pid=\"r_H4_0AP\">这就是一名普通35岁中年失业互联网人的一年，因为AI，普通人的商业秩序发生了变化，因为独立开发，收获了新机会和新体验，但是没有取得太大的成绩，自由生活之路仍然长路漫漫，有很多艰辛需要克服。</p><p class=\"ztext-empty-paragraph\"><br/></p><p data-pid=\"X5mx33u8\">2025会更好吗？</p><p data-pid=\"_dSjbXPL\">who cares, 人生就是体验，体验失败与成功，体验痛苦与快乐，只管埋头去做，不问结果几何。</p><figure data-size=\"normal\"><img src=\"https://pica.zhimg.com/v2-594cfb6a76e977a298a4e95926f4af8c_1440w.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1080\" data-rawheight=\"1620\" data-original-token=\"v2-ec1ec2b602621b144097951cbb19fbc3\" class=\"origin_image zh-lightbox-thumb\" width=\"1080\" data-original=\"https://pica.zhimg.com/v2-594cfb6a76e977a298a4e95926f4af8c_r.jpg\"/></figure><p></p>",
        "article_type": "normal",
        "vote_next_step": "vote",
        "navigator_vote": false,
        "type": "article",
        "url": "https://api.zhihu.com/articles/15895222131",
        "created": 1735778236,
        "voting": 0,
        "comment_count": 30,
        "linkbox": {
          "url": "",
          "category": "",
          "pic": "",
          "title": ""
        },
        "excerpt": "hi, 我是levi, 2024从普通产品经理被迫转型成开发者，历经波折，有低谷有收获，也算是初步完成了转型。 心态上的低谷 被裁员时，最开始家里只给了半年时间，赚不到钱就去工作，内心压力还是很大，前后做了几个产品都效果不大，然后痛定思痛，开始总结问题，接受自己的缺点，从头学习niche产品思路，学习编程，学习SEO，学习推广，学习销售。 开始输出内容 年初，我把自己学习的内容写在notion上，边学边分享，疯狂输出。佛教说：…",
        "voteup_count": 234,
        "excerpt_new": "hi, 我是levi, 2024从普通产品经理被迫转型成开发者，历经波折，有低谷有收获，也算是初步完成了转型。 心态上的低谷 被裁员时，最开始家里只给了半年时间，赚不到钱就去工作，内心压力还是很大，前后做了几个产品都效果不大，然后痛定思痛，开始总结问题，接受自己的缺点，从头学习niche产品思路，学习编程，学习SEO，学习推广，学习销售。 开始输出内容 年初，我把自己学习的内容写在notion上，边学边分享，疯狂输出。佛教说：…",
        "preview_type": "default",
        "favorite_count": 474,
        "is_navigator": false,
        "allow_segment_interaction": true
      },
      "brief": "{\"source\": \"TS\", \"type\": \"article\", \"id\": 15895222131}",
      "attached_info": "CooGCPXn/uHbnZHUsAEQBxoJMjUyMjAxNjYxILy/17sGKOoBMB5AdEowCgZJdGVtQ0YSIGRvY190eXBlOiBBcnRpY2xlCmlkOiAyNjcyNTI1MzUKGAAgADoAYiBlYWVhNTQwNjZjODE5YTZhNzliOWZjYmUxZDkyMjMzNHILMTU4OTUyMjIxMzGqAQlyZWNvbW1lbmTCASAzYjc5MmRkMjM0NDk3ZmFhMTM4NTkwZjBlZjZhOWE3NfIBCggMEgZOb3JtYWzyASgIChIkZTY5MTlhYjctNThjOC00YzI2LWI1ZTktYjE2NTQxM2IxMGVj8gEGCAsSAjIwggIAiAK7keGbuTOSAiAzYjc5MmRkMjM0NDk3ZmFhMTM4NTkwZjBlZjZhOWE3NZoCAMoCFEZpcnN0QnJ1c2hXZWlnaHRSdWxlygIWU2hvckludGVyZXN0V2VpZ2h0UnVsZcoCFENvbnRlbnRBZ2VXZWlnaHRSdWxlygIXVGVzdGVkQW5kV29ya1dlaWdodFJ1bGXaAgZJdGVtQ0boAgL6AgtOT1JNQUxfRkxPV4oDIDE4OWE1Njc3NTIwZTRiYzQ4YjJmNWIxMmI0NDAxNDRhmgMNCgJ2MhAAGgVvdGhlcqgDlnPYAwDqAxV0ZXh0QWxsU2l0ZU12SXRlbUNGVjL6A30SDFVOS05PV05fTU9ERSAAKg1OT19JTUFHRV9NT0RFOi0IAhDkBhiNBCIjdjItMzNhOTUwZTNhMmM2NmIwYzJlZWQ3NTg0YThiMGIxZDQ6LQgEELgIGNQMIiN2Mi1lYzFlYzJiNjAyNjIxYjE0NDA5Nzk1MWNiYjE5ZmJjM4AEAIgEAJIEBk5vcm1hbJoEATKgBACoBACwBAC6BAZtYW51YWzCBAMxNzDIBADSBA/mjqjojZDlt7Lmm7TmlrDYBADwBAD5BAAAAABRbIw/gQUAAAAAAAAAAIkF5DoBo5WKsj+SBQCaBQNkZnSiBQNkZnSyBQExuQUAAAAAAAAAANAFAOAFAOgFAPAFFJAGAKAGdagGAJICJgoJMjUyMjAxNjYxEgsxNTg5NTIyMjEzMRgHIgpJTUFHRV9URVhU",
      "action_card": false
    },
    {
      "id": "117_1767705692.876",
      "type": "feed",
      "offset": 117,
      "verb": "TOPIC_ACKNOWLEDGED_ANSWER",
      "created_time": 1767705692,
      "updated_time": 1767705692,
      "target": {
        "segment_infos": [
          {
            "pid": "uari90IB",
            "text": "1＋4＋2＋8＋5＋7＝27=2＋7＝9",
            "marks": [
              {
                "start_index": 0,
                "end_index": 20,
                "seg_info": {
                  "seg_ids": [
                    "1990013578481272733"
                  ],
                  "is_like": false,
                  "like_count": 0,
                  "comment_count": 1,
                  "my_comment_count": 0,
                  "is_span": false
                }
              }
            ]
          }
        ],
        "thanks_count": 63,
        "vote_next_step": "vote",
        "created_time": 1767091755,
        "excerpt_new": "142857，又名走马灯数。 它发现于埃及金字塔内，这是一组神奇的 数字 ，它能证明一星期有7天，它每自我累加一次，就会由它的6个数字依顺序轮值一次......看似平凡的数字，为什么说它神奇呢？   我们先把它从1乘到6看一看，找找规律所在 142857 × 1 = 142857 142857 × 2 = 285714 142857 × 3 = 428571 142857 × 4 = 571428 142857 × 5 = 714285 142857 × 6 = 857142   规律：乘以1-6得出的结果，（142857）只是单个数字（1，4，…",
        "comment_count": 103,
        "preview_text": "",
        "is_navigator": false,
        "type": "answer",
        "content": "<p data-pid=\"cz8EQpek\">142857，又名走马灯数。 它发现于埃及金字塔内，这是一组神奇的 数字 ，它能证明一星期有7天，它每自我累加一次，就会由它的6个数字依顺序轮值一次......看似平凡的数字，为什么说它神奇呢？</p><figure data-size=\"normal\"><img src=\"https://pic4.zhimg.com/v2-b823cb3baa2db5d83760f0f7e07227df_1440w.jpg\" data-rawwidth=\"1080\" data-rawheight=\"610\" data-size=\"normal\" data-original-token=\"v2-cf5ccc565bc12898bb2bcf6f5dad9b72\" class=\"origin_image zh-lightbox-thumb\" width=\"1080\" data-original=\"https://pic4.zhimg.com/v2-b823cb3baa2db5d83760f0f7e07227df_r.jpg\"/></figure><p data-pid=\"b8_YBrS7\">我们先把它从1乘到6看一看，找找规律所在</p><p data-pid=\"QCmWlnq0\">142857 × 1 = 142857</p><p data-pid=\"fE8ZSZrY\">142857 × 2 = 285714</p><p data-pid=\"rfP0yl8_\">142857 × 3 = 428571</p><p data-pid=\"KKHgmSVr\">142857 × 4 = 571428</p><p data-pid=\"wxMuQaTm\">142857 × 5 = 714285</p><p data-pid=\"dk8osi1q\">142857 × 6 = 857142</p><figure data-size=\"normal\"><img src=\"https://pic4.zhimg.com/v2-805cd53f1a042936db373b8c5779fa29_1440w.jpg\" data-rawwidth=\"1024\" data-rawheight=\"577\" data-size=\"normal\" data-original-token=\"v2-6f3b144a2e91bd1a563111725e545edd\" class=\"origin_image zh-lightbox-thumb\" width=\"1024\" data-original=\"https://pic4.zhimg.com/v2-805cd53f1a042936db373b8c5779fa29_r.jpg\"/></figure><p data-pid=\"jcV5hWiJ\">规律：乘以1-6得出的结果，（142857）只是单个数字（1，4，2，8，5，7）随意调换了位置，反复的出现。而且横看竖看都有（142857），神奇吧。</p><p data-pid=\"PyiVBtbS\">我们再把它继续乘下去看看</p><p data-pid=\"VGH7bscg\">142857 X 7 = 999999</p><p data-pid=\"Mox_ewO9\">规律：关键数字”9“，乘以7的结果（999999）拆分以单数形式相加看结果</p><p data-pid=\"zBcqYLDq\">9+9+9+9+9+9=54=5+4=9</p><p data-pid=\"04T9KnPm\">然后我们按金字塔形式拆分（142857）再以单数形式相加看看结果</p><p data-pid=\"uari90IB\">1＋4＋2＋8＋5＋7＝27=2＋7＝9</p><p data-pid=\"dHZpwqOw\">或者我们以14285+7等形式任意的组合（相邻数字随意组合） 结果以单数形式相加得数都是9</p><p data-pid=\"wgvI9BpE\">14285+7=14292=1+4+2+9+2=18=1+8=9</p><p data-pid=\"uqXTgIel\">1428+57=1485=1+4+8+5=18=1+8=9</p><p data-pid=\"ktdmiZRV\">142+857=999=9+9+9=27=2+7=9　</p><p data-pid=\"Z8Le3WMm\">14+28+57=99=9+9=18=1+8=9</p><p data-pid=\"lhqhyrq-\">14+2+85+7=108=1+0+8=9</p><p data-pid=\"ktzbSclj\">1+42+8+57=108=1+0+8=9</p><p data-pid=\"He4a7yDh\">以上各数的单数和结果都是“9”。这其中必定隐藏着一个大秘密。</p><p data-pid=\"u8o03pGT\">那么把它继续乘下去会发生什么呢？</p><p data-pid=\"nf-yNcB3\">142857×8 ＝ 1142856（得数数列内少了7，7分身为数列第一位数1和尾数6）</p><p data-pid=\"nwrKgrqR\">142857×9 ＝ 1285713（得数数列内少了4，4分身为数列第一位数1和尾数3）</p><p data-pid=\"k7wSXa9f\">142857×10＝1428570（得数数列内少了1，1分身为数列第一位数1和尾数0）</p><p data-pid=\"yB_Xa33-\">142857×11＝1571427（得数数列内少了8，8分身为数列第一位数1和尾数7）</p><p data-pid=\"G-7otWGU\">142857×12＝1714284（得数数列内少了5，5分身为数列第一位数1和尾数4）</p><p data-pid=\"J_k7MqSX\">142857×13＝1857141（得数数列内少了2，2分身为数列第一位数1和尾数1）</p><p data-pid=\"Tk92Q64l\">规律：所有得数数列内缺少的数字皆分身为头尾两个单数合。从乘以8~13所缺少的数字又是（741852），我们继续乘下去。</p><p data-pid=\"F2kK8rxD\">142857×14＝1999998（9也需要分身变大，9分身为数列第一位数1和尾数8）</p><p data-pid=\"CCygw8dy\">规律：和乘以7一样，很显然，又是关键数字”9“，按单数拆分相加，最后的结果还是9</p><p data-pid=\"AlsmD0pm\">1+9+9+9+9+8=45=4+5=9</p><p data-pid=\"_iV5g9Ym\">从乘以1~6到乘以7得出9的倍数是一个循环，再从乘以8~13至乘以14得出9的倍数又是一个循环（每计算7次后得出一个结果，是9的倍数，然后再循环）</p><p data-pid=\"w0P9WHsS\">那么如果再继续乘下去呢...</p><p data-pid=\"KcyPpWWw\">142857 × 15 = 2142885</p><p data-pid=\"gZziG-oA\">142857 × 16 = 2285712</p><p data-pid=\"F1JwtK1s\">142857 × 17 = 2428569</p><p data-pid=\"wHINfp6Y\">142857 × 18 = 2571426</p><p data-pid=\"lEN8W1tM\">142857 × 19 = 2714283</p><p data-pid=\"95PcmYrV\">142857 × 20 = 2851740</p><p data-pid=\"LEfOKu2z\">142857 × 21 = 2999997</p><p data-pid=\"dc5829eG\">看似结果好像失去了这组数字（142857）特有的规律，但别着急，我们再用另一种方法试试看，看能否再次找回它特有的规律！</p><p data-pid=\"qz3TKe9s\">我们从乘以8开始找找规律；（相乘后得出的结果第一位数+上后面的位数）</p><figure data-size=\"normal\"><img src=\"https://pica.zhimg.com/v2-d5dcaacc1872e7ccca2c2b6555e993e2_1440w.jpg\" data-rawwidth=\"1024\" data-rawheight=\"578\" data-size=\"normal\" data-original-token=\"v2-682887e1aca6e07faa55b6c5c564bfca\" class=\"origin_image zh-lightbox-thumb\" width=\"1024\" data-original=\"https://pica.zhimg.com/v2-d5dcaacc1872e7ccca2c2b6555e993e2_r.jpg\"/></figure><p data-pid=\"D9bMHTs2\">142857 × 8 = 1142856 = 1+142856 = 142857</p><p data-pid=\"yR47H4do\">142857 × 9 = 1285713 = 1+285713 = 285714</p><p data-pid=\"V3icgtzU\">142857 × 10= 1428570 = 1+428570 = 428571</p><p data-pid=\"jtoMSF4G\">142857 × 11= 1571427 = 1+571427 = 571428</p><p data-pid=\"HtweqDiB\">142857 × 12= 1714284 = 1+714284 = 714285</p><p data-pid=\"Ri4dME6e\">142857 × 13= 1857141 = 1+857141 = 857142</p><p data-pid=\"OgPx50Ja\">142857 × 14= 1999998 = 1+999998 = 999999（计算7次后得出9的倍数，然后再循环）</p><p data-pid=\"cG7tW9u5\">142857 × 15= 2142855 = 2+142855 = 142857</p><p data-pid=\"e0hKw3VA\">142857 × 16= 2285712 = 2+285712 = 285714</p><p data-pid=\"eeYgfr16\">142857 × 17= 2428569 = 2+428569 = 428571</p><p data-pid=\"V3qPRuoF\">142857 × 18= 2571426 = 2+571426 = 571428</p><p data-pid=\"Xo3hQIMe\">142857 × 19= 2714283 = 2+714283 = 714285</p><p data-pid=\"WIrD0bnq\">142857 × 20= 2851740 = 2+851740 = 851742</p><p data-pid=\"yAYN_RpB\">142857 × 21= 2999997 = 2+999997 = 999999（计算7次后又得出9的倍数，然后再循环）</p><p data-pid=\"pf5kcxF1\">142857 × 22=？？？（有兴趣的可以继续乘下去看看）</p><p data-pid=\"ZTgfjmEK\">..............</p><p data-pid=\"uiOMbGUQ\">规律：和乘以1-6得出的结果一样，（142857）只是调换了位置，反复地出现。</p><p data-pid=\"mHUmGa3-\">最后，我们用142857乘以142857看看结果</p><p data-pid=\"2oX4epWa\">142857 × 142857 = 20408122449</p><p data-pid=\"9FEeGf7p\">看似结果和原数字没什么关系，但是我们把20408122449的前五位数+上后六位数又会得出什么结果呢？</p><figure data-size=\"normal\"><img src=\"https://pica.zhimg.com/v2-29fc52803371915502a7f00ae057b544_1440w.jpg\" data-rawwidth=\"1080\" data-rawheight=\"608\" data-size=\"normal\" data-original-token=\"v2-f62e9232545608c6c9584f08edc7a026\" class=\"origin_image zh-lightbox-thumb\" width=\"1080\" data-original=\"https://pica.zhimg.com/v2-29fc52803371915502a7f00ae057b544_r.jpg\"/></figure><p data-pid=\"z7TskMyp\">你没看错，结果还是这组神奇的数字（142857）</p><p data-pid=\"6zjtTjaD\">我们再来看看除法：</p><p data-pid=\"0ZtmV8Zn\">142857 ÷7= 20408.142857142857142857142857....</p><p data-pid=\"wyXMVew6\">428571 ÷7= 61224.428571428571428571428571428571..</p><p data-pid=\"qRo3_FcI\">285714 ÷7= 40816.285714285714285714285714285714..</p><p data-pid=\"Rx6WgjbC\">857142 ÷7=122448.857142857142857142...</p><p data-pid=\"_I0ya8Ka\">571428 ÷7= 81632.571428571428571428571428....</p><p data-pid=\"G3iGfSCk\">714285 ÷7=102040.714285714285714285714285...</p><p data-pid=\"gfDO9vWg\">1÷7=0.142857142857...</p><p data-pid=\"wxxd3n-K\">2÷7=0.2857142857142857...</p><p data-pid=\"7Iz7zZXZ\">3÷7=0.42857142857142857...</p><p data-pid=\"whnA4ezU\">4÷7=0.57142857142857...</p><p data-pid=\"a4Km3Xxw\">5÷7=0.7142857142857...</p><p data-pid=\"wmy5tPIV\">6÷7=0.857142857142857...</p><p data-pid=\"KwfaITFN\">注意看得数小数点后面的数字，（142857）只是被打乱了顺序而已，并且以除不尽的方式无限循环。这组数字还有很多种规律，在这里我只列出了几种比较简单的方式。有兴趣的朋友可以自己去网上查查资料，探究一下！</p>",
        "relationship": {
          "is_nothelp": false,
          "voting": 0,
          "is_thanked": false
        },
        "visited_count": 169778,
        "favorite_count": 1513,
        "url": "https://api.zhihu.com/answers/1989407691970470359",
        "excerpt": "142857，又名走马灯数。 它发现于埃及金字塔内，这是一组神奇的 数字 ，它能证明一星期有7天，它每自我累加一次，就会由它的6个数字依顺序轮值一次......看似平凡的数字，为什么说它神奇呢？   我们先把它从1乘到6看一看，找找规律所在 142857 × 1 = 142857 142857 × 2 = 285714 142857 × 3 = 428571 142857 × 4 = 571428 142857 × 5 = 714285 142857 × 6 = 857142   规律：乘以1-6得出的结果，（142857）只是单个数字（1，4，…",
        "answer_type": "normal",
        "allow_segment_interaction": true,
        "voteup_count": 1117,
        "is_copyable": false,
        "question": {
          "type": "question",
          "detail": "",
          "comment_count": 26,
          "is_following": false,
          "excerpt": "",
          "relationship": {
            "is_author": false
          },
          "author": {
            "id": "ec7efcb7461a2c257ec3a6ef76659d1f",
            "url": "https://api.zhihu.com/people/ec7efcb7461a2c257ec3a6ef76659d1f",
            "user_type": "people",
            "name": "知乎用户s2w6vm",
            "headline": "",
            "gender": 0,
            "is_following": false,
            "url_token": "du-xin-7-19",
            "avatar_url": "https://picx.zhimg.com/50/v2-abed1a8c04700ba7d72b45195223e0ff_l.jpg?source=b6762063",
            "is_org": false,
            "followers_count": 9,
            "is_followed": false
          },
          "title": "142857 是人类数学的巧合吗？",
          "answer_count": 0,
          "question_type": "normal",
          "id": "348654310",
          "url": "https://api.zhihu.com/questions/348654310",
          "created": 1569906436,
          "follower_count": 0,
          "bound_topic_ids": [
            1291,
            2854,
            79900
          ]
        },
        "reshipment_settings": "disallowed",
        "is_labeled": false,
        "navigator_vote": false,
        "id": "1989407691970470359",
        "updated_time": 1767091755,
        "preview_type": "default",
        "author": {
          "name": "川贝",
          "headline": "且停且忘且随风，且行且看且从容。",
          "avatar_url": "https://picx.zhimg.com/50/v2-ca34b4d2456ba41cc55f5e2c2b32ee37_l.jpg?source=b6762063",
          "is_org": false,
          "id": "c7df9aed8cd005269e17871793633f43",
          "user_type": "people",
          "gender": 1,
          "followers_count": 1459,
          "is_following": false,
          "is_followed": false,
          "url": "https://api.zhihu.com/people/c7df9aed8cd005269e17871793633f43",
          "url_token": "24-54-41-88-67"
        }
      },
      "brief": "{\"source\": \"TS\", \"type\": \"answer\", \"id\": 1989407691970470359}",
      "attached_info": "CrAICPXn/uHbnZHUsAEQBBoJNzYzMzQ2NTQwIKvczsoGKN0IMGdAdUo/CipUU19TT1VSQ0VfWlJFQ0FMTF9GRUVEUkVfTkVXQklFX0hPVVJMWV9SVU0SATAYACAAOgp7InJhdyI6IiJ9SjUKIFRTX1NPVVJDRV9GRUVEUkVfRklSU1RfU0NSRUVOX1YyEgEwGAAgADoKeyJyYXciOiIifUooCh1UU19TT1VSQ0VfTkVBUkxJTkVfQ09OVEVOVF9WMhIBMBgAIAA6AFoIMzk3NTY4MjViIGVhZWE1NDA2NmM4MTlhNmE3OWI5ZmNiZTFkOTIyMzM0chMxOTg5NDA3NjkxOTcwNDcwMzU5igEJMzQ4NjU0MzEwqgEJcmVjb21tZW5kwgEgYzdkZjlhZWQ4Y2QwMDUyNjllMTc4NzE3OTM2MzNmNDPyAQoIDBIGTm9ybWFs8gEoCAoSJDQ0Nzk0Y2VmLWNjMjMtNGFlZi05ZmNiLTBkOGM2NDMwZTMwZPIBBggLEgIyMIICAIgCu5Hhm7kzkgIgYzdkZjlhZWQ4Y2QwMDUyNjllMTc4NzE3OTM2MzNmNDOaAgDKAhRGaXJzdEJydXNoV2VpZ2h0UnVsZcoCFlNob3JJbnRlcmVzdFdlaWdodFJ1bGXKAhZBY3Rpb25TaG9ySW50ZXJlc3RSdWxlygIbSW50ZXJhY3Rpb25TaG9ySW50ZXJlc3RSdWxlygIUQ29udGVudEFnZVdlaWdodFJ1bGXaAipUU19TT1VSQ0VfWlJFQ0FMTF9GRUVEUkVfTkVXQklFX0hPVVJMWV9SVU3oAgP6AgtOT1JNQUxfRkxPV4oDIDE4OWE1Njc3NTIwZTRiYzQ4YjJmNWIxMmI0NDAxNDRhmgMNCgJ2MhAAGgVvdGhlcqgDsq4K2AMA6gMQbmV3YmllX2ZlZWRyZV92MvoD2wESDFVOS05PV05fTU9ERSAAKg1OT19JTUFHRV9NT0RFOi0IAxC4CBjiBCIjdjItY2Y1Y2NjNTY1YmMxMjg5OGJiMmJjZjZmNWRhZDliNzI6LQgCEIAIGMEEIiN2Mi02ZjNiMTQ0YTJlOTFiZDFhNTYzMTExNzI1ZTU0NWVkZDotCAIQgAgYwgQiI3YyLTY4Mjg4N2UxYWNhNmUwN2ZhYTU1YjZjNWM1NjRiZmNhOi0IAhC4CBjgBCIjdjItZjYyZTkyMzI1NDU2MDhjNmM5NTg0ZjA4ZWRjN2EwMjaABACIBACSBAZOb3JtYWyaBAEzoAQAqAQAsAQAugQCYWnCBAM0MDDIBADSBA/mjqjojZDlt7Lmm7TmlrDYBADwBAD5BAAAAMDUfI8/gQUAAAAAAAAAAIkF5DoBo5WKsj+SBQCaBQNkZnSiBQNkZnSyBQExuQUAAAAAAAAAANAFAOAFAOgFAPAFFJAGAKAGdqgGAJICLgoJNzYzMzQ2NTQwEhMxOTg5NDA3NjkxOTcwNDcwMzU5GAQiCklNQUdFX1RFWFQ=",
      "action_card": false
    },
    {
      "id": "118_1767705692.937",
      "type": "feed",
      "offset": 118,
      "verb": "TOPIC_ACKNOWLEDGED_ANSWER",
      "created_time": 1767705692,
      "updated_time": 1767705692,
      "target": {
        "id": "1978775294476317966",
        "url": "https://api.zhihu.com/answers/1978775294476317966",
        "reshipment_settings": "disallowed",
        "visited_count": 103,
        "answer_type": "normal",
        "allow_segment_interaction": true,
        "type": "answer",
        "excerpt": "完全不赞同“大学四年只能学个皮毛这句话”，大学考专四专八前后可以说是大部分学生的俄语巅峰。如果只能学皮毛，为什么会开四年的课程设置。 大多数人要面临的是找到工作后，你会接触到以前你从未接触到的某个行业领域的专业术语和商务用语。这些内容有的特色学校可能会开一学期课来讲，更多的是靠你在这个行业里自己积累。 高中生都能在课业繁重的背景下用较短时间学好俄语，大学生又有什么可担心的。",
        "excerpt_new": "完全不赞同“大学四年只能学个皮毛这句话”，大学考专四专八前后可以说是大部分学生的俄语巅峰。如果只能学皮毛，为什么会开四年的课程设置。 大多数人要面临的是找到工作后，你会接触到以前你从未接触到的某个行业领域的专业术语和商务用语。这些内容有的特色学校可能会开一学期课来讲，更多的是靠你在这个行业里自己积累。 高中生都能在课业繁重的背景下用较短时间学好俄语，大学生又有什么可担心的。",
        "content": "<p data-pid=\"99QjRztf\">完全不赞同“大学四年只能学个皮毛这句话”，大学考专四专八前后可以说是大部分学生的俄语巅峰。如果只能学皮毛，为什么会开四年的课程设置。</p><p data-pid=\"u0kHeF0E\">大多数人要面临的是找到工作后，你会接触到以前你从未接触到的某个行业领域的专业术语和商务用语。这些内容有的特色学校可能会开一学期课来讲，更多的是靠你在这个行业里自己积累。</p><p data-pid=\"ZaNnRwRO\">高中生都能在课业繁重的背景下用较短时间学好俄语，大学生又有什么可担心的。</p><p></p>",
        "is_labeled": false,
        "navigator_vote": false,
        "vote_next_step": "vote",
        "created_time": 1764556794,
        "updated_time": 1764556794,
        "voteup_count": 0,
        "comment_count": 0,
        "preview_type": "default",
        "relationship": {
          "is_thanked": false,
          "is_nothelp": false,
          "voting": 0
        },
        "is_navigator": false,
        "author": {
          "is_org": false,
          "followers_count": 2456,
          "is_followed": false,
          "id": "ceb8db2ac98f3f4af68afabd348d86f2",
          "user_type": "people",
          "avatar_url": "https://picx.zhimg.com/50/v2-7b48e6c17f851fbaeb0a19dd655f3c2b_l.jpg?source=b6762063",
          "headline": "俄语人小肥肥鹏总新号，原“小肥肥鹏总”停用",
          "gender": 1,
          "badge": [
            {
              "type": "identity_people",
              "description": "哈尔滨佰瀚教育科技有限公司 教育大数据测评师"
            }
          ],
          "is_following": false,
          "url": "https://api.zhihu.com/people/ceb8db2ac98f3f4af68afabd348d86f2",
          "url_token": "e-yu-bang-ren-xiao-fei-fei-peng-zong",
          "name": "俄语人小肥肥鹏总"
        },
        "thanks_count": 0,
        "is_copyable": false,
        "question": {
          "comment_count": 0,
          "is_following": false,
          "detail": "",
          "question_type": "normal",
          "type": "question",
          "answer_count": 0,
          "follower_count": 0,
          "excerpt": "",
          "relationship": {
            "is_author": false
          },
          "url": "https://api.zhihu.com/questions/647750894",
          "title": "学习俄语有前途吗?",
          "bound_topic_ids": [
            1479258,
            2189652,
            2659072,
            2972981
          ],
          "id": "647750894",
          "author": {
            "is_followed": false,
            "url_token": "fdmruf",
            "name": "十三州府",
            "headline": "山中何事？松花酿酒，春水煎茶。",
            "avatar_url": "https://pica.zhimg.com/50/v2-1c9386c18b90b2bb8250946b49dde825_l.jpg?source=b6762063",
            "gender": 0,
            "followers_count": 2,
            "is_following": false,
            "id": "a862b8d120ab946cb466bf95c19c090c",
            "url": "https://api.zhihu.com/people/a862b8d120ab946cb466bf95c19c090c",
            "user_type": "people",
            "is_org": false
          },
          "created": 1709978164
        },
        "preview_text": "",
        "favorite_count": 0
      },
      "brief": "{\"source\": \"TS\", \"type\": \"answer\", \"id\": 1978775294476317966}",
      "attached_info": "Cq0GCPXn/uHbnZHUsAEQBBoJNzU5MDE0MjU5IPr/s8kGKAAwAEB2SjUKH1RTX1NPVVJDRV9TRUFSQ0hfSU5HUkVTU19SRVNVTFQSDOWtpuS5oOS/hOivrRgAIAA6AEooCh1UU19TT1VSQ0VfTkVBUkxJTkVfQ09OVEVOVF9WMhIBMBgAIAA6AFoJMTA2MjIxOTk1YiBlYWVhNTQwNjZjODE5YTZhNzliOWZjYmUxZDkyMjMzNHITMTk3ODc3NTI5NDQ3NjMxNzk2NooBCTY0Nzc1MDg5NKoBCXJlY29tbWVuZMIBIGNlYjhkYjJhYzk4ZjNmNGFmNjhhZmFiZDM0OGQ4NmYy8gEKCAwSBk5vcm1hbPIBKAgKEiQxNTQzYWFmMC1kNDZmLTRhMTgtYTY4My0xMmQ2Yzg2MDJhOWXyAQYICxICMjCCAgCIAruR4Zu5M5ICIGNlYjhkYjJhYzk4ZjNmNGFmNjhhZmFiZDM0OGQ4NmYymgIAygIURmlyc3RCcnVzaFdlaWdodFJ1bGXKAhZTaG9ySW50ZXJlc3RXZWlnaHRSdWxlygIbSW50ZXJhY3Rpb25TaG9ySW50ZXJlc3RSdWxlygIQU2VhcmNoV2VpZ2h0UnVsZcoCFENvbnRlbnRBZ2VXZWlnaHRSdWxl2gIfVFNfU09VUkNFX1NFQVJDSF9JTkdSRVNTX1JFU1VMVOgCAvoCC05PUk1BTF9GTE9XigMgMTg5YTU2Nzc1MjBlNGJjNDhiMmY1YjEyYjQ0MDE0NGGaAw0KAnYyEAAaBW90aGVyqANn2AMA6gMec2VhcmNoLWluZ3Jlc3MtcmVzdWx0LXJlY2FsbGVy+gMfEgxVTktOT1dOX01PREUgACoNTk9fSU1BR0VfTU9ERYAEAIgEAJIEBk5vcm1hbJoEATKgBACoBACwBAC6BAJhacIEAzQwMMgEANIED+aOqOiNkOW3suabtOaWsNgEAPAEAPkEAAAAwCoooj+BBQAAAAAAAAAAiQXkOgGjlYqyP5IFAJoFA2RmdKIFA2RmdLIFATG5BQAAAAAAAAAA0AUA4AUA6AUA8AUUkAYAoAZ3qAYBkgIuCgk3NTkwMTQyNTkSEzE5Nzg3NzUyOTQ0NzYzMTc5NjYYBCIKSU1BR0VfVEVYVA==",
      "action_card": false
    },
    {
      "id": "119_1767705692.907",
      "type": "feed",
      "offset": 119,
      "verb": "TOPIC_ACKNOWLEDGED_ARTICLE",
      "created_time": 1767705692,
      "updated_time": 1767705692,
      "target": {
        "type": "article",
        "preview_text": "",
        "favorite_count": 0,
        "navigator_vote": false,
        "vote_next_step": "vote",
        "id": "1991843764034098174",
        "comment_count": 0,
        "voting": 0,
        "excerpt_new": "立个flag，这是未来一段时间打算做的Python教程，敬请关注。   1 数据及应用领域我的程序中给出数据data.xlsx（ 代码及数据见文末），10 列特征值，1 个目标值，适用于各行各业回归预测算法的需求，其中出图及数据自动保存在当前目录，设置的训练集与预测集的比例为 80%：20%。     unsetunset一、地球科学与环境科学unsetunset遥感反演：利用多源遥感数据预测水体深度、土壤湿度、植被指数、叶面积指数等。气象与气候研究：预测降水量…",
        "preview_type": "default",
        "content": "<p data-pid=\"zUcTe6uY\">立个flag，这是未来一段时间打算做的Python教程，敬请关注。</p><figure data-size=\"normal\"><img src=\"https://picx.zhimg.com/v2-b7d9361519326d4774298914f5c7468d_1440w.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"945\" data-rawheight=\"529\" data-original-token=\"v2-13b8b529b43adb1b4bd8c9dff4de837c\" class=\"origin_image zh-lightbox-thumb\" width=\"945\" data-original=\"https://picx.zhimg.com/v2-b7d9361519326d4774298914f5c7468d_r.jpg\"/></figure><h2><b>1 数据及应用领域</b></h2><p data-pid=\"5cGheoCc\">我的程序中给出数据data.xlsx（<b>代码及数据见文末</b>），10 列特征值，1 个目标值，适用于各行各业回归预测算法的需求，其中出图及数据自动保存在当前目录，设置的训练集与预测集的比例为 80%：20%。</p><figure data-size=\"normal\"><img src=\"https://picx.zhimg.com/v2-8078b267c74788be61360c79c05bcdef_1440w.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"736\" data-rawheight=\"58\" data-original-token=\"v2-8078b267c74788be61360c79c05bcdef\" class=\"origin_image zh-lightbox-thumb\" width=\"736\" data-original=\"https://picx.zhimg.com/v2-8078b267c74788be61360c79c05bcdef_r.jpg\"/></figure><figure data-size=\"normal\"><img src=\"https://pic2.zhimg.com/v2-f8a9bae738e7f4f3bebabab13e756725_1440w.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1031\" data-rawheight=\"1120\" data-original-token=\"v2-214d24aac6b3c09acee2ffcf1d60708d\" class=\"origin_image zh-lightbox-thumb\" width=\"1031\" data-original=\"https://pic2.zhimg.com/v2-f8a9bae738e7f4f3bebabab13e756725_r.jpg\"/></figure><h2><b>unsetunset一、地球科学与环境科学unsetunset</b></h2><ul><li data-pid=\"Ppfpm25A\"><b>遥感反演</b>：利用多源遥感数据预测水体深度、土壤湿度、植被指数、叶面积指数等。</li><li data-pid=\"e8neRO8V\"><b>气象与气候研究</b>：预测降水量、气温、风速、风向等连续气象变量。</li><li data-pid=\"nQc-CRC7\"><b>水文与水资源管理</b>：河流流量、地下水位、径流量预测。</li><li data-pid=\"C0JxK4Uv\"><b>环境污染监测</b>：空气质量指数、PM2.5/PM10浓度、重金属污染水平预测。</li><li data-pid=\"eoAK5FMs\"><b>地质与矿业</b>：预测矿区地表沉降、地裂缝发展趋势，或矿产储量评估。</li></ul><h2><b>unsetunset二、生物学与医学unsetunset</b></h2><ul><li data-pid=\"eCgs7i5c\"><b>生态学</b>：预测物种分布密度、群落生物量或生态环境因子变化。</li><li data-pid=\"I4uFrluz\"><b>公共卫生</b>：基于环境、生活方式或基因组数据预测疾病风险或血液生化指标。</li><li data-pid=\"28w9xi_U\"><b>医学影像分析</b>：预测器官或病灶体积、组织属性、功能指标。</li></ul><h2><b>unsetunset三、工程与物理科学unsetunset</b></h2><ul><li data-pid=\"bl1J2kbv\"><b>材料科学</b>：预测材料性能，如强度、硬度、导热性、弹性模量</li><li data-pid=\"AoUymeGR\"><b>土木与结构工程</b>：预测建筑物或桥梁的应力、位移、寿命周期。</li><li data-pid=\"HIc2qMwd\"><b>控制系统与信号处理</b>：连续控制变量预测、信号功率或系统状态预测。</li></ul><h2><b>unsetunset四、经济与社会科学unsetunset</b></h2><ul><li data-pid=\"lgZtHARh\"><b>经济预测</b>：股价、GDP、通货膨胀率、消费指数预测。</li><li data-pid=\"n2kyP2T3\"><b>市场分析</b>：销售额、客户需求、产品价格预测。</li><li data-pid=\"6o0qBzGT\"><b>社会行为</b>：人口增长、流动性、社会指标预测。</li></ul><h2><b>unsetunset五、数据科学与机器学习方向unsetunset</b></h2><ul><li data-pid=\"SpYAS4cV\"><b>时间序列预测</b>：股票价格、气象指标、传感器数据。</li><li data-pid=\"b86ujks9\"><b>多变量因果建模</b>：分析各特征对连续目标变量的影响。</li><li data-pid=\"f3cKAJjz\"><b>特征重要性解释</b>：结合SHAP、LIME等方法揭示变量贡献。</li></ul><h2><b>2 算法理论基础</b></h2><p data-pid=\"LbtiDByh\">在高维数据、噪声较强或特征相关性明显的场景中，普通线性回归往往表现不稳。岭回归通过引入正则化让模型更稳定，而贝叶斯岭回归进一步将“正则化”变成一种可学习的概率过程，使模型能够根据数据自动调节自身复杂度。</p><p data-pid=\"O3ATKeH5\">它是一种既稳健、又具备不确定性表达能力的线性回归方法。</p><h2><b>unsetunset🌟 一、贝叶斯岭回归是什么？unsetunset</b></h2><p data-pid=\"k15JzJHJ\">贝叶斯岭回归是一种将岭回归放入贝叶斯框架下的回归模型。<br/>它不再人为设定正则化强度，而是让模型自己根据数据估计参数的分布。</p><p data-pid=\"DFuI1ZF3\">通俗来说：</p><blockquote data-pid=\"_31w03py\"><b>模型不只给出系数，还给出“这些系数有多不确定”。</b><br/> </blockquote><p data-pid=\"dWp1yGib\">这让预测不仅有值，还有可信程度。</p><h2><b>unsetunset🌟 二、为何要引入贝叶斯思想？unsetunset</b></h2><p data-pid=\"5BncAWSS\">传统岭回归会固定一个正则化强度，但这在不同数据集上表现不一定理想。<br/>贝叶斯岭回归的核心思想是：</p><ul><li data-pid=\"Z0_CYMU6\">将参数视为随机变量</li><li data-pid=\"QGfM3H1W\">为参数设定先验分布</li><li data-pid=\"owJWomkB\">通过数据自动推断“哪些系数应更大、哪些应更小”</li></ul><p data-pid=\"hKSnRwyV\">这样模型不会被噪声牵着走，也不会被强相关特征干扰太多。</p><p data-pid=\"32eaeSUS\">换句话说，它把“参数约束”从死板的规则变成了灵活的、数据驱动的自动调节。</p><h2><b>unsetunset🌟 三、贝叶斯岭回归如何提升模型稳定性？unsetunset</b></h2><p data-pid=\"nCu89Ct_\">在训练过程中，贝叶斯岭回归会根据观测数据不断更新对参数的认识，使其分布更合理。<br/>优势包括：</p><ul><li data-pid=\"CFThAQ2a\">自动抑制过大的权重</li><li data-pid=\"kqPygSBp\">控制过拟合</li><li data-pid=\"cXk-DEQp\">对特征相关性不敏感</li><li data-pid=\"OTY-C9u5\">系数估计更加稳定</li><li data-pid=\"VZ9ai8dg\">输出结果更可信</li></ul><p data-pid=\"RdCSeLk0\">这种基于概率的约束方式，比固定惩罚项更柔性、更智能。</p><h2><b>unsetunset🌟 四、除了预测，它还能给出“不确定性”unsetunset</b></h2><p data-pid=\"WZ-XhwO0\">与普通线性回归不同，贝叶斯岭回归不仅能预测一个点值，还能同时告诉你：</p><ul><li data-pid=\"EwBLGefS\">模型对这个预测是否有信心</li><li data-pid=\"RfBtQ2NB\">参数的不确定性有多大</li><li data-pid=\"43lrHS7o\">数据噪声可能导致多少波动</li></ul><p data-pid=\"LCJ3swrj\">在科学分析、金融、医学等领域，这类“不确定性信息”极具价值。</p><h2><b>unsetunset🌟 五、适用场景unsetunset</b></h2><p data-pid=\"3bgtqh60\">贝叶斯岭回归非常适用于：</p><ul><li data-pid=\"f_GIyK4k\">特征相关性强的结构化数据</li><li data-pid=\"689l0_TS\">高维但样本量不大的任务</li><li data-pid=\"o3DaIXvW\">噪声较大的实验数据</li><li data-pid=\"WOeEkZ_3\">需要估计预测可信度的应用</li><li data-pid=\"X-GAxLS0\">需要稳健且可解释模型的场景</li></ul><p data-pid=\"avS-C-3B\">它是一种介于“简单线性模型”与“概率推断”之间，非常稳健和实用的算法。</p><h2><b>3 其他图示</b></h2><h2><b>unsetunset🎲 一、特征值相关性热图unsetunset</b></h2><p data-pid=\"SPkW3MhC\">特征值相关性热图用于展示各特征之间的相关强弱，通过颜色深浅体现正负相关关系，帮助快速识别冗余特征、强相关特征及可能影响模型稳定性的变量，为后续特征选择和建模提供参考。</p><figure data-size=\"normal\"><img src=\"https://pic2.zhimg.com/v2-798f17d8a42d168a0758000d12427c6d_1440w.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"3000\" data-rawheight=\"2400\" data-original-token=\"v2-2b7041c3c57615b296213a518ab66db3\" class=\"origin_image zh-lightbox-thumb\" width=\"3000\" data-original=\"https://pic2.zhimg.com/v2-798f17d8a42d168a0758000d12427c6d_r.jpg\"/></figure><h2><b>unsetunset🎲 二、散点密度图unsetunset</b></h2><p data-pid=\"LcpJR0Vq\">散点密度图通过颜色或亮度反映点的聚集程度，用于展示大量样本的分布特征。相比普通散点图，它能更直观地呈现高密度区域、异常点及整体趋势，常用于回归分析与模型评估。以下为训练集和测试集出图效果。</p><figure data-size=\"normal\"><img src=\"https://pic1.zhimg.com/v2-b9830b13ddec8c539f67568c403d202a_1440w.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"2983\" data-rawheight=\"2943\" data-original-token=\"v2-6d24bd66f854b8638ee7611de668de9d\" class=\"origin_image zh-lightbox-thumb\" width=\"2983\" data-original=\"https://pic1.zhimg.com/v2-b9830b13ddec8c539f67568c403d202a_r.jpg\"/></figure><figure data-size=\"normal\"><img src=\"https://pic3.zhimg.com/v2-241475fa4ca8b81a95f2655e79b5e9a6_1440w.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"2950\" data-rawheight=\"3002\" data-original-token=\"v2-e040533c403bb62260c5ece1c6168039\" class=\"origin_image zh-lightbox-thumb\" width=\"2950\" data-original=\"https://pic3.zhimg.com/v2-241475fa4ca8b81a95f2655e79b5e9a6_r.jpg\"/></figure><h2><b>unsetunset🎲 三、贝叶斯搜索参数优化算法及示意图unsetunset</b></h2><h3><b>🌟 1. 先构建一个“参数-效果”的概率模型</b></h3><p data-pid=\"LwOHgh02\">贝叶斯优化会根据每一次调参的表现，持续更新一份“这个参数组合大概率能获得更好效果”的认知。<br/>这份认知由一个代理模型承担，通常是高斯过程或树结构模型。它不像网格搜索那样盲目，而是<b>先学、再试</b>。</p><h3><b>🌟 2. 通过“探索”与“利用”平衡选点</b></h3><p data-pid=\"sKvmdMoZ\">贝叶斯优化每次选新的参数时都会权衡：</p><ul><li data-pid=\"nqLC088u\"><b>探索</b>：去试试没探索过的区域，可能藏着宝贝</li><li data-pid=\"a3eFKIQP\"><b>利用</b>：去当前最可能效果最好的区域，稳扎稳打 这种带策略的试验方式，让调参过程既高效又不容易错过最优解。</li></ul><h3><b>🌟 3. 不断用真实结果修正判断</b></h3><p data-pid=\"TqlL2diJ\">每试一个参数组合，代理模型就会重新更新“信念”，并重新预测哪些区域值得继续尝试。<br/>调参越往后，模型越“聪明”，搜索路径越精确。这就像一个不断学习经验的调参工程师，越调越准。</p><h3><b>🌟 4. 收敛快，适用于高成本模型</b></h3><p data-pid=\"1BXBZhxt\">因为每一次试验都很有价值，贝叶斯优化通常只需几十次实验就能找到非常优秀的超参数组合。<br/>这对训练成本高的模型（XGBoost、LightGBM、CatBoost、深度学习）尤其友好。</p><h3><b>🌟 5. 程序能画非常直观的可视化</b></h3><p data-pid=\"AxV60zVO\">该图展示贝叶斯优化过程中各超参数的重要性，对模型误差影响最大的为 n_estimators 和 learning_rate，其次为 max_depth，而 subsample 与 reg_lambda 贡献较小，用于判断调参优先级。</p><figure data-size=\"normal\"><img src=\"https://pic4.zhimg.com/v2-63a4628bfb04862a237329eac62215fd_1440w.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"2400\" data-rawheight=\"1500\" data-original-token=\"v2-477475f5d9724edfa550b1425d434a6d\" class=\"origin_image zh-lightbox-thumb\" width=\"2400\" data-original=\"https://pic4.zhimg.com/v2-63a4628bfb04862a237329eac62215fd_r.jpg\"/></figure><h2><b>unsetunset🎲 四、随机搜索参数优化算法及示意图unsetunset</b></h2><h3><b>🌟 1、随机搜索是什么？</b></h3><p data-pid=\"4aGmOw2p\">一句话概括：</p><blockquote data-pid=\"h9F5oPZw\"><b>随机搜索就是在超参数空间里不断“抽样试验”，从而找到表现最好的参数组合。</b><br/> </blockquote><p data-pid=\"qAqCP1L-\">不同于按顺序走格子的调参方式，随机搜索会在整个参数空间中“自由跳跃”，每次从可能区域里随机挑选出一个参数组合，用最直接的方式评估模型的表现。</p><h3><b>🌟 2、它的核心思路其实很聪明</b></h3><p data-pid=\"5o52euit\">虽然名字叫“随机”，但它背后的逻辑却非常高效。</p><h3><b>✔ 1. 更广的覆盖范围</b></h3><p data-pid=\"XPx1Hl5u\">每次抽取的点都可能落在搜索空间的不同区域，让模型在有限的预算里探索更多潜在好参数。</p><h3><b>✔ 2. 支持多种采样策略</b></h3><p data-pid=\"1B_rdpid\">你可以让 learning_rate 以对数分布抽取、让 n_estimators 偏向更大值，这让随机搜索能更贴近真实优化需求。</p><h3><b>✔ 3. 每一次试验都独立有效</b></h3><p data-pid=\"x8hFjXYc\">不依赖复杂的历史记录，适用于快速尝试、快速验证的场景。</p><p data-pid=\"nLSK7EvW\">换句话说：  <b>它简单，但“简单得很有效”。</b></p><h3><b>🌟 3、为什么它在实际调参中被广泛使用？</b></h3><p data-pid=\"U2nU0GXg\">在许多模型中，超参数空间往往非常大，比如：</p><ul><li data-pid=\"VHrdfUtK\">XGBoost 的树深、学习率、子采样比例</li><li data-pid=\"ib-G9Js5\">神经网络的学习率、层数、节点数</li><li data-pid=\"fy3cNe1L\">CatBoost、LightGBM 的几十种可调参数</li></ul><p data-pid=\"Z_1obB7e\">随机搜索能在这些复杂空间里迅速落点——  不需要把所有组合都跑一遍，也不需要构建额外的代理模型，只需要<b>不断抽样并测试结果</b>。尤其在遥感反演、深度学习任务中，这种轻量但高覆盖的方式，往往能快速找到一个令人满意的初步最优解。</p><h3><b>🌟 4、它适合什么场景？</b></h3><p data-pid=\"butMqZhX\">简单总结几个典型应用：</p><ul><li data-pid=\"S9RXu-9q\"><b>模型初调</b>：快速找到可行参数范围</li><li data-pid=\"i8JPMWZX\"><b>大搜索空间</b>：超参数众多、组合巨大时</li><li data-pid=\"8E4WWGnl\"><b>训练成本高</b>：希望用少量试验找到较好解</li><li data-pid=\"VPQyVROo\"><b>模型表现敏感</b>：需要探索更大范围避免局部最优</li></ul><p data-pid=\"yt2R7wtu\">这也是为什么随机搜索常被当作<b>调参的起步策略</b>，先探索，再进一步细化。</p><h3><b>🌟 5. 程序能画非常直观的可视化</b></h3><p data-pid=\"NUAhJFyq\">该图为超参数的成对散点矩阵图，展示不同超参数之间的分布特征与潜在关系，对角线上为各参数的概率密度分布，可用于分析参数空间结构与抽样多样性。</p><figure data-size=\"normal\"><img src=\"https://pic3.zhimg.com/v2-230891079a2b026d8f38b44fde839adc_1440w.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"6000\" data-rawheight=\"6000\" data-original-token=\"v2-76d03cdd8b3e9eba5f23c990ea57b660\" class=\"origin_image zh-lightbox-thumb\" width=\"6000\" data-original=\"https://pic3.zhimg.com/v2-230891079a2b026d8f38b44fde839adc_r.jpg\"/></figure><p data-pid=\"Y0zlfX81\">该图展示超参数与模型误差的相关性重要性排名，不同柱状高度反映各参数对 RMSE 的影响强弱，其中 reg_alpha、max_depth 和 learning_rate 贡献最高，有助于确定调参重点方向。</p><figure data-size=\"normal\"><img src=\"https://pic4.zhimg.com/v2-c1d99c01a1cc8670bbf16158e27645ab_1440w.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"2400\" data-rawheight=\"1200\" data-original-token=\"v2-7145f1691e30077e7be56bbbc14de1d9\" class=\"origin_image zh-lightbox-thumb\" width=\"2400\" data-original=\"https://pic4.zhimg.com/v2-c1d99c01a1cc8670bbf16158e27645ab_r.jpg\"/></figure><h2><b>unsetunset🎲 五、网格搜索参数优化算法及示意图unsetunset</b></h2><h3><b>🌟 1、网格搜索是什么？</b></h3><p data-pid=\"hMJZQpye\">一句话概括：</p><blockquote data-pid=\"mrjXZdeT\"><b>网格搜索就是把所有设定好的超参数组合排成一个“网格”，逐个尝试，通过评估结果找到表现最佳的那一组参数。</b><br/> </blockquote><p data-pid=\"p-s3xZ4q\">就像在一个二维或多维坐标空间里，把所有候选参数都排列出来，然后把每个点都跑一遍，最终选出模型表现最优的位置。</p><h3><b>🌟 2、它的核心原则：全面、稳定、逐点验证</b></h3><p data-pid=\"YuuFygCU\">网格搜索的理念非常直观：</p><ul><li data-pid=\"jcV-0P21\">先定义每个参数可能的取值范围</li><li data-pid=\"kvbgU3_u\">再把这些取值组合成一个完整网格</li><li data-pid=\"lhSuMv_8\">然后对每个组合进行模型训练与验证</li><li data-pid=\"cRQ8DZ6u\">最后选择最优结果对应的参数</li></ul><p data-pid=\"uSzHf9Xi\">这是一种<b>系统化、无遗漏</b>的搜索方式。它不会遗漏，也不会偏向，它用最直接的方式告诉你：  哪个参数组合最适合你的模型。</p><h3><b>🌟 3、为什么网格搜索常被用作调参基础流程？</b></h3><p data-pid=\"j4KuX2Ny\">网格搜索的价值主要体现在几个方面：</p><h3><b>✔ 1. 结构清晰、可控性强</b></h3><p data-pid=\"DSDtutPv\">你可以完全决定参数候选集，调参过程完全透明。</p><h3><b>✔ 2. 适用于小范围、精细化的参数探索</b></h3><p data-pid=\"sGeyM0Vo\">特别适合探索学习率、树深、正则项等关键参数的小步长变化。</p><h3><b>✔ 3. 方便结合交叉验证</b></h3><p data-pid=\"zr_Ub0R6\">与 Cross-Validation 结合后，能够获得稳定、可靠的参数评估结果。</p><h3><b>✔ 4. 结果可复现、可追踪</b></h3><p data-pid=\"iq2J131B\">每个组合都被尝试过，调参过程完整记录，适合科研工作。</p><h3><b>🌟 4、典型应用场景</b></h3><p data-pid=\"vzTGmMNX\">网格搜索广泛应用于：</p><ul><li data-pid=\"a-pCIRt-\"><b>XGBoost / LightGBM / CatBoost</b> 的关键参数精调</li><li data-pid=\"7iVDa8-c\"><b>SVM、随机森林、岭回归等模型</b>的标准调参</li><li data-pid=\"EvnsTpSA\"><b>小规模搜索空间</b>的系统验证</li><li data-pid=\"z27Kpoj2\"><b>科研论文中要求严谨、可复现的实验设计</b></li></ul><p data-pid=\"JTO7U9-Q\">在你的任务里，网格搜索非常适合用于<b>关键参数的局部精调</b>，确保模型在最佳点附近充分探索。</p><h3><b>🌟 5. 程序能画非常直观的可视化</b></h3><p data-pid=\"BGs50HtL\">该图展示 GridSearchCV 调参过程中各超参数与 RMSE 的相关性重要性，其中 learning_rate、reg_alpha 和 n_estimators 影响最明显，可用于识别关键参数并指导后续调参方向。</p><figure data-size=\"normal\"><img src=\"https://pica.zhimg.com/v2-17fad0315b5c16319b2a56ec1de51d06_1440w.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1800\" data-rawheight=\"1200\" data-original-token=\"v2-fac52be3d165e4392496c4f2b1b1b06b\" class=\"origin_image zh-lightbox-thumb\" width=\"1800\" data-original=\"https://pica.zhimg.com/v2-17fad0315b5c16319b2a56ec1de51d06_r.jpg\"/></figure><h2><b>5 代码包含具体内容一览</b></h2><figure data-size=\"normal\"><img src=\"https://pica.zhimg.com/v2-9c3461fcd05e458b433f23e8f5ba2904_1440w.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"623\" data-rawheight=\"351\" data-original-token=\"v2-bd17a449c76eb8eaf81e8b909b5594d8\" class=\"origin_image zh-lightbox-thumb\" width=\"623\" data-original=\"https://pica.zhimg.com/v2-9c3461fcd05e458b433f23e8f5ba2904_r.jpg\"/></figure><figure data-size=\"normal\"><img src=\"https://pica.zhimg.com/v2-11fdf7166c90b8e8b3c19e7b04a3db22_1440w.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"613\" data-rawheight=\"320\" data-original-token=\"v2-eb7d82509367a6836f235a9c2ca20f09\" class=\"origin_image zh-lightbox-thumb\" width=\"613\" data-original=\"https://pica.zhimg.com/v2-11fdf7166c90b8e8b3c19e7b04a3db22_r.jpg\"/></figure><figure data-size=\"normal\"><img src=\"https://pic4.zhimg.com/v2-ca02a88eebf8ba64cfcd8d8aa56c8ee9_1440w.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"623\" data-rawheight=\"470\" data-original-token=\"v2-a22ff3bd1d54b58f44ef8893bbfe4f93\" class=\"origin_image zh-lightbox-thumb\" width=\"623\" data-original=\"https://pic4.zhimg.com/v2-ca02a88eebf8ba64cfcd8d8aa56c8ee9_r.jpg\"/></figure><figure data-size=\"normal\"><img src=\"https://pic2.zhimg.com/v2-d1b0a286ab5e2c3209dd5eae0ac38713_1440w.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"622\" data-rawheight=\"327\" data-original-token=\"v2-1e0690c4853d97fdcdc938b18756b59f\" class=\"origin_image zh-lightbox-thumb\" width=\"622\" data-original=\"https://pic2.zhimg.com/v2-d1b0a286ab5e2c3209dd5eae0ac38713_r.jpg\"/></figure><p data-pid=\"f456hn2c\">并将训练集和测试集的精度评估指标保存到 metrics. Mat 矩阵中。共两行，第一行代表训练集的，第二行代表测试集的；共 7 个精度评估指标，分别代表 R, R2, ME, MAE, MAPE, RMSE 以及样本数量。</p><figure data-size=\"normal\"><img src=\"https://pic1.zhimg.com/v2-93a3900e902c1d9ee1a11f193de379a4_1440w.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"119\" data-rawheight=\"124\" data-original-token=\"v2-93a3900e902c1d9ee1a11f193de379a4\" class=\"content_image\" width=\"119\"/></figure><p data-pid=\"_l0q3IQG\">保存的regression_result.mat数据中分别保存了名字为Y_train、y_pred_train、y_test、y_pred_test的矩阵向量。</p><figure data-size=\"normal\"><img src=\"https://pic1.zhimg.com/v2-7dc6656c59668ed8a53f466a35e169b0_1440w.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"104\" data-rawheight=\"151\" data-original-token=\"v2-7dc6656c59668ed8a53f466a35e169b0\" class=\"content_image\" width=\"104\"/></figure><p data-pid=\"JcEbF3WC\">同样的针对大家各自的数据训练出的模型结构也保存在model.json中，方便再一次调用。</p><figure data-size=\"normal\"><img src=\"https://pic4.zhimg.com/v2-19d6d7e14f9132b588a5ae92f2810f5f_1440w.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"114\" data-rawheight=\"145\" data-original-token=\"v2-19d6d7e14f9132b588a5ae92f2810f5f\" class=\"content_image\" width=\"114\"/></figure><p data-pid=\"nC8O0dCx\">调用的程序我在程序中注释了，如下</p><div class=\"highlight\"><pre><code class=\"language-text\"># 加载模型\n# model.load_model(&#34;model.json&#34;) \n</code></pre></div><p data-pid=\"2CRAVhmv\">主程序如下，其中从1-10，每一步都有详细的注释，要获取完整程序，请转下文代码获取</p><div class=\"highlight\"><pre><code class=\"language-text\"># =========================================================\n# 主程序\n# =========================================================\ndef main():\n    print(&#34;=== 1. 读取数据 ===&#34;)\n    data = pd.read_excel(&#34;data.xlsx&#34;)\n    X = data.iloc[:, :10].values\n    y = data.iloc[:, 10].values\n    feature_names = list(data.columns[:10])\n\n    print(&#34;=== 2. 划分训练与测试 ===&#34;)\n    X_train, X_test, y_train, y_test = train_test_split(\n        X, y, test_size=0.2, random_state=42\n    )\n\n    print(&#34;=== 3. 归一化 ===&#34;)\n    scaler_X = MinMaxScaler()\n    scaler_y = MinMaxScaler()\n\n    X_train_norm = scaler_X.fit_transform(X_train)\n    X_test_norm = scaler_X.transform(X_test)\n    y_train_norm = scaler_y.fit_transform(y_train.reshape(-1, 1)).ravel()\n\n    print(&#34;=== 4. 模型训练 ===&#34;)\n    model = train_model(X_train_norm, y_train_norm)\n\n    print(&#34;=== 5. 预测（反归一化到原始尺度） ===&#34;)\n    y_pred_train_norm = model.predict(X_train_norm)\n    y_pred_test_norm = model.predict(X_test_norm)\n\n    y_pred_train = scaler_y.inverse_transform(\n        y_pred_train_norm.reshape(-1, 1)\n    ).ravel()\n    y_pred_test = scaler_y.inverse_transform(\n        y_pred_test_norm.reshape(-1, 1)\n    ).ravel()\n\n    print(&#34;=== 6. 模型评估 ===&#34;)\n    metrics_train = evaluate_model(y_train, y_pred_train)\n    metrics_test = evaluate_model(y_test, y_pred_test)\n\n    print(&#34;\\n训练集评估指标:&#34;)\n    for k, v in metrics_train.items():\n        print(f&#34;  {k}: {v:.4f}&#34; if isinstance(v, float) else f&#34;  {k}: {v}&#34;)\n\n    print(&#34;\\n测试集评估指标:&#34;)\n    for k, v in metrics_test.items():\n        print(f&#34;  {k}: {v:.4f}&#34; if isinstance(v, float) else f&#34;  {k}: {v}&#34;)\n\n    print(&#34;=== 7. 保存结果到 MAT 文件 ===&#34;)\n    result_dict = {\n        &#34;y_train&#34;: y_train.astype(float),\n        &#34;y_pred_train&#34;: y_pred_train.astype(float),\n        &#34;y_test&#34;: y_test.astype(float),\n        &#34;y_pred_test&#34;: y_pred_test.astype(float),\n    }\n    savemat(&#34;regression_result.mat&#34;, result_dict)\n    print(&#34;已保存 regression_result.mat&#34;)\n\n    # 按指标顺序排列\n    metrics_matrix = np.array([\n        [metrics_train[&#39;R&#39;],     metrics_test[&#39;R&#39;]],\n        [metrics_train[&#39;R2&#39;],    metrics_test[&#39;R2&#39;]],\n        [metrics_train[&#39;ME&#39;],    metrics_test[&#39;ME&#39;]],\n        [metrics_train[&#39;MAE&#39;],   metrics_test[&#39;MAE&#39;]],\n        [metrics_train[&#39;MAPE&#39;],  metrics_test[&#39;MAPE&#39;]],\n        [metrics_train[&#39;RMSE&#39;],  metrics_test[&#39;RMSE&#39;]],\n        [metrics_train[&#39;样本数&#39;], metrics_test[&#39;样本数&#39;]]\n    ], dtype=float)\n    savemat(&#34;metrics.mat&#34;, {&#34;metrics&#34;: metrics_matrix})\n    print(&#34;已保存 metrics.mat（矩阵大小 7×2）&#34;)\n\n    print(&#34;=== 8. SHAP 分析 ===&#34;)\n    X_combined = np.vstack([X_train_norm, X_test_norm])\n    X_df = pd.DataFrame(X_combined, columns=feature_names)\n    # shap_results = shap_analysis(model, X_combined, feature_names)\n    plot_shap_dependence(model, X_combined, feature_names, X_df)\n\n    print(&#34;=== 9. 密度散点图 ===&#34;)\n    plot_density_scatter(\n        y_test, y_pred_test, save_path=&#34;scatter_density_test.png&#34;\n    )\n    plot_density_scatter(\n        y_train, y_pred_train, save_path=&#34;scatter_density_train.png&#34;\n    )\n\n    print(&#34;=== 10. 相关性热图 ===&#34;)\n    correlation_heatmap(data, feature_names)\n\n    print(&#34;=== 完成！===&#34;)\n\nif __name__ == &#34;__main__&#34;:\n    main()\n</code></pre></div><h2><b>6 代码获取</b></h2><p data-pid=\"QN9fvcxn\">Python | K折交叉验证的参数优化的贝叶斯岭回归预测及可视化算法（包括基础算法、贝叶斯搜索参数优化、随机搜索参数优化及网格搜索参数优化共4组算法）</p><p data-pid=\"-BkqFNU0\"><a href=\"https://link.zhihu.com/?target=https%3A//mbd.pub/o/bread/YZWalJZvZg%3D%3D\" class=\" external\" target=\"_blank\" rel=\"nofollow noreferrer\"><span class=\"invisible\">https://</span><span class=\"visible\">mbd.pub/o/bread/YZWalJZ</span><span class=\"invisible\">vZg==</span><span class=\"ellipsis\"></span></a></p><p data-pid=\"yh8_bggu\">新手小白/python 初学者请先根据如下链接教程配置环境，只需要根据我的教程即可，不需要安装 Python 及 pycharm 等软件。如有其他问题可加微信沟通。</p><p data-pid=\"TMg9qs_s\">Anaconda 安装教程（保姆级超详解）【附安装包+环境玩转指南】</p><p data-pid=\"98AxsR7H\"><a href=\"https://link.zhihu.com/?target=https%3A//mp.weixin.qq.com/s/uRI31yf-NjZTPY5rTXz4eA\" class=\" external\" target=\"_blank\" rel=\"nofollow noreferrer\"><span class=\"invisible\">https://</span><span class=\"visible\">mp.weixin.qq.com/s/uRI3</span><span class=\"invisible\">1yf-NjZTPY5rTXz4eA</span><span class=\"ellipsis\"></span></a></p>",
        "thumbnails": [
          "https://picx.zhimg.com/v2-36652c81da7c6ddd937e05c27211b747.jpg?source=7e7ef6e2&needBackground=1",
          "https://pic1.zhimg.com/50/v2-214d24aac6b3c09acee2ffcf1d60708d_720w.jpg?source=b6762063",
          "https://pic1.zhimg.com/50/v2-2b7041c3c57615b296213a518ab66db3_720w.jpg?source=b6762063",
          "https://picx.zhimg.com/50/v2-6d24bd66f854b8638ee7611de668de9d_720w.jpg?source=b6762063",
          "https://picx.zhimg.com/50/v2-e040533c403bb62260c5ece1c6168039_720w.jpg?source=b6762063",
          "https://picx.zhimg.com/50/v2-477475f5d9724edfa550b1425d434a6d_720w.jpg?source=b6762063",
          "https://pic1.zhimg.com/50/v2-76d03cdd8b3e9eba5f23c990ea57b660_720w.jpg?source=b6762063",
          "https://pic1.zhimg.com/50/v2-7145f1691e30077e7be56bbbc14de1d9_720w.jpg?source=b6762063",
          "https://picx.zhimg.com/50/v2-fac52be3d165e4392496c4f2b1b1b06b_720w.jpg?source=b6762063"
        ],
        "author": {
          "name": "Lwcah",
          "followers_count": 5951,
          "is_followed": false,
          "gender": 1,
          "id": "351577632376c4b5705bf1d7556b958b",
          "url": "https://api.zhihu.com/people/351577632376c4b5705bf1d7556b958b",
          "user_type": "people",
          "url_token": "lwcah-17",
          "headline": "全职师资博士后，专注GNSS遥感科学",
          "avatar_url": "https://picx.zhimg.com/50/v2-8ffbe2be15624d44b361661964d5bc65_l.jpg?source=b6762063",
          "is_org": false,
          "is_following": false
        },
        "voteup_count": 1,
        "excerpt": "立个flag，这是未来一段时间打算做的Python教程，敬请关注。   1 数据及应用领域我的程序中给出数据data.xlsx（ 代码及数据见文末），10 列特征值，1 个目标值，适用于各行各业回归预测算法的需求，其中出图及数据自动保存在当前目录，设置的训练集与预测集的比例为 80%：20%。     unsetunset一、地球科学与环境科学unsetunset遥感反演：利用多源遥感数据预测水体深度、土壤湿度、植被指数、叶面积指数等。气象与气候研究：预测降水量…",
        "visited_count": 17,
        "article_type": "normal",
        "created": 1767672614,
        "linkbox": {
          "category": "",
          "pic": "",
          "title": "",
          "url": ""
        },
        "is_labeled": false,
        "is_navigator": false,
        "allow_segment_interaction": true,
        "title": "Python | K折交叉验证的参数优化的贝叶斯岭回归预测及可视化算法",
        "updated": 1767672614,
        "comment_permission": "all",
        "image_url": "https://picx.zhimg.com/v2-36652c81da7c6ddd937e05c27211b747.jpg?source=7e7ef6e2&needBackground=1",
        "url": "https://api.zhihu.com/articles/1991843764034098174"
      },
      "brief": "{\"source\": \"TS\", \"type\": \"article\", \"id\": 1991843764034098174}",
      "attached_info": "CqcNCPXn/uHbnZHUsAEQBxoJMjY4NjI5MTM2IKaW8soGKAEwAEB3SiQKGVRTX1NPVVJDRV9XQVJNX1VQX05PUk1BTDISATAYACAAOgBiIGVhZWE1NDA2NmM4MTlhNmE3OWI5ZmNiZTFkOTIyMzM0chMxOTkxODQzNzY0MDM0MDk4MTc0ggFfaHR0cHM6Ly9waWN4LnpoaW1nLmNvbS92Mi0zNjY1MmM4MWRhN2M2ZGRkOTM3ZTA1YzI3MjExYjc0Ny5qcGc/c291cmNlPTdlN2VmNmUyJm5lZWRCYWNrZ3JvdW5kPTGqAQlyZWNvbW1lbmTCASAzNTE1Nzc2MzIzNzZjNGI1NzA1YmYxZDc1NTZiOTU4YvIBCggMEgZOb3JtYWzyASgIChIkZDQxZDZmNWUtYmZjMy00ZDM4LWFiNzMtOTBmZDNiN2JhZWI58gEGCAsSAjIwggIAiAK7keGbuTOSAiAzNTE1Nzc2MzIzNzZjNGI1NzA1YmYxZDc1NTZiOTU4YpoCAMoCFEZpcnN0QnJ1c2hXZWlnaHRSdWxlygIWU2hvckludGVyZXN0V2VpZ2h0UnVsZcoCFkFjdGlvblNob3JJbnRlcmVzdFJ1bGXKAhtJbnRlcmFjdGlvblNob3JJbnRlcmVzdFJ1bGXKAhNFbWJTaW1Jc29sYXRpb25SdWxlygIcQmF5ZXNGaXJzdExldmVsSXNvbGF0aW9uUnVsZdoCGVRTX1NPVVJDRV9XQVJNX1VQX05PUk1BTDLoAgP6AgtOT1JNQUxfRkxPV4oDIDE4OWE1Njc3NTIwZTRiYzQ4YjJmNWIxMmI0NDAxNDRhmgMNCgJ2MhAAGgVvdGhlcqgDEdgDAOoDIHdhcm11cFR3b1Rvd2VyVGV4dE5vcm1hbFJlY2FsbGVy+gPoBhIMVU5LTk9XTl9NT0RFIAAqDU5PX0lNQUdFX01PREU6LQgCELEHGJEEIiN2Mi0xM2I4YjUyOWI0M2FkYjFiNGJkOGM5ZGZmNGRlODM3YzosCAMQ4AUYOiIjdjItODA3OGIyNjdjNzQ3ODhiZTYxMzYwYzc5YzA1YmNkZWY6LQgCEIcIGOAIIiN2Mi0yMTRkMjRhYWM2YjNjMDlhY2VlMmZmY2YxZDYwNzA4ZDotCAQQuBcY4BIiI3YyLTJiNzA0MWMzYzU3NjE1YjI5NjIxM2E1MThhYjY2ZGIzOi0IAhCnFxj/FiIjdjItNmQyNGJkNjZmODU0Yjg2MzhlZTc2MTFkZTY2OGRlOWQ6LQgDEIYXGLoXIiN2Mi1lMDQwNTMzYzQwM2JiNjIyNjBjNWVjZTFjNjE2ODAzOTotCAMQ4BIY3AsiI3YyLTQ3NzQ3NWY1ZDk3MjRlZGZhNTUwYjE0MjVkNDM0YTZkOi0IAhDwLhjwLiIjdjItNzZkMDNjZGQ4YjNlOWViYTVmMjNjOTkwZWE1N2I2NjA6LQgDEOASGLAJIiN2Mi03MTQ1ZjE2OTFlMzAwNzdlN2JlNTZiYmJjMTRkZTFkOTotCAMQiA4YsAkiI3YyLWZhYzUyYmUzZDE2NWU0MzkyNDk2YzRmMmIxYjFiMDZiOi0IAhDvBBjfAiIjdjItYmQxN2E0NDljNzZlYjhlYWY4MWU4YjkwOWI1NTk0ZDg6LQgDEOUEGMACIiN2Mi1lYjdkODI1MDkzNjdhNjgzNmYyMzVhOWMyY2EyMGYwOTotCAMQ7wQY1gMiI3YyLWEyMmZmM2JkMWQ1NGI1OGY0NGVmODg5M2JiZmU0ZjkzOi0IAxDuBBjHAiIjdjItMWUwNjkwYzQ4NTNkOTdmZGNkYzkzOGIxODc1NmI1OWY6KwgDEHcYfCIjdjItOTNhMzkwMGU5MDJjMWQ5ZWUxYTExZjE5M2RlMzc5YTQ6LAgDEGgYlwEiI3YyLTdkYzY2NTZjNTk2NjhlZDhhNTNmNDY2YTM1ZTE2OWIwOiwIAhByGJEBIiN2Mi0xOWQ2ZDdlMTRmOTEzMmI1ODhhNWFlOTJmMjgxMGY1ZjotCAIQsQcYkQQiI3YyLTM2NjUyYzgxZGE3YzZkZGQ5MzdlMDVjMjcyMTFiNzQ3gAQAiAQAkgQGTm9ybWFsmgQBM6AEAKgEALAEALoEAmFpwgQDNDAwyAQA0gQP5o6o6I2Q5bey5pu05paw2AQA8AQA+QQAAACAMxxwP4EFAAAAAAAAAACJBeQ6AaOVirI/kgUAmgUDZGZ0ogUDZGZ0sgUBMbkFAAAAAAAAAADQBQDgBQDoBQDwBRSQBgCgBnioBgCSAi4KCTI2ODYyOTEzNhITMTk5MTg0Mzc2NDAzNDA5ODE3NBgHIgpJTUFHRV9URVhU",
      "action_card": false
    }
  ],
  "paging": {
    "is_end": false,
    "is_start": false,
    "next": "https://www.zhihu.com/api/v3/feed/topstory/recommend?action=down&ad_interval=-10&after_id=119&desktop=true&end_offset=120&page_number=21&session_token=eaea54066c819a6a79b9fcbe1d922334",
    "previous": "https://www.zhihu.com/api/v3/feed/topstory/recommend?action=pull&ad_interval=-10&before_id=119&desktop=true&end_offset=120&page_number=21&session_token=eaea54066c819a6a79b9fcbe1d922334",
    "totals": 0
  },
  "fresh_text": "推荐已更新"
}