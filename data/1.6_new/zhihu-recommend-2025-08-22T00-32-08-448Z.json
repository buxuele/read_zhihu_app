{
  "data": [
    {
      "id": "486_1755822774.904",
      "type": "feed",
      "offset": 486,
      "verb": "TOPIC_ACKNOWLEDGED_ARTICLE",
      "created_time": 1755822774,
      "updated_time": 1755822774,
      "target": {
        "id": "14231142930",
        "type": "article",
        "url": "https://api.zhihu.com/articles/14231142930",
        "author": {
          "id": "3d9b0657a916473b95bb8f7a97f32f93",
          "url": "https://api.zhihu.com/people/3d9b0657a916473b95bb8f7a97f32f93",
          "user_type": "people",
          "url_token": "zero-zhihu",
          "name": "feifeirun",
          "headline": "一个不爱折腾的程序员不是一个好吉他手",
          "avatar_url": "https://picx.zhimg.com/50/v2-f9bff4d0c2df7d97239f7ce0617bcee5_l.jpg?source=b6762063",
          "is_org": false,
          "gender": 1,
          "followers_count": 182,
          "is_following": false,
          "is_followed": false
        },
        "title": "202412 ubuntu上搭建ragflow遇到的问题记录",
        "image_url": "https://picx.zhimg.com/v2-c2fe1342c1aff8d58a1b52b615f6f477.jpg?source=7e7ef6e2&needBackground=1",
        "comment_permission": "all",
        "created": 1734950055,
        "updated": 1734950055,
        "voteup_count": 14,
        "voting": 0,
        "comment_count": 18,
        "linkbox": {
          "category": "",
          "pic": "",
          "title": "",
          "url": ""
        },
        "excerpt": "一、未知的host-gateway错误修改docker/docker-compose.yml文件 # 将host-gateway修改成具体的内部网络ip - &#34;host.docker.internal:host-gateway&#34; - &#34;host.docker.internal: 172.17.0.1&#34;二、redis起不来，提示：Can&#39;t initialize Background Jobs. Error message: Operation not..修改/docker/docker-compose-base.yml文件，增加 privileged: true属性。其他类往挂载卷内写入提示被拒绝的容器都是相同的问题。建议把mysql、ragfl…",
        "excerpt_new": "一、未知的host-gateway错误修改docker/docker-compose.yml文件 # 将host-gateway修改成具体的内部网络ip - &#34;host.docker.internal:host-gateway&#34; - &#34;host.docker.internal: 172.17.0.1&#34;二、redis起不来，提示：Can&#39;t initialize Background Jobs. Error message: Operation not..修改/docker/docker-compose-base.yml文件，增加 privileged: true属性。其他类往挂载卷内写入提示被拒绝的容器都是相同的问题。建议把mysql、ragfl…",
        "preview_type": "default",
        "preview_text": "",
        "content": "<h3>一、未知的host-gateway错误</h3><p data-pid=\"wkKmFFeS\">修改docker/docker-compose.yml文件</p><div class=\"highlight\"><pre><code class=\"language-text\"># 将host-gateway修改成具体的内部网络ip\n- &#34;host.docker.internal:host-gateway&#34;\n- &#34;host.docker.internal: 172.17.0.1&#34;</code></pre></div><h3>二、redis起不来，提示：Can&#39;t initialize Background Jobs. Error message: Operation not..</h3><p data-pid=\"_mdM9P0z\">修改/docker/docker-compose-base.yml文件，增加 privileged: true属性。其他类往挂载卷内写入提示被拒绝的容器都是相同的问题。建议把mysql、ragflow-server也加上此属性</p><div class=\"highlight\"><pre><code class=\"language-text\">redis:\n    image: valkey/valkey:8\n    #image: redis:latest\n    container_name: ragflow-redis\n    command: redis-server --requirepass ${REDIS_PASSWORD} --maxmemory 128mb --maxmemory-policy allkeys-lru\n    privileged: true\n    env_file: .env\n    ports:\n      - ${REDIS_PORT}:6379\n    volumes:\n      - redis_data:/data\n    networks:\n      - ragflow\n    restart: on-failure</code></pre></div><h3>三、mysql 容器起不来，提示数据库指定磁盘路径不为空</h3><p data-pid=\"nxWyt3fG\">第一次安装时出问题了，导致volume内已经初始化了文件，所以之后再次init时，会被停掉，解决办法是：先把所有服务down掉，然后再此检查docker_mysql_data volume是否有残留,如果没有删除掉，需手动删除一下此挂载卷。删除后再重新启动。</p><div class=\"highlight\"><pre><code class=\"language-bash\">docker-compose -f /docker/docker-compose.yml down\ndocker volume ls \ndoker volume rm xxx</code></pre></div><h3>四、修改ragflow web访问端口</h3><p data-pid=\"W3_VFBj5\">将80端口修改成28080</p><div class=\"highlight\"><pre><code class=\"language-bash\"><span class=\"nb\">cd</span> ragflow/docker\nvi docker-compose.yml\nports:\n      - <span class=\"si\">${</span><span class=\"nv\">SVR_HTTP_PORT</span><span class=\"si\">}</span>:9380\n      - 28080:80\n      - 443:443</code></pre></div><h3>五、docker 镜像仓库访问不到</h3><p data-pid=\"qtW2xwiU\">多找一点镜像源挂载上去， vi /etc/docker/daemon.json</p><div class=\"highlight\"><pre><code class=\"language-json\"><span class=\"p\">{</span>\n<span class=\"nt\">&#34;registry-mirrors&#34;</span><span class=\"p\">:[</span>\n    <span class=\"s2\">&#34;http://docker.mirrors.ustc.edu.cn&#34;</span><span class=\"p\">,</span>\n    <span class=\"s2\">&#34;http://hub-mirror.c.163.com&#34;</span><span class=\"p\">,</span>\n    <span class=\"s2\">&#34;http://registry.docker-cn.com&#34;</span><span class=\"p\">,</span>\n    <span class=\"s2\">&#34;https://3laho3y3.mirror.aliyuncs.com&#34;</span><span class=\"p\">,</span>\n    <span class=\"s2\">&#34;https://docker.888666222.xyz&#34;</span><span class=\"p\">,</span>\n    <span class=\"s2\">&#34;https://docker.fxxk.dedyn.io&#34;</span><span class=\"p\">,</span>\n    <span class=\"s2\">&#34;https://docker.1ms.run&#34;</span><span class=\"p\">,</span>\n    <span class=\"s2\">&#34;https://doublezonline.cloud&#34;</span><span class=\"p\">,</span>\n    <span class=\"s2\">&#34;https://dislabaiot.xyz&#34;</span><span class=\"p\">,</span>\n    <span class=\"s2\">&#34;https://docker.fxxk.dedyn.io&#34;</span><span class=\"p\">,</span>\n    <span class=\"s2\">&#34;https://dockerpull.org&#34;</span><span class=\"p\">,</span>\n    <span class=\"s2\">&#34;https://docker.unsee.tech&#34;</span><span class=\"p\">,</span>\n    <span class=\"s2\">&#34;https://hub.rat.dev&#34;</span><span class=\"p\">,</span>\n    <span class=\"s2\">&#34;https://docker.1panel.live&#34;</span><span class=\"p\">,</span>\n    <span class=\"s2\">&#34;https://docker.nastool.de&#34;</span><span class=\"p\">,</span>\n    <span class=\"s2\">&#34;https://docker.zhai.cm&#34;</span><span class=\"p\">,</span>\n    <span class=\"s2\">&#34;https://docker.5z5f.com&#34;</span><span class=\"p\">,</span>\n    <span class=\"s2\">&#34;https://a.ussh.net&#34;</span><span class=\"p\">,</span>\n    <span class=\"s2\">&#34;https://docker.udayun.com&#34;</span><span class=\"p\">,</span>\n    <span class=\"s2\">&#34;https://hub.geekery.cn&#34;</span>\n<span class=\"p\">],</span>\n<span class=\"nt\">&#34;insecure-registries&#34;</span><span class=\"p\">:[</span>\n    <span class=\"s2\">&#34;docker.mirrors.ustc.edu.cn&#34;</span><span class=\"p\">,</span>\n    <span class=\"s2\">&#34;registry.docker-cn.com&#34;</span>\n<span class=\"p\">],</span>\n<span class=\"nt\">&#34;iptables&#34;</span><span class=\"p\">:</span> <span class=\"kc\">false</span>\n<span class=\"p\">}</span></code></pre></div><p data-pid=\"qJpABScO\">sudo systemctl restart docker</p>",
        "is_labeled": false,
        "visited_count": 11036,
        "thumbnails": [
          "https://picx.zhimg.com/v2-c2fe1342c1aff8d58a1b52b615f6f477.jpg?source=7e7ef6e2&needBackground=1",
          "https://picx.zhimg.com/50/v2-740c705d68e746c07b7c2053fa206797_720w.jpg?source=b6762063"
        ],
        "favorite_count": 33,
        "article_type": "normal",
        "is_navigator": false,
        "navigator_vote": false,
        "vote_next_step": "vote"
      },
      "brief": "{\"source\": \"TS\", \"type\": \"article\", \"id\": 14231142930}",
      "attached_info": "CswGCMiNnLKNw9TltgEQBxoJMjUxODY4OTk3IKf5pLsGKA4wEkDmA0ooCh1UU19TT1VSQ0VfTkVBUkxJTkVfQ09OVEVOVF9WMhIBMBgAIAA6AEoxCiZUU19TT1VSQ0VfVEVYVF9NVUxUSVZJRVdfR0NGX1VTRVJDRl9WMRIBMBgAIAA6AGIgZjA3NWJiMDBjMjlmNGMzMzYyNWE1OWJiMzUxYWUwYTdyCzE0MjMxMTQyOTMwggFfaHR0cHM6Ly9waWN4LnpoaW1nLmNvbS92Mi1jMmZlMTM0MmMxYWZmOGQ1OGExYjUyYjYxNWY2ZjQ3Ny5qcGc/c291cmNlPTdlN2VmNmUyJm5lZWRCYWNrZ3JvdW5kPTGqAQlyZWNvbW1lbmTCASAzZDliMDY1N2E5MTY0NzNiOTViYjhmN2E5N2YzMmY5M/IBCggMEgZOb3JtYWzyASgIChIkNzE2YmQxNGYtOGUyNy00YTI3LThmMDQtZDAxZDMzN2M4ZjRh8gEGCAsSAjgyggIAiAKBssX5jDOSAiAzZDliMDY1N2E5MTY0NzNiOTViYjhmN2E5N2YzMmY5M5oCAMoCFVVzZXJMY25FeGl0V2VpZ2h0UnVsZcoCFENvbnRlbnRBZ2VXZWlnaHRSdWxlygIXU2FtZUF1dGhvcklzb2xhdGlvblJ1bGXaAh1UU19TT1VSQ0VfTkVBUkxJTkVfQ09OVEVOVF9WMugCAvoCC05PUk1BTF9GTE9XigMgMDk0NzdlMjU0NzgzNDU4NTk0N2Y5YzAzMGU0Y2ZjMzSaAw0KAnYyEAAaBW90aGVyqAOcVtgDAPoDThIMVU5LTk9XTl9NT0RFIAAqDU5PX0lNQUdFX01PREU6LQgCEIUTGOkHIiN2Mi1jMmZlMTM0MmMxYWZmOGQ1OGExYjUyYjYxNWY2ZjQ3N4AEAIgEAJIEBk5vcm1hbJoEATKgBACoBACwBAC6BAJhacIEAzQwMMgEANIED+aOqOiNkOW3suabtOaWsNgEAPAEAPkEAAAAAPZilj+BBQAAAAAAAAAAiQXyoBhomVTZP5IFAJoFA2RmdKIFA2RmdLIFATG5BQAAAAAAAAAA0AUA4AUA6AUA8AVSkAYAoAbqA6gGAZICJgoJMjUxODY4OTk3EgsxNDIzMTE0MjkzMBgHIgpJTUFHRV9URVhU",
      "action_card": false
    },
    {
      "id": "487_1755822774.178",
      "type": "feed",
      "offset": 487,
      "verb": "TOPIC_ACKNOWLEDGED_ANSWER",
      "created_time": 1755822774,
      "updated_time": 1755822774,
      "target": {
        "id": "1941542473961836640",
        "type": "answer",
        "url": "https://api.zhihu.com/answers/1941542473961836640",
        "author": {
          "id": "92698c0219d00988f3ae6dc7d586fbd5",
          "url": "https://api.zhihu.com/people/92698c0219d00988f3ae6dc7d586fbd5",
          "user_type": "people",
          "url_token": "ye-yu-zhi-feng",
          "name": "夜雨星风",
          "headline": "一个懂点命理学的人。公众号：夜雨星风",
          "avatar_url": "https://picx.zhimg.com/50/v2-bba3d44b34efa992bce9c29eb1edc0f8_l.jpg?source=b6762063",
          "is_org": false,
          "gender": 1,
          "followers_count": 74562,
          "is_following": false,
          "is_followed": false
        },
        "created_time": 1755679797,
        "updated_time": 1755679797,
        "voteup_count": 318,
        "thanks_count": 9,
        "comment_count": 48,
        "is_copyable": true,
        "question": {
          "id": "440629210",
          "type": "question",
          "url": "https://api.zhihu.com/questions/440629210",
          "author": {
            "id": "98eae063a3409508492bcc2eef3b5c4d",
            "url": "https://api.zhihu.com/people/98eae063a3409508492bcc2eef3b5c4d",
            "user_type": "people",
            "url_token": "dfjl-jy",
            "name": "记忆之光",
            "headline": "世界记忆总冠军、最强大脑王峰团队",
            "avatar_url": "https://picx.zhimg.com/50/v2-25f6df79a426b4e1f04556d42a00247d_l.jpg?source=b6762063",
            "is_org": false,
            "gender": 0,
            "followers_count": 286,
            "is_following": false,
            "is_followed": false
          },
          "title": "你记得最深的一首古诗词是什么？",
          "created": 1611300184,
          "answer_count": 0,
          "follower_count": 0,
          "comment_count": 2,
          "bound_topic_ids": [
            13066,
            168808,
            197389
          ],
          "is_following": false,
          "excerpt": "",
          "relationship": {
            "is_author": false
          },
          "detail": "",
          "question_type": "normal"
        },
        "excerpt": "大约十几年前，我读到：” 青青陵上柏，磊磊涧中石。人生天地间，忽如远行客“。觉得写的很好，但是又不知道好在哪里。因为，全诗的跳跃性很强，一会儿是写人生的感受，一会儿是写眼前的景色，一会儿是写古柏青松，一会儿又是写涧中流石。但我还是记住了这几句话。 我前段时间，再读这首诗，觉得其气象高远，远非唐诗与宋词可比，汉代乐府诗，常有一种登高望远，极视宇宙之无穷，而人世之有限之感。尤其是此诗，宛若，秋后登高望…",
        "excerpt_new": "大约十几年前，我读到：” 青青陵上柏，磊磊涧中石。人生天地间，忽如远行客“。觉得写的很好，但是又不知道好在哪里。因为，全诗的跳跃性很强，一会儿是写人生的感受，一会儿是写眼前的景色，一会儿是写古柏青松，一会儿又是写涧中流石。但我还是记住了这几句话。 我前段时间，再读这首诗，觉得其气象高远，远非唐诗与宋词可比，汉代乐府诗，常有一种登高望远，极视宇宙之无穷，而人世之有限之感。尤其是此诗，宛若，秋后登高望…",
        "preview_type": "default",
        "preview_text": "",
        "reshipment_settings": "allowed",
        "content": "<p data-pid=\"5JGOT2PR\">大约十几年前，我读到：”<b>青青陵上柏，磊磊涧中石。人生天地间，忽如远行客“。</b>觉得写的很好，但是又不知道好在哪里。</p><p data-pid=\"_yZWWSex\">因为，全诗的跳跃性很强，一会儿是写人生的感受，一会儿是写眼前的景色，一会儿是写古柏青松，一会儿又是写涧中流石。但我还是记住了这几句话。</p><p data-pid=\"skC7MlBh\">我前段时间，再读这首诗，觉得其气象高远，远非唐诗与宋词可比，汉代乐府诗，常有一种登高望远，极视宇宙之无穷，而人世之有限之感。尤其是此诗，宛若，秋后登高望远，见到万物衰亡，而感慨人生之不易的境况。</p><p data-pid=\"GffAAqmR\">一个人独立苍茫，俯仰兴怀：向上看，山上古柏青青，四季不凋；向下看，涧中众石磊磊，千秋不灭。头顶的天，脚底的地，当然更其永恒；而生于天地之间的人呢，却像出远门的旅人那样，匆匆忙忙，跑回家去。</p><p data-pid=\"IALtirt0\"><b>青青陵上柏，磊磊涧中石。人生天地间，忽如远行客。</b>这句话真是写的极好。</p><p></p><p></p>",
        "relationship": {
          "is_thanked": false,
          "is_nothelp": false,
          "voting": 0
        },
        "is_labeled": false,
        "visited_count": 16783,
        "favorite_count": 152,
        "answer_type": "normal",
        "is_navigator": false,
        "navigator_vote": false,
        "vote_next_step": "vote"
      },
      "brief": "{\"source\": \"TS\", \"type\": \"answer\", \"id\": 1941542473961836640}",
      "attached_info": "CpAGCMiNnLKNw9TltgEQBBoJNzQzMTI0MTMzILWYlsUGKL4CMDBA5wNKWwopVFNfU09VUkNFX0hPVF9DUk9TU19SRUFMX1RJTUVfTkVXX0NPTlRFTlQSKGhvdF9yZWNhbGxfcmVhbHRpbWVfdDpuZXc3ZDoyMDI1LTA4LTIyOjEYACAAOgBaCDYwMTk1NTMxYiBmMDc1YmIwMGMyOWY0YzMzNjI1YTU5YmIzNTFhZTBhN3ITMTk0MTU0MjQ3Mzk2MTgzNjY0MIoBCTQ0MDYyOTIxMKoBCXJlY29tbWVuZMIBIDkyNjk4YzAyMTlkMDA5ODhmM2FlNmRjN2Q1ODZmYmQ18gEKCAwSBk5vcm1hbPIBKAgKEiRlZjZjZDhlYy1iZmE3LTQzYjgtYTQ3Ni03ZDMzY2QyN2JhZGPyAQYICxICODKCAgCIAoGyxfmMM5ICIDkyNjk4YzAyMTlkMDA5ODhmM2FlNmRjN2Q1ODZmYmQ1mgIAygIWU2hvckludGVyZXN0V2VpZ2h0UnVsZcoCFVVzZXJMY25FeGl0V2VpZ2h0UnVsZcoCFVF1ZXN0aW9uSXNvbGF0aW9uUnVsZdoCKVRTX1NPVVJDRV9IT1RfQ1JPU1NfUkVBTF9USU1FX05FV19DT05URU5U6AIC+gILTk9STUFMX0ZMT1eKAyAwOTQ3N2UyNTQ3ODM0NTg1OTQ3ZjljMDMwZTRjZmMzNJoDDQoCdjIQABoFb3RoZXKoA4+DAdgDAOoDImhvdENyb3NzUmVhbFRpbWVOZXdDb250ZW50UmVjYWxsZXL6Ax8SDFVOS05PV05fTU9ERSAAKg1OT19JTUFHRV9NT0RFgAQAiAQAkgQGTm9ybWFsmgQBMqAEAKgEALAEALoEBm1hbnVhbMIEAzE1OcgEANIED+aOqOiNkOW3suabtOaWsNgEAPAEAPkEAAAA4LNroD+BBQAAAAAAAAAAiQXyoBhomVTZP5IFAJoFA2RmdKIFA2RmdLIFATG5BQAAAAAAAAAA0AUA4AUA6AUA8AVSkAYAoAbrA6gGA5ICLgoJNzQzMTI0MTMzEhMxOTQxNTQyNDczOTYxODM2NjQwGAQiCklNQUdFX1RFWFQ=",
      "action_card": false
    },
    {
      "id": "488_1755822774.418",
      "type": "feed",
      "offset": 488,
      "verb": "TOPIC_ACKNOWLEDGED_ARTICLE",
      "created_time": 1755822774,
      "updated_time": 1755822774,
      "target": {
        "id": "1933800275090584420",
        "type": "article",
        "url": "https://api.zhihu.com/articles/1933800275090584420",
        "author": {
          "id": "99724c6e512cab8c72bbd9dd793a729c",
          "url": "https://api.zhihu.com/people/99724c6e512cab8c72bbd9dd793a729c",
          "user_type": "people",
          "url_token": "46-93-87-82-29",
          "name": "红豆生男模",
          "headline": "爽文写手",
          "avatar_url": "https://picx.zhimg.com/50/v2-52cffa6dd00399130b4838d5ceff5f86_l.jpg?source=b6762063",
          "is_org": false,
          "gender": 1,
          "followers_count": 46,
          "is_following": false,
          "is_followed": false
        },
        "title": "分享一下我自己的躺平生活",
        "comment_permission": "all",
        "created": 1753839467,
        "updated": 1754188238,
        "voteup_count": 193,
        "voting": 0,
        "comment_count": 133,
        "linkbox": {
          "category": "",
          "pic": "",
          "title": "",
          "url": ""
        },
        "excerpt": "首先我有一处农村宅基地。还有一处郊区的房产。四亩土地。3万多的个人存款。这是我目前可以支配的。   3万多的存款全部转到了理财通每日的利息，我是想努力去打平我的话费。主卡一个月6块钱的保号，副卡29块钱180g（流量用不完，还可以存到下个月用）。目前来说是有点距离。 现在想努力的把一个月利息提升到60块。这就意味着我还要再赚3多万。 今年夏天比较热，开空调次数多了电费高。以我现有的知识，这种气候是暖相位，持续时间2…",
        "excerpt_new": "首先我有一处农村宅基地。还有一处郊区的房产。四亩土地。3万多的个人存款。这是我目前可以支配的。   3万多的存款全部转到了理财通每日的利息，我是想努力去打平我的话费。主卡一个月6块钱的保号，副卡29块钱180g（流量用不完，还可以存到下个月用）。目前来说是有点距离。 现在想努力的把一个月利息提升到60块。这就意味着我还要再赚3多万。 今年夏天比较热，开空调次数多了电费高。以我现有的知识，这种气候是暖相位，持续时间2…",
        "preview_type": "default",
        "preview_text": "",
        "content": "<p data-pid=\"-12ALysK\">首先我有一处农村宅基地。还有一处郊区的房产。四亩土地。3万多的个人存款。这是我目前可以支配的。</p><figure data-size=\"normal\"><img src=\"https://pic3.zhimg.com/v2-57f3b9cab1500a65b0ba5c3e91c6d454_1440w.jpg\" data-rawwidth=\"1440\" data-rawheight=\"3200\" data-size=\"normal\" data-caption=\"\" data-original-token=\"v2-ddd6b7efebc7093d43c20e8c0069a058\" class=\"origin_image zh-lightbox-thumb\" width=\"1440\" data-original=\"https://pic3.zhimg.com/v2-57f3b9cab1500a65b0ba5c3e91c6d454_r.jpg\"/></figure><p data-pid=\"_PNzeIy0\">3万多的存款全部转到了理财通每日的利息，我是想努力去打平我的话费。主卡一个月6块钱的保号，副卡29块钱180g（流量用不完，还可以存到下个月用）。目前来说是有点距离。</p><p data-pid=\"iaIkWR7I\">现在想努力的把一个月利息提升到60块。这就意味着我还要再赚3多万。</p><p data-pid=\"6okPvXKe\">今年夏天比较热，开空调次数多了电费高。以我现有的知识，这种气候是暖相位，持续时间20年。之所以要提升到60块，就是因为这部分电费。</p><p data-pid=\"zmp1RSfC\">吃的方面是自家种的菜，肉的话要去买。但是我从小吃肉吃腻了。现在买一次两斤的肉，可以吃好长时间，至少是半个月。每顿菜里面加点肉片就可以。</p><figure data-size=\"normal\"><img src=\"https://pica.zhimg.com/v2-9125282fd520a7857cb53fa3a72238e4_1440w.jpg\" data-rawwidth=\"2448\" data-rawheight=\"3264\" data-size=\"normal\" data-caption=\"\" data-original-token=\"v2-58f7cfe39c567309b321131bb53f758f\" class=\"origin_image zh-lightbox-thumb\" width=\"2448\" data-original=\"https://pica.zhimg.com/v2-9125282fd520a7857cb53fa3a72238e4_r.jpg\"/></figure><p data-pid=\"3Vi9l2Zq\">因为是跟奶奶一起住。最近那个数字电视的线坏了。用电脑给奶奶放了好几部电视剧，流量有点打不住。还好郊区那个房子有线，改天过去取过来换一下。</p><figure data-size=\"normal\"><img src=\"https://pic3.zhimg.com/v2-9a8fa9857b4428c1218f48abaee3c37a_1440w.jpg\" data-rawwidth=\"2448\" data-rawheight=\"3264\" data-size=\"normal\" data-caption=\"\" data-original-token=\"v2-a819e2b73426a1953248320972b9b2f8\" class=\"origin_image zh-lightbox-thumb\" width=\"2448\" data-original=\"https://pic3.zhimg.com/v2-9a8fa9857b4428c1218f48abaee3c37a_r.jpg\"/></figure><p data-pid=\"5UYC6bm8\">跟长辈在一起还是比较幸福。因为现在一个月就能听到一次丧事的念经。这就是那些有基础疾病的老人，这一波是走的比较快的。我在家至少奶奶的精神头特别好。算是我这米虫的唯一用处。</p><p data-pid=\"j_1vRvxX\">其实特别想跑一会儿外卖。要跑外卖就要去市中心，或者去西安。这时候就要房租了。县城的外卖量还是不大。</p><p data-pid=\"RT5dBhkL\">但是家人都寄希望于我考公。这大概率是我失业之后，比较优秀的一条出路。所以都特别反对我在这个时期去跑外卖。考公我是没有一点信心。</p><p data-pid=\"Cj-3xrAh\">一是因为我不够聪明。第2个就是因为我的逻辑思维方式。看那些题，答案写着写着很容易跑偏。因为他要转着弯儿去夸人。我脑袋不太容易转弯。而且一件事情他有好多优点，标准答案上的优点太多了，而我能想到和感受到的优点数量，连及格线都达不到。</p><p data-pid=\"HW0_p3kg\">只能走一步看一步，往那种偏僻的地方考。郊区不是还有一处房产吗？三层楼的。旁边还有三亩土地。想的是把这个房子跟土地租出去。</p><p data-pid=\"ZuQOsFLY\">他往北走1公里就是高铁站。上西安市50分钟到西安北站。往南走就是重庆这个时间就长了，四个小时。县里有两家医院都在高铁站旁边。</p><p data-pid=\"ws4AU9YC\">周围就是两个度假村。环境还可以。想在网上找平台把信息挂出去，看有没有人来租。</p><p data-pid=\"XDld35-9\">我现在就是每天读会书。刷会儿视频，看会儿小说，打会游戏。网上更多的是焦虑的宣传。毕竟我看他们都能在城市住得起房，还能那样的躺平。 要知道房租可老贵了。</p><p data-pid=\"fz0xtbt6\">在外面租房，这都叫躺平。那我这算什么？摆烂吗？通过这种事情我还是可以看得出，大家都过得挺不错的。</p><p data-pid=\"YfW7JsW9\">就是我比较拮据，比较窘迫。花了3500，整了一套电脑设备（包含主机，电脑显示屏，显示屏动力学支架，鼠标键盘，音响等）。我打个黑神话悟空都不敢直接去买。还是翻了墙去俄罗斯那边找，结果俄罗斯那边的网友说跟中国要搞好关系，就不能随意上架这种盗版游戏。</p><figure data-size=\"normal\"><img src=\"https://pic3.zhimg.com/v2-fdf626ce1b84fe252f0527c43ae8b5e0_1440w.jpg\" data-rawwidth=\"1080\" data-rawheight=\"2400\" data-size=\"normal\" data-caption=\"\" data-original-token=\"v2-e87fb10c682b2e7c8b388dae0708e9e6\" class=\"origin_image zh-lightbox-thumb\" width=\"1080\" data-original=\"https://pic3.zhimg.com/v2-fdf626ce1b84fe252f0527c43ae8b5e0_r.jpg\"/></figure><p data-pid=\"OPiiqOff\">然后我就去美国那边找。玩个游戏都不敢花钱。人家躺平一个月用的房租都够我买两个黑神话。每次看到这样的躺平方式，感觉对我而言就是莫大的嘲讽。</p><p data-pid=\"cnu7hvmn\">现在时间7月29号早上8:58。我听到一串响炮，然后奶奶就过来问我，是不是咱旁边的那个去世了。我脑袋瓜子嗡嗡的。</p><p data-pid=\"GgJLGDNh\">我就反问奶奶，为什么你一定要把事情想的这么糟糕呢？放鞭炮万一是买新车了呢？奶奶就摇摇头。</p><p data-pid=\"DIzFatDz\">那继续说我的事吧。打完那个黑神话之后，我去玩三角洲。还想搬砖赚点钱，结果唉，太难了。我也去找其他的搬砖游戏，如果你想挣大钱的话那是骗人的，因为游戏搬砖还是搞的教育培训模式。正常人搬砖只能赚点零花钱。</p><p data-pid=\"K_JL9I36\">跟一个网上认识的研究生学姐打游戏的时候。我就特别想考研。还是感觉学校最适合我。但家里人都比较反对，都认为我要考公。我也只能考啊，是不是那块料我都不清楚。</p><p data-pid=\"wMhgpaZW\">我也在学习日语，考不上了，还能去那边打零工。走一步看一步。保持好自身健康。保护好自己的肾。因为吃不好喝不好的话，肾衰竭要做肾透析。</p><p data-pid=\"NbJHoWGV\">并且现在的公立医院都自负盈亏。亏损严重的话都是申请破产，但目前政策上不同意。我原本工作的时候还在想，现在23岁！到时候身体有问题了，还能享受到如今这般医疗待遇吗？</p><p data-pid=\"e33cg9ZT\">现在没交医保了，完全没有这方面的考虑了。只能照顾好自己的身体。今年夏天干旱严重，水质是有点硬了。但还是比较干净。因为我们这边的政策就是不允许污染型企业。全都是为了保证下游北方城市的用水。因为这条江叫汉江，而我在汉中。阿弥陀佛，感谢政策。</p><p data-pid=\"K6shSDQd\">我专门翻出了以前的老款饮水机。它里面那个滤芯还是挺有用的。过滤之后那种白色钙化杂质直接没了。</p><figure data-size=\"normal\"><img src=\"https://pic4.zhimg.com/v2-fbb9ed825b2e90dc24a85c792d21f6b3_1440w.jpg\" data-rawwidth=\"2448\" data-rawheight=\"3264\" data-size=\"normal\" data-caption=\"\" data-original-token=\"v2-7afb0a9b4524006fe6e85fba9834bc5f\" class=\"origin_image zh-lightbox-thumb\" width=\"2448\" data-original=\"https://pic4.zhimg.com/v2-fbb9ed825b2e90dc24a85c792d21f6b3_r.jpg\"/></figure><p data-pid=\"N_o0_2E7\">洗的时候也比较好洗。下面这两个龙头，到时候想办法把它改进一下。因为我刚翻出来拆的时候，它里面老化了，装的时候就没装好。把里面那个加热的去掉，这个只装冷水过滤。我是把水烧开之后凉冷然后倒进去的。</p><p data-pid=\"UR3Qvj7p\">冬天的话再看看水质如何。要还是这样硬，那只能烧开、凉冷、过滤再加热。大家一定要注意自己的肾，这个是除了呼吸道之外，直接跟人的吃喝挂钩特别易坏的。</p><p data-pid=\"-o60joNi\">这是刚刚做好的饭。玉米粥。</p><figure data-size=\"normal\"><img src=\"https://pic4.zhimg.com/v2-f9940034912cd953e81cbaf76be99357_1440w.jpg\" data-rawwidth=\"2448\" data-rawheight=\"3264\" data-size=\"normal\" data-caption=\"\" data-original-token=\"v2-e81442d858442534d221694adabd7776\" class=\"origin_image zh-lightbox-thumb\" width=\"2448\" data-original=\"https://pic4.zhimg.com/v2-f9940034912cd953e81cbaf76be99357_r.jpg\"/></figure><p data-pid=\"Kqcvu4PO\">因为夏天太热，吃不进去。只能早上喝点这种。现在回家了，再也吃不上那种炸鸡，汉堡。也算是变相解决我的饮食问题吧。待会儿丝瓜炒茄子就好了，里面还有七八片肉增加风味。还有烤的饼。</p><p data-pid=\"W2JAU6QY\">我一般都是早上吃好一点。下午的话就是面。西红柿炒鸡蛋汤。自家种的西红柿还是比较好吃，酸酸甜甜的浇在面上。稍微放一点盐就非常美味。</p><figure data-size=\"normal\"><img src=\"https://pic2.zhimg.com/v2-42aec7890bb1bfb433cfdd0d06180605_1440w.jpg\" data-rawwidth=\"2448\" data-rawheight=\"3264\" data-size=\"normal\" data-caption=\"\" data-original-token=\"v2-8a02a0436ad6d75a5f82674120ba995f\" class=\"origin_image zh-lightbox-thumb\" width=\"2448\" data-original=\"https://pic2.zhimg.com/v2-42aec7890bb1bfb433cfdd0d06180605_r.jpg\"/></figure><p class=\"ztext-empty-paragraph\"><br/></p><figure data-size=\"normal\"><img src=\"https://pica.zhimg.com/v2-5662a09eed7900d4219d1a3e9ea30466_1440w.jpg\" data-rawwidth=\"3264\" data-rawheight=\"2448\" data-size=\"normal\" data-caption=\"\" data-original-token=\"v2-08606f102a17452c8274b13bbf663093\" class=\"origin_image zh-lightbox-thumb\" width=\"3264\" data-original=\"https://pica.zhimg.com/v2-5662a09eed7900d4219d1a3e9ea30466_r.jpg\"/></figure><p data-pid=\"7H7dynPA\">门前就是种丝瓜的地方。出门往左走100多米就是以前的故居。那边已经列为文化遗产。但是我那个小故居倒塌了，奶奶就把它改造成50平的小菜园。菜是吃不完。这边房子其他的土地全都种主食。郊区那边的房子只留了一亩，其余的租给别人种。那一亩地种的是水稻。</p><p data-pid=\"ZM1Dj1g2\">现在门前的这片空地上拉来了好几车沙子和石头，说的是要平整一下，搞一点健身器材。到时候我就能享用了，感谢政府为我的健康事业添砖加瓦。</p><p data-pid=\"c_X9o19e\">有时候就想打会儿羽毛球。想把今年毕业回家，后方200米的女同学叫出来打球。还是放弃了。我怕别人误会。而且跟她也不是太熟。</p><p data-pid=\"wy_gfS1h\">现在就等着表哥在山里面网虾。表哥现在在山里养兔子和羊。想吃虾。有时候生活就是这样惬意，想一想美好的事物就好。</p><p data-pid=\"yp3yCpGS\">我们家现在是三代。奶奶，爸爸和我。爸爸接了爷爷的班。以后有养老金，就差10年了。所以这事不用我操心，把自己活出个人样就足够了。</p><hr/><p data-pid=\"3PHAQvpj\">自家躺平，还是有负面buff的。一个是绕不开家人亲戚的好心好意。一个是他们看不惯我干无意义的事。</p><p data-pid=\"lrrfWOR4\">这两点都不好解决。就是自己的主观意识，我的主观意识特别强大。有点类似于尼采，把太阳比作自己的睾丸。我没有那么夸张，还是比较科学的。</p><p data-pid=\"t6fzQHgT\">在家人或者亲戚，看不惯我躺。要求我干这干那的时候，我全都能理解他们这种想法。但我很明确自己追求的是什么？我从来不追求自由，我只追求生存空间。</p><p data-pid=\"w-JydYNY\">家人或亲戚在我面前的闲言碎语，完全不会对我造成任何影响。因为我清楚干一件事情，无论在哪都会有等价的烦恼。这种烦恼可能源自于物质，也可能源自于精神。</p><p data-pid=\"Z8odHXqj\">物质上的烦恼可以通过在家所掌握的一些资源规避。精神上的烦恼也是通过一些阅读吸收那些精华来规避。</p><p data-pid=\"sTkwdm0b\">精神上状态能这么好，就是因为脑袋里被塞了太多东西，塞得满满的。无论是好的还是坏的都挤在一起，不给外界留下丝毫进入的空间。</p><p data-pid=\"qc98Dr-7\">在行为方式上表现为我离他人很远，离自己很近。天天在家人的眼里干些没有意义的事。只要我不读那些考公的书，那就是没有意义。我的心态挺包容的，包容家人们这样的思维方式。有时候还会引导一下，让奶奶扩散一下思维，听不听那就是奶奶自己的事儿了。</p><figure data-size=\"normal\"><img src=\"https://pic4.zhimg.com/v2-e16906edb135eefaf3ec222130183a0f_1440w.jpg\" data-rawwidth=\"2448\" data-rawheight=\"3264\" data-size=\"normal\" data-caption=\"\" data-original-token=\"v2-9a7e98f47745580bb6c3170cf6a8e227\" class=\"origin_image zh-lightbox-thumb\" width=\"2448\" data-original=\"https://pic4.zhimg.com/v2-e16906edb135eefaf3ec222130183a0f_r.jpg\"/></figure><p data-pid=\"XFFoT5Jq\">曾经的我也是个文艺青年。嗯，不会画画。全都是照着网上的图片，临摹了一下。能看得出来对人体五官的排列，还有头骨的轮廓都是非常糟糕的。</p><figure data-size=\"normal\"><img src=\"https://picx.zhimg.com/v2-b398b577f066c84fd55692ac826b2acf_1440w.jpg\" data-rawwidth=\"2448\" data-rawheight=\"3264\" data-size=\"normal\" data-caption=\"\" data-qrcode-action=\"none\" data-original-token=\"v2-71df066a73f4fb6a873996248c45c0cf\" class=\"origin_image zh-lightbox-thumb\" width=\"2448\" data-original=\"https://picx.zhimg.com/v2-b398b577f066c84fd55692ac826b2acf_r.jpg\"/></figure><p data-pid=\"vSiOXrbk\">也没练过字。正常写字的时候特别难看。以前还背点诗文，但是大学的时候，我还没有找到那个能可以向她背诗的目标。现在都忘完了。</p><p data-pid=\"x8ODJ6Q6\">噢，对，还有重要的一点。就是对生死的看淡。这种看淡，它不是顿悟出来的。是从小到大的一种磨练。小的时候家里经常吵架。爷爷奶奶还有爸爸，火药味特别浓。所以我当时气性也强，从8、9岁的时候就开始在脑子里模拟那种死亡的感觉。</p><p data-pid=\"8KQiNlMQ\">长大了还给那些去世的人写遗书。网上看的一个人自杀，我就带入他那种大概的环境，模拟他的情绪，写一篇遗书。这种事干多之后就有一种共鸣感，别人说我坏话，批评我还是表扬我的时候，我都能直达本质的去对待这件事。</p><p data-pid=\"qFjXsaOZ\">我的乐观，建立在对生死的蔑视。其余的小事就根本不会放在心上。就是说无论再坏，他还能坏到哪去呢？</p><p data-pid=\"ReDyV-tr\">上班的时候一无所有，离职之后其实也一无所有。可能几年之后也还是一无所有。这不是说一定要拥有什么。而是说在他人那有价值有意义的东西，在我这边就一文不值，所以我才称之为一无所有。</p><p data-pid=\"gWCVbarm\">这可能表现有点像，光脚的不怕穿鞋的那种野蛮性。在我看来，奶奶被世名所累。怕这怕那。上了年纪了，还活成这样，我是有点悲伤。</p><p data-pid=\"b6ji4ao-\">怕我以后找不到工作，怕我结不了婚。这个我确实有点头大。因为我在奶奶面前轻飘飘的说出我无所谓结婚，工作肯定能找到（出国，外卖，地摊）。但这样的回答其实对奶奶不太尊重。</p><p data-pid=\"rwMmDzTR\">毕竟老人家年轻时也吃了不少苦，内心和毅力方面肯定是没话说的。老了以后，才发现我这种后辈的本质。我确实愧对奶奶。</p><p data-pid=\"9t6X4KBz\">这种交杂着我和家人期望那种悲伤，只能是在我有了确定的结果或者奶奶等不到的时候，悲伤才能转变为其他的东西。</p><hr/><p data-pid=\"q5P9T3gB\">2025.7.31</p><figure data-size=\"normal\"><img src=\"https://pic1.zhimg.com/v2-1ea12fb6a0a0b0ab44315f05e64d036e_1440w.jpg\" data-rawwidth=\"3264\" data-rawheight=\"2448\" data-size=\"normal\" data-caption=\"\" data-original-token=\"v2-1427adf82e43b7022b5318a3d4f773c4\" class=\"origin_image zh-lightbox-thumb\" width=\"3264\" data-original=\"https://pic1.zhimg.com/v2-1ea12fb6a0a0b0ab44315f05e64d036e_r.jpg\"/></figure><p data-pid=\"oyY6CLDu\">这就是郊区的那个房。今早6点多过来的时候，唱了半路的歌。因为音色还可以，所以即使跑调还是可以入耳的。唱得周杰伦的花海，和苏打绿的就算大雨让整个世界倾倒。</p><figure data-size=\"normal\"><img src=\"https://pica.zhimg.com/v2-408386c5b5cc15c10dc180e9221c2608_1440w.jpg\" data-rawwidth=\"3264\" data-rawheight=\"2448\" data-size=\"normal\" data-caption=\"\" data-original-token=\"v2-d0ac79cc9abdca4acad7f875eb909652\" class=\"origin_image zh-lightbox-thumb\" width=\"3264\" data-original=\"https://pica.zhimg.com/v2-408386c5b5cc15c10dc180e9221c2608_r.jpg\"/></figure><p data-pid=\"lTBMUlI0\">周围环境还是不错的。</p><figure data-size=\"normal\"><img src=\"https://pic3.zhimg.com/v2-28bd47f50d1ee3cdde26ff85c5ac5b34_1440w.jpg\" data-rawwidth=\"4624\" data-rawheight=\"3472\" data-size=\"normal\" data-caption=\"\" data-original-token=\"v2-ee9f4908d5f44526786d6ee777f66242\" class=\"origin_image zh-lightbox-thumb\" width=\"4624\" data-original=\"https://pic3.zhimg.com/v2-28bd47f50d1ee3cdde26ff85c5ac5b34_r.jpg\"/></figure><p data-pid=\"MQ7Na1Aa\">这是旁边的一个度假村，现在这个房子后方300米。里面有室内球场。这个度假村旁边就是小溪。度假村的右边还有别人承包的小鱼塘。</p><figure data-size=\"normal\"><img src=\"https://pic4.zhimg.com/v2-2debd05e5b3babe6a0e339a57e55bd8b_1440w.jpg\" data-rawwidth=\"3456\" data-rawheight=\"4608\" data-size=\"normal\" data-caption=\"\" data-original-token=\"v2-42e4a9d29c59c144230f3b3b891c642c\" class=\"origin_image zh-lightbox-thumb\" width=\"3456\" data-original=\"https://pic4.zhimg.com/v2-2debd05e5b3babe6a0e339a57e55bd8b_r.jpg\"/></figure><p data-pid=\"BIEBeR4E\">今年23岁，头盔代习惯了，因为苏州那边查的比较严查一次扣20。我身后是一个农业公司。因为确实政策不允许一些污染企业，所以我这边的全都是一些农业，畜牧业的小企业。最多的就是山里面那些种茶的。</p><p data-pid=\"uaX3NPTi\">这个小企业门口就是郊区这边的一亩水稻。</p><figure data-size=\"normal\"><img src=\"https://pica.zhimg.com/v2-3e2668c6aea8aa5c1e53a46a82dd450c_1440w.jpg\" data-rawwidth=\"3264\" data-rawheight=\"2448\" data-size=\"normal\" data-caption=\"\" data-original-token=\"v2-60264e19903e52db43f736bb5db6da89\" class=\"origin_image zh-lightbox-thumb\" width=\"3264\" data-original=\"https://pica.zhimg.com/v2-3e2668c6aea8aa5c1e53a46a82dd450c_r.jpg\"/></figure><p data-pid=\"_53fKD9z\">我在这边拿完天线，就跟奶奶马上回来。</p><figure data-size=\"normal\"><img src=\"https://pica.zhimg.com/v2-ba112678a6f7765974b17774c79f114a_1440w.jpg\" data-rawwidth=\"3472\" data-rawheight=\"4624\" data-size=\"normal\" data-caption=\"\" data-original-token=\"v2-a89b598f906f180395795e01ce36eef9\" class=\"origin_image zh-lightbox-thumb\" width=\"3472\" data-original=\"https://pica.zhimg.com/v2-ba112678a6f7765974b17774c79f114a_r.jpg\"/></figure><p data-pid=\"bNY68aEo\">早上一定要吃好。菜里面加一点肉就很香了。</p><figure data-size=\"normal\"><img src=\"https://pica.zhimg.com/v2-c972e1084050e4865e7730d42089f430_1440w.jpg\" data-rawwidth=\"3472\" data-rawheight=\"4624\" data-size=\"normal\" data-caption=\"\" data-original-token=\"v2-1f6e1a9a194770853f8c543f4d6e3c14\" class=\"origin_image zh-lightbox-thumb\" width=\"3472\" data-original=\"https://pica.zhimg.com/v2-c972e1084050e4865e7730d42089f430_r.jpg\"/></figure><p data-pid=\"L3eegudP\">这是昨天邻居爷爷给我们送的梨。一边吃一边写今早的事。是青皮梨，吃起来稍微有一点酸，但是它没有黄皮梨那种颗粒感。</p><hr/><p data-pid=\"zTv345bT\">加更一下。就是这个流览量还有点赞的。远远高于我其他贴。</p><p data-pid=\"8tgOOpn8\">一部分源自于平台对于躺平这个关键词的推送机制。</p><p data-pid=\"yMJa4IvV\">还有一部分就是各位对于这种惬意生活的追求。</p><p data-pid=\"4blVTDIO\">你不能说他错了。但是这种文章和视频看多了之后。他绝对是会对你个人生活造成影响。如果你道心不坚的话。</p><p data-pid=\"Zxy9rkpm\">我的抖音上还有知乎上刷的一些躺平的帖子。那抖音上是说实话太假。那种躺平生活其实已经躺在滤镜中了。尤其是那些在外面租房躺平的，各种各样的隐性烦恼是层出不穷的。远远不是那短短几分钟的视频可以体现出来的。</p><figure data-size=\"normal\"><img src=\"https://pic3.zhimg.com/v2-a82490664a9a08f091984301f3abcd8c_1440w.jpg\" data-rawwidth=\"1440\" data-rawheight=\"3200\" data-size=\"normal\" data-original-token=\"v2-acf20122ec7c9cebc117c415986c585e\" class=\"origin_image zh-lightbox-thumb\" width=\"1440\" data-original=\"https://pic3.zhimg.com/v2-a82490664a9a08f091984301f3abcd8c_r.jpg\"/></figure><p data-pid=\"AKX5ANpL\">这个是老早之前收藏的一个软件。是想了解一下人体骨骼和内脏。我偶尔也会刷到一些神经系统，还有大脑功能的一些文章。里面有些内容会讲到你的行为机制对于大脑神经链接结构的影响。</p><p data-pid=\"qDPo3uuw\">我这里想说的就是你把这个文章看多了之后。大部分人还不跟你讲躺的时候该怎样去进行一些正反馈的事情。只给你拍买菜做饭，口叼一根狗尾巴草，早睡早起，游戏追剧的惬意。要是不经思考的话，你看多了迟早要完。</p><p data-pid=\"mWC9Zhh9\">在躺了之后，如果是一个非常安逸的环境。那你个人没有对新事物的探索激情的话，很容易就成为一个废物。</p><p data-pid=\"eDbboT4d\">我发这个帖，全程没有教大家怎样去躺。这个贴的核本质核心自己想创造一点什么东西。人的那种创造欲望我还是有的。</p><figure data-size=\"normal\"><img src=\"https://pica.zhimg.com/v2-611f7399cbdf3a6283da9a06aff09eaa_1440w.jpg\" data-rawwidth=\"1440\" data-rawheight=\"3200\" data-size=\"normal\" data-original-token=\"v2-c43953b7a61860a5c0e538fa65fc6012\" class=\"origin_image zh-lightbox-thumb\" width=\"1440\" data-original=\"https://pica.zhimg.com/v2-611f7399cbdf3a6283da9a06aff09eaa_r.jpg\"/></figure><p data-pid=\"lGaXyoIE\">生活也是需要一点肾上腺。不是我没选男的，是他这个软件只有女的。但是男女的建模都一样，没啥区别。</p>",
        "is_labeled": false,
        "visited_count": 19263,
        "thumbnails": [
          "https://pica.zhimg.com/50/v2-ad267aae8b7b3136a2f220a5dab2b4a4_720w.jpg?source=b6762063",
          "https://pic1.zhimg.com/50/v2-235002842200789e77ec91f85aa745c6_720w.jpg?source=b6762063",
          "https://pic1.zhimg.com/50/v2-274ba82954cd0abe066c69b1be3098de_720w.jpg?source=b6762063",
          "https://picx.zhimg.com/50/v2-0fa5ad5860748ce620e5128ba38bf869_720w.jpg?source=b6762063",
          "https://picx.zhimg.com/50/v2-d9ef77e76e5cd01ebc273371e617fe3e_720w.jpg?source=b6762063",
          "https://picx.zhimg.com/50/v2-33cafb87a5c49cd46e2b62599bcb9cc3_720w.jpg?source=b6762063",
          "https://pic1.zhimg.com/50/v2-84cee61e516a3b0efcd7bddb668e0e5f_720w.jpg?source=b6762063",
          "https://pic1.zhimg.com/50/v2-08606f102a17452c8274b13bbf663093_720w.jpg?source=b6762063",
          "https://pic1.zhimg.com/50/v2-08e5edccd8d52c9ff878962869a109c9_720w.jpg?source=b6762063",
          "https://pic1.zhimg.com/50/v2-1427adf82e43b7022b5318a3d4f773c4_720w.jpg?source=b6762063",
          "https://pic1.zhimg.com/50/v2-d0ac79cc9abdca4acad7f875eb909652_720w.jpg?source=b6762063",
          "https://picx.zhimg.com/50/v2-a8890144a48fe96b56846350b8cd3165_720w.jpg?source=b6762063",
          "https://pic1.zhimg.com/50/v2-be26b6f4483d7b419bb91511d86aa9cb_720w.jpg?source=b6762063",
          "https://picx.zhimg.com/50/v2-60264e19903e52db43f736bb5db6da89_720w.jpg?source=b6762063",
          "https://pica.zhimg.com/50/v2-46a7e18760e42362fc43535f898d8dda_720w.jpg?source=b6762063",
          "https://pica.zhimg.com/50/v2-574642084e9973b572a804eaa1e800c8_720w.jpg?source=b6762063",
          "https://pic1.zhimg.com/50/v2-95dd17c530b27233845007af1bb9c368_720w.jpg?source=b6762063",
          "https://picx.zhimg.com/50/v2-3a8cfd1fcb754b698b101c95d9717cec_720w.jpg?source=b6762063"
        ],
        "favorite_count": 96,
        "article_type": "normal",
        "is_navigator": false,
        "navigator_vote": false,
        "vote_next_step": "vote"
      },
      "brief": "{\"source\": \"TS\", \"type\": \"article\", \"id\": 1933800275090584420}",
      "attached_info": "CpMMCMiNnLKNw9TltgEQBxoJMjYwOTk2MTI3IOvupcQGKMEBMIUBQOgDSjAKG1RTX1NPVVJDRV9CQVNJQ19JTkZPX1JFQ0FMTBIBMBgAIAA6CnsicmF3IjoiIn1KKAodVFNfU09VUkNFX05FQVJMSU5FX0NPTlRFTlRfVjISATAYACAAOgBiIGYwNzViYjAwYzI5ZjRjMzM2MjVhNTliYjM1MWFlMGE3chMxOTMzODAwMjc1MDkwNTg0NDIwqgEJcmVjb21tZW5kwgEgOTk3MjRjNmU1MTJjYWI4YzcyYmJkOWRkNzkzYTcyOWPyAQoIDBIGTm9ybWFs8gEoCAoSJDcxYzNmOTUyLTNhN2ItNDEwMC1iZWIyLTI4OTA5OWNkNzE0ZvIBBggLEgI4MoICAIgCgbLF+YwzkgIgOTk3MjRjNmU1MTJjYWI4YzcyYmJkOWRkNzkzYTcyOWOaAgDKAhVVc2VyTGNuRXhpdFdlaWdodFJ1bGXKAhdTYW1lQXV0aG9ySXNvbGF0aW9uUnVsZdoCG1RTX1NPVVJDRV9CQVNJQ19JTkZPX1JFQ0FMTOgCAvoCC05PUk1BTF9GTE9XigMgMDk0NzdlMjU0NzgzNDU4NTk0N2Y5YzAzMGU0Y2ZjMzSaAw0KAnYyEAAaBW90aGVyqAO/lgHYAwDqAxFiYXNpY19pbmZvX3JlY2FsbPoD7QYSDFVOS05PV05fTU9ERSAAKg1OT19JTUFHRV9NT0RFOi0IAhCgCxiAGSIjdjItZGRkNmI3ZWZlYmM3MDkzZDQzYzIwZThjMDA2OWEwNTg6LQgEEJATGMAZIiN2Mi01OGY3Y2ZlMzljNTY3MzA5YjMyMTEzMWJiNTNmNzU4ZjotCAMQkBMYwBkiI3YyLWE4MTllMmI3MzQyNmExOTUzMjQ4MzIwOTcyYjliMmY4Oi0IAxC4CBjgEiIjdjItZTg3ZmIxMGM2ODJiMmU3YzhiMzg4ZGFlMDcwOGU5ZTY6LQgEEJATGMAZIiN2Mi03YWZiMGE5YjQ1MjQwMDZmZTZlODVmYmE5ODM0YmM1ZjotCAQQkBMYwBkiI3YyLWU4MTQ0MmQ4NTg0NDI1MzRkMjIxNjk0YWRhYmQ3Nzc2Oi0IBBCQExjAGSIjdjItOGEwMmEwNDM2YWQ2ZDc1YTVmODI2NzQxMjBiYTk5NWY6LQgDEMAZGJATIiN2Mi0wODYwNmYxMDJhMTc0NTJjODI3NGIxM2JiZjY2MzA5MzotCAMQkBMYwBkiI3YyLTlhN2U5OGY0Nzc0NTU4MGJiNmMzMTcwY2Y2YThlMjI3Oi0IBBDAGRiQEyIjdjItMTQyN2FkZjgyZTQzYjcwMjJiNTMxOGEzZDRmNzczYzQ6LQgDEMAZGJATIiN2Mi1kMGFjNzljYzlhYmRjYTRhY2FkN2Y4NzVlYjkwOTY1MjotCAMQkCQYkBsiI3YyLWVlOWY0OTA4ZDVmNDQ1MjY3ODZkNmVlNzc3ZjY2MjQyOi0IBRCAGxiAJCIjdjItNDJlNGE5ZDI5YzU5YzE0NDIzMGYzYjNiODkxYzY0MmM6LQgDEMAZGJATIiN2Mi02MDI2NGUxOTkwM2U1MmRiNDNmNzM2YmI1ZGI2ZGE4OTotCAMQkBsYkCQiI3YyLWE4OWI1OThmOTA2ZjE4MDM5NTc5NWUwMWNlMzZlZWY5Oi0IBBCQGxiQJCIjdjItMWY2ZTFhOWExOTQ3NzA4NTNmOGM1NDNmNGQ2ZTNjMTQ6LQgEEKALGIAZIiN2Mi1hY2YyMDEyMmVjN2M5Y2ViYzExN2M0MTU5ODZjNTg1ZTotCAQQoAsYgBkiI3YyLWM0Mzk1M2I3YTYxODYwYTVjMGU1MzhmYTY1ZmM2MDEygAQAiAQAkgQGTm9ybWFsmgQBMqAEAKgEALAEALoEBm1hbnVhbMIEAzE3MMgEANIED+aOqOiNkOW3suabtOaWsNgEAPAEAPkEAAAA4CRGqj+BBQAAAAAAAAAAiQXyoBhomVTZP5IFAJoFA2RmdKIFA2RmdLIFATG5BQAAAAAAAAAA0AUA4AUA6AUA8AVSkAYAoAbsA6gGAJICLgoJMjYwOTk2MTI3EhMxOTMzODAwMjc1MDkwNTg0NDIwGAciCklNQUdFX1RFWFQ=",
      "action_card": false
    },
    {
      "id": "489_1755822774.921",
      "type": "feed",
      "offset": 489,
      "verb": "TOPIC_ACKNOWLEDGED_ANSWER",
      "created_time": 1755822774,
      "updated_time": 1755822774,
      "target": {
        "id": "1941421093408736078",
        "type": "answer",
        "url": "https://api.zhihu.com/answers/1941421093408736078",
        "author": {
          "id": "4c592f496dc33822b560b382907ff1d0",
          "url": "https://api.zhihu.com/people/4c592f496dc33822b560b382907ff1d0",
          "user_type": "people",
          "url_token": "L.M.Sherlock",
          "name": "Thoughts Memo",
          "headline": "学校≠教育≠技能；文凭溢价=80%信号传递+20%人力资本",
          "avatar_url": "https://picx.zhimg.com/50/v2-f2cea0dc6a98f10d0144cba057f16906_l.jpg?source=b6762063",
          "is_org": false,
          "gender": 1,
          "badge": [
            {
              "type": "identity_people",
              "description": "信息技术行业 算法工程师"
            },
            {
              "type": "super_activity",
              "description": "知势榜教育校园领域影响力榜答主"
            }
          ],
          "followers_count": 124701,
          "is_following": false,
          "is_followed": false
        },
        "created_time": 1755650858,
        "updated_time": 1755650858,
        "voteup_count": 340,
        "thanks_count": 16,
        "comment_count": 23,
        "is_copyable": true,
        "question": {
          "id": "5179490556",
          "type": "question",
          "url": "https://api.zhihu.com/questions/5179490556",
          "author": {
            "id": "b210a8fb04114004e6b341825eb6b31c",
            "url": "https://api.zhihu.com/people/b210a8fb04114004e6b341825eb6b31c",
            "user_type": "people",
            "url_token": "wan-tong-47-65",
            "name": "上思源",
            "headline": "人可以成就伟大的事业",
            "avatar_url": "https://pica.zhimg.com/50/v2-2a6dc8a1d1c82bf62ed8b0f52da752f3_l.jpg?source=b6762063",
            "is_org": false,
            "gender": 1,
            "followers_count": 93,
            "is_following": false,
            "is_followed": false
          },
          "title": "如何评价「如果尊重孩子的天性，那么他就会发现孩子的天性是怕苦怕累怕学习」这个观点？",
          "created": 1732599197,
          "answer_count": 0,
          "follower_count": 0,
          "comment_count": 4,
          "bound_topic_ids": [
            119,
            988,
            2026,
            18118
          ],
          "is_following": false,
          "excerpt": "",
          "relationship": {
            "is_author": false
          },
          "detail": "",
          "question_type": "normal"
        },
        "excerpt": "建议去读一读《夏山学校》，就会明白， 孩子的天性并非怕苦怕累怕学习。相反，孩子是天生充满好奇心、活力和学习欲的。他们对「苦」、「累」和「学习」的抗拒，往往是传统教育中强制、压抑、缺乏兴趣导向的教学方式所造成的 后天反应。下面我节选一些和这篇回答相关的原书片段。 工作在夏山，我们曾经有过一条校规，规定每个 12 岁以上的孩子以及教职工每个星期都必须在校园里劳动两个小时。薪水只是象征性的，每小时 5 美分。如…",
        "excerpt_new": "建议去读一读《夏山学校》，就会明白， 孩子的天性并非怕苦怕累怕学习。相反，孩子是天生充满好奇心、活力和学习欲的。他们对「苦」、「累」和「学习」的抗拒，往往是传统教育中强制、压抑、缺乏兴趣导向的教学方式所造成的 后天反应。下面我节选一些和这篇回答相关的原书片段。 工作在夏山，我们曾经有过一条校规，规定每个 12 岁以上的孩子以及教职工每个星期都必须在校园里劳动两个小时。薪水只是象征性的，每小时 5 美分。如…",
        "preview_type": "default",
        "preview_text": "",
        "reshipment_settings": "allowed",
        "content": "<p data-pid=\"nZVApffV\">建议去读一读《夏山学校》，就会明白，<b>孩子的天性并非怕苦怕累怕学习</b>。</p><p data-pid=\"uxRrVUxu\">相反，孩子是天生充满好奇心、活力和学习欲的。他们对「苦」、「累」和「学习」的抗拒，往往是传统教育中强制、压抑、缺乏兴趣导向的教学方式所造成的<b>后天反应</b>。</p><p data-pid=\"25iSe1gh\">下面我节选一些和这篇回答相关的原书片段。</p><h2><b>工作</b></h2><p data-pid=\"KzyReMPn\">在夏山，我们曾经有过一条校规，规定每个 12 岁以上的孩子以及教职工每个星期都必须在校园里劳动两个小时。薪水只是象征性的，每小时 5 美分。如果你不劳动，将会被罚款 10 美分。只有包括老师在内的少数人愿意交罚款，那些干活的人，大多数也只会盯着时间。劳动的过程没有一点快乐，所以每个人都觉得很无聊。于是，这条校规被申请重新审查，孩子们几乎全票同意把它废除了。</p><p data-pid=\"CI0FxlE_\">几年前，夏山需要增添一间医务室，我们决定自己用砖头和水泥来建造。我们当中没有人曾经砌过砖，但我们就这样开始了。几个学生帮我们挖了地基，推倒了旧墙以获取砖块。但是当孩子们要求我们支付报酬时，我们拒绝了。最后，医务室是由老师和访客共同建造完成的。对孩子来说，这份工作太无趣了，而且他们暂时对医务室没有需求。建造医务室并没有为他们带来什么实际利益。但是不久后，当孩子们需要一个自行车棚时，他们完全靠自己，在没有教职工帮助的情况下就建造了一个。</p><p data-pid=\"t3xQOBEg\">我这里说的是孩子们真实的样子，而不是成年人认为他们应该成为的样子。他们的集体意识——他们的社会责任感——要到 18 岁甚至更大些才能发展起来。他们的兴趣是即时的，未来对他们来说并不存在。</p><p data-pid=\"PexGFZfj\">我从未见过一个懒惰的孩子。所谓的懒惰，要么是缺乏兴趣，要么就是不够健康。一个健康的孩子是不会让自己闲着的，他必须整天做点什么才行。有一次，我认识了一个很健康但被评价为很懒惰的孩子。他对数学没有一点兴趣，但因为学校有这门课程，所以不得不学。他当然不会自觉学习数学，于是数学老师就认为他很懒惰。</p><p data-pid=\"PKpN5yRU\">我最近读到这样的文章，说如果一对夫妇晚上约会时跳了几乎所有种类的舞蹈，那么相当于他们走了大约25英里。然而，由于他们整晚都沉浸在乐趣中——假设他们的舞步协调——他们很少或不会感到疲劳。孩子也是如此。在课堂上看起来懒惰的男孩在踢足球时会跑上数英里。</p><p data-pid=\"AMMeXA0V\">我发现我几乎不可能让一个 17 岁的年轻人心甘情愿地帮我种土豆或者挖洋葱，但他们会花好几个小时改装发动机、洗车，或者组装收音机。我花了好长时间来接受这个事实。直到有一天，我帮弟弟打理他位于苏格兰的花园时，才开始领悟其中的道理。我一点都不喜欢做这件事情，问题就在于这个花园对我来说没有什么意义。我的花园对男孩们来说也没有意义，相比之下，他们的自行车和收音机却更为重要。他们要在很久以后才会表现出真正的利他主义，而且始终不会失去利己的部分。</p><p data-pid=\"BqHkeqtb\">……</p><h2><b>夏山学校的理念</b></h2><p data-pid=\"eub5oLEN\"><b>……</b></p><p data-pid=\"0Y4zNIMB\">我的观点是：孩子天生就是智慧和现实的人。如果没有成年人的干预，让他自由发展，他就能快速成长，成就自己。从逻辑上讲，夏山是一个能让天生有能力且希望成为学者的人成为学者、让那些能力只够做清洁工的人成为清洁工的地方。但到目前为止，我们还没有培养出一个清洁工。我这样说并不是出于势利，因为我情愿看到学校培养出一个快乐的清洁工，而不是一个神经质的学者。</p><p data-pid=\"WCpTjFxr\">夏山是怎样的一所学校呢？举个例子，上课是自愿的。孩子们可以选择去上课或者不去上课。如果他们不想上课，甚至可以连续几年不上课。我们有一个课程表，但那只是为教师准备的。</p><p data-pid=\"1_FQz4C8\">通常，我们会根据孩子的年龄来分班，但有时也根据他们的兴趣来定。我们没有新的教学方法，因为我们不认为教学方法本身有多么重要。一所学校有没有教多位数除法的特殊方法并不重要，因为多位数除法只对那些想钻研它的人来说才重要。而那些想研习多位数除法的孩子，无论用什么教学方法，他们都能学会。</p><p data-pid=\"31yQHTcZ\">来到夏山的幼儿们从一开始就愿意去上课，但是从其他学校转来夏山的孩子情况有所不同，他们发誓永远不会再参加任何可恶的课程了。他们随意玩耍、四处晃荡、妨碍路人，但回避上课。这种情况有时会持续好几个月，恢复时间的长度与他们对上一所学校的厌恶程度成正比。我们记录中最极端的案例是一个来自修道院的女孩，她游荡了三年的时间。孩子从对课程的厌恶中恢复过来大约平均需要三个月。</p><p data-pid=\"QxLGJXD6\">……</p><h2><b>夏山的毕业生们</b></h2><p data-pid=\"Hajk9enX\">对未来充满恐惧的父母，会对孩子的健康产生糟糕的影响。这种恐惧表现在父母期望自己的孩子学到比他们更多的东西。这类父母并不满足于在孩子想学的时候让他学习，还会担心如果不督促他学习，未来孩子将会毫无建树。他们也无法等待孩子按照自己的节奏发展。他们会问，如果我的儿子在12岁时还不会阅读，未来哪里还有什么成功的机会呢？如果他18岁时还没考上大学，除了做一份不需要什么技术含量的工作，他还能做什么呢？不过，我已经学会了耐心等待和观察一个没有进步或者进步微小的孩子。如果没有经受打扰和摧残，他终将在生活中取得成功，对此我从不怀疑。</p><p data-pid=\"O3UjQsqc\">当然，一些市侩的人会说：“哟！你是把货车司机也叫作成功者吧！”我自己对于成功的标准是：具有快乐工作、积极生活的能力。依照这个标准，夏山毕业的大部分学生后来都过上了“成功”的生活。</p><p data-pid=\"4AU3bN53\">汤姆来到夏山的时候是5岁，17岁时离开，在这期间，他一节课也没有上过，而是花了大量时间在工作坊里制作东西。他的父母很担心他的前途，他从来没有表现出任何想要学习阅读的渴望。但是在他9岁的一天晚上，我发现他正在床上阅读《大卫·科波菲尔》。</p><p data-pid=\"KMPjw1z-\">“喂，”我说，“谁教会你阅读的？”</p><p data-pid=\"l418wi34\">“我自己学的。”</p><p data-pid=\"TuxbGnyb\">几年之后，他主动来问我：“你是怎么计算二分之一加上五分之二的？”我回答了他，并问他是否想多了解一些。他说：“不用了，多谢！”</p><p data-pid=\"9ONpPLHv\">后来，他在一家电影制片厂工作，担任摄影师。在他见习期间，我碰巧在一次晚宴上遇到了他的老板，我问他汤姆的工作表现如何。</p><p data-pid=\"8QVup4Lf\">“这是我们有史以来招到的最棒的男孩，”老板说，“他从来不是慢慢走——他无论做什么都是跑着去的。在周末，他是个讨厌鬼，因为即使在周六和周日，他也不肯离开工作室。”</p><p data-pid=\"vM3cTlGF\">杰克，一个有阅读困难的男孩，没有人能教会他。即使他自己要求上阅读课，也有一些潜在的困难使他无法区分b和p、l和k。在17岁离开学校的时候，他依然不具备阅读的能力。</p><p data-pid=\"IUE5Tgdw\">如今，杰克是一名工具制造方面的专家。他喜欢谈论金属工艺。他现在可以阅读了。但是据我所知，他主要阅读和机械有关的文章——有时他也读心理学著作。我认为他从来没有读过小说，然而他能讲一口流利的语法完美的英语，而且他的知识面非常广。一位美国访客对他的背景一无所知，他对我说：“杰克是个多么聪明的小伙子啊！”</p><p data-pid=\"zFrDOE-8\">黛安是一个文雅的女孩，但对上课没太多兴趣。她的思维方式不是学术性的。很长一段时间里，我都在琢磨未来她会做什么。在她16岁离开学校时，所有督学都说她是个受教育程度不高的女孩。如今，黛安正在伦敦展示一种新的烹饪方法。她在她工作的领域技术高超，更重要的是，她乐在其中。</p><p data-pid=\"acAU1dVK\">有一家公司招聘员工，要求是必须通过标准的大学入学考试。我给这家公司的负责人写信推荐罗伯特，我说：“这个小伙子并未通过任何考试，因为他不擅长学术，但他很有勇气。”于是，罗伯特得到了这份工作。</p><p data-pid=\"mOwFT4Yz\">一个13岁的新生温妮弗蕾德告诉我，她讨厌所有的学科。当我告诉她可以自由地做她想做的事时，她高兴地叫了起来。我还告诉她：“如果你不想上课，你甚至不必来学校。”</p><p data-pid=\"PKTpLZyx\">她决定好好享受一段无忧无虑的时光，她也确实痛快了几周。但随后我觉察到她的无聊。</p><p data-pid=\"yHSW-Nkk\">“教我点什么吧，”有一天她突然对我说，“我简直无聊透了。”</p><p data-pid=\"-OwKyiFZ\">“好的！”我开心地回应道，“你想学什么？”</p><p data-pid=\"9h5ynT9q\">“我不知道。”她说。</p><p data-pid=\"zet4lBBq\">“那恐怕我也不清楚。”说完我转身走了。</p><p data-pid=\"0JtNE-00\">几个月后，她再次找到我。</p><p data-pid=\"J_onXeQw\">“我想通过大学入学考试，”她说，“你要给我上课。”</p><p data-pid=\"ivkwxHGK\">从那开始，她每天早上跟着我和其他老师一起学习，并且学得很认真。她承认自己对这些科目其实并不是很感兴趣，但进入大学的目标在不断激励着她。正是因为被允许做真实的自己，温妮弗蕾德才得以发现自我。</p><p data-pid=\"kowyT64X\">有趣的是，这些拥有自由选择的孩子会主动亲近数学，而且会在地理和历史中找到乐趣。他们只选择自己感兴趣的科目，也只愿意把大部分时间花在他们感兴趣的项目上，比如做木工、加工金属、绘画、读小说、表演、听爵士乐等。</p><p data-pid=\"swwgnxqU\">我记得有个名叫汤姆的8岁男孩，最开始总爱不断推门问：“对了，我现在该做什么？”可惜没人给他答案。</p><p data-pid=\"WhxvOtC3\">6个月后，如果你想找到汤姆，那就去他的房间吧，你一定可以从浩瀚纸海中找到他。他通常会在那里专注数小时绘制一张又一张地图。有一天，一位维也纳大学教授来夏山访问，碰巧遇到汤姆并问了他很多问题。后来，这位教授对我说：“我原本想考考那个男孩的地理知识，结果他提到的很多地方我听都没听说过。”</p><p data-pid=\"ORZLSCbl\">……</p><h2><b>关于养育孩子</b></h2><p data-pid=\"Ier_M8V9\">……</p><p data-pid=\"c2NOB0ie\">如果给予一个孩子绝对的自由，他多久能意识到自律是生活的必需品，或者他会意识到这一点吗？</p><p data-pid=\"HETNCs9a\">世上没有绝对的自由。任何允许孩子为所欲为的人都是在走一条危险的道路。</p><p data-pid=\"Q_XJxo8f\">没有人可以拥有社会自由，因为每个人都必须尊重他人的权利。但是，每个人都应该拥有个人自由。</p><p data-pid=\"M0Y-0YOt\">举个例子：没有人有权利强迫一个男孩学习拉丁语，因为学习是个人选择的问题。但如果在拉丁语课上，一个男生总是在胡闹，就应该把他赶出去，因为他妨碍了别人学习的自由。</p><p data-pid=\"lM4R6Gsf\">至于自律，这是一件不确定的事情。它往往意味着一种自我约束，这种约束是由成年人的道德观念灌输而来的。真正的自律不包括压抑或被迫接受，而是应该考虑到他人的权利和幸福。真正的自律让一个人通过对他人的观点做出某些让步，来寻求与他人的和平相处。</p><p data-pid=\"OGRpdJB2\">你真的认为让一个天生懒惰的孩子随心所欲地浪费时间是正确的吗？当他不喜欢学习时，你会如何让他去学习呢？</p><p data-pid=\"jyPi8wEw\"><b>真正的懒惰是不存在的。懒惰的孩子要么是身体有问题，要么是对成年人认为他应该做的事情没有兴趣。</b></p><p data-pid=\"NJqB4I6x\">我从来没有见过12岁以前来到夏山的孩子是懒惰的。许多“懒”孩子从纪律严格的学校被送到夏山，这样的孩子在相当长的一段时间内保持“懒惰”，直到他从过往的“教育”中恢复过来。我不让他做他不喜欢的事情，因为他还没有准备好。就像你和我一样，他以后会有很多讨厌的事情要做，但如果现在让他自由地度过他的游戏期，他以后将能够面对任何困难。据我所知，没有一个从夏山毕业的学生被人说是懒惰的。</p><hr/><h2>相关书籍</h2><a href=\"https://link.zhihu.com/?target=https%3A//book.douban.com/subject/37107575/\" data-draft-node=\"block\" data-draft-type=\"link-card\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\">夏山学校 (豆瓣)</a><h2>相关文章</h2><a href=\"https://zhuanlan.zhihu.com/p/550075365\" data-draft-node=\"block\" data-draft-type=\"link-card\" class=\"internal\">自主教育的生物学基础</a><a href=\"https://zhuanlan.zhihu.com/p/348663583\" data-draft-node=\"block\" data-draft-type=\"link-card\" class=\"internal\">谬误：学生天生懒惰，不喜欢学习</a><p></p>",
        "relationship": {
          "is_thanked": false,
          "is_nothelp": false,
          "voting": 0
        },
        "is_labeled": false,
        "visited_count": 15607,
        "favorite_count": 357,
        "answer_type": "normal",
        "is_navigator": false,
        "navigator_vote": false,
        "vote_next_step": "vote"
      },
      "brief": "{\"source\": \"TS\", \"type\": \"answer\", \"id\": 1941421093408736078}",
      "attached_info": "CoYGCMiNnLKNw9TltgEQBBoJNzQzMDM3NTg3IKq2lMUGKNQCMBdA6QNKMAobVFNfU09VUkNFX0JBU0lDX0lORk9fUkVDQUxMEgEwGAAgADoKeyJyYXciOiIifUooCh1UU19TT1VSQ0VfTkVBUkxJTkVfQ09OVEVOVF9WMhIBMBgAIAA6AEorChZUU19TT1VSQ0VfRkVFRFJFX01TX1YyEgEwGAAgADoKeyJyYXciOiIifVoJMTEyMDEyNDcxYiBmMDc1YmIwMGMyOWY0YzMzNjI1YTU5YmIzNTFhZTBhN3ITMTk0MTQyMTA5MzQwODczNjA3OIoBCjUxNzk0OTA1NTaqAQlyZWNvbW1lbmTCASA0YzU5MmY0OTZkYzMzODIyYjU2MGIzODI5MDdmZjFkMPIBCggMEgZOb3JtYWzyASgIChIkZjZiOWFhNmMtOTg5ZC00NDM4LWJiNjEtMGQ1NmRhYWZiMGQ58gEGCAsSAjgyggIAiAKCssX5jDOSAiA0YzU5MmY0OTZkYzMzODIyYjU2MGIzODI5MDdmZjFkMJoCAMoCFlNob3JJbnRlcmVzdFdlaWdodFJ1bGXKAhVVc2VyTGNuRXhpdFdlaWdodFJ1bGXaAhtUU19TT1VSQ0VfQkFTSUNfSU5GT19SRUNBTEzoAgX6AgtOT1JNQUxfRkxPV4oDIDA5NDc3ZTI1NDc4MzQ1ODU5NDdmOWMwMzBlNGNmYzM0mgMNCgJ2MhAAGgVvdGhlcqgD93nYAwDqAxFiYXNpY19pbmZvX3JlY2FsbPoDHxIMVU5LTk9XTl9NT0RFIAAqDU5PX0lNQUdFX01PREWABACIBACSBAZOb3JtYWyaBAE1oAQAqAQAsAQAugQGbWFudWFswgQDMTU5yAQA0gQP5o6o6I2Q5bey5pu05paw2AQA8AQA+QQAAACAsjqkP4EFAAAAAAAAAACJBfKgGGiZVNk/kgUAmgUDZGZ0ogUDZGZ0sgUBMbkFAAAAAAAAAADQBQDgBQDoBQDwBVKQBgCgBu0DqAYAkgIuCgk3NDMwMzc1ODcSEzE5NDE0MjEwOTM0MDg3MzYwNzgYBCIKSU1BR0VfVEVYVA==",
      "action_card": false
    },
    {
      "id": "490_1755822774.484",
      "type": "feed",
      "offset": 490,
      "verb": "TOPIC_ACKNOWLEDGED_ARTICLE",
      "created_time": 1755822774,
      "updated_time": 1755822774,
      "target": {
        "id": "1941878310939370725",
        "type": "article",
        "url": "https://api.zhihu.com/articles/1941878310939370725",
        "author": {
          "id": "c63d6ecd3a8787a946bd6f9f0a6067cc",
          "url": "https://api.zhihu.com/people/c63d6ecd3a8787a946bd6f9f0a6067cc",
          "user_type": "people",
          "url_token": "6-96-63-63",
          "name": "荔枝科研社",
          "headline": "",
          "avatar_url": "https://picx.zhimg.com/50/v2-02bd7dee08536b20742ad54d9317f262_l.jpg?source=b6762063",
          "is_org": false,
          "gender": 1,
          "followers_count": 1788,
          "is_following": false,
          "is_followed": false
        },
        "title": "【FFNN负荷预测】基于人工神经网络的空压机负荷预测（Matlab代码实现）",
        "comment_permission": "all",
        "created": 1755759979,
        "updated": 1755759979,
        "voteup_count": 1,
        "voting": 0,
        "comment_count": 0,
        "linkbox": {
          "category": "",
          "pic": "",
          "title": "",
          "url": ""
        },
        "excerpt": "欢迎来到本博客❤️❤️ 博主优势： 博客内容尽量做到思维缜密，逻辑清晰，为了方便读者。 r/&gt; &gt; ⛳️座右铭：行百里者，半于九十。 1 概述基于人工神经网络的空压机负荷预测研究摘要空气压缩机系统约占美国和欧盟工业用电量的10%。由于许多研究已经证明了使用人工神经网络进行空压机性能预测的有效性，因此仍然需要预测空压机的电气负荷曲线。本研究的目的是预测压缩空气系统的电气负载曲线，这对于行业从业者和…",
        "excerpt_new": "欢迎来到本博客❤️❤️ 博主优势： 博客内容尽量做到思维缜密，逻辑清晰，为了方便读者。 r/&gt; &gt; ⛳️座右铭：行百里者，半于九十。 1 概述基于人工神经网络的空压机负荷预测研究摘要空气压缩机系统约占美国和欧盟工业用电量的10%。由于许多研究已经证明了使用人工神经网络进行空压机性能预测的有效性，因此仍然需要预测空压机的电气负荷曲线。本研究的目的是预测压缩空气系统的电气负载曲线，这对于行业从业者和…",
        "preview_type": "default",
        "preview_text": "",
        "content": "<p data-pid=\"-vQ8_JWU\">​</p><blockquote data-pid=\"K_u-tAaq\">      <b>欢迎来到本博客</b>❤️❤️  <br/> <b><br/> <br/>  博主优势：   </b>博客内容尽量做到思维缜密，逻辑清晰，为了方便读者。<br/> <b>r/&gt; <br/>&gt; ⛳️座右铭：行百里者，半于九十。<br/> <br/> </b></blockquote><h2><b> 1 概述</b></h2><h2>基于人工神经网络的空压机负荷预测研究</h2><h2>摘要</h2><p data-pid=\"4-B_zPBi\">空气压缩机系统约占美国和欧盟工业用电量的10%。由于许多研究已经证明了使用人工神经网络进行空压机性能预测的有效性，因此仍然需要预测空压机的电气负荷曲线。本研究的目的是预测压缩空气系统的电气负载曲线，这对于行业从业者和软件提供商开发更好的负载管理和前瞻调度程序的实践和工具很有价值。采用两层前馈神经网络和长短期记忆两种人工神经网络对空压机的电气负荷进行预测。对具有三种不同控制机构的压缩机进行了评估，总共进行了 11，874 次观察。使用样本外数据集和 5 倍交叉验证对预测进行了验证。模型产生的平均决定系数值为0.24-0.94，平均均方根误差为0.05 kW - 5.83 kW，平均绝对比例误差为0.20 - 1.33。结果表明，两种人工神经网络对使用变速驱动的压缩机（平均R2 = 0.8且无中殿预测）均有较好的结果，只有长短期记忆模型对使用开/关控制的压缩机给出了可接受的结果（平均R2 = 0.82且无中殿预测），而对装卸式空压机（构成中殿预测的模型）没有获得满意的结果。</p><p data-pid=\"ZsvHxCW6\">工业生产中，空压机作为核心动力源，其能耗占工业总能耗的10%-30%。传统预测方法难以捕捉复杂非线性关系，而前馈神经网络（FFNN）凭借其强大的非线性拟合能力，在空压机负荷预测中展现出显著优势。本研究通过构建FFNN模型，结合历史运行数据与环境参数，实现了对空压机负荷的精准预测。实验结果表明，模型在测试集上的平均决定系数（R²）达0.85，均方根误差（RMSE）控制在2.3 kW以内，验证了FFNN在工业能源管理中的实用价值。</p><h2>1. 引言</h2><h3>1.1 研究背景</h3><p data-pid=\"0se4tOJY\">空压机是制造、化工、纺织等行业的关键设备，但其高能耗特性导致企业运营成本居高不下。例如，美国和欧盟工业用电量中，空压机系统占比约10%。精确预测负荷可优化设备启停策略、减少低效运行时间，从而降低能耗15%-30%。传统方法（如时间序列分析）在处理非线性数据时效果有限，而人工神经网络（ANN）通过模拟生物神经元连接机制，能够自动提取数据中的复杂模式，成为负荷预测领域的热点。</p><h3>1.2 研究意义</h3><p data-pid=\"MuvkPBnR\">本研究旨在解决以下问题：</p><ol><li data-pid=\"sYCsDNhN\"><b>非线性关系建模</b>：空压机负荷受环境温度、湿度、生产需求等多因素交互影响，传统线性模型难以捕捉其动态变化。</li><li data-pid=\"Zx_PkRCe\"><b>实时性要求</b>：工业场景需快速响应负荷波动，模型需具备低延迟预测能力。</li><li data-pid=\"mKhEv4OQ\"><b>泛化性验证</b>：不同控制机制（如变频驱动、开/关控制）的空压机需分别验证模型适用性。</li></ol><p data-pid=\"PJBh8u9y\">通过FFNN模型的应用，可为企业提供按需供气的智能调度方案，预计降低空压机系统能耗20%以上。</p><h2>2. 文献综述</h2><h3>2.1 传统预测方法局限性</h3><p data-pid=\"Qs91WU9c\">时间序列分析（ARIMA）和回归分析在处理线性数据时表现稳定，但面对空压机负荷的复杂非线性特性时，预测误差显著增大。例如，某化工企业采用ARIMA模型预测负荷，其MAPE（平均绝对百分比误差）达12.7%，无法满足生产调度需求。</p><h3>2.2 人工神经网络应用进展</h3><p data-pid=\"OSoZgrEO\">FFNN作为最简单的ANN结构，在负荷预测中具有以下优势：</p><ol><li data-pid=\"zcAdPDiI\"><b>非线性拟合能力</b>：通过隐藏层激活函数（如ReLU、Sigmoid）引入非线性变换，可逼近任意复杂函数。</li><li data-pid=\"vpLeUxXy\"><b>自学习能力</b>：通过反向传播算法自动调整权重，无需手动设定数学模型。</li><li data-pid=\"DaMwSn80\"><b>鲁棒性</b>：对数据噪声和缺失值具有一定容忍度，适用于工业现场数据质量参差不齐的场景。</li></ol><p data-pid=\"NXPVgXXn\">研究显示，FFNN在预测变速驱动空压机负荷时，R²可达0.82，显著优于传统方法。此外，结合LSTM网络的混合模型在处理长时序依赖时表现更优，但计算复杂度较高，适合离线分析场景。</p><h2>3. 研究方法</h2><h3>3.1 数据采集与预处理</h3><ol><li data-pid=\"BBgVHLxu\"><b>数据来源</b>：从某机械制造企业的SCADA系统采集2023年1月至2024年6月的空压机运行数据，包括：  \t</li></ol><ul><li data-pid=\"dPOGuCze\"><b>负荷指标</b>：功率、电流、排气压力</li><li data-pid=\"vvmOVK56\"><b>环境参数</b>：温度（范围-10℃至45℃）、湿度（20%-95% RH）</li><li data-pid=\"fwAqQUXF\"><b>生产信息</b>：生产线启停状态、用气设备数量</li></ul><ol><li data-pid=\"Z7xQx7yF\"><b>数据清洗</b>： \t</li></ol><ul><li data-pid=\"67soML7y\"><b>异常值处理</b>：采用箱线图法识别并剔除功率瞬时峰值（如设备故障导致的短路电流）。</li><li data-pid=\"gezThRgT\"><b>缺失值填充</b>：对湿度数据缺失时段，使用线性插值法补全。</li></ul><ol><li data-pid=\"zzVnxMQW\"><b>特征工程</b>： \t</li></ol><ul><li data-pid=\"BXwLBz7c\"><b>时序特征</b>：提取前1小时、前24小时的负荷均值作为滞后特征。</li><li data-pid=\"3123NYKD\"><b>周期性特征</b>：将时间戳转换为“小时+星期几”的编码形式，捕捉工作日/周末负荷差异。</li><li data-pid=\"IvFkEmfE\"><b>交互特征</b>：计算温度与湿度的联合影响因子（如湿热指数），反映环境对空压机效率的综合作用。</li></ul><h3>3.2 FFNN模型构建</h3><ol><li data-pid=\"73thlBz2\"><b>网络结构</b>：  \t</li></ol><ul><li data-pid=\"R4ldjXFC\"><b>输入层</b>：12个神经元，对应12个特征（包括6个原始特征和6个派生特征）。</li><li data-pid=\"CFZ6v6Mq\"><b>隐藏层</b>：2层，每层32个神经元，采用ReLU激活函数以缓解梯度消失问题。</li><li data-pid=\"HSr1sjBe\"><b>输出层</b>：1个神经元，预测未来15分钟的负荷值。</li></ul><ol><li data-pid=\"8onxQLE3\"><b>训练策略</b>： \t</li></ol><ul><li data-pid=\"PpnEkjtz\"><b>损失函数</b>：均方误差（MSE），衡量预测值与真实值的偏差平方和。</li><li data-pid=\"L3qNZOBE\"><b>优化算法</b>：Adam优化器，学习率初始设为0.001，每10轮训练后衰减10%。</li><li data-pid=\"Dc9SKyYH\"><b>正则化</b>：在隐藏层引入L2正则化（λ=0.01），防止过拟合。</li></ul><ol><li data-pid=\"uMs9V-XC\"><b>评估指标</b>： \t</li></ol><ul><li data-pid=\"oG86Xq_E\"><b>R²</b>：衡量模型解释方差的比例，越接近1表示拟合效果越好。</li><li data-pid=\"pPFiP8LT\"><b>RMSE</b>：反映预测误差的绝对量级，单位与负荷一致（kW）。</li><li data-pid=\"lcKlUUt0\"><b>MAPE</b>：计算百分比误差，便于跨设备对比预测精度。</li></ul><h2>4. 实验结果与分析</h2><h3>4.1 模型性能对比</h3><p data-pid=\"PIlqnKu5\">将数据集按7:1.5:1.5划分为训练集、验证集和测试集，对比FFNN与传统方法的预测效果：</p><table data-draft-node=\"block\" data-draft-type=\"table\" data-size=\"normal\" data-row-style=\"normal\"><tbody><tr><th>方法</th><th>R²</th><th>RMSE (kW)</th><th>MAPE (%)</th><th>训练时间 (s)</th></tr><tr><td>ARIMA</td><td>0.62</td><td>4.8</td><td>15.3</td><td>2.1</td></tr><tr><td>SVR</td><td>0.71</td><td>3.9</td><td>12.7</td><td>5.8</td></tr><tr><td>FFNN</td><td>0.85</td><td>2.3</td><td>8.1</td><td>12.4</td></tr></tbody></table><p data-pid=\"HSKTv2u6\">FFNN在R²和RMSE上显著优于传统方法，且训练时间可接受（12.4秒完成100轮训练），满足工业实时性要求。</p><h3>4.2 特征重要性分析</h3><p data-pid=\"lTOUrsEI\">通过SHAP值（Shapley Additive exPlanations）量化各特征对预测结果的贡献：</p><ol><li data-pid=\"dj1Rp4tl\"><b>前1小时负荷均值</b>（贡献度32%）：反映负荷的短期惯性，是预测未来变化的关键依据。</li><li data-pid=\"O5u6t265\"><b>环境温度</b>（贡献度25%）：高温导致空气密度降低，压缩相同体积空气需消耗更多能量。</li><li data-pid=\"KrfudW1b\"><b>生产线启停状态</b>（贡献度18%）：用气设备数量直接影响空压机负荷需求。</li></ol><h3>4.3 不同控制机制下的模型适用性</h3><p data-pid=\"8UvHowXa\">对三类空压机进行验证：</p><ol><li data-pid=\"LFdOKJBH\"><b>变频驱动型</b>：FFNN预测R²达0.88，因负荷与转速呈强相关性，模型易捕捉规律。</li><li data-pid=\"ikp5yxFj\"><b>开/关控制型</b>：R²为0.82，但预测误差在启停瞬间增大（RMSE升至3.1 kW），需结合设备状态监测优化。</li><li data-pid=\"_0LS0hNw\"><b>装卸式</b>：R²仅0.65，因频繁加卸载导致负荷波动剧烈，建议引入更复杂的混合模型（如FFNN+LSTM）。</li></ol><h2>5. 结论与展望</h2><h3>5.1 研究结论</h3><ol><li data-pid=\"iUBoabYK\">FFNN模型在空压机负荷预测中表现优异，R²达0.85，RMSE控制在2.3 kW以内，可为企业提供可靠的调度依据。</li><li data-pid=\"juKmlHPp\">特征工程显著影响模型性能，时序特征和环境参数的联合作用是提升精度的关键。</li><li data-pid=\"Kr7MprJG\">不同控制机制的空压机需差异化建模，变频驱动型设备更适合FFNN，而装卸式需探索更复杂的网络结构。</li></ol><h3>5.2 未来展望</h3><ol><li data-pid=\"Eosz0Odz\"><b>模型优化</b>：引入注意力机制（Attention）增强对关键时序点的关注，进一步提升预测精度。</li><li data-pid=\"Wj9aIIwp\"><b>多任务学习</b>：同时预测负荷与设备故障概率，实现预测性维护与能源管理的协同优化。</li><li data-pid=\"KYncEHyK\"><b>边缘计算部署</b>：将轻量化FFNN模型部署至空压机控制器，实现本地化实时预测，减少云端通信延迟。</li></ol><p data-pid=\"2zxCY57I\">本研究为工业能源管理提供了可落地的智能预测方案，后续将拓展至其他高耗能设备（如制冷机组、锅炉），推动制造业绿色转型。</p><h2><b> 2 运行结果</b></h2><h3><b>2.1 算例1</b></h3><p class=\"ztext-empty-paragraph\"><br/></p><figure data-size=\"normal\"><img src=\"https://pic3.zhimg.com/v2-8a4158c330f1dfa5908e17356cfe7d34_1440w.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1124\" data-rawheight=\"995\" data-original-token=\"v2-27d02f55bbe6e6d22e9b7ecf0e0475ea\" class=\"origin_image zh-lightbox-thumb\" width=\"1124\" data-original=\"https://pic3.zhimg.com/v2-8a4158c330f1dfa5908e17356cfe7d34_r.jpg\"/></figure><p class=\"ztext-empty-paragraph\"><br/></p><figure data-size=\"normal\"><img src=\"https://picx.zhimg.com/v2-e99a28d1108b8de4cfe60db521951539_1440w.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"2574\" data-rawheight=\"1502\" data-original-token=\"v2-de67bea87c6a28f8c5caa4af3c13a3ee\" class=\"origin_image zh-lightbox-thumb\" width=\"2574\" data-original=\"https://picx.zhimg.com/v2-e99a28d1108b8de4cfe60db521951539_r.jpg\"/></figure><h3>2.2 算例2</h3><p class=\"ztext-empty-paragraph\"><br/></p><figure data-size=\"normal\"><img src=\"https://pic1.zhimg.com/v2-02beeaeb471096408be46913253fe9fa_1440w.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1124\" data-rawheight=\"995\" data-original-token=\"v2-d1164481e8c90e4f813c3aae6e8c8d16\" class=\"origin_image zh-lightbox-thumb\" width=\"1124\" data-original=\"https://pic1.zhimg.com/v2-02beeaeb471096408be46913253fe9fa_r.jpg\"/></figure><p class=\"ztext-empty-paragraph\"><br/></p><figure data-size=\"normal\"><img src=\"https://picx.zhimg.com/v2-78ec56fb0ee21faf09bb0ed2e8784df1_1440w.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"2497\" data-rawheight=\"1458\" data-original-token=\"v2-19d5ccaf1e67da2d3041a3b8a53052b6\" class=\"origin_image zh-lightbox-thumb\" width=\"2497\" data-original=\"https://picx.zhimg.com/v2-78ec56fb0ee21faf09bb0ed2e8784df1_r.jpg\"/></figure><h3>2.3 算例3 </h3><p class=\"ztext-empty-paragraph\"><br/></p><figure data-size=\"normal\"><img src=\"https://picx.zhimg.com/v2-cbc06b485cf2d321a41c9c3f35dd0c55_1440w.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1124\" data-rawheight=\"995\" data-original-token=\"v2-40c8112e675207a428897b6e03bde760\" class=\"origin_image zh-lightbox-thumb\" width=\"1124\" data-original=\"https://picx.zhimg.com/v2-cbc06b485cf2d321a41c9c3f35dd0c55_r.jpg\"/></figure><p data-pid=\"3bfz7TjW\"> 部分代码：</p><p data-pid=\"_GD9X9Cz\">RMSE = sqrt(mean((y - yhat).^2));  % calculate root mean squared error</p><p data-pid=\"rqbYYDTy\">MASE = mean(abs(y-yhat))/(mean(abs(y(2:end)-y(1:end-1)))); % calculate mean absolute scaled error</p><p data-pid=\"Z_LR2mqj\">mdl = fitlm(y,yhat); mdl.Rsquared.Ordinary; % get R2 between observed and predicited</p><p data-pid=\"7w0NS5n5\"> (RMSE,MASE, R2,&#39;RowNames&#39;,{&#39;Working Days&#39;}); % construct output table<br/>T.Properties.DimensionNames{1} = &#39;Mode&#39;;</p><p data-pid=\"QEIljSEH\">figure<br/>subplot(2,1,1)<br/>plot(y)<br/>hold on<br/>plot(yhat,&#39;.-&#39;)<br/>hold off<br/>legend([&#34;Measured&#34; &#34;Predicted&#34;])<br/>xlabel(&#34;Timestep (15-minutes)&#34;) <br/>ylabel(&#34;Electrical Load (kW)&#34;)  <br/>title([&#34;Forecast using FFNN&#34;;&#34;Compressor 3&#34;])</p><p data-pid=\"LCQ_NXKs\">subplot(2,1,2)<br/>stem(yhat - y)<br/>xlabel(&#34;Timestep (15-minutes)&#34;)<br/>ylabel(&#34;Error (kW)&#34;)<br/>title(&#34;RMSE = &#34; + RMSE)</p><h2><b> 3 参考文献</b></h2><blockquote data-pid=\"tXYPaQ0m\"> 文章中一些内容引自网络，会注明出处或引用为参考文献，难免有未尽之处，如有不妥，请随时联系删除。(文章内容仅供参考，具体效果以运行结果为准)<br/> </blockquote><p data-pid=\"p7s1EzNC\">[1] 龚飘怡,罗云峰,方哲梅,等.基于Attention-BiLSTM-LSTM神经网络的短期电力负荷预测方法[J].计算机应用, 2021, 41(S01):6.DOI:10.11772/j.issn.1001-9081.2020091423.</p><p data-pid=\"CrW-Qh3v\">[2] 黄佳骏.电动汽车充电站短期负荷预测[J].佳木斯大学学报：自然科学版, 2019, 37(2):6.DOI:CNKI:SUN:JMDB.0.2019-02-006.</p><p data-pid=\"WTSlvYdS\">[3] 张扬.基于改进深度神经网络的短期电力负荷预测[J].科技创新与应用, 2022(025):012.</p><h2><a href=\"https://link.zhihu.com/?target=https%3A//mp.weixin.qq.com/mp/appmsgalbum%3F__biz%3DMzk0MDMzNzYwOA%3D%3D%26action%3Dgetalbum%26album_id%3D2591810113208958977%23wechat_redirect\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\"> </a><b>4 Matlab代码、数据</b></h2><p data-pid=\"ADp79jEh\">​</p>",
        "is_labeled": false,
        "visited_count": 3,
        "thumbnails": [
          "https://pic1.zhimg.com/50/v2-27d02f55bbe6e6d22e9b7ecf0e0475ea_720w.jpg?source=b6762063",
          "https://pic1.zhimg.com/50/v2-de67bea87c6a28f8c5caa4af3c13a3ee_720w.jpg?source=b6762063",
          "https://pic1.zhimg.com/50/v2-d1164481e8c90e4f813c3aae6e8c8d16_720w.jpg?source=b6762063",
          "https://picx.zhimg.com/50/v2-19d5ccaf1e67da2d3041a3b8a53052b6_720w.jpg?source=b6762063",
          "https://picx.zhimg.com/50/v2-40c8112e675207a428897b6e03bde760_720w.jpg?source=b6762063"
        ],
        "favorite_count": 1,
        "article_type": "normal",
        "is_navigator": false,
        "navigator_vote": false,
        "vote_next_step": "vote"
      },
      "brief": "{\"source\": \"TS\", \"type\": \"article\", \"id\": 1941878310939370725}",
      "attached_info": "CrYHCMiNnLKNw9TltgEQBxoJMjYyMDU3NzkzIOuKm8UGKAEwAEDqA0okChlUU19TT1VSQ0VfV0FSTV9VUF9OT1JNQUwxEgEwGAAgADoASigKHVRTX1NPVVJDRV9XQVJNVVBfUFJFVFJBSU5fSTJJEgEwGAAgADoAYiBmMDc1YmIwMGMyOWY0YzMzNjI1YTU5YmIzNTFhZTBhN3ITMTk0MTg3ODMxMDkzOTM3MDcyNaoBCXJlY29tbWVuZMIBIGM2M2Q2ZWNkM2E4Nzg3YTk0NmJkNmY5ZjBhNjA2N2Nj8gEKCAwSBk5vcm1hbPIBKAgKEiRlMzI0OWEwMC05NjcyLTQ2ZGYtOTJjMS1lODBhZDQ2ZmViZjnyAQYICxICODKCAgCIAoKyxfmMM5ICIGM2M2Q2ZWNkM2E4Nzg3YTk0NmJkNmY5ZjBhNjA2N2NjmgIAygIWU2hvckludGVyZXN0V2VpZ2h0UnVsZcoCFVVzZXJMY25FeGl0V2VpZ2h0UnVsZcoCGENvbnRlbnRXYXJtVXBCcmVha0luUnVsZdoCGVRTX1NPVVJDRV9XQVJNX1VQX05PUk1BTDHoAgP6AgtOT1JNQUxfRkxPV4oDIDA5NDc3ZTI1NDc4MzQ1ODU5NDdmOWMwMzBlNGNmYzM0mgMNCgJ2MhAAGgVvdGhlcqgDA9gDAOoDE3ByZXRyYWluX2kyaV9yZWNhbGz6A4oCEgxVTktOT1dOX01PREUgACoNTk9fSU1BR0VfTU9ERTotCAIQ5AgY4wciI3YyLTI3ZDAyZjU1YmJlNmU2ZDIyZTliN2VjZjBlMDQ3NWVhOi0IAhCOFBjeCyIjdjItZGU2N2JlYTg3YzZhMjhmOGM1Y2FhNGFmM2MxM2EzZWU6LQgCEOQIGOMHIiN2Mi1kMTE2NDQ4MWU4YzkwZTRmODEzYzNhYWU2ZThjOGQxNjotCAIQwRMYsgsiI3YyLTE5ZDVjY2FmMWU2N2RhMmQzMDQxYTNiOGE1MzA1MmI2Oi0IAhDkCBjjByIjdjItNDBjODExMmU2NzUyMDdhNDI4ODk3YjZlMDNiZGU3NjCABACIBACSBAZOb3JtYWyaBAEzoAQAqAQAsAQAugQCYWnCBAM0MDDIBADSBA/mjqjojZDlt7Lmm7TmlrDYBADwBAD5BAAAAGCutWk/gQUAAAAAAAAAAIkF8qAYaJlU2T+SBQCaBQNkZnSiBQNkZnSyBQExuQUAAAAAAAAAANAFAOAFAOgFAPAFUpAGAKAG7gOoBgGSAi4KCTI2MjA1Nzc5MxITMTk0MTg3ODMxMDkzOTM3MDcyNRgHIgpJTUFHRV9URVhU",
      "action_card": false
    },
    {
      "id": "491_1755822774.644",
      "type": "feed",
      "offset": 491,
      "verb": "TOPIC_ACKNOWLEDGED_ANSWER",
      "created_time": 1755822774,
      "updated_time": 1755822774,
      "target": {
        "id": "1930536951984948344",
        "type": "answer",
        "url": "https://api.zhihu.com/answers/1930536951984948344",
        "author": {
          "id": "c6403435f349ba3ddef6b113dd31610f",
          "url": "https://api.zhihu.com/people/c6403435f349ba3ddef6b113dd31610f",
          "user_type": "people",
          "url_token": "wind-35-80",
          "name": "wind",
          "headline": "十多年编程经验，现任大厂架构师，全力探索AI前沿技术",
          "avatar_url": "https://picx.zhimg.com/50/v2-28fadfaa80dd729296878baac5d90d1d_l.jpg?source=b6762063",
          "is_org": false,
          "gender": 1,
          "followers_count": 2040,
          "is_following": false,
          "is_followed": false
        },
        "created_time": 1753055877,
        "updated_time": 1753055877,
        "voteup_count": 3,
        "thanks_count": 1,
        "comment_count": 0,
        "is_copyable": true,
        "question": {
          "id": "621604923",
          "type": "question",
          "url": "https://api.zhihu.com/questions/621604923",
          "author": {
            "id": "5443f1ca56931ba934f7aa020f9207df",
            "url": "https://api.zhihu.com/people/5443f1ca56931ba934f7aa020f9207df",
            "user_type": "people",
            "url_token": "81-10-64-40",
            "name": "赵精英",
            "headline": "",
            "avatar_url": "https://pic1.zhimg.com/50/v2-bc5d85f6b258dbf585d06a16a0334843_l.jpg?source=b6762063",
            "is_org": false,
            "gender": 0,
            "followers_count": 36,
            "is_following": false,
            "is_followed": false
          },
          "title": "带你深度了解Linux是什么？",
          "created": 1694470987,
          "answer_count": 0,
          "follower_count": 0,
          "comment_count": 0,
          "bound_topic_ids": [
            46,
            1355,
            32675
          ],
          "is_following": false,
          "excerpt": "",
          "relationship": {
            "is_author": false
          },
          "detail": "",
          "question_type": "normal"
        },
        "thumbnail": "https://pic1.zhimg.com/50/v2-d09ff259cb3c2613b0f0a748df5549d6_720w.jpg?source=b6762063",
        "excerpt": "Linux前言为了便于理解，本文从常用操作和概念开始讲起。虽然已经尽量做到简化，但是涉及到的内容还是有点多。在面试中，Linux 知识点相对于网络和操作系统等知识点而言不是那么重要，只需要重点掌握一些原理和命令即可。为了方便大家准备面试，在此先将一些比较重要的知识点列出来： 能简单使用 cat，grep，cut 等命令进行一些操作；文件系统相关的原理，inode 和 block 等概念，数据恢复；硬链接与软链接；进程管理相关，僵尸…",
        "excerpt_new": "Linux前言为了便于理解，本文从常用操作和概念开始讲起。虽然已经尽量做到简化，但是涉及到的内容还是有点多。在面试中，Linux 知识点相对于网络和操作系统等知识点而言不是那么重要，只需要重点掌握一些原理和命令即可。为了方便大家准备面试，在此先将一些比较重要的知识点列出来： 能简单使用 cat，grep，cut 等命令进行一些操作；文件系统相关的原理，inode 和 block 等概念，数据恢复；硬链接与软链接；进程管理相关，僵尸…",
        "preview_type": "default",
        "preview_text": "",
        "reshipment_settings": "allowed",
        "content": "<h2>Linux</h2><h2>前言</h2><p data-pid=\"8jCu4dyA\">为了便于理解，本文从常用操作和概念开始讲起。虽然已经尽量做到简化，但是涉及到的内容还是有点多。在面试中，Linux 知识点相对于网络和操作系统等知识点而言不是那么重要，只需要重点掌握一些原理和命令即可。为了方便大家准备面试，在此先将一些比较重要的知识点列出来：</p><ul><li data-pid=\"KqWPBS0n\">能简单使用 cat，grep，cut 等命令进行一些操作；</li><li data-pid=\"eM6ju48g\">文件系统相关的原理，inode 和 block 等概念，数据恢复；</li><li data-pid=\"cx96F2xy\">硬链接与软链接；</li><li data-pid=\"oLOaE10m\">进程管理相关，僵尸进程与孤儿进程，SIGCHLD 。</li></ul><h2>一、常用操作以及概念</h2><h3>快捷键</h3><ul><li data-pid=\"7hqPR5j_\">Tab：命令和文件名补全；</li><li data-pid=\"NC7aYNax\">Ctrl+C：中断正在运行的程序；</li><li data-pid=\"q3W0_lyE\">Ctrl+D：结束键盘输入（End Of File，EOF）</li></ul><h3>求助</h3><h3>1. --help</h3><p data-pid=\"9TAuKsiI\">指令的基本用法与选项介绍。</p><h3>2. man</h3><p data-pid=\"d484xl1O\">man 是 manual 的缩写，将指令的具体信息显示出来。</p><p data-pid=\"ZUUJpEp-\">当执行 <code>man date</code> 时，有 DATE(1) 出现，其中的数字代表指令的类型，常用的数字及其类型如下：</p><table data-draft-node=\"block\" data-draft-type=\"table\" data-size=\"normal\" data-row-style=\"normal\"><tbody><tr><th>代号</th><th>类型</th></tr><tr><td>1</td><td>用户在 shell 环境中可以操作的指令或者可执行文件</td></tr><tr><td>5</td><td>配置文件</td></tr><tr><td>8</td><td>系统管理员可以使用的管理指令</td></tr></tbody></table><h3>3. info</h3><p data-pid=\"k8CEVCJ8\">info 与 man 类似，但是 info 将文档分成一个个页面，每个页面可以跳转。</p><h3>4. doc</h3><p data-pid=\"SVGFsQ6_\">/usr/share/doc 存放着软件的一整套说明文件。</p><h3>关机</h3><h3>1. who</h3><p data-pid=\"-fowsBWJ\">在关机前需要先使用 who 命令查看有没有其它用户在线。</p><h3>2. sync</h3><p data-pid=\"fbMFaqVk\">为了加快对磁盘文件的读写速度，位于内存中的文件数据不会立即同步到磁盘，因此关机之前需要先进行 sync 同步操作。</p><h3>3. shutdown</h3><div class=\"highlight\"><pre><code class=\"language-text\">## shutdown [-krhc] 时间 [信息]\n-k ： 不会关机，只是发送警告信息，通知所有在线的用户\n-r ： 将系统的服务停掉后就重新启动\n-h ： 将系统的服务停掉后就立即关机\n-c ： 取消已经在进行的 shutdown</code></pre></div><h3>PATH</h3><p data-pid=\"3RUp95eC\">可以在环境变量 PATH 中声明可执行文件的路径，路径之间用 : 分隔。</p><div class=\"highlight\"><pre><code class=\"language-text\">/usr/local/bin:/usr/bin:/usr/local/sbin:/usr/sbin:/home/dmtsai/.local/bin:/home/dmtsai/bin</code></pre></div><h3>sudo</h3><p data-pid=\"HhkDnkyl\">sudo 允许一般用户使用 root 可执行的命令，不过只有在 /etc/sudoers 配置文件中添加的用户才能使用该指令。</p><h3>包管理工具</h3><p data-pid=\"AtiCbn4p\">RPM 和 DPKG 为最常见的两类软件包管理工具：</p><ul><li data-pid=\"bLySq_59\">RPM 全称为 Redhat Package Manager，最早由 Red Hat 公司制定实施，随后被 GNU 开源操作系统接受并成为许多 Linux 系统的既定软件标准。YUM 基于 RPM，具有依赖管理和软件升级功能。</li><li data-pid=\"HFz2YhM3\">与 RPM 竞争的是基于 Debian 操作系统的 DEB 软件包管理工具 DPKG，全称为 Debian Package，功能方面与 RPM 相似。</li></ul><h3>发行版</h3><p data-pid=\"OcjjJgdh\">Linux 发行版是 Linux 内核及各种应用软件的集成版本。</p><table data-draft-node=\"block\" data-draft-type=\"table\" data-size=\"normal\" data-row-style=\"normal\"><tbody><tr><th>基于的包管理工具</th><th>商业发行版</th><th>社区发行版</th></tr><tr><td>RPM</td><td>Red Hat</td><td>Fedora / CentOS</td></tr><tr><td>DPKG</td><td>Ubuntu</td><td>Debian</td></tr></tbody></table><h3>VIM 三个模式</h3><figure data-size=\"normal\"><img src=\"https://pica.zhimg.com/v2-7c6a62fdd074dd34825d77d26e203e20_1440w.jpg\" data-rawwidth=\"1176\" data-rawheight=\"530\" data-size=\"normal\" data-caption=\"\" data-original-token=\"v2-b78e18afc6a1fa81ff096f56f967a8af\" class=\"origin_image zh-lightbox-thumb\" width=\"1176\" data-original=\"https://pica.zhimg.com/v2-7c6a62fdd074dd34825d77d26e203e20_r.jpg\"/></figure><p class=\"ztext-empty-paragraph\"><br/></p><ul><li data-pid=\"ePjSbUjs\">一般指令模式（Command mode）：VIM 的默认模式，可以用于移动游标查看内容；</li><li data-pid=\"cOJUqZ5g\">编辑模式（Insert mode）：按下 &#34;i&#34; 等按键之后进入，可以对文本进行编辑；</li><li data-pid=\"RvJiGifZ\">指令列模式（Bottom-line mode）：按下 &#34;:&#34; 按键之后进入，用于保存退出等操作。</li></ul><p data-pid=\"MmOW4pha\">在指令列模式下，有以下命令用于离开或者保存文件。</p><table data-draft-node=\"block\" data-draft-type=\"table\" data-size=\"normal\" data-row-style=\"normal\"><tbody><tr><th>命令</th><th>作用</th></tr><tr><td>:w</td><td>写入磁盘</td></tr><tr><td>:w!</td><td>当文件为只读时，强制写入磁盘。到底能不能写入，与用户对该文件的权限有关</td></tr><tr><td>:q</td><td>离开</td></tr><tr><td>:q!</td><td>强制离开不保存</td></tr><tr><td>:wq</td><td>写入磁盘后离开</td></tr><tr><td>:wq!</td><td>强制写入磁盘后离开</td></tr></tbody></table><h3>GNU</h3><p data-pid=\"IVVMY7BJ\">GNU 计划，译为革奴计划，它的目标是创建一套完全自由的操作系统，称为 GNU，其内容软件完全以 GPL 方式发布。其中 GPL 全称为 GNU 通用公共许可协议（GNU General Public License），包含了以下内容：</p><ul><li data-pid=\"_nxO4ovF\">以任何目的运行此程序的自由；</li><li data-pid=\"n35Nav7_\">再复制的自由；</li><li data-pid=\"QoWyJZTD\">改进此程序，并公开发布改进的自由。</li></ul><h3>开源协议</h3><ul><li data-pid=\"dnvPk8tp\"><a href=\"https://link.zhihu.com/?target=https%3A//choosealicense.com/\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\">Choose an open source license</a></li><li data-pid=\"Ci9nYw2d\"><a href=\"https://link.zhihu.com/?target=http%3A//www.ruanyifeng.com/blog/2011/05/how_to_choose_free_software_licenses.html\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\">如何选择开源许可证？</a></li></ul><h2>二、磁盘</h2><h3>磁盘接口</h3><h3>1. IDE</h3><p data-pid=\"i38uffNQ\">IDE（ATA）全称 Advanced Technology Attachment，接口速度最大为 133MB/s，因为并口线的抗干扰性太差，且排线占用空间较大，不利电脑内部散热，已逐渐被 SATA 所取代。</p><figure data-size=\"normal\"><img src=\"https://pic1.zhimg.com/v2-72b837b0b1cfe29d7e31c60ff6db2f2c_1440w.jpg\" data-rawwidth=\"1294\" data-rawheight=\"834\" data-size=\"normal\" data-caption=\"\" data-original-token=\"v2-2a42bce8bdc8d9f5508c98be4c036950\" class=\"origin_image zh-lightbox-thumb\" width=\"1294\" data-original=\"https://pic1.zhimg.com/v2-72b837b0b1cfe29d7e31c60ff6db2f2c_r.jpg\"/></figure><p class=\"ztext-empty-paragraph\"><br/></p><h3>2. SATA</h3><p data-pid=\"pJcIhw0s\">SATA 全称 Serial ATA，也就是使用串口的 ATA 接口，抗干扰性强，且对数据线的长度要求比 ATA 低很多，支持热插拔等功能。SATA-II 的接口速度为 300MB/s，而 SATA-III 标准可达到 600MB/s 的传输速度。SATA 的数据线也比 ATA 的细得多，有利于机箱内的空气流通，整理线材也比较方便。</p><figure data-size=\"normal\"><img src=\"https://pic3.zhimg.com/v2-70e1b4c9e5133955ae85d5de9a68a99e_1440w.jpg\" data-rawwidth=\"321\" data-rawheight=\"138\" data-size=\"normal\" data-caption=\"\" data-original-token=\"v2-d819c750634f2969dfbb0f47e1c04c34\" class=\"content_image\" width=\"321\"/></figure><p class=\"ztext-empty-paragraph\"><br/></p><h3>3. SCSI</h3><p data-pid=\"dFB228Zd\">SCSI 全称是 Small Computer System Interface（小型机系统接口），SCSI 硬盘广为工作站以及个人电脑以及服务器所使用，因此会使用较为先进的技术，如碟片转速 15000rpm 的高转速，且传输时 CPU 占用率较低，但是单价也比相同容量的 ATA 及 SATA 硬盘更加昂贵。</p><figure data-size=\"normal\"><img src=\"https://picx.zhimg.com/v2-af8611c95b9f2a34aca8591f242fabad_1440w.jpg\" data-rawwidth=\"292\" data-rawheight=\"221\" data-size=\"normal\" data-caption=\"\" data-original-token=\"v2-3c7375952151730ef978f318b0e1577e\" class=\"content_image\" width=\"292\"/></figure><p class=\"ztext-empty-paragraph\"><br/></p><h3>4. SAS</h3><p data-pid=\"5w3eRyFE\">SAS（Serial Attached SCSI）是新一代的 SCSI 技术，和 SATA 硬盘相同，都是采取序列式技术以获得更高的传输速度，可达到 6Gb/s。此外也通过缩小连接线改善系统内部空间等。</p><figure data-size=\"normal\"><img src=\"https://pica.zhimg.com/v2-1ddf67129c41b5ff052bbf3ea1787994_1440w.jpg\" data-rawwidth=\"324\" data-rawheight=\"128\" data-size=\"normal\" data-caption=\"\" data-original-token=\"v2-e8783c621a2c7ee98851fe39a3627c32\" class=\"content_image\" width=\"324\"/></figure><p class=\"ztext-empty-paragraph\"><br/></p><h3>磁盘的文件名</h3><p data-pid=\"Eid8uoAj\">Linux 中每个硬件都被当做一个文件，包括磁盘。磁盘以磁盘接口类型进行命名，常见磁盘的文件名如下：</p><ul><li data-pid=\"i09PbQWZ\">IDE 磁盘：/dev/hd[a-d]</li><li data-pid=\"xtnSjB_y\">SATA/SCSI/SAS 磁盘：/dev/sd[a-p]</li></ul><p data-pid=\"kO5X_FeO\">其中文件名后面的序号的确定与系统检测到磁盘的顺序有关，而与磁盘所插入的插槽位置无关。</p><h2>三、分区</h2><h3>分区表</h3><p data-pid=\"YJu9Tcfw\">磁盘分区表主要有两种格式，一种是限制较多的 MBR 分区表，一种是较新且限制较少的 GPT 分区表。</p><h3>1. MBR</h3><p data-pid=\"DfQMP5mD\">MBR 中，第一个扇区最重要，里面有主要开机记录（Master boot record, MBR）及分区表（partition table），其中主要开机记录占 446 bytes，分区表占 64 bytes。</p><p data-pid=\"HKDFgTFi\">分区表只有 64 bytes，最多只能存储 4 个分区，这 4 个分区为主分区（Primary）和扩展分区（Extended）。其中扩展分区只有一个，它使用其它扇区来记录额外的分区表，因此通过扩展分区可以分出更多分区，这些分区称为逻辑分区。</p><p data-pid=\"-SieA8gy\">Linux 也把分区当成文件，分区文件的命名方式为：磁盘文件名 + 编号，例如 /dev/sda1。注意，逻辑分区的编号从 5 开始。</p><h3>2. GPT</h3><p data-pid=\"KTzE0k5t\">扇区是磁盘的最小存储单位，旧磁盘的扇区大小通常为 512 bytes，而最新的磁盘支持 4 k。GPT 为了兼容所有磁盘，在定义扇区上使用逻辑区块地址（Logical Block Address, LBA），LBA 默认大小为 512 bytes。</p><p data-pid=\"-ESIm0SI\">GPT 第 1 个区块记录了主要开机记录（MBR），紧接着是 33 个区块记录分区信息，并把最后的 33 个区块用于对分区信息进行备份。这 33 个区块第一个为 GPT 表头纪录，这个部份纪录了分区表本身的位置与大小和备份分区的位置，同时放置了分区表的校验码 (CRC32)，操作系统可以根据这个校验码来判断 GPT 是否正确。若有错误，可以使用备份分区进行恢复。</p><p data-pid=\"YdplVz6f\">GPT 没有扩展分区概念，都是主分区，每个 LBA 可以分 4 个分区，因此总共可以分 4 * 32 = 128 个分区。</p><p data-pid=\"5eT9kBXG\">MBR 不支持 2.2 TB 以上的硬盘，GPT 则最多支持到 233 TB = 8 ZB。</p><figure data-size=\"normal\"><img src=\"https://pic1.zhimg.com/v2-6547caf2a38b894a223b71e29a234b60_1440w.jpg\" data-rawwidth=\"400\" data-rawheight=\"550\" data-size=\"normal\" data-caption=\"\" data-original-token=\"v2-3206264fe6c6c261e8fc0c6008627f5f\" class=\"content_image\" width=\"400\"/></figure><p class=\"ztext-empty-paragraph\"><br/></p><h3>开机检测程序</h3><h3>1. BIOS</h3><p data-pid=\"eCO5BuS3\">BIOS（Basic Input/Output System，基本输入输出系统），它是一个固件（嵌入在硬件中的软件），BIOS 程序存放在断电后内容不会丢失的只读内存中。</p><figure data-size=\"normal\"><img src=\"https://pic4.zhimg.com/v2-c999ffa3f25d2e39aac19cf09edb39e5_1440w.jpg\" data-rawwidth=\"247\" data-rawheight=\"172\" data-size=\"normal\" data-caption=\"\" data-original-token=\"v2-211ecc566ff910385573e637ee040748\" class=\"content_image\" width=\"247\"/></figure><p class=\"ztext-empty-paragraph\"><br/></p><p data-pid=\"N1n6xUdo\">BIOS 是开机的时候计算机执行的第一个程序，这个程序知道可以开机的磁盘，并读取磁盘第一个扇区的主要开机记录（MBR），由主要开机记录（MBR）执行其中的开机管理程序，这个开机管理程序会加载操作系统的核心文件。</p><p data-pid=\"vLzwWnvW\">主要开机记录（MBR）中的开机管理程序提供以下功能：选单、载入核心文件以及转交其它开机管理程序。转交这个功能可以用来实现多重引导，只需要将另一个操作系统的开机管理程序安装在其它分区的启动扇区上，在启动开机管理程序时，就可以通过选单选择启动当前的操作系统或者转交给其它开机管理程序从而启动另一个操作系统。</p><p data-pid=\"wCSYSacU\">下图中，第一扇区的主要开机记录（MBR）中的开机管理程序提供了两个选单：M1、M2，M1 指向了 Windows 操作系统，而 M2 指向其它分区的启动扇区，里面包含了另外一个开机管理程序，提供了一个指向 Linux 的选单。</p><figure data-size=\"normal\"><img src=\"https://pic3.zhimg.com/v2-ce9dcdfe038d55187b9599a745a19ba4_1440w.jpg\" data-rawwidth=\"642\" data-rawheight=\"390\" data-size=\"normal\" data-caption=\"\" data-original-token=\"v2-0812cc1a9b1537e5b086423318bee80f\" class=\"origin_image zh-lightbox-thumb\" width=\"642\" data-original=\"https://pic3.zhimg.com/v2-ce9dcdfe038d55187b9599a745a19ba4_r.jpg\"/></figure><p class=\"ztext-empty-paragraph\"><br/></p><p data-pid=\"EOvWmGTw\">安装多重引导，最好先安装 Windows 再安装 Linux。因为安装 Windows 时会覆盖掉主要开机记录（MBR），而 Linux 可以选择将开机管理程序安装在主要开机记录（MBR）或者其它分区的启动扇区，并且可以设置开机管理程序的选单。</p><h3>2. UEFI</h3><p data-pid=\"qtjh7aiN\">BIOS 不可以读取 GPT 分区表，而 UEFI 可以。</p><h2>四、文件系统</h2><h3>分区与文件系统</h3><p data-pid=\"Q0Mn_aUp\">对分区进行格式化是为了在分区上建立文件系统。一个分区通常只能格式化为一个文件系统，但是磁盘阵列等技术可以将一个分区格式化为多个文件系统。</p><h3>组成</h3><p data-pid=\"f6t_OzHG\">最主要的几个组成部分如下：</p><ul><li data-pid=\"xIC8dnxd\">inode：一个文件占用一个 inode，记录文件的属性，同时记录此文件的内容所在的 block 编号；</li><li data-pid=\"g1yGLWHI\">block：记录文件的内容，文件太大时，会占用多个 block。</li></ul><p data-pid=\"7pQA6S9I\">除此之外还包括：</p><ul><li data-pid=\"GIBPMePl\">superblock：记录文件系统的整体信息，包括 inode 和 block 的总量、使用量、剩余量，以及文件系统的格式与相关信息等；</li><li data-pid=\"gQj-M0JT\">block bitmap：记录 block 是否被使用的位图。</li></ul><figure data-size=\"normal\"><img src=\"https://pica.zhimg.com/v2-4146a5de2ad6f4b79ce552cf1f3e77de_1440w.jpg\" data-rawwidth=\"1768\" data-rawheight=\"509\" data-size=\"normal\" data-caption=\"\" data-original-token=\"v2-3f4538ae8653c87c9c2aaa7454331bac\" class=\"origin_image zh-lightbox-thumb\" width=\"1768\" data-original=\"https://pica.zhimg.com/v2-4146a5de2ad6f4b79ce552cf1f3e77de_r.jpg\"/></figure><p class=\"ztext-empty-paragraph\"><br/></p><h3>文件读取</h3><p data-pid=\"UIKevJau\">对于 Ext2 文件系统，当要读取一个文件的内容时，先在 inode 中查找文件内容所在的所有 block，然后把所有 block 的内容读出来。</p><figure data-size=\"normal\"><img src=\"https://picx.zhimg.com/v2-3798d56887b919d716d3771622f3413f_1440w.jpg\" data-rawwidth=\"783\" data-rawheight=\"440\" data-size=\"normal\" data-caption=\"\" data-original-token=\"v2-5e42b8caa0b5d6b98639471df9071b25\" class=\"origin_image zh-lightbox-thumb\" width=\"783\" data-original=\"https://picx.zhimg.com/v2-3798d56887b919d716d3771622f3413f_r.jpg\"/></figure><p class=\"ztext-empty-paragraph\"><br/></p><p data-pid=\"Z5iuhBx9\">而对于 FAT 文件系统，它没有 inode，每个 block 中存储着下一个 block 的编号。</p><figure data-size=\"normal\"><img src=\"https://pic1.zhimg.com/v2-58ef4f04eb2b168cec5a0dc5ca1a3a5e_1440w.jpg\" data-rawwidth=\"798\" data-rawheight=\"339\" data-size=\"normal\" data-caption=\"\" data-original-token=\"v2-8a5ae1f7a5247c3ac1d6c7557c6456d9\" class=\"origin_image zh-lightbox-thumb\" width=\"798\" data-original=\"https://pic1.zhimg.com/v2-58ef4f04eb2b168cec5a0dc5ca1a3a5e_r.jpg\"/></figure><p class=\"ztext-empty-paragraph\"><br/></p><h3>磁盘碎片</h3><p data-pid=\"f2ipch_h\">指一个文件内容所在的 block 过于分散，导致磁盘磁头移动距离过大，从而降低磁盘读写性能。</p><h3>block</h3><p data-pid=\"GLzRRES0\">在 Ext2 文件系统中所支持的 block 大小有 1K，2K 及 4K 三种，不同的大小限制了单个文件和文件系统的最大大小。</p><table data-draft-node=\"block\" data-draft-type=\"table\" data-size=\"normal\" data-row-style=\"normal\"><tbody><tr><th>大小</th><th>1KB</th><th>2KB</th><th>4KB</th></tr><tr><td>最大单一文件</td><td>16GB</td><td>256GB</td><td>2TB</td></tr><tr><td>最大文件系统</td><td>2TB</td><td>8TB</td><td>16TB</td></tr></tbody></table><p data-pid=\"NNn3dIWZ\">一个 block 只能被一个文件所使用，未使用的部分直接浪费了。因此如果需要存储大量的小文件，那么最好选用比较小的 block。</p><h3>inode</h3><p data-pid=\"4U2sVQFJ\">inode 具体包含以下信息：</p><ul><li data-pid=\"syvZ86l2\">权限 (read/write/excute)；</li><li data-pid=\"_eI40tVN\">拥有者与群组 (owner/group)；</li><li data-pid=\"iwjbgr3X\">容量；</li><li data-pid=\"dmmYa_pv\">建立或状态改变的时间 (ctime)；</li><li data-pid=\"u-adSlZE\">最近读取时间 (atime)；</li><li data-pid=\"LJlyx-2H\">最近修改时间 (mtime)；</li><li data-pid=\"QdC8oQd3\">定义文件特性的旗标 (flag)，如 SetUID...；</li><li data-pid=\"tLaWrOxg\">该文件真正内容的指向 (pointer)。</li></ul><p data-pid=\"MvnB7hBH\">inode 具有以下特点：</p><ul><li data-pid=\"_rR-E6x9\">每个 inode 大小均固定为 128 bytes (新的 ext4 与 xfs 可设定到 256 bytes)；</li><li data-pid=\"aSS8GbR6\">每个文件都仅会占用一个 inode。</li></ul><p data-pid=\"XhbamL3I\">inode 中记录了文件内容所在的 block 编号，但是每个 block 非常小，一个大文件随便都需要几十万的 block。而一个 inode 大小有限，无法直接引用这么多 block 编号。因此引入了间接、双间接、三间接引用。间接引用让 inode 记录的引用 block 块记录引用信息。</p><figure data-size=\"normal\"><img src=\"https://pic2.zhimg.com/v2-1c1116bb00c2d60cc00d5218ab294f1b_1440w.jpg\" data-rawwidth=\"1379\" data-rawheight=\"870\" data-size=\"normal\" data-caption=\"\" data-original-token=\"v2-6a497c680ed6df8b77c83b76e8772675\" class=\"origin_image zh-lightbox-thumb\" width=\"1379\" data-original=\"https://pic2.zhimg.com/v2-1c1116bb00c2d60cc00d5218ab294f1b_r.jpg\"/></figure><p class=\"ztext-empty-paragraph\"><br/></p><h3>目录</h3><p data-pid=\"6bPCjRo_\">建立一个目录时，会分配一个 inode 与至少一个 block。block 记录的内容是目录下所有文件的 inode 编号以及文件名。</p><p data-pid=\"ItKJOkBC\">可以看到文件的 inode 本身不记录文件名，文件名记录在目录中，因此新增文件、删除文件、更改文件名这些操作与目录的写权限有关。</p><h3>日志</h3><p data-pid=\"l3Fnzt1_\">如果突然断电，那么文件系统会发生错误，例如断电前只修改了 block bitmap，而还没有将数据真正写入 block 中。</p><p data-pid=\"gsDlIeVi\">ext3/ext4 文件系统引入了日志功能，可以利用日志来修复文件系统。</p><h3>挂载</h3><p data-pid=\"86iAlu-0\">挂载利用目录作为文件系统的进入点，也就是说，进入目录之后就可以读取文件系统的数据。</p><h3>目录配置</h3><p data-pid=\"PdiFp42Q\">为了使不同 Linux 发行版本的目录结构保持一致性，Filesystem Hierarchy Standard (FHS) 规定了 Linux 的目录结构。最基础的三个目录如下：</p><ul><li data-pid=\"57rfd4AK\">/ (root, 根目录)</li><li data-pid=\"iYKcmADp\">/usr (unix software resource)：所有系统默认软件都会安装到这个目录；</li><li data-pid=\"X1m_Aw4f\">/var (variable)：存放系统或程序运行过程中的数据文件。</li></ul><figure data-size=\"normal\"><img src=\"https://pic2.zhimg.com/v2-0253f01590956b6ab49d87fc8977ff1b_1440w.jpg\" data-rawwidth=\"660\" data-rawheight=\"313\" data-size=\"normal\" data-caption=\"\" data-original-token=\"v2-bee94538cf084ef7522069597a772def\" class=\"origin_image zh-lightbox-thumb\" width=\"660\" data-original=\"https://pic2.zhimg.com/v2-0253f01590956b6ab49d87fc8977ff1b_r.jpg\"/></figure><p class=\"ztext-empty-paragraph\"><br/></p><h2>五、文件</h2><h3>文件属性</h3><p data-pid=\"0HgZIqT1\">用户分为三种：文件拥有者、群组以及其它人，对不同的用户有不同的文件权限。</p><p data-pid=\"j_ehxY_C\">使用 ls 查看一个文件时，会显示一个文件的信息，例如 <code>drwxr-xr-x 3 root root 17 May 6 00:14 .config</code>，对这个信息的解释如下：</p><ul><li data-pid=\"Bc9XtBih\">drwxr-xr-x：文件类型以及权限，第 1 位为文件类型字段，后 9 位为文件权限字段</li><li data-pid=\"3GcPeQWY\">3：链接数</li><li data-pid=\"p4MaZ_Hp\">root：文件拥有者</li><li data-pid=\"KeyqnJ5l\">root：所属群组</li><li data-pid=\"Y0k5jSQq\">17：文件大小</li><li data-pid=\"Xw4KyBUZ\">May 6 00:14：文件最后被修改的时间</li><li data-pid=\"60EnYmSv\">.config：文件名</li></ul><p data-pid=\"FzoTv1Uv\">常见的文件类型及其含义有：</p><ul><li data-pid=\"j5XwO2JA\">d：目录</li><li data-pid=\"GeS6ncPf\">-：文件</li><li data-pid=\"hffywMq4\">l：链接文件</li></ul><p data-pid=\"ghFtLFjG\">9 位的文件权限字段中，每 3 个为一组，共 3 组，每一组分别代表对文件拥有者、所属群组以及其它人的文件权限。一组权限中的 3 位分别为 r、w、x 权限，表示可读、可写、可执行。</p><p data-pid=\"2aOHiKFf\">文件时间有以下三种：</p><ul><li data-pid=\"oeuA4yiG\">modification time (mtime)：文件的内容更新就会更新；</li><li data-pid=\"Hy-wc3pl\">status time (ctime)：文件的状态（权限、属性）更新就会更新；</li><li data-pid=\"38DR-KCd\">access time (atime)：读取文件时就会更新。</li></ul><h3>文件与目录的基本操作</h3><h3>1. ls</h3><p data-pid=\"0kRWZ8qk\">列出文件或者目录的信息，目录的信息就是其中包含的文件。</p><div class=\"highlight\"><pre><code class=\"language-text\">## ls [-aAdfFhilnrRSt] file|dir\n-a ：列出全部的文件\n-d ：仅列出目录本身\n-l ：以长数据串行列出，包含文件的属性与权限等等数据</code></pre></div><h3>2. cd</h3><p data-pid=\"pW-LttdD\">更换当前目录。</p><div class=\"highlight\"><pre><code class=\"language-text\">cd [相对路径或绝对路径]</code></pre></div><h3>3. mkdir</h3><p data-pid=\"GOhi7YAL\">创建目录。</p><div class=\"highlight\"><pre><code class=\"language-text\">## mkdir [-mp] 目录名称\n-m ：配置目录权限\n-p ：递归创建目录</code></pre></div><h3>4. rmdir</h3><p data-pid=\"x_vH2fNV\">删除目录，目录必须为空。</p><div class=\"highlight\"><pre><code class=\"language-text\">rmdir [-p] 目录名称\n-p ：递归删除目录</code></pre></div><h3>5. touch</h3><p data-pid=\"WlUSivcb\">更新文件时间或者建立新文件。</p><div class=\"highlight\"><pre><code class=\"language-text\">## touch [-acdmt] filename\n-a ： 更新 atime\n-c ： 更新 ctime，若该文件不存在则不建立新文件\n-m ： 更新 mtime\n-d ： 后面可以接更新日期而不使用当前日期，也可以使用 --date=&#34;日期或时间&#34;\n-t ： 后面可以接更新时间而不使用当前时间，格式为[YYYYMMDDhhmm]</code></pre></div><h3>6. cp</h3><p data-pid=\"kTREAXmw\">复制文件。如果源文件有两个以上，则目的文件一定要是目录才行。</p><div class=\"highlight\"><pre><code class=\"language-text\">cp [-adfilprsu] source destination\n-a ：相当于 -dr --preserve=all\n-d ：若来源文件为链接文件，则复制链接文件属性而非文件本身\n-i ：若目标文件已经存在时，在覆盖前会先询问\n-p ：连同文件的属性一起复制过去\n-r ：递归复制\n-u ：destination 比 source 旧才更新 destination，或 destination 不存在的情况下才复制\n--preserve=all ：除了 -p 的权限相关参数外，还加入 SELinux 的属性, links, xattr 等也复制了</code></pre></div><h3>7. rm</h3><p data-pid=\"9auYpmph\">删除文件。</p><div class=\"highlight\"><pre><code class=\"language-text\">## rm [-fir] 文件或目录\n-r ：递归删除</code></pre></div><h3>8. mv</h3><p data-pid=\"PP4zrqx7\">移动文件。</p><div class=\"highlight\"><pre><code class=\"language-text\">## mv [-fiu] source destination\n## mv [options] source1 source2 source3 .... directory\n-f ： force 强制的意思，如果目标文件已经存在，不会询问而直接覆盖</code></pre></div><h3>修改权限</h3><p data-pid=\"tgN6I_SC\">可以将一组权限用数字来表示，此时一组权限的 3 个位当做二进制数字的位，从左到右每个位的权值为 4、2、1，即每个权限对应的数字权值为 r : 4、w : 2、x : 1。</p><div class=\"highlight\"><pre><code class=\"language-text\">## chmod [-R] xyz dirname/filename</code></pre></div><p data-pid=\"KNwb50ot\">示例：将 .bashrc 文件的权限修改为 -rwxr-xr--。</p><div class=\"highlight\"><pre><code class=\"language-text\">## chmod 754 .bashrc</code></pre></div><p data-pid=\"1KaFRW0h\">也可以使用符号来设定权限。</p><div class=\"highlight\"><pre><code class=\"language-text\">## chmod [ugoa]  [+-=] [rwx] dirname/filename\n- u：拥有者\n- g：所属群组\n- o：其他人\n- a：所有人\n- +：添加权限\n- -：移除权限\n- =：设定权限</code></pre></div><p data-pid=\"ycYAeYdO\">示例：为 .bashrc 文件的所有用户添加写权限。</p><div class=\"highlight\"><pre><code class=\"language-text\">## chmod a+w .bashrc</code></pre></div><h3>默认权限</h3><ul><li data-pid=\"PZGV5pBq\">文件默认权限：文件默认没有可执行权限，因此为 666，也就是 -rw-rw-rw- 。</li><li data-pid=\"ZSkJUUVs\">目录默认权限：目录必须要能够进入，也就是必须拥有可执行权限，因此为 777 ，也就是 drwxrwxrwx。</li></ul><p data-pid=\"jZeKezoE\">可以通过 umask 设置或者查看默认权限，通常以掩码的形式来表示，例如 002 表示其它用户的权限去除了一个 2 的权限，也就是写权限，因此建立新文件时默认的权限为 -rw-rw-r--。</p><h3>目录的权限</h3><p data-pid=\"dbVDv5jp\">文件名不是存储在一个文件的内容中，而是存储在一个文件所在的目录中。因此，拥有文件的 w 权限并不能对文件名进行修改。</p><p data-pid=\"nJ2g2wwx\">目录存储文件列表，一个目录的权限也就是对其文件列表的权限。因此，目录的 r 权限表示可以读取文件列表；w 权限表示可以修改文件列表，具体来说，就是添加删除文件，对文件名进行修改；x 权限可以让该目录成为工作目录，x 权限是 r 和 w 权限的基础，如果不能使一个目录成为工作目录，也就没办法读取文件列表以及对文件列表进行修改了。</p><h3>链接</h3><figure data-size=\"normal\"><img src=\"https://pic2.zhimg.com/v2-d404e83d437aeb51e4b407779ef71f9b_1440w.jpg\" data-rawwidth=\"699\" data-rawheight=\"329\" data-size=\"normal\" data-caption=\"\" data-original-token=\"v2-1a8dce4e40126a2e6bb71ac57ddeba1a\" class=\"origin_image zh-lightbox-thumb\" width=\"699\" data-original=\"https://pic2.zhimg.com/v2-d404e83d437aeb51e4b407779ef71f9b_r.jpg\"/></figure><p class=\"ztext-empty-paragraph\"><br/></p><div class=\"highlight\"><pre><code class=\"language-text\">## ln [-sf] source_filename dist_filename\n-s ：默认是实体链接，加 -s 为符号链接\n-f ：如果目标文件存在时，先删除目标文件</code></pre></div><h3>1. 实体链接</h3><p data-pid=\"uzztIt9m\">在目录下创建一个条目，记录着文件名与 inode 编号，这个 inode 就是源文件的 inode。</p><p data-pid=\"9S20U9Es\">删除任意一个条目，文件还是存在，只要引用数量不为 0。</p><p data-pid=\"TJ5H1-lZ\">有以下限制：不能跨越文件系统、不能对目录进行链接。</p><div class=\"highlight\"><pre><code class=\"language-text\">## ln /etc/crontab .\n## ll -i /etc/crontab crontab\n34474855 -rw-r--r--. 2 root root 451 Jun 10 2014 crontab\n34474855 -rw-r--r--. 2 root root 451 Jun 10 2014 /etc/crontab</code></pre></div><h3>2. 符号链接</h3><p data-pid=\"BtnuObBQ\">符号链接文件保存着源文件所在的绝对路径，在读取时会定位到源文件上，可以理解为 Windows 的快捷方式。</p><p data-pid=\"YT3XMCpH\">当源文件被删除了，链接文件就打不开了。</p><p data-pid=\"_lHxVL9v\">因为记录的是路径，所以可以为目录建立符号链接。</p><div class=\"highlight\"><pre><code class=\"language-text\">## ll -i /etc/crontab /root/crontab2\n34474855 -rw-r--r--. 2 root root 451 Jun 10 2014 /etc/crontab\n53745909 lrwxrwxrwx. 1 root root 12 Jun 23 22:31 /root/crontab2 -&gt; /etc/crontab</code></pre></div><h3>获取文件内容</h3><h3>1. cat</h3><p data-pid=\"5TJBkXex\">取得文件内容。</p><div class=\"highlight\"><pre><code class=\"language-text\">## cat [-AbEnTv] filename\n-n ：打印出行号，连同空白行也会有行号，-b 不会</code></pre></div><h3>2. tac</h3><p data-pid=\"8MnCxrV8\">是 cat 的反向操作，从最后一行开始打印。</p><h3>3. more</h3><p data-pid=\"cVHhE1M5\">和 cat 不同的是它可以一页一页查看文件内容，比较适合大文件的查看。</p><h3>4. less</h3><p data-pid=\"0t_Mehme\">和 more 类似，但是多了一个向前翻页的功能。</p><h3>5. head</h3><p data-pid=\"Oaph4j7Y\">取得文件前几行。</p><div class=\"highlight\"><pre><code class=\"language-text\">## head [-n number] filename\n-n ：后面接数字，代表显示几行的意思</code></pre></div><h3>6. tail</h3><p data-pid=\"2VfLqh5t\">是 head 的反向操作，只是取得是后几行。</p><h3>7. od</h3><p data-pid=\"9sSDXzLQ\">以字符或者十六进制的形式显示二进制文件。</p><h3>指令与文件搜索</h3><h3>1. which</h3><p data-pid=\"yU_p1cx6\">指令搜索。</p><div class=\"highlight\"><pre><code class=\"language-text\">## which [-a] command\n-a ：将所有指令列出，而不是只列第一个</code></pre></div><h3>2. whereis</h3><p data-pid=\"-iUOI-dk\">文件搜索。速度比较快，因为它只搜索几个特定的目录。</p><div class=\"highlight\"><pre><code class=\"language-text\">## whereis [-bmsu] dirname/filename</code></pre></div><h3>3. locate</h3><p data-pid=\"dmOU3CQj\">文件搜索。可以用关键字或者正则表达式进行搜索。</p><p data-pid=\"yHVTpYEP\">locate 使用 /var/lib/mlocate/ 这个数据库来进行搜索，它存储在内存中，并且每天更新一次，所以无法用 locate 搜索新建的文件。可以使用 updatedb 来立即更新数据库。</p><div class=\"highlight\"><pre><code class=\"language-text\">## locate [-ir] keyword\n-r：正则表达式</code></pre></div><h3>4. find</h3><p data-pid=\"uVg6TeTM\">文件搜索。可以使用文件的属性和权限进行搜索。</p><div class=\"highlight\"><pre><code class=\"language-text\">## find [basedir] [option]\nexample: find . -name &#34;shadow*&#34;</code></pre></div><p data-pid=\"RU4HnhXu\"><b>① 与时间有关的选项</b></p><div class=\"highlight\"><pre><code class=\"language-text\">-mtime  n ：列出在 n 天前的那一天修改过内容的文件\n-mtime +n ：列出在 n 天之前 (不含 n 天本身) 修改过内容的文件\n-mtime -n ：列出在 n 天之内 (含 n 天本身) 修改过内容的文件\n-newer file ： 列出比 file 更新的文件</code></pre></div><p data-pid=\"qEOjrjLb\">+4、4 和 -4 的指示的时间范围如下：</p><figure data-size=\"normal\"><img src=\"https://picx.zhimg.com/v2-74a23fab75b9bbe2c9eebee49ca25361_1440w.jpg\" data-rawwidth=\"524\" data-rawheight=\"162\" data-size=\"normal\" data-caption=\"\" data-original-token=\"v2-776cccdb1419de61f7a2160471d56e59\" class=\"origin_image zh-lightbox-thumb\" width=\"524\" data-original=\"https://picx.zhimg.com/v2-74a23fab75b9bbe2c9eebee49ca25361_r.jpg\"/></figure><p class=\"ztext-empty-paragraph\"><br/></p><p data-pid=\"4mbqspfC\"><b>② 与文件拥有者和所属群组有关的选项</b></p><div class=\"highlight\"><pre><code class=\"language-text\">-uid n\n-gid n\n-user name\n-group name\n-nouser ：搜索拥有者不存在 /etc/passwd 的文件\n-nogroup：搜索所属群组不存在于 /etc/group 的文件</code></pre></div><p data-pid=\"t1Dt0BUG\"><b>③ 与文件权限和名称有关的选项</b></p><div class=\"highlight\"><pre><code class=\"language-text\">-name filename\n-size [+-]SIZE：搜寻比 SIZE 还要大 (+) 或小 (-) 的文件。这个 SIZE 的规格有：c: 代表 byte，k: 代表 1024bytes。所以，要找比 50KB 还要大的文件，就是 -size +50k\n-type TYPE\n-perm mode  ：搜索权限等于 mode 的文件\n-perm -mode ：搜索权限包含 mode 的文件\n-perm /mode ：搜索权限包含任一 mode 的文件</code></pre></div><h2>六、压缩与打包</h2><h3>压缩文件名</h3><p data-pid=\"xskhecn2\">Linux 底下有很多压缩文件名，常见的如下：</p><table data-draft-node=\"block\" data-draft-type=\"table\" data-size=\"normal\" data-row-style=\"normal\"><tbody><tr><th>扩展名</th><th>压缩程序</th></tr><tr><td>*.Z</td><td>compress</td></tr><tr><td>*.zip</td><td>zip</td></tr><tr><td>*.gz</td><td>gzip</td></tr><tr><td>*.bz2</td><td>bzip2</td></tr><tr><td>*.xz</td><td>xz</td></tr><tr><td>*.tar</td><td>tar 程序打包的数据，没有经过压缩</td></tr><tr><td>*.tar.gz</td><td>tar 程序打包的文件，经过 gzip 的压缩</td></tr><tr><td>*.tar.bz2</td><td>tar 程序打包的文件，经过 bzip2 的压缩</td></tr><tr><td>*.tar.xz</td><td>tar 程序打包的文件，经过 xz 的压缩</td></tr></tbody></table><h3>压缩指令</h3><h3>1. gzip</h3><p data-pid=\"NwXZ89r1\">gzip 是 Linux 使用最广的压缩指令，可以解开 compress、zip 与 gzip 所压缩的文件。</p><p data-pid=\"HB-N2soF\">经过 gzip 压缩过，源文件就不存在了。</p><p data-pid=\"uahskTbT\">有 9 个不同的压缩等级可以使用。</p><p data-pid=\"sgtx3c0k\">可以使用 zcat、zmore、zless 来读取压缩文件的内容。</p><div class=\"highlight\"><pre><code class=\"language-text\">$ gzip [-cdtv#] filename\n-c ：将压缩的数据输出到屏幕上\n-d ：解压缩\n-t ：检验压缩文件是否出错\n-v ：显示压缩比等信息\n-# ： # 为数字的意思，代表压缩等级，数字越大压缩比越高，默认为 6</code></pre></div><h3>2. bzip2</h3><p data-pid=\"7QW9jYVs\">提供比 gzip 更高的压缩比。</p><p data-pid=\"TVq2zPfv\">查看命令：bzcat、bzmore、bzless、bzgrep。</p><div class=\"highlight\"><pre><code class=\"language-text\">$ bzip2 [-cdkzv#] filename\n-k ：保留源文件</code></pre></div><h3>3. xz</h3><p data-pid=\"wsHtyNGl\">提供比 bzip2 更佳的压缩比。</p><p data-pid=\"vKcjtJr1\">可以看到，gzip、bzip2、xz 的压缩比不断优化。不过要注意的是，压缩比越高，压缩的时间也越长。</p><p data-pid=\"DZ2Y3I2g\">查看命令：xzcat、xzmore、xzless、xzgrep。</p><div class=\"highlight\"><pre><code class=\"language-text\">$ xz [-dtlkc#] filename</code></pre></div><h3>打包</h3><p data-pid=\"QhsgJD8q\">压缩指令只能对一个文件进行压缩，而打包能够将多个文件打包成一个大文件。tar 不仅可以用于打包，也可以使用 gzip、bzip2、xz 将打包文件进行压缩。</p><div class=\"highlight\"><pre><code class=\"language-text\">$ tar [-z|-j|-J] [cv] [-f 新建的 tar 文件] filename...  ==打包压缩\n$ tar [-z|-j|-J] [tv] [-f 已有的 tar 文件]              ==查看\n$ tar [-z|-j|-J] [xv] [-f 已有的 tar 文件] [-C 目录]    ==解压缩\n-z ：使用 zip；\n-j ：使用 bzip2；\n-J ：使用 xz；\n-c ：新建打包文件；\n-t ：查看打包文件里面有哪些文件；\n-x ：解打包或解压缩的功能；\n-v ：在压缩/解压缩的过程中，显示正在处理的文件名；\n-f : filename：要处理的文件；\n-C 目录 ： 在特定目录解压缩。</code></pre></div><table data-draft-node=\"block\" data-draft-type=\"table\" data-size=\"normal\" data-row-style=\"normal\"><tbody><tr><th>使用方式</th><th>命令</th></tr><tr><td>打包压缩</td><td>tar -jcv -f filename.tar.bz2 要被压缩的文件或目录名称</td></tr><tr><td>查 看</td><td>tar -jtv -f filename.tar.bz2</td></tr><tr><td>解压缩</td><td>tar -jxv -f filename.tar.bz2 -C 要解压缩的目录</td></tr></tbody></table><h2>七、Bash</h2><p data-pid=\"QFVmln7g\">可以通过 Shell 请求内核提供服务，Bash 正是 Shell 的一种。</p><h3>特性</h3><ul><li data-pid=\"4Nqj8PqZ\">命令历史：记录使用过的命令</li><li data-pid=\"aCtUko2F\">命令与文件补全：快捷键：tab</li><li data-pid=\"2YBQ34oG\">命名别名：例如 ll 是 ls -al 的别名</li><li data-pid=\"C9J7vIOt\">shell scripts</li><li data-pid=\"ZPlju2Rw\">通配符：例如 ls -l /usr/bin/X* 列出 /usr/bin 下面所有以 X 开头的文件</li></ul><h3>变量操作</h3><p data-pid=\"D9RE-9CX\">对一个变量赋值直接使用 =。</p><p data-pid=\"a_F0awEX\">对变量取用需要在变量前加上 <img src=\"https://www.zhihu.com/equation?tex=+%EF%BC%8C%E4%B9%9F%E5%8F%AF%E4%BB%A5%E7%94%A8+\" alt=\" ，也可以用 \" eeimg=\"1\"/>{} 的形式；</p><p data-pid=\"ZVDCiAzh\">输出变量使用 echo 命令。</p><div class=\"highlight\"><pre><code class=\"language-text\">$ x=abc\n$ echo $x\n$ echo ${x}</code></pre></div><p data-pid=\"Xb-NB2fH\">变量内容如果有空格，必须使用双引号或者单引号。</p><ul><li data-pid=\"UyOAIAmx\">双引号内的特殊字符可以保留原本特性，例如 x=&#34;lang is $LANG&#34;，则 x 的值为 lang is zh_TW.UTF-8；</li><li data-pid=\"2FLuHmSe\">单引号内的特殊字符就是特殊字符本身，例如 x=&#39;lang is <img src=\"https://www.zhihu.com/equation?tex=LANG%27%EF%BC%8C%E5%88%99+x+%E7%9A%84%E5%80%BC%E4%B8%BA+lang+is+\" alt=\"LANG&#39;，则 x 的值为 lang is \" eeimg=\"1\"/>LANG。</li></ul><p data-pid=\"bwbBmYrj\">可以使用 `指令` 或者 <img src=\"https://www.zhihu.com/equation?tex=%28%E6%8C%87%E4%BB%A4%29+%E7%9A%84%E6%96%B9%E5%BC%8F%E5%B0%86%E6%8C%87%E4%BB%A4%E7%9A%84%E6%89%A7%E8%A1%8C%E7%BB%93%E6%9E%9C%E8%B5%8B%E5%80%BC%E7%BB%99%E5%8F%98%E9%87%8F%E3%80%82%E4%BE%8B%E5%A6%82+version%3D\" alt=\"(指令) 的方式将指令的执行结果赋值给变量。例如 version=\" eeimg=\"1\"/>(uname -r)，则 version 的值为 4.15.0-22-generic。</p><p data-pid=\"DWu0z_7u\">可以使用 export 命令将自定义变量转成环境变量，环境变量可以在子程序中使用，所谓子程序就是由当前 Bash 而产生的子 Bash。</p><p data-pid=\"DhJgWguZ\">Bash 的变量可以声明为数组和整数数字。注意数字类型没有浮点数。如果不进行声明，默认是字符串类型。变量的声明使用 declare 命令：</p><div class=\"highlight\"><pre><code class=\"language-text\">$ declare [-aixr] variable\n-a ： 定义为数组类型\n-i ： 定义为整数类型\n-x ： 定义为环境变量\n-r ： 定义为 readonly 类型</code></pre></div><p data-pid=\"B2gDh2-7\">使用 [ ] 来对数组进行索引操作：</p><div class=\"highlight\"><pre><code class=\"language-text\">$ array[1]=a\n$ array[2]=b\n$ echo ${array[1]}</code></pre></div><h3>指令搜索顺序</h3><ul><li data-pid=\"WBBqOM58\">以绝对或相对路径来执行指令，例如 /bin/ls 或者 ./ls ；</li><li data-pid=\"d5CngRQu\">由别名找到该指令来执行；</li><li data-pid=\"yfB6jVkT\">由 Bash 内置的指令来执行；</li><li data-pid=\"gCVNuyzf\">按 $PATH 变量指定的搜索路径的顺序找到第一个指令来执行。</li></ul><h3>数据流重定向</h3><p data-pid=\"VUL4EOHn\">重定向指的是使用文件代替标准输入、标准输出和标准错误输出。</p><table data-draft-node=\"block\" data-draft-type=\"table\" data-size=\"normal\" data-row-style=\"normal\"><tbody><tr><th>1</th><th>代码</th><th>运算符</th></tr><tr><td>标准输入 (stdin)</td><td>0</td><td>&lt; 或 &lt;&lt;</td></tr><tr><td>标准输出 (stdout)</td><td>1</td><td>&gt; 或 &gt;&gt;</td></tr><tr><td>标准错误输出 (stderr)</td><td>2</td><td>2&gt; 或 2&gt;&gt;</td></tr></tbody></table><p data-pid=\"MkzLLT0z\">其中，有一个箭头的表示以覆盖的方式重定向，而有两个箭头的表示以追加的方式重定向。</p><p data-pid=\"xXY__V7K\">可以将不需要的标准输出以及标准错误输出重定向到 /dev/null，相当于扔进垃圾箱。</p><p data-pid=\"UeMRFmiz\">如果需要将标准输出以及标准错误输出同时重定向到一个文件，需要将某个输出转换为另一个输出，例如 2&gt;&amp;1 表示将标准错误输出转换为标准输出。</p><div class=\"highlight\"><pre><code class=\"language-text\">$ find /home -name .bashrc &gt; list 2&gt;&amp;1</code></pre></div><h2>八、管道指令</h2><p data-pid=\"EKfRYe2O\">管道是将一个命令的标准输出作为另一个命令的标准输入，在数据需要经过多个步骤的处理之后才能得到我们想要的内容时就可以使用管道。</p><p data-pid=\"k5ZKI5WU\">在命令之间使用 | 分隔各个管道命令。</p><div class=\"highlight\"><pre><code class=\"language-text\">$ ls -al /etc | less</code></pre></div><h3>提取指令</h3><p data-pid=\"4uKSVMv7\">cut 对数据进行切分，取出想要的部分。</p><p data-pid=\"VoND4LxB\">切分过程一行一行地进行。</p><div class=\"highlight\"><pre><code class=\"language-text\">$ cut\n-d ：分隔符\n-f ：经过 -d 分隔后，使用 -f n 取出第 n 个区间\n-c ：以字符为单位取出区间</code></pre></div><p data-pid=\"EPxdcxGF\">示例 1：last 显示登入者的信息，取出用户名。</p><div class=\"highlight\"><pre><code class=\"language-text\">$ last\nroot pts/1 192.168.201.101 Sat Feb 7 12:35 still logged in\nroot pts/1 192.168.201.101 Fri Feb 6 12:13 - 18:46 (06:33)\nroot pts/1 192.168.201.254 Thu Feb 5 22:37 - 23:53 (01:16)\n\n$ last | cut -d &#39; &#39; -f 1</code></pre></div><p data-pid=\"ryfkNvmD\">示例 2：将 export 输出的信息，取出第 12 字符以后的所有字符串。</p><div class=\"highlight\"><pre><code class=\"language-text\">$ export\ndeclare -x HISTCONTROL=&#34;ignoredups&#34;\ndeclare -x HISTSIZE=&#34;1000&#34;\ndeclare -x HOME=&#34;/home/dmtsai&#34;\ndeclare -x HOSTNAME=&#34;study.centos.vbird&#34;\n.....(其他省略).....\n\n$ export | cut -c 12-</code></pre></div><h3>排序指令</h3><p data-pid=\"LNl-0qMG\"><b>sort</b>   用于排序。</p><div class=\"highlight\"><pre><code class=\"language-text\">$ sort [-fbMnrtuk] [file or stdin]\n-f ：忽略大小写\n-b ：忽略最前面的空格\n-M ：以月份的名字来排序，例如 JAN，DEC\n-n ：使用数字\n-r ：反向排序\n-u ：相当于 unique，重复的内容只出现一次\n-t ：分隔符，默认为 tab\n-k ：指定排序的区间</code></pre></div><p data-pid=\"PlQ0LqmN\">示例：/etc/passwd 文件内容以 : 来分隔，要求以第三列进行排序。</p><div class=\"highlight\"><pre><code class=\"language-text\">$ cat /etc/passwd | sort -t &#39;:&#39; -k 3\nroot:x:0:0:root:/root:/bin/bash\ndmtsai:x:1000:1000:dmtsai:/home/dmtsai:/bin/bash\nalex:x:1001:1002::/home/alex:/bin/bash\narod:x:1002:1003::/home/arod:/bin/bash</code></pre></div><p data-pid=\"qLWA5WxP\"><b>uniq</b>   可以将重复的数据只取一个。</p><div class=\"highlight\"><pre><code class=\"language-text\">$ uniq [-ic]\n-i ：忽略大小写\n-c ：进行计数</code></pre></div><p data-pid=\"53oc_Z5l\">示例：取得每个人的登录总次数</p><div class=\"highlight\"><pre><code class=\"language-text\">$ last | cut -d &#39; &#39; -f 1 | sort | uniq -c\n1\n6 (unknown\n47 dmtsai\n4 reboot\n7 root\n1 wtmp</code></pre></div><h3>双向输出重定向</h3><p data-pid=\"YQdqu1gH\">输出重定向会将输出内容重定向到文件中，而   <b>tee</b>   不仅能够完成这个功能，还能保留屏幕上的输出。也就是说，使用 tee 指令，一个输出会同时传送到文件和屏幕上。</p><div class=\"highlight\"><pre><code class=\"language-text\">$ tee [-a] file</code></pre></div><h3>字符转换指令</h3><p data-pid=\"Y8VTql52\"><b>tr</b>   用来删除一行中的字符，或者对字符进行替换。</p><div class=\"highlight\"><pre><code class=\"language-text\">$ tr [-ds] SET1 ...\n-d ： 删除行中 SET1 这个字符串</code></pre></div><p data-pid=\"m3NxXI08\">示例，将 last 输出的信息所有小写转换为大写。</p><div class=\"highlight\"><pre><code class=\"language-text\">$ last | tr &#39;[a-z]&#39; &#39;[A-Z]&#39;</code></pre></div><p data-pid=\"HZcND_g2\"><b>col</b>   将 tab 字符转为空格字符。</p><div class=\"highlight\"><pre><code class=\"language-text\">$ col [-xb]\n-x ： 将 tab 键转换成对等的空格键</code></pre></div><p data-pid=\"jbGPIhcJ\"><b>expand</b>   将 tab 转换一定数量的空格，默认是 8 个。</p><div class=\"highlight\"><pre><code class=\"language-text\">$ expand [-t] file\n-t ：tab 转为空格的数量</code></pre></div><p data-pid=\"wk04lCHO\"><b>join</b>   将有相同数据的那一行合并在一起。</p><div class=\"highlight\"><pre><code class=\"language-text\">$ join [-ti12] file1 file2\n-t ：分隔符，默认为空格\n-i ：忽略大小写的差异\n-1 ：第一个文件所用的比较字段\n-2 ：第二个文件所用的比较字段</code></pre></div><p data-pid=\"C6PFWNqK\"><b>paste</b>   直接将两行粘贴在一起。</p><div class=\"highlight\"><pre><code class=\"language-text\">$ paste [-d] file1 file2\n-d ：分隔符，默认为 tab</code></pre></div><h3>分区指令</h3><p data-pid=\"oHhYz6FL\"><b>split</b>   将一个文件划分成多个文件。</p><div class=\"highlight\"><pre><code class=\"language-text\">$ split [-bl] file PREFIX\n-b ：以大小来进行分区，可加单位，例如 b, k, m 等\n-l ：以行数来进行分区。\n- PREFIX ：分区文件的前导名称</code></pre></div><h2>九、正则表达式</h2><h3>grep</h3><p data-pid=\"5itO_I4W\">g/re/p（globally search a regular expression and print)，使用正则表示式进行全局查找并打印。</p><div class=\"highlight\"><pre><code class=\"language-text\">$ grep [-acinv] [--color=auto] 搜寻字符串 filename\n-c ： 统计匹配到行的个数\n-i ： 忽略大小写\n-n ： 输出行号\n-v ： 反向选择，也就是显示出没有 搜寻字符串 内容的那一行\n--color=auto ：找到的关键字加颜色显示</code></pre></div><p data-pid=\"kxqS4hgL\">示例：把含有 the 字符串的行提取出来（注意默认会有 --color=auto 选项，因此以下内容在 Linux 中有颜色显示 the 字符串）</p><div class=\"highlight\"><pre><code class=\"language-text\">$ grep -n &#39;the&#39; regular_express.txt\n8:I can&#39;t finish the test.\n12:the symbol &#39;*&#39; is represented as start.\n15:You are the best is mean you are the no. 1.\n16:The world Happy is the same with &#34;glad&#34;.\n18:google is the best tools for search keyword</code></pre></div><p data-pid=\"sjXXcrlv\">示例：正则表达式 a{m,n} 用来匹配字符 a m~n 次，这里需要将 { 和 } 进行转义，因为它们在 shell 是有特殊意义的。</p><div class=\"highlight\"><pre><code class=\"language-text\">$ grep -n &#39;a\\{2,5\\}&#39; regular_express.txt</code></pre></div><h3>printf</h3><p data-pid=\"f7Rjaw8y\">用于格式化输出。它不属于管道命令，在给 printf 传数据时需要使用 $( ) 形式。</p><div class=\"highlight\"><pre><code class=\"language-text\">$ printf &#39;%10s %5i %5i %5i %8.2f \\n&#39; $(cat printf.txt)\n    DmTsai    80    60    92    77.33\n     VBird    75    55    80    70.00\n       Ken    60    90    70    73.33</code></pre></div><h3>awk</h3><p data-pid=\"st0Ob5AZ\">是由 Alfred Aho，Peter Weinberger 和 Brian Kernighan 创造，awk 这个名字就是这三个创始人名字的首字母。</p><p data-pid=\"La8OyV0g\">awk 每次处理一行，处理的最小单位是字段，每个字段的命名方式为：<img src=\"https://www.zhihu.com/equation?tex=n%EF%BC%8Cn+%E4%B8%BA%E5%AD%97%E6%AE%B5%E5%8F%B7%EF%BC%8C%E4%BB%8E+1+%E5%BC%80%E5%A7%8B%EF%BC%8C\" alt=\"n，n 为字段号，从 1 开始，\" eeimg=\"1\"/>0 表示一整行。</p><p data-pid=\"hnxJGFlc\">示例：取出最近五个登录用户的用户名和 IP。首先用 last -n 5 取出用最近五个登录用户的所有信息，可以看到用户名和 IP 分别在第 1 列和第 3 列，我们用 <img src=\"https://www.zhihu.com/equation?tex=1+%E5%92%8C+\" alt=\"1 和 \" eeimg=\"1\"/>3 就能取出这两个字段，然后用 print 进行打印。</p><div class=\"highlight\"><pre><code class=\"language-text\">$ last -n 5\ndmtsai pts/0 192.168.1.100 Tue Jul 14 17:32 still logged in\ndmtsai pts/0 192.168.1.100 Thu Jul 9 23:36 - 02:58 (03:22)\ndmtsai pts/0 192.168.1.100 Thu Jul 9 17:23 - 23:36 (06:12)\ndmtsai pts/0 192.168.1.100 Thu Jul 9 08:02 - 08:17 (00:14)\ndmtsai tty1 Fri May 29 11:55 - 12:11 (00:15)\n\n$ last -n 5 | awk &#39;{print $1 &#34;\\t&#34; $3}&#39;\ndmtsai   192.168.1.100\ndmtsai   192.168.1.100\ndmtsai   192.168.1.100\ndmtsai   192.168.1.100\ndmtsai   Fri</code></pre></div><p data-pid=\"knfmGFDx\">可以根据字段的某些条件进行匹配，例如匹配字段小于某个值的那一行数据。</p><div class=\"highlight\"><pre><code class=\"language-text\">$ awk &#39;条件类型 1 {动作 1} 条件类型 2 {动作 2} ...&#39; filename</code></pre></div><p data-pid=\"BcS7643d\">示例：/etc/passwd 文件第三个字段为 UID，对 UID 小于 10 的数据进行处理。</p><div class=\"highlight\"><pre><code class=\"language-text\">$ cat /etc/passwd | awk &#39;BEGIN {FS=&#34;:&#34;} $3 &lt; 10 {print $1 &#34;\\t &#34; $3}&#39;\nroot 0\nbin 1\ndaemon 2</code></pre></div><p data-pid=\"aY-Jn7-q\">awk 变量：</p><table data-draft-node=\"block\" data-draft-type=\"table\" data-size=\"normal\" data-row-style=\"normal\"><tbody><tr><th>变量名称</th><th>代表意义</th></tr><tr><td>NF</td><td>每一行拥有的字段总数</td></tr><tr><td>NR</td><td>目前所处理的是第几行数据</td></tr><tr><td>FS</td><td>目前的分隔字符，默认是空格键</td></tr></tbody></table><p data-pid=\"LFEnAcUB\">示例：显示正在处理的行号以及每一行有多少字段</p><div class=\"highlight\"><pre><code class=\"language-text\">$ last -n 5 | awk &#39;{print $1 &#34;\\t lines: &#34; NR &#34;\\t columns: &#34; NF}&#39;\ndmtsai lines: 1 columns: 10\ndmtsai lines: 2 columns: 10\ndmtsai lines: 3 columns: 10\ndmtsai lines: 4 columns: 10\ndmtsai lines: 5 columns: 9</code></pre></div><h2>十、进程管理</h2><h3>查看进程</h3><h3>1. ps</h3><p data-pid=\"LoyrDc-X\">查看某个时间点的进程信息。</p><p data-pid=\"9fJCpSWA\">示例：查看自己的进程</p><div class=\"highlight\"><pre><code class=\"language-text\">## ps -l</code></pre></div><p data-pid=\"q50cYWPU\">示例：查看系统所有进程</p><div class=\"highlight\"><pre><code class=\"language-text\">## ps aux</code></pre></div><p data-pid=\"cxGhP9_o\">示例：查看特定的进程</p><div class=\"highlight\"><pre><code class=\"language-text\">## ps aux | grep threadx</code></pre></div><h3>2. pstree</h3><p data-pid=\"29XFfciD\">查看进程树。</p><p data-pid=\"ta9AGGbw\">示例：查看所有进程树</p><div class=\"highlight\"><pre><code class=\"language-text\">## pstree -A</code></pre></div><h3>3. top</h3><p data-pid=\"n_458BTD\">实时显示进程信息。</p><p data-pid=\"ijbWktWp\">示例：两秒钟刷新一次</p><div class=\"highlight\"><pre><code class=\"language-text\">## top -d 2</code></pre></div><h3>4. netstat</h3><p data-pid=\"nt3EPvTt\">查看占用端口的进程</p><p data-pid=\"jUKSpA_8\">示例：查看特定端口的进程</p><div class=\"highlight\"><pre><code class=\"language-text\">## netstat -anp | grep port</code></pre></div><h3>进程状态</h3><table data-draft-node=\"block\" data-draft-type=\"table\" data-size=\"normal\" data-row-style=\"normal\"><tbody><tr><th>状态</th><th>说明</th></tr><tr><td>R</td><td>running or runnable (on run queue)<br/>正在执行或者可执行，此时进程位于执行队列中。</td></tr><tr><td>D</td><td>uninterruptible sleep (usually I/O)<br/>不可中断阻塞，通常为 IO 阻塞。</td></tr><tr><td>S</td><td>interruptible sleep (waiting for an event to complete) <br/> 可中断阻塞，此时进程正在等待某个事件完成。</td></tr><tr><td>Z</td><td>zombie (terminated but not reaped by its parent)<br/>僵死，进程已经终止但是尚未被其父进程获取信息。</td></tr><tr><td>T</td><td>stopped (either by a job control signal or because it is being traced) <br/> 结束，进程既可以被作业控制信号结束，也可能是正在被追踪。</td></tr><tr><td></td><td></td></tr></tbody></table><figure data-size=\"normal\"><img src=\"https://picx.zhimg.com/v2-15acc0a0c0d132fb2cca3ad8db25c105_1440w.jpg\" data-rawwidth=\"644\" data-rawheight=\"372\" data-size=\"normal\" data-caption=\"\" data-original-token=\"v2-4bd87eb0d7312fd54630fe0fe2cb64f2\" class=\"origin_image zh-lightbox-thumb\" width=\"644\" data-original=\"https://picx.zhimg.com/v2-15acc0a0c0d132fb2cca3ad8db25c105_r.jpg\"/></figure><p class=\"ztext-empty-paragraph\"><br/></p><h3>SIGCHLD</h3><p data-pid=\"3m9N5Kl6\">当一个子进程改变了它的状态时（停止运行，继续运行或者退出），有两件事会发生在父进程中：</p><ul><li data-pid=\"jLffQRO8\">得到 SIGCHLD 信号；</li><li data-pid=\"NzsNRT00\">waitpid() 或者 wait() 调用会返回。</li></ul><p data-pid=\"YJfGwoLS\">其中子进程发送的 SIGCHLD 信号包含了子进程的信息，比如进程 ID、进程状态、进程使用 CPU 的时间等。</p><p data-pid=\"Ot2ef9oM\">在子进程退出时，它的进程描述符不会立即释放，这是为了让父进程得到子进程信息，父进程通过 wait() 和 waitpid() 来获得一个已经退出的子进程的信息。</p><p class=\"ztext-empty-paragraph\"><br/></p><h3>wait()</h3><div class=\"highlight\"><pre><code class=\"language-text\">pid_t wait(int *status)</code></pre></div><p data-pid=\"rlUTa6s_\">父进程调用 wait() 会一直阻塞，直到收到一个子进程退出的 SIGCHLD 信号，之后 wait() 函数会销毁子进程并返回。</p><p data-pid=\"jIiFJoKJ\">如果成功，返回被收集的子进程的进程 ID；如果调用进程没有子进程，调用就会失败，此时返回 -1，同时 errno 被置为 ECHILD。</p><p data-pid=\"eieZKJhn\">参数 status 用来保存被收集的子进程退出时的一些状态，如果对这个子进程是如何死掉的毫不在意，只想把这个子进程消灭掉，可以设置这个参数为 NULL。</p><h3>waitpid()</h3><div class=\"highlight\"><pre><code class=\"language-text\">pid_t waitpid(pid_t pid, int *status, int options)</code></pre></div><p data-pid=\"BZV1-sE3\">作用和 wait() 完全相同，但是多了两个可由用户控制的参数 pid 和 options。</p><p data-pid=\"NgmLy587\">pid 参数指示一个子进程的 ID，表示只关心这个子进程退出的 SIGCHLD 信号。如果 pid=-1 时，那么和 wait() 作用相同，都是关心所有子进程退出的 SIGCHLD 信号。</p><p data-pid=\"n4miELIr\">options 参数主要有 WNOHANG 和 WUNTRACED 两个选项，WNOHANG 可以使 waitpid() 调用变成非阻塞的，也就是说它会立即返回，父进程可以继续执行其它任务。</p><h3>孤儿进程</h3><p data-pid=\"6kyovisX\">一个父进程退出，而它的一个或多个子进程还在运行，那么这些子进程将成为孤儿进程。</p><p data-pid=\"DjVlRbFR\">孤儿进程将被 init 进程（进程号为 1）所收养，并由 init 进程对它们完成状态收集工作。</p><p data-pid=\"eFIml7ii\">由于孤儿进程会被 init 进程收养，所以孤儿进程不会对系统造成危害。</p><h3>僵尸进程</h3><p data-pid=\"4zxW_HyV\">一个子进程的进程描述符在子进程退出时不会释放，只有当父进程通过 wait() 或 waitpid() 获取了子进程信息后才会释放。如果子进程退出，而父进程并没有调用 wait() 或 waitpid()，那么子进程的进程描述符仍然保存在系统中，这种进程称之为僵尸进程。</p><p data-pid=\"nA3P8Suz\">僵尸进程通过 ps 命令显示出来的状态为 Z（zombie）。</p><p data-pid=\"MRKyBExs\">系统所能使用的进程号是有限的，如果产生大量僵尸进程，将因为没有可用的进程号而导致系统不能产生新的进程。</p><p data-pid=\"E7_D-wST\">要消灭系统中大量的僵尸进程，只需要将其父进程杀死，此时僵尸进程就会变成孤儿进程，从而被 init 进程所收养，这样 init 进程就会释放所有的僵尸进程所占有的资源，从而结束僵尸进程。</p><h2>参考资料</h2><ul><li data-pid=\"JO9pkpVV\">鸟哥. 鸟 哥 的 Linux 私 房 菜 基 础 篇 第 三 版[J]. 2009.</li><li data-pid=\"nGHGbEsu\"><a href=\"https://link.zhihu.com/?target=https%3A//www.ibm.com/developerworks/cn/linux/l-cn-rpmdpkg/index.html\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\">Linux 平台上的软件包管理</a></li><li data-pid=\"PBFjhmmt\"><a href=\"https://link.zhihu.com/?target=http%3A//liubigbin.github.io/2016/03/11/Linux-%25E4%25B9%258B%25E5%25AE%2588%25E6%258A%25A4%25E8%25BF%259B%25E7%25A8%258B%25E3%2580%2581%25E5%2583%25B5%25E6%25AD%25BB%25E8%25BF%259B%25E7%25A8%258B%25E4%25B8%258E%25E5%25AD%25A4%25E5%2584%25BF%25E8%25BF%259B%25E7%25A8%258B/\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\">Linux 之守护进程、僵死进程与孤儿进程</a></li><li data-pid=\"9nG3PJWX\"><a href=\"https://link.zhihu.com/?target=https%3A//stackoverflow.com/questions/185899/what-is-the-difference-between-a-symbolic-link-and-a-hard-link\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\">What is the difference between a symbolic link and a hard link?</a></li><li data-pid=\"QX0DRWrQ\"><a href=\"https://link.zhihu.com/?target=https%3A//idea.popcount.org/2012-12-11-linux-process-states/\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\">Linux process states</a></li><li data-pid=\"7oEXNBbR\"><a href=\"https://link.zhihu.com/?target=https%3A//en.wikipedia.org/wiki/GUID_Partition_Table\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\">GUID Partition Table</a></li><li data-pid=\"e3tqXB5u\"><a href=\"https://link.zhihu.com/?target=https%3A//blog.csdn.net/kevinhg/article/details/7001719\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\">详解 wait 和 waitpid 函数</a></li><li data-pid=\"SAIwpB81\"><a href=\"https://link.zhihu.com/?target=https%3A//blog.csdn.net/tianlesoftware/article/details/6009110\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\">IDE、SATA、SCSI、SAS、FC、SSD 硬盘类型介绍</a></li><li data-pid=\"C54BCQXT\"><a href=\"https://link.zhihu.com/?target=http%3A//www.mpchunter.com/s3000/akai-ib-301s-scsi-interface-for-s2800s3000/\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\">Akai IB-301S SCSI Interface for S2800,S3000</a></li><li data-pid=\"FGESfVpV\"><a href=\"https://link.zhihu.com/?target=https%3A//en.wikipedia.org/wiki/Parallel_ATA\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\">Parallel ATA</a></li><li data-pid=\"Yg1Ux8D5\"><a href=\"https://link.zhihu.com/?target=http%3A//www.thessdreview.com/our-reviews/adata-xpg-sx900-256gb-sata-3-ssd-review-expanded-capacity-and-sandforce-driven-speed/4/\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\">ADATA XPG SX900 256GB SATA 3 SSD Review – Expanded Capacity and SandForce Driven Speed</a></li><li data-pid=\"CVNktzY8\"><a href=\"https://link.zhihu.com/?target=https%3A//blogs.cisco.com/datacenter/decoding-ucs-invicta-part-1\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\">Decoding UCS Invicta – Part 1</a></li><li data-pid=\"6usxvtFj\"><a href=\"https://link.zhihu.com/?target=https%3A//zh.wikipedia.org/wiki/%25E7%25A1%25AC%25E7%259B%2598\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\">硬盘</a></li><li data-pid=\"ABl2YpYN\"><a href=\"https://link.zhihu.com/?target=http%3A//www.differencebetween.info/difference-between-sas-and-sata\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\">Difference between SAS and SATA</a></li><li data-pid=\"gaXjPYPu\"><a href=\"https://link.zhihu.com/?target=https%3A//zh.wikipedia.org/wiki/BIOS\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\">BIOS</a></li><li data-pid=\"2a0Zm52G\"><a href=\"https://link.zhihu.com/?target=https%3A//www.cs.rutgers.edu/~pxk/416/notes/13-fs-studies.html\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\">File system design case studies</a></li><li data-pid=\"FAGkr2Ss\"><a href=\"https://link.zhihu.com/?target=https%3A//classes.soe.ucsc.edu/cmps111/Fall08/proj4.shtml\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\">Programming Project #4</a></li><li data-pid=\"nr6hCzD5\"><a href=\"https://link.zhihu.com/?target=http%3A//web.cs.ucla.edu/classes/fall14/cs111/scribe/11a/index.html\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\">FILE SYSTEM DESIGN</a></li></ul><p data-pid=\"ysCZqkpv\">这篇文章你觉得有干货吗？写得好可以给个好评，如果你有更好的方案或者思路，请评论区留言，我会实时关注反馈，获取更多干货内容，记得关注我哦。</p>",
        "relationship": {
          "is_thanked": false,
          "is_nothelp": false,
          "voting": 0
        },
        "is_labeled": false,
        "visited_count": 376,
        "thumbnails": [
          "https://picx.zhimg.com/50/v2-d09ff259cb3c2613b0f0a748df5549d6_720w.jpg?source=b6762063",
          "https://picx.zhimg.com/50/v2-ebd0ac9bb7aa1bc4244d0a2f0dbb1611_720w.jpg?source=b6762063"
        ],
        "favorite_count": 26,
        "answer_type": "normal",
        "is_navigator": false,
        "navigator_vote": false,
        "vote_next_step": "vote"
      },
      "brief": "{\"source\": \"TS\", \"type\": \"answer\", \"id\": 1930536951984948344}",
      "attached_info": "CpIMCMiNnLKNw9TltgEQBBoJNzM4MDM0NTg2IIWF9sMGKAMwAEDrA0ooCh1UU19TT1VSQ0VfTkVBUkxJTkVfQ09OVEVOVF9WMhIBMBgAIAA6AEpCCi1UU19TT1VSQ0VfVFdPVE9XRVJfTVVMVElfU0NFTkVfVjFfUkVDQUxMX1RFWFQSATAYACAAOgp7InJhdyI6IiJ9WgkxMDA0MTQwNTNiIGYwNzViYjAwYzI5ZjRjMzM2MjVhNTliYjM1MWFlMGE3chMxOTMwNTM2OTUxOTg0OTQ4MzQ0igEJNjIxNjA0OTIzqgEJcmVjb21tZW5kwgEgYzY0MDM0MzVmMzQ5YmEzZGRlZjZiMTEzZGQzMTYxMGbyAQoIDBIGTm9ybWFs8gEoCAoSJGQ5YjAyZTFiLWM0YjEtNDE1NS1hMTI0LWU4MThiYTE1ZWVlYvIBBggLEgI4MoICAIgCgrLF+YwzkgIgYzY0MDM0MzVmMzQ5YmEzZGRlZjZiMTEzZGQzMTYxMGaaAgDKAhZTaG9ySW50ZXJlc3RXZWlnaHRSdWxlygIVVXNlckxjbkV4aXRXZWlnaHRSdWxlygIUQ29udGVudEFnZVdlaWdodFJ1bGXKAhxCYXllc0ZpcnN0TGV2ZWxJc29sYXRpb25SdWxlygIVUXVlc3Rpb25Jc29sYXRpb25SdWxl2gIdVFNfU09VUkNFX05FQVJMSU5FX0NPTlRFTlRfVjLoAgP6AgtOT1JNQUxfRkxPV4oDIDA5NDc3ZTI1NDc4MzQ1ODU5NDdmOWMwMzBlNGNmYzM0mgMNCgJ2MhAAGgVvdGhlcqgD+ALYAwD6A48GEgxVTktOT1dOX01PREUgACoNTk9fSU1BR0VfTU9ERTotCAIQmAkYkgQiI3YyLWI3OGUxOGFmYzZhMWZhODFmZjA5NmY1NmY5NjdhOGFmOi0IAxCOChjCBiIjdjItMmE0MmJjZThiZGM4ZDlmNTUwOGM5OGJlNGMwMzY5NTA6LQgCEMECGIoBIiN2Mi1kODE5Yzc1MDYzNGYyOTY5ZGZiYjBmNDdlMWMwNGMzNDotCAMQpAIY3QEiI3YyLTNjNzM3NTk1MjE1MTczMGVmOTc4ZjMxOGIwZTE1NzdlOi0IAhDEAhiAASIjdjItZTg3ODNjNjIxYTJjN2VlOTg4NTFmZTM5YTM2MjdjMzI6LQgCEJADGKYEIiN2Mi0zMjA2MjY0ZmU2YzZjMjYxZThmYzBjNjAwODYyN2Y1ZjotCAMQ9wEYrAEiI3YyLTIxMWVjYzU2NmZmOTEwMzg1NTczZTYzN2VlMDQwNzQ4Oi0IAxCCBRiGAyIjdjItMDgxMmNjMWE5YjE1MzdlNWIwODY0MjMzMThiZWU4MGY6LQgCEOgNGP0DIiN2Mi0zZjQ1MzhhZTg2NTNjODdjOWMyYWFhNzQ1NDMzMWJhYzotCAMQjwYYuAMiI3YyLTVlNDJiOGNhYTBiNWQ2Yjk4NjM5NDcxZGY5MDcxYjI1Oi0IAxCeBhjTAiIjdjItOGE1YWUxZjdhNTI0N2MzYWMxZDZjNzU1N2M2NDU2ZDk6LQgEEOMKGOYGIiN2Mi02YTQ5N2M2ODBlZDZkZjhiNzdjODNiNzZlODc3MjY3NTotCAMQlAUYuQIiI3YyLWJlZTk0NTM4Y2YwODRlZjc1MjIwNjk1OTdhNzcyZGVmOi0IBBC7BRjJAiIjdjItMWE4ZGNlNGU0MDEyNmEyZTZiYjcxYWM1N2RkZWJhMWE6LQgCEIwEGKIBIiN2Mi03NzZjY2NkYjE0MTlkZTYxZjdhMjE2MDQ3MWQ1NmU1OTotCAMQhAUY9AIiI3YyLTRiZDg3ZWIwZDczMTJmZDU0NjMwZmUwZmUyY2I2NGYygAQAiAQAkgQGTm9ybWFsmgQBM6AEAKgEALAEALoEAmFpwgQDNDAwyAQA0gQP5o6o6I2Q5bey5pu05paw2AQA8AQA+QQAAADASrKcP4EFAAAAAAAAAACJBfKgGGiZVNk/kgUAmgUDZGZ0ogUDZGZ0sgUBMbkFAAAAAAAAAADQBQDgBQDoBQDwBVKQBgCgBu8DqAYAkgIuCgk3MzgwMzQ1ODYSEzE5MzA1MzY5NTE5ODQ5NDgzNDQYBCIKSU1BR0VfVEVYVA==",
      "action_card": false
    }
  ],
  "paging": {
    "is_end": false,
    "is_start": false,
    "next": "https://www.zhihu.com/api/v3/feed/topstory/recommend?action=down&ad_interval=-10&after_id=491&desktop=true&end_offset=495&page_number=83&session_token=f075bb00c29f4c33625a59bb351ae0a7",
    "previous": "https://www.zhihu.com/api/v3/feed/topstory/recommend?action=pull&ad_interval=-10&before_id=491&desktop=true&end_offset=495&page_number=83&session_token=f075bb00c29f4c33625a59bb351ae0a7",
    "totals": 0
  },
  "fresh_text": "推荐已更新"
}